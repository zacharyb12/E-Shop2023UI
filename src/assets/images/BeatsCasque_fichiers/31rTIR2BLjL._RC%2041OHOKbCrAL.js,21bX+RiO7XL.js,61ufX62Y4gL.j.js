(function(e){var g=window.AmazonUIPageJS||window.P,r=g._namespace||g.attributeErrors,a=r?r("HLCXDetailPageAssets",""):g;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,g,r){e.register("wty:natc-constants",function(){return{PARAMETERS:{ATC:{ASIN:"items[0.warranty][asin]",OFFER_LISTING_ID:"items[0.warranty][offerListingId]",QUANTITY:"items[0.warranty][quantity]"},IA:{ASSOCIATED_ITEM_ID:"items[0.warranty][additionalParameters][itemAssociation][associatedItemId]",
PROGRAM_TYPE:"items[0.warranty][additionalParameters][itemAssociation][programType]",RENDER_TYPE:"items[0.warranty][additionalParameters][itemAssociation][renderType]",MUTUALLY_INCLUSIVE:"items[0.warranty][additionalParameters][itemAssociation][deleteConstraint][mutuallyInclusive]",QUANTITY_INVARIANCE_FACTOR:"items[0.warranty][additionalParameters][itemAssociation][quantityConstraint][invarianceFactor]",QUANTITY_EDITABLE:"items[0.warranty][additionalParameters][itemAssociation][quantityConstraint][quantityEditable]"}}}});
e.when("A","wty:natc-constants").register("wty:natcFormHelper",function(a,b){var c=function(a,b){var d=document.createElement("input");d.setAttribute("type","hidden");d.setAttribute("name",a);d.setAttribute("value",b);return d},d=function(a,d,f){return[c(b.PARAMETERS.ATC.ASIN,a),c(b.PARAMETERS.ATC.OFFER_LISTING_ID,d),c(b.PARAMETERS.ATC.QUANTITY,f)]};return{createItemAssocParams:function(a){return[c(b.PARAMETERS.IA.ASSOCIATED_ITEM_ID,a),c(b.PARAMETERS.IA.PROGRAM_TYPE,"AmazonProtect"),c(b.PARAMETERS.IA.RENDER_TYPE,
"renderAll"),c(b.PARAMETERS.IA.MUTUALLY_INCLUSIVE,!1),c(b.PARAMETERS.IA.QUANTITY_INVARIANCE_FACTOR,1),c(b.PARAMETERS.IA.QUANTITY_EDITABLE,!1)]},addAtcParams:function(b,c,f,e){b=d(b,c,f);a.$.each(b,function(a,b){e.append(b)})},clearParams:function(b,d){var c=a.$.map(Object.keys(d),function(a){return'input[name\x3d"'+d[a]+'"]'}).join(",");b.find(c).each(function(a,b){b.parentNode.removeChild(b)})}}});e.when("A","wty:natc-constants").register("wty:natcDeclarativeHelper",function(a,b){return{createItemAssocParams:function(a){var d=
{};d[b.PARAMETERS.IA.ASSOCIATED_ITEM_ID]=a;d[b.PARAMETERS.IA.PROGRAM_TYPE]="AmazonProtect";d[b.PARAMETERS.IA.RENDER_TYPE]="renderAll";d[b.PARAMETERS.IA.MUTUALLY_INCLUSIVE]=!1;d[b.PARAMETERS.IA.QUANTITY_INVARIANCE_FACTOR]=1;d[b.PARAMETERS.IA.QUANTITY_EDITABLE]=!1;return d},addAtcParams:function(c,d,h,l){var f={};f[b.PARAMETERS.ATC.ASIN]=c;f[b.PARAMETERS.ATC.OFFER_LISTING_ID]=d;f[b.PARAMETERS.ATC.QUANTITY]=h;a.$.extend(l,f)},clearParams:function(b,d){a.$.each(Object.keys(d),function(a,l){b.hasOwnProperty(d[l])&&
delete b[d[l]]})}}});e.when("A","ready").execute(function(a){a.on("a:accordion:installment-payment-buybox-accordion:select",function(b){a.$("#abbWrapper [id^\x3dmbb-offeringID-]").prop("checked",!1)})});e.when("A").register("BaseLinkKeyValuePairHelper",function(a){var b=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)})},c=function(a,b){this.key=a;this.value=b};return{getBaseLinkPairs:function(){var a=
b();return{ITEM_ASSOC:new c("itemAssoc",a),UNIQ_PARENT:new c("UNIQ-itemAssoc",a),UNIQ_WARRANTY:new c("UNIQ-lnkdWrrnty",a),ITEM_ASSOC_TYPE:new c("itemAssocType","AmazonProtect"),RENDER_TYPE:new c("itemAssocRenderType","renderAll")}}}});e.when("A","BaseLinkKeyValuePairHelper","wty:natc-constants","wty:natcFormHelper").register("BaseLinkFormHelper",function(a,b,c,d){var h=a.$,l=function(a){return a.find('input[name\x3d"items[0.base][asin]"]').attr("value")||a.find('input[id\x3d"ASIN"], input[id\x3d"a"]').attr("value")},
f=function(a,b){var d=0;b.find("input[name^\x3d'custom-name\\."+a+"\\.']").each(function(a,b){a=b.name.split(".")[2];isNaN(a)||(d=a>d?a:d)});return d+1},e=function(a,b,d){var c=[],k=f(a,b);h.each(d,function(b,d){var m="custom-value."+a+"."+k;b=p("custom-name."+a+"."+k,d.key);d=p(m,d.value);c=c.concat([b,d]);k++});return c},p=function(a,b){var d=document.createElement("input");d.setAttribute("type","hidden");d.setAttribute("class","atcFormWarrantyData");d.setAttribute("id",a);d.setAttribute("name",
a);d.setAttribute("value",b);return d},k=function(a){a.find(".atcFormWarrantyData").each(function(a,b){b.parentNode.removeChild(b)});d.clearParams(a,c.PARAMETERS.IA)};return{addBaseLinkFields:function(a,c){k(c);if(!c.find("input[value\x3d'itemAssoc']").length){var f=b.getBaseLinkPairs(),n=e(1,c,[f.ITEM_ASSOC,f.UNIQ_PARENT,f.ITEM_ASSOC_TYPE]);a=e(a,c,[f.ITEM_ASSOC,f.UNIQ_WARRANTY,f.ITEM_ASSOC_TYPE,f.RENDER_TYPE]);n=n.concat(a);h.each(n,function(a,b){c.append(b)})}n=l(c);n=d.createItemAssocParams(n);
h.each(n,function(a,b){c.append(b)})},removeBaseLinkFields:k,getMobileWarrantyIndex:function(a){var b=1;a.find("input[name\x3d'a']").each(function(a,d){d.value&&(a=d.value.split("|"))&&(b=a.length)});return b+1}}});e.when("A","BaseLinkKeyValuePairHelper","wty:natc-constants","wty:natcDeclarativeHelper").register("BaseLinkDeclarativeHelper",function(a,b,c,d){var h=a.$,e=[],f=function(a){var b=!1;h.each(a,function(a,d){if("itemAssoc"===d)return b=!0,!1});return b},g=function(a,b,d){var c={},f=p(a,b);
h.each(d,function(b,d){b=d.value;var h="custom-name."+a+"."+f,m="custom-value."+a+"."+f;c[h]=d.key;c[m]=b;e.push(h);e.push(m);f++});return c},p=function(a,b){var d=new RegExp("^custom-name[.]["+a+"]+[.]([0-9]+)$"),c=0;h.each(b,function(a){if(a=a.match(d))a=+a[1],a>c&&(c=a)});return c+1},k=function(a){h.each(e,function(b,d){a.hasOwnProperty(d)&&delete a[d]});e=[];d.clearParams(a,c.PARAMETERS.IA)};return{addBaseLinkFields:function(a){k(a);if(!f(a)){var c=b.getBaseLinkPairs(),e=g(1,a,[c.ITEM_ASSOC,c.UNIQ_PARENT,
c.ITEM_ASSOC_TYPE]),c=[c.ITEM_ASSOC,c.UNIQ_WARRANTY,c.ITEM_ASSOC_TYPE,c.RENDER_TYPE],p=1;a.a&&(p=a.a.split("|").length);c=g(p+1,a,c);h.extend(a,e);h.extend(a,c)}e=d.createItemAssocParams(a["items[0.base][asin]"]||a.a);h.extend(a,e)},removeBaseLinkFields:k,getDeclarativeDataInputs:function(a){if(a){var b=a.data("action");if((a=a.data(b))&&a.inputs)return a.inputs}}}});e.when("A","aw-mash").register("BaseLinkAddWarrantyHelper",function(a,b){var c=function(a){g.ueLogError&&g.ueLogError({message:"msi - "+
a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{addLinkedWarranty:function(d,h,e){a.ajax("/gp/product/amazon-protect/base-link/services/warranty-service.html",{method:"post",params:d,timeout:1E3,success:function(a){a&&a.status&&"OK"===a.status?(h(),a.numActiveItemsInCart&&(a=parseInt(a.numActiveItemsInCart,10),b.cart.didUpdate({newCartQuantity:a}))):c("Error while doing a call to warranty-service.html. Success but response not valid.")},error:function(a,b,d){c("Error while doing a call to warranty-service.html. Status: "+
b+" . Error: "+d);e()}})},obtainBaseItemCartid:function(b){a.ajax("/gp/product/amazon-protect/base-link/services/last-added-cart-item-id.html",{method:"post",timeout:1E3,cache:!1,success:function(a){a&&a.status&&a.lastAddedItemCartId?b(a.lastAddedItemCartId):c("Error while doing a call to last-added-cart-item-id.html. Status: "+a.status)},error:function(a,b,d){c("Error while doing a call to last-added-cart-item-id.html. Status: "+b+" . Error: "+d)}})},mSilogError:c}});"use strict";e.when("A","ready").execute(function(a){function b(a){var b=
g.ue;b&&b.count&&b.count(a,(b.count(a)||0)+1)}var c=a.$;a.on("a:expander:comparison_detail_expander:toggle:expand",function(a){b("ComparisonExpanderExpanded");c(".comparison_other_attribute_row").removeClass("aok-hidden")});a.on("a:expander:comparison_detail_expander:toggle:collapse",function(a){b("ComparisonExpanderCollapsed");c(".comparison_other_attribute_row").addClass("aok-hidden")})});e.when("A","atf","ready").execute(function(a){function b(){var b,d=a.$("#HLCXComparisonJumplink_feature_div"),
e=a.$("#HLCXComparisonWidget_feature_div");b=a.$("#HLCXComparisonJumplinkContent").length?e.find("#HLCXComparisonJumplinkContent"):e.find(".HLCXComparisonJumplinkContent");e=e.has("#HLCXComparisonTable").length;d.empty();e&&b.clone().removeClass("aok-hidden").appendTo(d)}a.declarative("hlcx-send-reftag","click",function(b){a.$.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+b.data.refTag)});b();a.on("a:pageUpdate",b)});e.when("A","ready").execute("logCsmMetricsForComparisonTabs",function(a){var b;
a.on("a:tabs:comparison_items_tabs:compare_to_similar_items_tab:select a:tabs:comparison_items_tabs:compare_to_recently_viewed_items_tab:select",a.throttle(function(a){b&&b===a.selectedTab.tabName||(b=a.selectedTab.tabName,g.ue&&g.ue.count&&g.ue.count(a.selectedTab.tabName,1))},100,{trailing:!1}))});e.when("A","3p-promise","ready").register("hlcx-table-csm",function(a,b,c){function d(b){return a.$(b?".hlcx-cmp-title-col":".comparison_image_title_cell").filter(":visible").map(function(){return a.$(this).attr("data-asin")}).toArray()}
function e(){try{var a=document.cookie.match("(^|[^;]+)\\s*(session-id|sessionId)\\s*\x3d\\s*([^;]+)");return a?a.pop():""}catch(b){return""}}function l(d,c){return new b(function(b,e){function f(){c.unbind("click auxclick",f);var d=a.now()-h;a.off("DOMContentLoaded load resize scroll",g);b({timeInView:d,clickedOff:!0})}var h=a.now(),g=a.throttle(function(){if(!a.onScreen(d)){var c=a.now()-h;a.off("DOMContentLoaded load resize scroll",g);b({timeInView:c,clickedOff:!1})}},200);c.bind("click auxclick",
f);a.on("DOMContentLoaded load resize scroll",g)})}function f(a,b,c){var e=d(c);a={pageAsin:a,comparableAsins:e.slice(1),sessionId:b,deviceType:c?"mobile":"desktop"};g.ue&&g.ue.event&&g.ue.event(a,"comparison","comparison.dpTableImpression.1")}function t(b,c,q){function m(){!r&&a.onScreen(t)&&(r=!0,l(t,q()).then(function(a){r=!1;if(!(2500>a.timeInView)){var e=d(c).slice(1),f=a.timeInView,h=++u,m;m=g.location.href.endsWith("#HLCXComparisonWidget_feature_div");a={pageAsin:b,comparableAsins:e,sessionId:n,
timeInView:f,viewOnPageCounter:h,deviceType:c?"mobile":"desktop",landedOnComparisonsTable:m,clickedOff:a.clickedOff};g.ue&&g.ue.event&&g.ue.event(a,"comparison","comparison.dpTableView.2")}}))}var t=a.$(c?"#hlcx_cmp_table":"#HLCXComparisonTable");if(t.length){var n=e();f(b,n,c);var r=!1,u=0;a.on("DOMContentLoaded load resize scroll",m);a.on("a:pageUpdate",function(){b!==a.$(c?".hlcx-cmp-title-col":".comparison_image_title_cell").first().attr("data-asin")&&a.off("DOMContentLoaded load resize scroll",
m)})}}return{setupClientSideLogging:function(b,d){var c;return function(){var e=a.$(b?".hlcx-cmp-title-col":".comparison_image_title_cell").first().attr("data-asin");c!==e&&"undefined"!==typeof e&&(c=e,t(c,b,d))}}}});e.when("A","hlcx-table-csm").execute(function(a,b){b=b.setupClientSideLogging(!1,function(){return a.$("td.comparison_add_to_cart_button span.a-button, th.comparison_image_title_cell a, #comparison_sold_by_row a, #comparison_custormer_rating_row a")});a.on("a:pageUpdate",b);b()});e.when("A",
"ready").register("comparison-table-weblab-trigger",function(a,b){function c(b,c,l){var k=a.throttle(function(){if(a.onScreen(d)||l&&a.onScreen(e)){var q=a.state(b).treatment,m=g.ue;q&&m&&m.trigger&&m.trigger(c,q);a.off("DOMContentLoaded load resize scroll",k)}},200);a.on("DOMContentLoaded load resize scroll",k)}var d,e,l;return{triggerWeblabWhenViewing:function(b,g,p){var k;return function(){d=a.$(b?"#hlcx_cmp_table":"#HLCXComparisonTable");l=a.$(b?".hlcx-cmp-title-col":".comparison_image_title_cell");
e=a.$(b?"#hlcx_cmp_table_holder":"#HLCXComparisonTableHolder");var q;q=l.length?l.first().attr("data-asin"):e.length?e.attr("data-asin"):r;k!==q&&q&&(k=q,c(g,p,!0))}}}});e.when("A","comparison-table-weblab-trigger").execute(function(a,b){b=b.triggerWeblabWhenViewing(!1,"ppu-weblab-treatment","DP_COMPARISON_DISPLAY_PPU_312196");a.on("a:pageUpdate",b);b()})});
/* ******** */
(function(l){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,r=q?q("DetailPageWarrantyAssets",""):p;r.guardFatal?r.guardFatal(l)(r,window):r.execute(function(){l(r,window)})})(function(l,p,q){"use strict";var r;r=function(){};"use strict";l.when("A").register("wty:Reftag",function(f){function h(b){this.prefix=b}h.prototype.log=function(b,k,d){b=d?[this.prefix,b,k,d]:[this.prefix,b,k];r("Reftag.log: "+b);b=b.join("_");f.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+b)};
return h});"use strict";l.when("A","BaseLinkFormHelper","wty:natc-constants","wty:natcFormHelper").register("wty:detailPage",function(f,h,b,k){function d(){}d.prototype.bindQuantityChange=function(a){var c=function(){a(f.$(this).val())};a(f.$("#quantity").val());f.$("[id\x3d'quantity']").bind("change",c);return c};d.prototype.unbindQuantityChange=function(a){f.$("[id\x3d'quantity']").unbind("change",a)};d.prototype.bindBuyBoxAccordion=function(a){f.on("a:accordion:buybox-accordion:select",a);f.on("a:accordion:installment-payment-buybox-accordion:select",
a);return a};d.prototype.unbindBuyBoxAccordion=function(a){f.off("a:accordion:buybox-accordion:select",a);f.off("a:accordion:installment-payment-buybox-accordion:select",a)};d.prototype.findQuantityInput=function(a){return a.find("input[name^\x3dquantity]")};d.prototype.findOfferListingIdInput=function(a){return a.find("input[name^\x3dofferingID]")};d.prototype.handleBaselink=function(a){if(f.$("#mbb__bl").length){var c=f.$(a._checkbox[0].form);c&&(a.isChecked()?(a=a.getKvpIndex(),h.addBaseLinkFields(a,
c)):h.removeBaseLinkFields(c))}};d.prototype.handleATC=function(a){var c=f.$(a._checkbox[0].form);c&&(k.clearParams(c,b.PARAMETERS.ATC),a.isChecked()&&k.addAtcParams(a._warrantyAsin,a._offerListingIdSelection.val(),a._quantity.val(),c))};return new d});"use strict";l.when("wty:Reftag","wty-nexus-constants").register("wty:MbbTypes",function(f,h){var b={mbb__tsn:{cssClass:"mbb__tsn",reftag:new f("psd_bb"),hasQuantity:!0,deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP},mbb__ti:{cssClass:"mbb__ti",reftag:new f("psd_ib"),
hasQuantity:!0,deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP},mbb__tld:{cssClass:"mbb__tld",reftag:new f("psd_ld"),deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP}};return{getType:function(f){return b[f]}}});"use strict";l.when("A","a-modal").register("wty:mbbModalHelper",function(f,h){function b(){}b.prototype.create=function(b,d,a,c){if(c){var e=f.$("#a-popover-"+d),g=e.clone(!0).prop("id","a-popover-"+d+"-Opened");e.parent().append(g)}h.create(b,{name:c?d+"-Opened":d,header:a,width:750})};b.prototype.remove=
function(b,d){h.remove(d?b+"-Opened":b)};b.prototype.hide=function(b,d){(b=h.get(d?b+"-Opened":b))&&b.hide()};return new b});"use strict";l.when("A","wty:Reftag","wty:MbbItem","wty-nexus-logger").register("wty:Mbb",function(f,h,b,k){function d(a,c,e){this._type=e;this._deviceType=e.deviceType;this._reftag=e.reftag;this._baseFormIndex=a;this._pageData=c;this._baseItemAsin=c.bi.a;this._mbbFeature=f.$(".mbb__bb."+e.cssClass);this._modalHeader=this._mbbFeature.find(".mbb__mh").html();this._items=[];k.initialize(k.nexusConstants.FEATURE_NAME_CONSTANTS.MBB,
this._pageData);this._nexusLogger=k;var g=this;this._mbbFeature.each(function(a,c){f.$(c).find(".mbb__r").each(function(a){var c=f.$(this),c=new b(g,c,a);g._items[a]=c})})}d.prototype._destroy=function(){for(var a=0,c=this._items.length;a<c;a++)this._items[a]._destroy()};d.prototype._setQuantity=function(a){for(var c=0,b=this._items.length;c<b;c++)this._items[c]._setQuantity(a)};d.prototype._setChecked=function(a,b){for(var e=0,g=this._items.length;e<g;e++)this._items[e]._setChecked(b&&e===a)};d.prototype.getCheckedItem=
function(){for(var a=0,b=this._items.length;a<b;a++){var e=this._items[a];if(e.isChecked())return e}};d.prototype.getItems=function(){return this._items};return d});l.when("A","cc-manager","warranty-options-constants","warranty-card-utils","warranty-options-csm").register("cc-warranty-options",function(f,h,b,k,d){function a(a){h.ccSelectionsClear(c,a)}var c=b.featureRegistration.featureName;return{updateWarrantyOptionSelection:function(b){if(!b)return console.log("Item data missing for selection update!"),
!1;var g="LumpSum";b.isMonthlySubscription&&(g="Monthly");d.increment("Swatch:Warranty:"+g+":Click");a();b=k.createCcDataFromWarrantySelectionData(b);return h.ccSelectionUpdate(c,b)},clearOptionSelection:a}});"use strict";l.when("A","cc-manager","warranty-options-constants","warranty-card-utils","warranty-options-csm").register("warranty-options-registration",function(f,h,b,k,d){var a=b.featureRegistration.featureName,c=b.supportedBuyingOptions,e=b.selector,g=b.styles,m=!1,n=f.$,l={init:k.init,cardCollapse:k.cardCollapse,
validateInputParams:k.validateInputParams};f.on("a:accordion:buybox-accordion:select",function(b){if(0<n(e.expanderContainer).length){b=b.selectedRow.$row.index();var d;d=-1;var t=n("div[id$\x3d'installmentPaymentAccordionRow']");t.length&&(d=t.data("buyingOptionIndex"));(t=n(e.expanderData).data("toggle-warranty-twister-expander").baseBuyingOptionsList)&&0<t.length&&(0<=d&&!t.includes("INSTALLMENTS")&&t.splice(d,0,"INSTALLMENTS"),c.includes(t[b])?(n(e.expanderIcon).removeClass(g.hidden),h.ccRemovedSelectionsClear(a),
m&&f.trigger("warranty-twister-card:reset-subtitle"),m=!1):(m=!0,k.isWarrantyOptionSelected()&&k.ccRemovedSelectionUpdate(h),f.trigger("a:declarative:warranty-twister-default-action:click"),f.trigger("warranty-twister-card:card-collapse"),n(e.expanderIcon).addClass(g.hidden),n(e.warrantyIcon).addClass(g.hidden)))}});f.on("warranty-twister-card:expanded",function(){h.cardExpanded(a)});d.initializeInteractionMetrics();(function(){n(e.warrantyOption).each(function(a){var g=k.getWarrantyDataFromOption(n(this));
d.logImpressionToNexus(g,a)})})();h.registerFeature(b.featureRegistration,l)});"use strict";l.when("A").register("warranty-options-constants",function(f){return{featureRegistration:{featureName:"warrantyTwisterPlus",featureAttribution:"Retail/AppleCare/(de)activation",updateQtyAsBaseItem:1},selector:{expanderContainer:".warranty-twister-container",skeletonLoader:".warranty-twister-skeleton-loader",checkmark:".warranty-twister-selected-checkmark",subtitle:".warranty-twister-subtitle",subtitleText:"#warranty-twister-subtitle",
priceSubtitle:".warranty-twister-price-subtitle",priceSubtitleText:"#warranty-twister-price-subtitle",cardImage:".warranty-twister-selected-card-image",expanderIcon:".warranty-twister-expander-icon",learnMoreLink:"#learn-more-link",toggleButton:"#warranty-twister-toggle-button",expanderContent:".warranty-twister-expander-content",expanderData:"[data-toggle-warranty-twister-expander]",swatch:".warranty-twister-swatch",warrantyOption:".warranty-twister-box-group-warranty-option",selectedWarrantyOption:".warranty-twister-selected-box-group.warranty-twister-box-group-warranty-option",
warrantyOptionTitle:".warranty-twister-warranty-option-title",defaultOption:"#default-option-swatch",warrantyDefaultBoxGroup:".warranty-twister-box-group-default-option",swatchBoxGroup:".warranty-twister-box-group",swatchHeading:".warranty-twister-box-group-heading",swatchBoxGroupDetail:".warranty-twister-box-group-detail",swatchBoxGroupDetailNoHeader:".warranty-twister-box-group-detail-no-header",popoverButtonRow:"#attach-warranty-popover-buttons-row",warrantyTwisterSecondaryView:"#a-popover-warrantyTwisterPlusSecondaryView",
buyingOptionSuppressionMessage:"#buyingOptionSuppressionMessage",warrantyIcon:"#warranty-icon",monthlyCheckbox:".warranties-monthly-checkbox",monthlyWarning:"#MonthlyWarrantyWarning",warrantyListItem:".warranty-twister-list-item",multiCardExperimentData:"wireless-multi-card",multiCardExperimentElement:"[data-wireless-multi-card]",activeTPlusCards:"#twister-plus-active-cards"},styles:{twisterPlusFadeIn:"twister-plus-cc-card-fadeIn",warrantyTwisterExpand:"warranty-twister-expander-content-expand",skeletonLoaderExpand:"warranty-twister-skeleton-loader-expand",
selectedHeading:"warranty-twister-selected-heading",selectedBoxGroup:"warranty-twister-selected-box-group",unselectedHeading:"warranty-twister-unselected-heading",disabledCard:"disabled-card",disabledOption:"disabled-option",hidden:"aok-hidden"},animationTimeoutUnit:200,metricPrefix:"warranty-options",supportedBuyingOptions:"NEW B2B_NEW CUSTOM_OFFER BUNDLE RENEWED_TIER_1 RENEWED_TIER_2 RENEWED_TIER_3 RENEWED_TIER_4".split(" ")}});"use strict";l.when("A").register("warranty-options-weblab-vars",function(f){return{isAutoExpandEnabled:!1}});
"use strict";l.when("A","warranty-options-constants","warranty-devicetype-variants","wty-nexus-logger","warranty-card-utils").register("warranty-options-csm",function(f,h,b,k,d){function a(a,g){"undefined"!==typeof n&&"undefined"!==typeof n.count&&a&&n.count(a,(n.count(a)||0)+g);"undefined"!==typeof p.csa&&p.csa("Events",{producerId:"dp-rpcx"})("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:a,valueToLog:g},{ent:"all"})}function c(a){if(a)this.timerName=a,this.startTime=0;else throw Error("timerName must be non empty string");
}function e(a,g,c){a||(a=Object.assign({},d.getSelectedCardData()),a.warrantyAsin=v.NON_WARRANTY_ACTION_ASIN_PLACEHOLDER);a={baseItemAsin:a.baseAsin,warrantyAsin:a.warrantyAsin,customerId:a["warranty-customerID"]||d.getSelectedCardData()["warranty-customerID"],deviceType:b.attributesForDeviceType.deviceType,warrantyDisplayPosition:g+1,feature:v.TWISTER_PLUS_FEATURE_NAME,action:c};k.logWarrantyWidgetInteraction(a)}function g(){m(l.warrantyOption).each(function(a){f.on("a:popover:beforeShow:warrantyTwisterPlusSecondaryView-"+
a,function(){var g=m(l.warrantyOption).get(a);e(g,a,v.LEARN_MORE_CLICK_METRIC_NAME)})})}var m=f.$,n=p.ue,l=h.selector;h=h.featureRegistration.featureName;var u={ccExpanded:"twisterPlus.ccExpanded."+h,ccExpandedTime:"twisterPlus.ccExpandedTime."+h,ccScroll:"twisterPlus.ccScroll."+h,ccLearnMore:"twisterPlus.ccLearnMore."+h,ccItemCounts:"twisterPlus.ccItemsCount."+h,ccItemsSelectCount:"twisterPlus.ccItemsSelectCount."+h,defaultOptionSelectCount:"twisterPlus.defaultSelectCount."+h,ccSVLoadingtime:"twisterPlus.ccSVLoadingtime."+
h},v={TWISTER_PLUS_FEATURE_NAME:"TWISTER_PLUS",NON_WARRANTY_OPTION_INDEX:-1,NON_WARRANTY_ACTION_ASIN_PLACEHOLDER:"NONE",COLLAPSE_CARD_METRIC_NAME:"CARD_COLLAPSE",EXPAND_CARD_METRIC_NAME:"CARD_EXPAND",LEARN_MORE_CLICK_METRIC_NAME:"LEARN_MORE_CLICK"};c.prototype={isStarted:!1,start:function(){this.isStarted=!0;this.startTime=Date.now()},stop:function(){this.startTime&&a(this.timerName,Date.now()-this.startTime)}};return{increment:function(g){a(g,1)},incrementWithValue:a,initializeInteractionMetrics:function(){g();
var b=m(l.warrantyOption).length;b&&a(u.ccItemCounts,b)},logImpressionToNexus:function(a,g){k.logWarrantyImpression({baseItemAsin:a.baseAsin,warrantyAsin:a.warrantyAsin,customerId:a["warranty-customerID"],deviceType:b.attributesForDeviceType.deviceType,warrantyDisplayPosition:g+1,feature:v.TWISTER_PLUS_FEATURE_NAME})},logInteractionToNexus:e,Timer:c,MetricNames:u,InternalMetricConstants:v}});l.when("A","warranty-options-constants").register("warranty-card-utils",function(f,h){function b(g){var b=
g.warrantyQuantity;if(b===q||1>b)b=1;var d="Protection Plans";a(c.subtitleText).length&&(d=a(c.subtitleText).text());var e=parseFloat(g.warrantyPriceAmount);return{itemType:"Warranty",asin:g.warrantyAsin,price:e,quantity:b,offerListingId:g.warrantyOffer,selectionType:g.selectionType,orderSummaryDisplayString:d,shortDisplayTitle:g.warrantyShortTitle,enableIA:!0,IAData:{parentAsin:g.baseAsin,type:"AmazonProtect",renderType:"renderAll",constraintList:[{type:"DELETE",mutuallyInclusive:!1}]}}}function k(){var g=
a("[data-warranty-option-swatch-select]").data("warranty-option-swatch-select");0<a(c.selectedWarrantyOption).length&&(g=d(a(c.selectedWarrantyOption)));return g}function d(g){var b=a(g).parent().data("warranty-option-swatch-select");b||(g=a(g).children(".a-declarative")[0],b=a(g).data("warranty-option-swatch-select"));return b}var a=f.$,c=h.selector,e=h.featureRegistration.featureName;return{cardCollapse:function(){f.trigger("warranty-twister-card:card-collapse")},cardExpand:function(){f.trigger("warranty-twister-card:card-expand")},
ccRemovedSelectionUpdate:function(a){var c=k(),c=b(c);a.ccRemovedSelectionUpdate(e,c)},createCcDataFromWarrantySelectionData:b,getSelectedCardData:k,getWarrantyDataFromOption:d,init:function(a){},isBuyingOptionUnsupported:function(a,b){return!h.supportedBuyingOptions.includes(b)},isWarrantyOptionSelected:function(){return 0<a(c.selectedWarrantyOption).length},validateInputParams:function(a){return"number"===typeof a.price}}});"use strict";l.when("A","wty-nexus-constants").register("warranty-devicetype-variants",
function(f,h){return{attributesForDeviceType:{deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP}}});"use strict";l.when("A","warranty-twister-expander-state","warranty-options-constants","warranty-twister-swatch-actions","warranty-options-csm").register("warranty-twister-expander-actions",function(f,h,b,k,d){function a(){var a=g(m.expanderContainer),b=a.offset().top+a.outerHeight();if(g(p).scrollTop()+g(p).height()<b){var b=a.offset().top,c=g(p).height(),a=a.height(),a=b-(c-a)/2;g("html, body").animate({scrollTop:a},
h.animationTimeoutUnit)}}function c(a){a=a?l.expandedPriceSubtitle:l.loadingSubtitle;g(m.priceSubtitleText).text(a)}function e(){g(m.expanderIcon).hasClass(n.hidden)?g(m.priceSubtitleText).text(g(m.buyingOptionSuppressionMessage).text()):g(m.priceSubtitleText).text(l.collapsedPriceSubtitle)}var g=f.$,m=b.selector,n=b.styles,l=h.expanderSubtitle,u=new d.Timer(d.MetricNames.ccExpandedTime);k={initSubtitle:function(a){l.collapsedSubtitle=a.data.defaultSubtitle;l.expandedSubtitle=a.data.expandedSubtitle;
l.collapsedPriceSubtitle=a.data.defaultPriceSubtitle;l.expandedPriceSubtitle=a.data.expandedPriceSubtitle},expandWarrantyOptions:function(e){d.increment(d.MetricNames.ccExpanded);d.logInteractionToNexus(null,d.InternalMetricConstants.NON_WARRANTY_OPTION_INDEX,d.InternalMetricConstants.EXPAND_CARD_METRIC_NAME);u.start();g(m.expanderContent).addClass(n.warrantyTwisterExpand);g(m.subtitleText).text(l.expandedSubtitle);g(m.expanderIcon).addClass("rotate");f.delay(function(){g(m.swatch).addClass(n.twisterPlusFadeIn);
g(m.warrantyIcon).removeClass(n.hidden);c(e);a()},b.animationTimeoutUnit)},expandSkeletonLoader:function(){g(m.expanderContent).addClass(n.skeletonLoaderExpand);g(m.expanderIcon).addClass("rotate");f.delay(function(){g(m.skeletonLoader).addClass(n.twisterPlusFadeIn);c(!1);a()},b.animationTimeoutUnit)},hideLoaderAnimation:function(d){d&&g(m.skeletonLoader).removeClass(n.twisterPlusFadeIn);f.delay(function(){g(m.skeletonLoader).hide();g(m.swatch).removeClass("invisible");d&&(g(m.expanderContent).addClass(n.warrantyTwisterExpand),
f.delay(function(){g(m.swatch).addClass(n.twisterPlusFadeIn);c(!0);a()},b.animationTimeoutUnit))},b.animationTimeoutUnit)},collapseWarrantyOptions:function(a){u.stop();d.logInteractionToNexus(null,d.InternalMetricConstants.NON_WARRANTY_OPTION_INDEX,d.InternalMetricConstants.COLLAPSE_CARD_METRIC_NAME);g(m.swatch).removeClass(n.twisterPlusFadeIn);a||g(m.skeletonLoader).removeClass(n.twisterPlusFadeIn);g(m.expanderIcon).removeClass("rotate");g(m.subtitleText).text(l.collapsedSubtitle);f.delay(function(){g(m.expanderContent).removeClass(n.warrantyTwisterExpand);
g(m.expanderContent).removeClass(n.skeletonLoaderExpand);e();g(m.selectedWarrantyOption).length||g(m.warrantyIcon).addClass(n.hidden)},b.animationTimeoutUnit)},showPriceSubtitleInCollapsedView:e};f.on("a:popover:show:secondaryview-legal-message",function(a){a.popover.$container.css("left",0)});return k});"use strict";l.when("A","warranty-twister-expander-actions","warranty-twister-expander-state","warranty-options-weblab-vars","warranty-options-constants").execute(function(f,h,b,k,d){function a(){var a=
e(n.expanderData).data("toggle-warranty-twister-expander");!1!==g&&a.isExpand?(g=!1,a.isExpand=!1,h.collapseWarrantyOptions(m)):h.showPriceSubtitleInCollapsedView()}function c(b){if(g===q||null===g||null===b.data.isExpand||b.data.isExpand===q){if(null===b.data.isExpand||b.data.isExpand===q)e(n.expanderData).data("toggle-warranty-twister-expander").isExpand=!1,b.data.isExpand=!1;h.initSubtitle(b);m&&h.hideLoaderAnimation(b.data.isExpand)}g=b.data.isExpand;!0===g?a():!1===g&&(g=!0,m?h.expandWarrantyOptions(m):
h.expandSkeletonLoader(),f.trigger("warranty-twister-card:expanded"));e(n.expanderData).data("toggle-warranty-twister-expander").isExpand=g}var e=f.$,g,m=b.isLoaded,n=d.selector,p=d.styles;l.when("cc-warranty-options").execute(function(){m=!0;h.hideLoaderAnimation(g);g&&f.trigger("warranty-twister-card:expanded")});f.on("PageRefresh:ATF",function(){var a=e(n.expanderData).data("toggle-warranty-twister-expander");a&&(h.initSubtitle({data:a}),m&&h.hideLoaderAnimation(!1))});f.declarative("toggle-warranty-twister-expander",
"click",function(a){e(n.expanderIcon).hasClass(p.hidden)||c(a)});f.on("warranty-twister-card:card-collapse",function(){console.log("Collapse trigger received for warranty card!");a()});f.on("warranty-twister-card:reset-subtitle",function(){h.showPriceSubtitleInCollapsedView()});k.isAutoExpandEnabled&&(b=e(n.expanderData).data("toggle-warranty-twister-expander"))&&c({data:b})});"use strict";l.when("A").register("warranty-twister-expander-state",function(f){return{expanderSubtitle:{collapsedSubtitle:"",
expandedSubtitle:"",collapsedPriceSubtitle:"",expandedPriceSubtitle:"",loadingSubtitle:"Loading options..."},get isLoaded(){return this.property},set isLoaded(f){this.property=f}}});"use strict";l.when("A","warranty-twister-expander-state","warranty-options-constants").register("warranty-twister-swatch-actions",function(f,h,b){var k=f.$,d=b.selector,a=b.styles,c=h.expanderSubtitle;return{updateSwatchStyle:function(b){k(d.swatchBoxGroup).removeClass(a.selectedBoxGroup);k(d.swatchHeading).removeClass(a.selectedHeading);
k(d.swatchHeading).addClass(a.unselectedHeading);var g=b.find(d.swatchHeading),c=b.find(d.swatchBoxGroup);1>c.length&&(c=b.parent(d.swatchBoxGroup));b=c;g.removeClass(a.unselectedHeading);g.addClass(a.selectedHeading);b.addClass(a.selectedBoxGroup)},updateDefaultOptionPriceSubtitle:function(a,b){c.collapsedPriceSubtitle=a;c.expandedPriceSubtitle=b;k(d.priceSubtitleText).text(b);k(d.priceSubtitle).removeClass("a-color-success");k(d.priceSubtitle).addClass("a-color-tertiary");k(d.checkmark).addClass("a-hidden")},
updateWarrantyOptionPriceSubtitle:function(a,b){c.collapsedPriceSubtitle=a;c.expandedPriceSubtitle=a;k(d.priceSubtitleText).text(a);k(d.priceSubtitle).removeClass("a-color-tertiary");k(d.priceSubtitle).addClass("a-color-success");k(d.checkmark).removeClass("a-hidden");k(d.cardImage).attr("src",b)}}});"use strict";l.when("A","warranty-twister-swatch-actions","warranty-card-utils","warranty-options-constants").execute(function(f,h,b,k){function d(g){1>e(a.expanderContainer).length||1>e(a.monthlyCheckbox).length||
(1<Number(e(g.target).val())?(e(a.monthlyCheckbox).addClass(c.disabledOption),e(a.monthlyWarning).removeClass(c.hidden),(g=b.getSelectedCardData())&&g.isMonthlySubscription&&f.trigger("a:declarative:warranty-twister-default-action:click")):(e(a.monthlyCheckbox).removeClass(c.disabledOption),e(a.monthlyWarning).addClass(c.hidden)))}var a=k.selector,c=k.styles,e=f.$;f.declarative("warranty-twister-default-action","click",function(){f.trigger("a:declarative:select-default-option:click");var a=f.$("[data-warranty-twister-default-action]");
if(a!==q&&null!==a){var b=a.data("warranty-twister-default-action");h.updateSwatchStyle(a);h.updateDefaultOptionPriceSubtitle(b.defaultPriceSubtitle,b.expandedPriceSubtitle)}});f.declarative("warranty-option-swatch-select","click",function(b){var d=e(b.$currentTarget);if(d!==q&&null!==d){var k=d.children(a.warrantyOption)[0];k===q&&(k=d.parent(a.warrantyOption)[0]);e(k).hasClass(c.disabledOption)||(f.trigger("a:declarative:select-warranty-option:click",b),h.updateSwatchStyle(d),h.updateWarrantyOptionPriceSubtitle("+"+
b.data.warrantyPrice+" "+b.data.warrantyOptionPriceSubtitle,b.data.cardImageUrl))}});e(document).delegate("#mobileQuantityDropDown","change",function(a){d(a)});e(document).delegate("#quantity","change",function(a){d(a)})});"use strict";l.when("A","cc-warranty-options","warranty-options-csm").register("warranty-twister-actions",function(f,h,b){function k(d,a){var c=f.$(d).closest(".warranty-secondary-view-container");d=c.find('input[name\x3d"baseAsin"]').val();var e=c.find('input[name\x3d"formIndex"]').val(),
c=c.find('input[name\x3d"warrantyAsin"]').val();b.logInteractionToNexus({baseAsin:d,warrantyAsin:c},Number(e),a)}f.declarative("select-warranty-option","click",function(d){d=d.data;d.selectionType="add";d.warrantyQuantity=f.$("#quantity").val();b.increment(b.MetricNames.ccItemsSelectCount);b.logInteractionToNexus({baseAsin:f.$("#twister-plus-asin").val(),warrantyAsin:d.warrantyAsin,customerId:d["warranty-customerID"]},d.formIndex,"wtyOptionSelect");h.updateWarrantyOptionSelection(d)});f.declarative("select-learn-more",
"click",function(d){var a=d.data;b.increment(b.MetricNames.ccLearnMore);b.logInteractionToNexus({baseAsin:f.$("#twister-plus-asin").val(),warrantyAsin:a.warrantyAsin,customerId:a["warranty-customerID"]},a.formIndex,b.InternalMetricConstants.LEARN_MORE_CLICK_METRIC_NAME);d.$event.preventDefault();d.$event.stopImmediatePropagation();f.trigger("a:declarative:side-sheet:click",d)});f.$(document).delegate(".warranty-see-details","click",function(){k(this,"popoverProductDetailsClick")});f.$(document).delegate(".warranty-review-link",
"click",function(){k(this,"popoverReviewClick")});f.declarative("select-default-option","click",function(d){b.increment(b.MetricNames.defaultOptionSelectCount);d=d&&d.isUserClick;b.logInteractionToNexus({baseAsin:f.$("#twister-plus-asin").val(),warrantyAsin:b.InternalMetricConstants.NON_WARRANTY_ACTION_ASIN_PLACEHOLDER},b.InternalMetricConstants.NON_WARRANTY_OPTION_INDEX,"noThanksSelect");h.clearOptionSelection(d)})});"use strict";l.when("A","wty:mbbModalHelper","wty:detailPage","a-checkbox","a-popover").register("wty:MbbItem",
function(f,h,b,k,d){function a(a){a.stopPropagation();a.preventDefault()}function c(a,c,d){this._mbb=a;this._warrantyAsin=a._pageData.w[d].a;this._isSubscription=!!a._pageData.w[d].sub;this._index=d;this._row=c;this._quantity=b.findQuantityInput(c);this._offerListingIdSelection=b.findOfferListingIdInput(c);this._checkbox=c.find("input[type\x3dcheckbox]");this._shortTitle=this._row.find(".mbb__st");this._modal=a._mbbFeature.find(".mbb__m:eq("+d+")");this._modalYes=this._modal.find(".mbb__yes");this._modalNo=
this._modal.find(".mbb__no");this._modalLearnMore=this._modal.find(".mbb__learnMore");this._modalReviews=this._modal.find(".mbb__reviews");this._modalName="MbbModal-"+this._mbb._type.cssClass+this._index;var e=this;this._onShortTitle=function(){e._logReftag("st")};this._setChecked(!1);this._logReftag("i");this._bind()}var e=f.$;c.prototype._bind=function(){this._bindQuantity();this._bindBuyBoxAccordion();this._bindModalYes();this._bindModalNo();this._bindShortTitle();this._bindCheckbox();this._bindModalLearnMore();
this._bindModalReviews()};c.prototype._destroy=function(){this._unbindQuantity();this._unbindBuyBoxAccordion();this._unbindModalYes();this._unbindModalNo();this._unbindShortTitle();this._unbindCheckbox();this._unbindModalLearnMore();this._unbindModalReviews()};c.prototype.getAsin=function(){return this._warrantyAsin};c.prototype.getFormIndex=function(){return this._index+this._mbb._baseFormIndex};c.prototype.getKvpIndex=function(){return this.getFormIndex()+1};c.prototype.getOfferListingId=function(){return this._offerListingIdSelection};
c.prototype.isChecked=function(){return this._checkbox.prop("checked")};c.prototype.getQuantity=function(){return this._quantity.val()};c.prototype._setChecked=function(a){this._checkbox.prop("checked",a)};c.prototype._setSubscriptionQuantityRestricted=function(a){d.remove(this._shortTitle);var b=e(".a-accordion-active #MonthlyWarrantyWarning");b.length||(b=e("#MonthlyWarrantyWarning"));var c=e(".warranties-monthly-checkbox");1<c.length&&(c=e(".a-accordion-active .warranties-monthly-checkbox"));a?
(this._bindShortTitle(),k(this._checkbox).enable(),c.length&&c[0].closest(".mbb__r").classList.remove("monthly-warranty-text-disabled"),b.length&&b[0].classList.add("aok-hidden")):(k(this._checkbox).isChecked()&&b.length&&b[0].classList.remove("aok-hidden"),this._unbindShortTitle(),k(this._checkbox).uncheck(),k(this._checkbox).disable(),c.length&&c[0].closest(".mbb__r").classList.add("monthly-warranty-text-disabled"),a={inlineContent:f.$("#popover-message").data("message"),position:"triggerLeft",
closeButton:"false"},d.create(this._shortTitle,a))};c.prototype._setQuantity=function(a){this._quantity.val(a)};c.prototype._logReftag=function(a){var b=this._mbb._nexusLogger.convertMBBObjectsToWarrantyDataNexusPayload(this._mbb,this);"i"===a?this._mbb._nexusLogger.logWarrantyImpression(b):(b.action=a,this._mbb._nexusLogger.logWarrantyWidgetInteraction(b))};c.prototype._bindModalYes=function(){var a=this;this._onModalYes=function(){a._logReftag("my");a._mbb._setChecked(a._index,!0);h.hide(a._modalName,
a._isSubscription);b.handleBaselink(a);b.handleATC(a)};this._modalYes.bind("click",this._onModalYes)};c.prototype._unbindModalYes=function(){this._modalYes.unbind("click",this._onModalYes)};c.prototype._bindModalNo=function(){var a=this;this._onModalNo=function(){a._logReftag("mn");a._mbb._setChecked(a._index,!1);h.hide(a._modalName,a._isSubscription);b.handleBaselink(a);b.handleATC(a)};this._modalNo.bind("click",this._onModalNo)};c.prototype._unbindModalNo=function(){this._modalNo.unbind("click",
this._onModalNo)};c.prototype._bindShortTitle=function(){this._shortTitle.unbind("click",a);this._shortTitle.bind("click",this._onShortTitle);h.create(this._shortTitle,this._modalName,this._mbb._modalHeader,this._isSubscription)};c.prototype._unbindShortTitle=function(){this._shortTitle.unbind("click",this._onShortTitle);this._shortTitle.bind("click",a);h.remove(this._modalName,this._isSubscription)};c.prototype._bindQuantity=function(){this._onQuantityChange=null;if(this._mbb._type.hasQuantity){var a=
this;this._onQuantityChange=b.bindQuantityChange(function(b){b=b||1;a._setQuantity(b);if(a.isChecked()){var c=a._checkbox[0].form;c&&f.$(c).find("input[name\x3d'items[0.warranty][quantity]']").each(function(a,c){c.value=b})}})}};c.prototype._unbindQuantity=function(){b.unbindQuantityChange(this._onQuantityChange)};c.prototype._bindCheckbox=function(){var a=this;this._onCheckboxChange=function(){var c=a.isChecked();a._mbb._setChecked(a._index,c);a._logReftag(c?"cy":"cn");b.handleBaselink(a);b.handleATC(a)};
this._checkbox.bind("change",this._onCheckboxChange)};c.prototype._unbindCheckbox=function(){this._checkbox.bind("change",this._onCheckboxChange)};c.prototype._bindBuyBoxAccordion=function(){var a=this;this._onBuyBoxAccordion=b.bindBuyBoxAccordion(function(){a._setChecked(!1);b.handleBaselink(a);b.handleATC(a)})};c.prototype._unbindBuyBoxAccordion=function(){b.unbindBuyBoxAccordion(this._onBuyBoxAccordion)};c.prototype._bindModalLearnMore=function(){var a=this;this._onModalLearnMore=function(){a._logReftag("learnMoreClick")};
this._modalLearnMore.bind("click",this._onModalLearnMore)};c.prototype._unbindModalLearnMore=function(){this._modalLearnMore.unbind("click",this._onModalLearnMore)};c.prototype._bindModalReviews=function(){var a=this;this._onModalReviews=function(){a._logReftag("reviewsClick")};this._modalReviews.bind("click",this._onModalReviews)};c.prototype._unbindModalReviews=function(){this._modalReviews.unbind("click",this._onModalReviews)};return c});"use strict";l.when("A","wty:MbbTypes","wty:Mbb").register("mbb",
function(f,h,b){function k(){this._mbbs={}}var d=new k;f.on("mbb:loaded",function(a,c,e){var g=h.getType(e);if(g){var k=d._mbbs[e];k&&k._destroy();k=new b(a,c,g);d._mbbs[e]=k;f.trigger("mbb:ready",e)}});k.prototype.getMbb=function(a){return this._mbbs[a]};return d});"use strict";l.when("A","wty-nexus-constants").register("wty-nexus-logger",function(f,h){var b={},k,d;b.nexusConstants=h;b.initialize=function(a,c){k=a;d=b.getDefaultPayload};b.convertMBBObjectsToWarrantyDataNexusPayload=function(a,b){return{deviceType:a._deviceType||
null,baseItemAsin:a._baseItemAsin,baseItemCurrencySymbol:a._baseItemCurrencySymbol||null,baseItemBuyingPriceDecimal:a._baseItemBuyingPriceDecimal||null,warrantyAsin:b._warrantyAsin,warrantyCurrencySymbol:b._warrantyCurrencySymbol||null,warrantyBuyingPriceDecimal:b._warrantyBuyingPriceDecimal||null,warrantyDisplayPosition:b._index+1}};b.populateCustomerIdIfNotPresent=function(a){if(a.customerId)return a;a.customerId=f.$("#warranty-customerID").val()||f.$("#attach-customerId").val()||null;return a};
b.setPayloadBuilder=function(a){d=function(){var c=a();c.feature=k;c.obfuscatedMarketplaceId=p.ue_mid;c.producerId=b.nexusConstants.PRODUCER_ID;c.messageId=b.getRandomHexString();return c}};b.getDefaultPayload=function(){var a={};a.feature=k;a.obfuscatedMarketplaceId=p.ue_mid;a.producerId=b.nexusConstants.PRODUCER_ID;a.messageId=b.getRandomHexString();return a};b.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.logWarrantyAddToCart=function(a,
c){c=b.nexusConstants.WARRANTY_ATC_SCHEMA_PREFIX+b.nexusConstants.WARRANTY_ATC_SCHEMA_VERSION;var e=d();a.feature&&(e.feature=a.feature);e.deviceType=a.deviceType;e.baseItemAsin=a.baseItemAsin;e.baseItemCurrencySymbol=a.baseItemCurrencySymbol||null;e.baseItemBuyingPriceDecimal=a.baseItemBuyingPriceDecimal||null;e.baseItemQuantity=a.baseItemQuantity||null;e.warrantyAsin=a.warrantyAsin;e.warrantyCurrencySymbol=a.warrantyCurrencySymbol||null;e.warrantyBuyingPriceDecimal=a.warrantyBuyingPriceDecimal||
null;e.warrantyQuantity=a.warrantyQuantity||null;e.warrantyDisplayPosition=a.warrantyDisplayPosition;b.log(e,c)};b.logWarrantyImpression=function(a){var c=b.nexusConstants.WARRANTY_IMPRESSION_SCHEMA_PREFIX+b.nexusConstants.WARRANTY_IMPRESSION_SCHEMA_VERSION,e=d();a.feature&&(e.feature=a.feature);e.customerId=a.customerId||null;e.deviceType=a.deviceType;e.baseItemAsin=a.baseItemAsin;e.baseItemCurrencySymbol=a.baseItemCurrencySymbol||null;e.baseItemBuyingPriceDecimal=a.baseItemBuyingPriceDecimal||null;
e.warrantyAsin=a.warrantyAsin;e.warrantyCurrencySymbol=a.warrantyCurrencySymbol||null;e.warrantyBuyingPriceDecimal=a.warrantyBuyingPriceDecimal||null;e.warrantyDisplayPosition=a.warrantyDisplayPosition;b.log(e,c)};b.logWarrantyWidgetInteraction=function(a){var c=b.nexusConstants.WARRANTY_WIDGET_INTERACTION_SCHEMA_PREFIX+b.nexusConstants.WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION,e=d();a.feature&&(e.feature=a.feature);e.customerId=a.customerId||null;e.deviceType=a.deviceType;e.baseItemAsin=a.baseItemAsin;
e.warrantyAsin=a.warrantyAsin;e.warrantyDisplayPosition=a.warrantyDisplayPosition;e.action=a.action;b.log(e,c)};b.log=function(a,c){p.ue&&p.ue.event&&(a=b.populateCustomerIdIfNotPresent(a),p.ue.event(a,b.nexusConstants.PRODUCER_ID,c,{ssd:!1}),r("NEXUS PAYLOAD: "+JSON.stringify(a)+" SCHEMA: "+c))};return b});"use strict";l.when("A","wty-nexus-logger","wty-nexus-constants").register("mbb-nexus-event-handler",function(f,h,b){h.initialize(b.FEATURE_NAME_CONSTANTS.MBB,null);f.on("mbb:widget-interaction:nexus",
function(b){b&&h.logWarrantyWidgetInteraction({baseItemAsin:b.baseAsin||null,warrantyAsin:b.serviceAsin||null,warrantyDisplayPosition:b.warrantyDisplayPosition,action:b.action,deviceType:b.deviceType||null})});f.on("mbb:impression:nexus",function(b){b&&h.logWarrantyImpression({baseItemAsin:b.baseAsin||null,warrantyAsin:b.serviceAsin||null,warrantyDisplayPosition:b.warrantyDisplayPosition,deviceType:b.deviceType||null})})});"use strict";l.when("A").register("wty-nexus-constants",function(f){return{PRODUCER_ID:"warranties",
WARRANTY_IMPRESSION_SCHEMA_PREFIX:"warranty.WarrantyImpressions.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"4",WARRANTY_ATC_SCHEMA_PREFIX:"warranty.AddWarrantyToCart.",WARRANTY_ATC_SCHEMA_VERSION:"2",WARRANTY_WIDGET_INTERACTION_SCHEMA_PREFIX:"warranty.WidgetInteraction.",WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION:"3",FEATURE_NAME_CONSTANTS:{MBB:"MBB",SI:"SI",TWISTER_PLUS:"TWISTER_PLUS"},DEVICE_TYPE_CONSTANTS:{DESKTOP:"DESKTOP",MOBILE:"MOBILE",MOBILE_APP:"MOBILE_APP"}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,n=b._namespace||b.attributeErrors,a=n?n("DetailPageAlohaAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,n){c.when("A").register("aloha-cartapi",function(a){return{createAddToCartRequest:function(b,c,m,f,l,g){g=g||5E3;l=l||f;var d={items:[]};return{count:function(){return d.items.length},call:function(e){0<d.items.length&&a.$.ajax({url:e===n?b+"?ref_\x3ddp_atch_abb_atc":b+"?ref_\x3d"+e,xhrFields:{withCredentials:!0},
type:"POST",headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Accept-Language":"en-US","x-api-csrf-token":c},data:JSON.stringify(d),timeout:g,success:m,error:f,abort:l})},addItem:function(a,b,c){d.items.push({asin:a,offerListingId:b,quantity:Number(c||1)})}}}}});"use strict";c.when("A","a-modal","aloha-simplebundle-common","ready").execute(function(a,b,c){function m(e){!g&&a.onScreen(document.getElementById(f.SIMPLE_BUNDLE),
0)&&(g=!0,a.defer(function(){e.logNexusImpressionsOnDpx(l.DESKTOP)}))}var f={AUI_PAGE_ROOT:"#a-page",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SIMPLE_BUNDLE:"simpleBundleV2_feature_div"},l={DESKTOP:"desktop"},g=!1,d=a.debounce(function(){if(a.$(f.SB_ROOT).length){var e=c.getSimpleBundlePageState()||{},b=e.csrfToken,d=e.cartEndpoint,q=e.items||[],e={baseAsin:e.baseAsin,marketplaceId:e.marketPlaceId,baseItemPrice:a.$("#base-product-price").data("base-product-price"),clientType:"aloha-simplebundle-desktop",
currencyOfPreferenceSupported:e.currencyOfPreferenceSupported||!1},h=c.createMetricsLogger(e,q,l.DESKTOP);m(h);if(!g)a.on(a.constants.BROWSER_EVENTS.SCROLL,function(){m(h)});h.setupMiniDpImpressionTriggering();c.setupAccessoryAddToCart(q,h,d,b)}},200);(function(){a.declarative("show-review-tab","click",function(e){a.$(e.$target).closest(f.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});a.declarative("focus-image","mouseenter",function(a){var b=a.$target,c=b.parents(f.AUI_PAGE_ROOT);a=a.data;c.find("#productImageMain-"+
a.asin).attr("src",a.imageUrl);c.find(".thumbnail-group").removeClass("a-button-selected");c.find("#"+b.prop("name")).addClass("a-button-selected")})})();d();a.on("a:pageUpdate",d);a.on("attach:dss:initialized",function(){a.off("a:pageUpdate",d);d()})});"use strict";c.when("A","aloha-cartapi").register("aloha-simplebundle-common",function(a,p){var n=/[^\d,\.]/g,m=/,/g,f=/\./g,l=/(^\D+|\D+$)/,g=Date.now().toString(10)+Math.random().toString(16).substring(2,13),d=!1;return{createMetricsLogger:function(e,
c,d){function q(a,k,c,b,d){var r;r=t(e.baseItemPrice);return{baseAsin:e.baseAsin,basePrice:r.priceDecimal,currencySymbol:r.currencySymbol,clientType:e.clientType,producerId:"atch",marketplaceId:e.marketplaceId,uniqueId:g,accessoryAsin:a,accessoryPrice:k,displayPosition:c,featureLayout:b,deviceType:d}}function h(a,k){b.ue&&b.ue.event&&b.ue.event(a,"atch",k,{ssd:!0})}function p(a){return e.currencyOfPreferenceSupported?{priceFormatted:a.ourPrice,priceDecimal:parseFloat(a.ourPriceAmount)||null,currencySymbol:a.ourPriceSymbol}:
t(a.ourPrice)}function t(a){a=a||"";var k=a.lastIndexOf(","),c=a.lastIndexOf("."),b;k>c?(c=f,b=m):(c=m,b=f);(k=a.match(l))&&(k=k[0].trim());c=a.replace(n,"").replace(c,"").replace(b,".");c=parseFloat(c);return{priceFormatted:a,currencySymbol:k,priceDecimal:c}}a.defer(function(){b.ue&&b.ue.count&&b.ue.count("aloha-simplebundle-view",1)});return{logExpandedLink:function(){b.ue&&b.ue.count&&b.ue.count("aloha-simplebundle-buybox-expanded-link",1)},logNexusImpressionsOnDpx:function(){for(var a=0;a<c.length;a++){var b=
c[a],b=q(b.asin,p(b).priceDecimal,a,"dpx",d);h(b,"attach.ABBImpression.7")}},setupMiniDpImpressionTriggering:function(){a.$(".simpleBundle-popover-title").unbind("click").bind("click",function(a){a=parseInt(a.currentTarget.className.split("popover-simpleBundle-link-")[1].at(0));var b=c[a];a=q(b.asin,p(b).priceDecimal,a,"minidp",d);h(a,"attach.ABBImpression.7")})},logNexusAddAccessoryToCart:function(a,b,c,e,t){var d=q();d.accessoryAsin=a;d.accessoryPrice=p(b).priceDecimal;d.displayPosition=c;d.featureLayout=
e;d.deviceType=t;h(d,"attach.ABBAddAccessoryToCart.4")}}},getSimpleBundlePageState:function(){var b=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(b)},setupAccessoryAddToCart:function(e,f,g,l){function h(e,d,k,h,n,u){var r=p.createAddToCartRequest(g,l,function(a){m(e);f.logNexusAddAccessoryToCart(e,d,k,n,u);c.when("EWC").execute("abb-everywhere-cart",function(a){a.refresh()});var b=a.entity.count.entity.items;c.when("nav.setCartCount").execute("abb-nav-cart",function(a){a(b)})},
function(){a.$("#abb_add_accessory_spinner_"+e).addClass("aok-hidden");a.$("#minidp_add_accessory_spinner_"+e).addClass("aok-hidden");a.$("#abb_add_accessory_error_"+e).removeClass("aok-hidden");a.$("#minidp_add_accessory_error_"+e).removeClass("aok-hidden");b.ueLogError&&b.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});r.addItem(e,d.offerListingId);r.call(h)}function m(b){a.$("#abb_add_accessory_spinner_"+
b).addClass("aok-hidden");a.$("#minidp_add_accessory_spinner_"+b).addClass("aok-hidden");a.$("#abb_add_accessory_alert_"+b).removeClass("aok-hidden");a.$("#minidp_add_accessory_alert_"+b).removeClass("aok-hidden")}d||(d=!0,a.$(".simpleBundleSection").each(function(b,c){a.$(c).closest("#simpleBundleV2_feature_div").length||a.$(c).closest("#simpleBundle_feature_div").length||c.remove()}),a.declarative("abb-accessory-add","click",function(b){var c=b.data;b=c.asin;var d;a:{for(d=0;d<e.length;d++)if(e[d].asin===
b)break a;d=void 0}var f=e[d],c=c.atcRefmarker,p=c.includes("base")?"dpx":"minidp",g=c.includes("desktop")?"desktop":"mobile";a.$("#abb_accessory_add_button_"+b).addClass("aok-hidden");a.$("#minidp_accessory_add_button_"+b).addClass("aok-hidden");a.$("#abb_add_accessory_spinner_"+b).removeClass("aok-hidden");a.$("#minidp_add_accessory_spinner_"+b).removeClass("aok-hidden");h(b,f,d,c,p,g)}))}}});"use strict";c.when("ready").register("aloha-buy-now-integration",function(){var a={};c.when("turbo-checkout-buy-now-integration").execute(function(b){a=
b});return{isBuyNow:function(b){return"function"===typeof a.isBuyNow&&a.isBuyNow(b)},checkoutWith:function(b,c){return a.checkoutWith(b,c)}}})});
/* ******** */
(function(q){var r=window.AmazonUIPageJS||window.P,w=r._namespace||r.attributeErrors,a=w?w("DetailPageAttachAssets",""):r;a.guardFatal?a.guardFatal(q)(a,window):a.execute(function(){q(a,window)})})(function(q,r,w){"use strict";q.register("attach-variant-registration",function(){function a(a){if(b.hasOwnProperty(a))throw"Variant flag already registered";b[a]=!0}var b={};a("CETECH_WTY_INTERSTITIAL_EXPERIMENT_561605:C");a("CETECH_WTY_INTERSTITIAL_GATING_578923:C");return{registerVariantFlag:a,getVariantFlag:function(a){return b.hasOwnProperty(a)}}});
"use strict";q.when("A","attach-weblabs","attach-logging","attach.amazonapi.cart.add-items").register("attach-baselink",function(a,b,h,e){var f=null;q.when("BaseLinkFormHelper").execute(function(a){f=a});var k=function(a){r.ueLogError&&r.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,b){return f?f.addBaseLinkFields(a,b):null},addLinkedWarranty:function(a,b,c){if(!a||!a.baseItemAsin)return k("baseItemAsin is undefined. Abandoning ATC since Base item and Warranty association can not be done."),
c();a={asin:a.warrantyAsin,offerListingId:a.offeringId,quantity:parseInt(a.quantity),additionalParameters:{itemAssociation:{associatedItemId:a.baseItemAsin,deleteConstraint:{mutuallyInclusive:!1},quantityConstraint:{invarianceFactor:1,quantityEditable:!0},programType:"AmazonProtect",renderType:"renderAll"}}};e.addItems([a],h.REF_TAGS.WARRANTY_ADD_TO_CART).then(b).catch(c)},mSilogError:k}});"use strict";q.when("A").register("attach-external-atc-interceptor",function(a){var b=a.$,h=[],e=[],f=!1,k=!1,
p=function(){k=!0},n=function(a){var c=e.indexOf(a);-1<c&&(a=b("#attach_add_accessory_alert_"+c),c=b("#attach_add_accessory_button_"+c),a&&c&&(a.removeClass("aok-hidden"),c.addClass("aok-hidden")))};return{updateAttachModule:function(a){p&&(f?n(a):h.push(a))},loadAttachModule:function(a){if(k)for(f=!0,e=a;0<h.length;)a=h.shift(),n(a)},unloadAttachModule:function(){f=!1;e=[]},enableModule:p}});"use strict";q.when("A").register("attach-preinitiate-checkout",function(a){return{getCartInitiateId:function(){return(new Date).getTime()},
preinitiateCheckout:function(b){var h=a.$("#attach-desktop-sideSheet");var e=a.$("#attach_accessory_sheet");h=h.length?h:e;h.find("iframe#checkoutPrefetch").remove();b="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+b;e=document.createElement("iframe");e.setAttribute("src",b);e.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");e.setAttribute("name","checkoutPrefetch");e.setAttribute("id","checkoutPrefetch");h.append(e)}}});"use strict";q.when("A","attach-common",
"attach-variant-registration","attach-logging").register("attach-weblabs",function(a,b,h,e){var f={},k=f.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",
WTY_TWISTER_CONTAINER:"#warranty-twister-container",WTY_LD_SUPPORT:"#warranty-ld-launch",AAPI_AJAX_ENDPOINT:"#attach-aapi-ajax-endpoint",MOBILE_WEB_MBS_EXPERIMENT_WEBLAB:"#attach-accessory-mobile-web-mbs",DSS_MBS_UI_ENHANCEMENT:"#attach-dss-mbs-enhancement",DSS_MBS_UI_ENHANCEMENT_LD:"#attach-dss-mbs-ld-enhancement",DSS_MBS_EU_COMPLIANCE:"#attach-dss-mbs-eu-compliance",SHOW_WFM_ENABLE:"#attach-enabled-for-wfm"},p=f.Marketplaces={IN:"A21TJRUUN4KGV"};f.isWarrantyPaneSuppressed=function(){return a.$(k.ATTACH_MARKETPLACE_ID).val()===
p.IN&&(!f.servicesInterstitialDeprecated()||b.hasAccessories())};f.getTreatmentAndTrigger=function(a){return h.getVariantFlag(a+":T1")?(r.ue.trigger(a,"T1"),"T1"):h.getVariantFlag(a+":C")?(r.ue.trigger(a,"C"),"C"):"UNALLOCATED"};f.isInterstitialSuppressionGateEnabled=function(){return"T1"===f.getTreatmentAndTrigger("CETECH_WTY_INTERSTITIAL_GATING_578923")};f.isInterstitialSuppressionExperimentEnabled=function(){return"T1"===f.getTreatmentAndTrigger("CETECH_WTY_INTERSTITIAL_EXPERIMENT_561605")};f.triggerWarrantySuppressionExperiment=
function(p){var c=a.$("#attach-customerId, #attach-customer-id").val();if(p&&c&&r.ue&&r.ue.event&&r.ue.trigger&&f.isInterstitialSuppressionGateEnabled()){p=f.isInterstitialSuppressionExperimentEnabled();var m=b.hasAccessories();c=e.getInterstitialExperimentPayload(f.isWarrantyTwisterPlusDesktopEnabled(),c,p,m);e.logInterstitialExperimentData(c)}};f.isShowAccessoryCouponsDssEnabled=function(){return b.elementExists(k.SHOW_ACCESSORY_COUPONS_DSS)};f.isShowAccessoryCouponsMbsEnabled=function(){return b.elementExists(k.SHOW_ACCESSORY_COUPONS_MBS)};
f.isCoreFreeShippingMessageEnabled=function(){return b.elementExists(k.CORE_FREE_SHIPPING_MESSAGE)};f.isAttachDebugParametersEnabled=function(){return 0<a.$(k.DEBUG_IS_DEBUG).length||0<a.$(k.DEBUG_QUERY_STRING).length};f.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<a.$(k.WTY_TWISTER_CONTAINER).length};f.isAmazonApiAjaxEnabled=function(){return b.elementExists(k.AAPI_AJAX_ENDPOINT)};f.isAttachEnabledForWFM=function(){return b.elementExists(k.SHOW_WFM_ENABLE)};f.servicesInterstitialDeprecated=
function(){return b.elementExists("#attachSIDeprecated")};f.isMobileWebMBSEnabled=function(){return b.elementExists(k.MOBILE_WEB_MBS_EXPERIMENT_WEBLAB)};f.isDssMbsEnhancementEnabled=function(){return b.elementExists(k.DSS_MBS_UI_ENHANCEMENT)};f.isLdDssMbsEnhancementEnabled=function(){return b.elementExists(k.DSS_MBS_UI_ENHANCEMENT_LD)};f.isDssMbsEuComplianceActive=function(){return b.elementExists(k.DSS_MBS_EU_COMPLIANCE)};return f});"use strict";q.when("A").register("attach-logging",function(a){var b=
{},h,e,f;b.NEXUS={PRODUCER_ID:"atch",PRODUCER_ID_WARRANTY:"warranties",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"11",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"15",ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",
WARRANTY_WIDGET_INTERACTION_PREFIX:"warranty.widgetInteraction.",WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION:"3",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};b.FEATURES={DSS:"dss",MBS:"mbs",MBS_APP:"mbs_app",MBS_WEB:"mbs_web"};b.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",
ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",
ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",
DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",DSS_BASE_LD_MISSING_TIMER:"attachDesktopBaseLightningDealMissingTimer",MBS_BASE_LD_MISSING_TIMER:"attachMobileBaseLightningDealMissingTimer",DSS_LD_MISSING_ATTACH:"attachDesktopLightningDealMissingAttachContainer",MBS_APP_LD_MISSING_ATTACH:"attachMobileAppLightningDealMissingAttachContainer",MBS_WEB_LD_MISSING_ATTACH:"attachMobileWebLightningDealMissingAttachContainer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",
ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError",ATTACH_MBS_ATC_STAY_AJAX_SUCCESS:"attachMbsAtcStayAjaxSuccess",ATTACH_MBS_ATC_STAY_AJAX_FAILURE:"attachMbsAtcStayAjaxFailure",ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE:"attachMbsAtcStayAjaxIncomplete",ATTACH_MBS_ATC_ADD_ITEMS_API_SUCCESS:"attachMbsAtcAddItemsApiSuccess",ATTACH_MBS_ATC_ADD_ITEMS_API_FAILURE:"attachMbsAtcAddItemsApiFailure",
ATTACH_MBS_ATC_ADD_ITEMS_API_INCOMPLETE_FAILURE:"attachMbsAtcAddItemsApiIncomplete",ATTACH_MBS_ATC_GURUPA_SUCCESS:"attachMbsAtcGurupaSuccess",ATTACH_MBS_ATC_GURUPA_FAILURE:"attachMbsAtcGurupaFailure",ATTACH_MBS_GET_CART_SUMMARY_SUCCESS:"attachMbsGetCartSummarySuccess",ATTACH_MBS_GET_CART_SUMMARY_FAILURE:"attachMbsGetCartSummaryFailure",ALM_DSS_BASE_ATC_SUCCESS:"almAddBaseSuccessDss",ALM_DSS_BASE_ATC_FAILURE:"almAddBaseFailureDss",ALM_MBS_BASE_ATC_SUCCESS:"almAddBaseSuccessMbs",ALM_MBS_BASE_ATC_FAILURE:"almAddBaseFailureMbs",
WARRANTY_MBS_APP_ATC_SUCCESS:"warrantyMbsAppAtcSuccess",WARRANTY_MBS_APP_ATC_FAILURE:"warrantyMbsAppAtcFailure",WARRANTY_MBS_WEB_ATC_SUCCESS:"warrantyMbsWebAtcSuccess",WARRANTY_MBS_WEB_ATC_FAILURE:"warrantyMbsWebAtcFailure",WARRANTY_DSS_ATC_CLICK:"warrantyDssAtcClick",WARRANTY_DSS_ATC_SUCCESS:"warrantyDssAtcSuccess",WARRANTY_DSS_ATC_FAILURE:"warrantyDssAtcFailure",WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_SUCCESS:"warrantyDssWarrantyPaneAtcCartApiSuccess",WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_INCOMPLETE:"warrantyDssWarrantyPaneAtcCartApiIncomplete",
WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_FAILURE:"warrantyDssWarrantyPaneAtcCartApiFailure",WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_SUCCESS:"warrantyDesktopAtcByAccessoriesPaneSuccess",WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_INCOMPLETE:"warrantyDesktopAtcByAccessoriesPaneIncomplete",WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_FAILURE:"warrantyDesktopAtcByAccessoriesPaneFailure",WARRANTY_MOBILE_WEB_ATC_WITH_BASE_SUCCESS:"warrantyMobileWebAtcWithBaseSuccess",WARRANTY_MOBILE_WEB_ATC_WITH_BASE_INCOMPLETE:"warrantyMobileWebAtcWithBaseIncomplete",
WARRANTY_MOBILE_WEB_ATC_WITH_BASE_FAILURE:"warrantyMobileWebAtcWithBaseFailure",SHOW_MBS:"attachShowMbs",SHOW_WARRANTY:"attachShowWarranty",SHOW_MBS_ON_APP:"attachShowMbsOnApp",SHOW_MBS_ON_WEB:"attachShowMbsOnWeb",SHOW_WARRANTY_ON_WEB:"attachShowWarrantyOnWeb",SHOW_WARRANTY_ON_APP:"attachShowWarrantyOnApp"};b.ENDPOINTS={REF_TAG_IN:"/hctp/log/refMarker?ref_\x3d"};b.METRICS={DPX_MOBILE_APP_ATC:"DetailPage_MobileApp_AddToCart",DPX_MOBILE_WEB_ATC:"DetailPage_MobileWeb_AddToCart"};b.initialize=function(a,
f){h=a;e=f;b.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_",WARRANTY_WIDGET_INTERACTION:"dp_atc_"+a+"_w_w_i_"}};b.setPayloadBuilder=function(a){f=function(){var p=a();p.feature=h;p.obfuscatedMarketplaceId=e||r.ue_mid;p.producerId=b.NEXUS.PRODUCER_ID;p.requestId=b.getRandomHexString();return p}};b.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.log=function(e,f){if(r.ue&&r.ue.event){var c={ssd:!1};
e.customerId=a.$("#attach-customerId").val()||null;f==b.NEXUS.WARRANTY_WIDGET_INTERACTION_PREFIX+b.NEXUS.WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION?r.ue.event(e,b.NEXUS.PRODUCER_ID_WARRANTY,f,c):r.ue.event(e,b.NEXUS.PRODUCER_ID,f,c)}};b.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+
b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+
b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};b.getWarrantyPayload=function(a,b){return{asin:a,priceFormatted:b,priceDecimal:null,currencySymbol:null}};b.logAccessoryAddToCart=function(a){var e=b.NEXUS.ADD_ACCESSORY_PREFIX+b.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,c=f();c.type=b.NEXUS.ACCESSORY_TYPE.ACCESSORY;c.displayPosition=parseInt(a.index)+1;c.accessoryAsin=a.asin;c.accessoryAsinPrice=a.priceFormatted;c.accessoryItemCurrencySymbol=a.currencySymbol;
c.accessoryItemPriceDecimal=a.priceDecimal;c.couponType=a.couponType;c.couponDecimal=a.couponDecimal;c.dealType=a.dealType;c.dealPercentSavings=a.dealPercentSavings;c.dealDollarAmount=a.dealDollarAmount;c.categoryDisplayPosition=parseInt(a.categoryIndex)+1;c.categoryTitle=a.categoryTitle;c.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;b.log(c,e)};b.logAccessoryImpressions=function(a){var e=b.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+b.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,c=f();
c.accessories=[];for(var m=0;m<a.length;m++){var d=a[m];c.accessories.push({displayPosition:parseInt(d.index)+1,asin:d.asin,price:d.priceFormatted,currencySymbol:d.currencySymbol,priceDecimal:d.priceDecimal,couponType:d.couponType,couponDecimal:d.couponDecimal,dealType:d.dealType,dealPercentSavings:d.dealPercentSavings,dealDollarAmount:d.dealDollarAmount,categoryDisplayPosition:parseInt(d.categoryIndex)+1,categoryTitle:d.categoryTitle,displayPositionWithinCategory:parseInt(d.asinIndexWithinCategory)+
1})}b.log(c,e)};b.logWarrantyAddToCart=function(e,f){f?(f=b.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+b.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION,k(e,f),a.capabilities.isAmazonApp?b.logCount(b.CSM_METRICS.WARRANTY_MBS_APP_ATC_FAILURE):a.capabilities.mobile?b.logCount(b.CSM_METRICS.WARRANTY_MBS_WEB_ATC_FAILURE):b.logCount(b.CSM_METRICS.WARRANTY_DSS_ATC_FAILURE)):(f=b.NEXUS.ADD_WARRANTY_PREFIX+b.NEXUS.ADD_WARRANTY_SCHEMA_VERSION,k(e,f),a.capabilities.isAmazonApp?b.logCount(b.CSM_METRICS.WARRANTY_MBS_APP_ATC_SUCCESS):
a.capabilities.mobile?b.logCount(b.CSM_METRICS.WARRANTY_MBS_WEB_ATC_SUCCESS):b.logCount(b.CSM_METRICS.WARRANTY_DSS_ATC_CLICK),b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_ADD_TO_CART,e.asin))};var k=function(a,e){var c=f();c.asin=a.asin;c.price=a.priceFormatted;c.warrantyCurrencySymbol=a.currencySymbol;c.warrantyPriceDecimal=a.priceDecimal;b.log(c,e)};b.logWarrantyImpression=function(a){var e=b.NEXUS.WARRANTY_IMPRESSION_PREFIX+b.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,c=f();c.asin=a.asin;c.price=a.priceFormatted;
c.warrantyCurrencySymbol=a.currencySymbol;c.warrantyPriceDecimal=a.priceDecimal;b.log(c,e);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};b.logWarrantyWidgetInteraction=function(a){var e=b.NEXUS.WARRANTY_WIDGET_INTERACTION_PREFIX+b.NEXUS.WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION,c=f();c.asin=a.asin;c.action=a.action;b.log(c,e);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_WIDGET_INTERACTION,a.asin)};b.logWarrantyInteractionData=function(e,f){var c=f.closest(".attach-warranty-box");f=a.$(c).find(".dssMbs__r input[type\x3dcheckbox]")[0].name;
c=a.$(c).find("input[name\x3d'asin."+f+"']").val();b.logWarrantyWidgetInteraction({index:f,asin:c,action:e})};b.logInterstitialExperimentData=function(a){r.ue.event(a,"warranties","warranty.InterstitialExperimentLog.8",{ssd:!1})};b.getInterstitialExperimentPayload=function(b,f,c,m){return{customerId:f,obfuscatedMarketplaceId:e||r.ue_mid,inTreatment1:c,twisterPlusEnabled:b,hasAccessories:m,baseItemAsin:a.$("#attach-base-asin, #attach-baseAsin, #ASIN").val(),baseItemBuyingPrice:a.$("#attach-base-product-price").val(),
baseItemCurrencySymbol:a.$("#attach-base-product-currency-symbol").val().toString(),warranty0Asin:a.$('.attach-warranty-box input[name\x3d"asin.0"]').val()||"n/a",warranty0Price:a.$('.attach-warranty-box input[name\x3d"warrantyPrice.0"]').val()||"n/a",warranty1Asin:a.$('.attach-warranty-box input[name\x3d"asin.1"]').val()||"n/a",warranty1Price:a.$('.attach-warranty-box input[name\x3d"warrantyPrice.1"]').val()||"n/a",warranty2Asin:a.$('.attach-warranty-box input[name\x3d"asin.2"]').val()||"n/a",warranty2Price:a.$('.attach-warranty-box input[name\x3d"warrantyPrice.2"]').val()||
"n/a",isDesktop:!a.capabilities.mobile}};b.logWarrantyRefTag=function(a,e){var c=f().baseAsin;b.logRefTag(a+c+"_"+e)};b.logSecondarySheetRefTag=function(a){var e=f().baseAsin;b.logRefTag(a+"_"+e)};b.logRefTag=function(f){"A21TJRUUN4KGV"===e&&a.get(b.ENDPOINTS.REF_TAG_IN+f)};b.logMobileBaseAtc=function(e){b.logCount(b.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);e&&e.data&&"add-to-cart"===e.data.buttonID&&b.logCount(a.capabilities.isAmazonApp?b.METRICS.DPX_MOBILE_APP_ATC:b.METRICS.DPX_MOBILE_WEB_ATC)};b.logCount=
function(a,b){r.ue&&r.ue.count&&(b=b||1,r.ue.count(a,(r.ue.count(a)||0)+b))};b.logCountOnce=function(a){r.ue&&r.ue.count&&!r.ue.count(a)&&r.ue.count(a,1)};b.logError=function(a,b,c){r.ueLogError&&r.ueLogError(a,{logLevel:b||"ERROR",attribution:c||"DetailPageAttachAssets"})};b.logDSSWarningMessage=function(a){var e=b.NEXUS.DSS_WARNING_MESSAGE_PREFIX+b.NEXUS.DSS_WARNING_MESSAGE_VERSION,c=f();b.log({quantity:c.quantity.toString(),baseAsin:c.baseAsin,warningMessage:a},e)};b.logPromotionClaimed=function(a){var e=
b.NEXUS.PROMOTION_CLAIMED_PREFIX+b.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,c=f();c.asin=a.asin;c.accessoryCurrencySymbol=a.currencySymbol;c.accessoryPriceDecimal=a.priceDecimal;c.displayPosition=a.index+1;null!==a.couponType&&(c.promoDecimal=a.couponDecimal,c.promoDecimalType=a.couponType,c.promoType="coupon");b.log(c,e)};b.isFunction=function(a){return"function"===typeof a};b.beginLatencyCapture=function(a){b.isFunction(r.uet)&&r.uet("bb",a,{wb:1})};b.endLatencyCapture=function(a){b.isFunction(r.uex)&&
r.uex("ld",a,{wb:1})};return b});"use strict";q.when("A","3p-promise","attach-variant-registration","attach-logging","attach.utilities.add-to-cart.base-product").register("attach-common",function(a,b,h,e,f){function k(b){var g=p(b,d.UNIQ_ITEM_ASSOC_NAME),e=p(b,d.ITEM_ASSOC_TYPE_NAME),f=1,h=!1;null!==e&&(m.itemAssocTypeValue=b.find(d.INPUT_NAME+e+d.CLOSED_BRACKET).val(),m.itemAssocTypeValue===d.ATTACH_ITEM_ASSOC_TYPE_VALUE&&(h=!0));null!==g?h?(e=p(b,d.ITEM_ASSOC_NAME),h=a.$("#attach-sessionId").val()+
"-"+(new Date).getTime(),b.find(d.INPUT_NAME+g+d.CLOSED_BRACKET).val(h),b.find(d.INPUT_NAME+e+d.CLOSED_BRACKET).val(h),m.uniqueId=h):m.uniqueId=b.find(d.INPUT_NAME+g+d.CLOSED_BRACKET).val():(m.uniqueId=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),f=c(b,f),n(b,d.ITEM_ASSOC_NAME,m.uniqueId,f),f++,f=c(b,f),n(b,d.UNIQ_ITEM_ASSOC_NAME,m.uniqueId,f),f++,f=c(b,f),n(b,d.ITEM_ASSOC_TYPE_NAME,m.itemAssocTypeValue,f),f++);f=c(b,f);n(b,d.ITEM_ASSOC_PROPERTIES_NAME,d.ITEM_ASSOC_PROPERTIES_VALUE,f)}
function p(a,b){a=a.find(d.INPUT_VALUE+b+d.CLOSED_BRACKET);if(!a.length)return null;a=a[0].name.split(".");return 2<a.length?d.CUSTOM_VALUE_KEY+a[1]+"."+a[2]:null}function n(a,b,d,c){a.append('\x3cinput type\x3d"hidden" name\x3d"custom-name.1.'+c+'" value\x3d"'+b+'"/\x3e');a.append('\x3cinput type\x3d"hidden" name\x3d"custom-value.1.'+c+'" value\x3d"'+d+'"/\x3e')}function c(a,b){for(;0<a.find('input[name\x3d"custom-name.1.'+b+'"]').length||0<a.find('input[name\x3d"custom-value.1.'+b+'"]').length;)b++;
return b}var m={},d=m.ItemAssociationConstants={ITEM_ASSOC_NAME:"itemAssoc",UNIQ_ITEM_ASSOC_NAME:"UNIQ-itemAssoc",ITEM_ASSOC_TYPE_NAME:"itemAssocType",ATTACH_ITEM_ASSOC_TYPE_VALUE:"Attach",ITEM_ASSOC_RENDER_TYPE_NAME:"itemAssocRenderType",ITEM_ASSOC_RENDER_TYPE_VALUE:"renderAll",ITEM_ASSOC_PROPERTIES_NAME:"itemAssocProperties",ITEM_ASSOC_PROPERTIES_VALUE:"{\x26#34;QuantityEditable\x26#34;:\x26#34;1\x26#34;,\x26#34;QuantityInvarianceFactor\x26#34;:\x26#34;1\x26#34;}",CUSTOM_VALUE_KEY:"custom-value.",
INPUT_VALUE:"input[value\x3d'",INPUT_NAME:"input[name\x3d'",CLOSED_BRACKET:"']"},C=m.Marketplaces={IN:"A21TJRUUN4KGV"};m.uniqueId=null;m.itemAssocTypeValue="Attach";m.selectedBaseLightningDeal=!1;m.cartInitiateId=!1;m.isAttachEnabledForWFM=!1;m.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4,REBIND_ATC:5};var t=m.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled",
ATC_FORM:"#addToCart",INSTALLMENTS_FORM:"#mobile-installments",DSS_CART:".attach-cart-button",DSS_PROCEED:".attach-checkout-button",HAS_DDWL:"#attach-has-ddwl",ALM_BRAND_ID_SELECTOR:"#attach-alm-brand-id",ALM_WFM_BRAND_ID:"VUZHIFdob2xlIEZvb2Rz",ATTACH_HAS_RECOMMENDATIONS_FLAG:"#attach-has-recommendations"},q=m.Endpoints={PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed",ALM_PROCEED_TO_CHECKOUT:"/alm/byg",PROCEED_TO_CART:"/gp/cart/view/html"};m.buyButton=a.$(t.ADD_TO_CART_BUTTON);
m.reject=function(b,d,c){return m.rejectPromise(a.$.Deferred(),b,d,c)};m.getInputValueByNameAndIndex=function(b,d){b=a.$('input[name\x3d"'+b+"."+d+'"]')[0];return a.$(b).val()};m.rejectPromise=function(b,d,c,f){if(c&&c.count&&r.ue&&r.ue.count)if("string"===typeof c.count)r.ue.count(c.count,1);else if(a.$.isArray(c.count))for(var g=0;g<c.count.length;g++)r.ue.count(c.count[g],1);c&&c.information&&e.logError("string"===typeof c.information?{message:c.information}:c.information,c.level,c.attribution);
return b.reject(d,c,f)};m.pipeJSON=function(a){try{return JSON.parse(a)}catch(x){return m.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};m.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};m.elementExists=function(b){return b?b instanceof a.$?0!==b.length:0!==a.$(b).length:!1};m.moduleExists=function(b){return(b=a.$("#"+b+"_feature_div").html())?0<b.trim().length:!1};m.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};
m.hasWarranty=function(){return m.elementExists("#attachSIDeprecated")&&m.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};m.hasMonthlyWarranty=function(){return m.elementExists("#attach-monthly-warranty")};m.hasAccessories=function(){return"true"===a.$(t.ATTACH_HAS_RECOMMENDATIONS_FLAG).val()};m.hasDataDrivenWeblab=function(){return"true"===a.$(t.HAS_DDWL).val()};m.isDiscriminatedOffersEnabled=function(){return m.elementExists(t.DISCRIMINATED_OFFERS_ENABLED)?"true"===
a.$(t.DISCRIMINATED_OFFERS_ENABLED).val():a.$(t.ATTACH_MARKETPLACE_ID).val()===C.IN};m.addBaseProduct=function(b,d){var c=f.createRequest(m.getAtcForm());c.isValid()?(c=c.execute(),c.then(function(a){a.response&&!a.error&&"function"===typeof b?b(a):a.error&&"function"===typeof d&&d(a)}),e.logCount(e.CSM_METRICS.ATTACH_BASE_ATC_CLICK),a.trigger("attach:add-base-to-cart",c)):m.submitATCForm()};m.submitATCForm=function(){var b=m.getAtcForm();m.isDiscriminatedOffersEnabled()&&k(b);e.logCount(e.CSM_METRICS.ATTACH_BASE_ATC_CLICK);
b=b.serializeArray();var d=m.buyButton.attr("name"),c=m.buyButton.val();b.push({name:d,value:c});b=a.$.param(b);b=a.$.ajax({type:"POST",url:"/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",data:b,headers:{Accept:"text/html,*/*"}});b.fail(function(a){e.logCount(e.CSM_METRICS.ATTACH_BASE_ATC_FAILURE);e.logError({message:"Base product ATC call failed: "+a.status})});a.trigger("attach:add-base-to-cart",b)};m.isWFMPage=function(){return a.$(t.ALM_BRAND_ID_SELECTOR).val()===t.ALM_WFM_BRAND_ID};
m.getAlmBrandId=function(){return a.$(t.ALM_BRAND_ID_SELECTOR).val()};m.getAtcForm=function(){return m.buyButton.closest("form")};m.isMTAEnabledForAttach=function(){return!1};m.getDeferredFromPromise=function(b){var d=a.$.Deferred();b.then(function(a){d.resolve(a)}).catch(function(a){d.reject(a)});return d.promise()};m.getPromiseFromDeferred=function(a){return new b(function(b,d){a.then(b).fail(d)})};m.bindEventToCallback=function(b,d,c){a.$(b).unbind(d,c);a.$(b).bind(d,c)};m.setupDesktopEgressButtons=
function(){m.bindEventToCallback(t.DSS_CART,"click",function(){e.logCount(e.CSM_METRICS.ATTACH_CART_CLICK)});m.bindEventToCallback(t.DSS_PROCEED,"click",function(){e.logCount(e.CSM_METRICS.ATTACH_CHECKOUT_CLICK);var a=q.PROCEED_TO_CHECKOUT;m.isWFMPage()&&m.isAttachEnabledForWFM&&m.getAlmBrandId()&&(a=q.ALM_PROCEED_TO_CHECKOUT+"?almBrandId\x3d"+m.getAlmBrandId());document.location=m.cartInitiateId?a+"\x26cartInitiateId\x3d"+m.cartInitiateId+"\x26ref_\x3ddp_atch_dss_proceed":a+"\x26ref_\x3ddp_atch_dss_proceed"})};
m.proceedToCart=function(a){r.location="string"===typeof a?q.PROCEED_TO_CART+"?ref_\x3d"+a:q.PROCEED_TO_CART};m.isPromise=function(b){return b&&a.$.isFunction(b.then)&&a.$.isFunction(b.catch)};return m});"use strict";q.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration","attach.utilities.focus-management").register("attach-desktop-warranty-pane",function(a,b,h,e,f,k,p){var n={name:"warranty"},c=n.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",
PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",BASE_ASIN:'input[name\x3d"items[0.base][asin]"], #ASIN',MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATC_QUANTITY:"#quantity",ATC_DEAL_QUANTITY:"#dealx_quantity_dropdown",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_WARRANTY_IMAGE:".attach-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",
PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_ADD_BUTTON_T1:".attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display",WARRANTY_CHECKBOX:".dssMbs__r input[type\x3dcheckbox]",WARRANTY_NOT_ADDED:"#attach-no-warranty-alert",WARRANTY_NOT_ADDED_T1:".attach-no-warranty-alert",WARRANTY_LEARN_MORE_HEADER:".attach-warranty-learn-more",WARRANTY_REVIEW_LINK:".warranty-review-link",
WARRANTY_POLICY_DOCUMENTS:".warranty-policy-documents",WARRANTY_DETAIL_PAGE_LINK:".warranty-detail-page-link",WARRANTY_BOX:".attach-warranty-box",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",PANE_ADD_BUTTON_LD_T1:".attachSiAddCoverage-ld",PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld"};n.getWarrantyLoggingPayload=function(){var e=a.$(c.ASIN).val(),d=a.$(c.PRICE_FORMATTED),h=a.$(c.PRICE_AMOUNT);return!f.servicesInterstitialDeprecated()&&b.elementExists(h)?{asin:e,priceFormatted:d.text().trim(),
priceDecimal:parseFloat(h.val())||null,currencySymbol:a.$(c.BASE_CURRENCY_SYMBOL).val()||null}:{asin:e,priceFormatted:d.text().trim(),priceDecimal:null,currencySymbol:null}};n.appendWarrantyToATCForm=function(m,d){if(a.$(c.BASE_ASIN).val()&&m&&d){var h=b.getAtcForm();h.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var k=1;f.isWarrantyTwisterPlusDesktopEnabled()&&(k+=1);k=h.find("input[name^\x3d'offeringID']").length+
k;var n=a.$(c.ATC_QUANTITY).val()||1,g="quantity."+k,p="asin."+k;h.find('input[name\x3d"'+g+'"]').remove();h.find('input[name\x3d"'+p+'"]').remove();h.append('\x3cinput type\x3d"hidden" id\x3d"'+g+'" name\x3d"'+g+'" value\x3d"'+n+'" class\x3d"attach-warranty-input" /\x3e');h.append('\x3cinput type\x3d"hidden" id\x3d"'+p+'" name\x3d"'+p+'" value\x3d"'+m+'" class\x3d"attach-warranty-input" /\x3e');h.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+k+'" name\x3d"offeringID.'+k+'" value\x3d"'+d+
'" class\x3d"attach-warranty-input"/\x3e');h.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][quantity]" value\x3d"'+n+'" class\x3d"attach-warranty-input" /\x3e');h.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][asin]" value\x3d"'+m+'" class\x3d"attach-warranty-input" /\x3e');h.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][offerListingId]" value\x3d"'+d+'" class\x3d"attach-warranty-input" /\x3e');m=h.find('input[name\x3d"itemCount"]');0===m.length?h.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+
k+'"\x3e'):m[0].value=k;a.$("#atch__bl").length&&e.createBaseLinkFormFields(k+1,h)}};n.clearWarrantyFromATCForm=function(){b.getAtcForm().find(c.ATC_WARRANTY).remove()};n.load=function(e){if(f.servicesInterstitialDeprecated()){if(b.elementExists(c.PANE))a.$(c.PANE).removeClass("aok-hidden");else return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(b.selectedBaseLightningDeal)if(b.elementExists(c.PANE_LD))a.$(c.PANE+", "+c.PANE_LD).toggleClass("aok-hidden");
else return b.reject(b.FailureModes.UNBIND_ATC);b.elementExists(c.PANE_EXPERIMENT_DISPLAY)&&a.$(c.PANE_EXPERIMENT_DISPLAY).remove()}else{if(b.elementExists(c.JSON_DATA)){var d=b.unescapeJson(a.$(c.JSON_DATA).val());d=JSON.parse(d)}return d?n.renderClientSide(e,d):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})}};n.renderClientSide=function(b,d){var c="",e=d.baseASIN,f="dp_atch_dss_w_lm_"+e+"_"+d.asin,g="dp_atch_dss_w_r_"+e+"_"+d.asin;e="dp_atch_dss_w_lm_"+e+"_"+
d.asin;var m=a.$("#stringTranslation-si-warranty-title").val(),h=a.$("#stringTranslation-si-accident-protection").val(),k=a.$("#stringTranslation-si-from").val(),n=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),l=a.$("#stringTranslation-item-added-to-cart").val(),p=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),u=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),y=a.$("#stringTranslation-si-add-coverage").val(),E=a.$("#stringTranslation-si-no-thanks").val(),
F=a.$("#stringTranslation-services-bundle-detail-link").val();c+='   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+d.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+m+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n';
null!==d.thumbImage&&(c+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+d.thumbImage+'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');c+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
d.asin+"/ref\x3d"+f+'"\x3e\n                        \x3cstrong\x3e'+(null!==d.displayTitle?d.displayTitle:h.replace("${brandName}",d.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+k+" "+d.merchantName+"\x3c/span\x3e\n";Number(d.averageRating)&&Number(d.numReviews)&&Number(d.numFullStars)&&"boolean"===typeof d.hasHalfStar&&(f=n.replace("${averageRating}",d.averageRating),c+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+
d.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+d.numFullStars+(d.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+f+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+d.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+d.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");
null!==d.buyingPriceAmount&&(c+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+d.buyingPriceAmount+'"\x3e\n');c+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+d.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(g=0;g<d.bulletPoints.length;g++)c+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+d.bulletPoints[g].text+"\x3c/span\x3e\x3c/li\x3e\n";c+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
l+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
p+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+u+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
d.asin+'" data-offering-id\x3d"'+d.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+y+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
E+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
d.asin+"/ref\x3d"+e+'"\x3e\n                '+F+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";b.$container.append(c)};n.onAttachAddBaseToCart=function(a){b.isPromise(a)?a.finally(n.clearWarrantyFromATCForm):a.always(n.clearWarrantyFromATCForm)};n.closeSheetAndSubmitForm=function(){if(f.isDssMbsEnhancementEnabled()){var e=a.$(c.WARRANTY_CHECKBOX+":checked").get(0),d=b.getInputValueByNameAndIndex("asin",e.name);e=b.getInputValueByNameAndIndex("warrantyPrice",e.name);h.logWarrantyAddToCart(h.getWarrantyPayload(d,
e))}else h.logWarrantyAddToCart(n.getWarrantyLoggingPayload());f.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.addBaseProduct(function(a){"add-items.incomplete-add.error/v1"===a.response.type?h.logCount(h.CSM_METRICS.WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_INCOMPLETE):h.logCount(h.CSM_METRICS.WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_SUCCESS)},function(){h.logCount(h.CSM_METRICS.WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_FAILURE)});n.sheet.next()};n.setSelectedWarrantyOptionDataOnATCForm=function(){var e=
a.$(c.WARRANTY_CHECKBOX+":checked").get(0);if(e){var d=e.name;e=b.getInputValueByNameAndIndex("asin",d);d=b.getInputValueByNameAndIndex("offerId",d);n.appendWarrantyToATCForm(e,d);n.closeSheetAndSubmitForm()}else f.isLdDssMbsEnhancementEnabled()?a.$(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED).show()};n.setSelectedWarrantyOptionDataOnATCFormEU=function(e){var d=e.find(".a-button-input").attr("name"),h=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);h&&d==h.name?(d=h.name,e=b.getInputValueByNameAndIndex("asin",
d),d=b.getInputValueByNameAndIndex("offerId",d),n.appendWarrantyToATCForm(e,d),n.closeSheetAndSubmitForm()):f.isLdDssMbsEnhancementEnabled()?e.closest(c.WARRANTY_BOX).find(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED+"-"+d).show()};n.setup=function(m){n.sheet=m;a.$(c.PANE).hide();if(f.isDssMbsEnhancementEnabled())a.loadImageManually(a.$(c.PANE_WARRANTY_IMAGE).filter("[data-a-image-source]")),a.$("div[id^\x3dattach-no-warranty-alert-]").hide(),a.$(c.WARRANTY_NOT_ADDED).hide(),a.$(c.WARRANTY_NOT_ADDED_T1).hide(),
a.$(c.PANE_LD).find(c.WARRANTY_CHECKBOX).prop("checked",!1),a.$(c.PANE).find(c.WARRANTY_CHECKBOX).prop("checked",!1);else{var d=a.$(c.PANE_IMAGE).attr("data-image-url");a.$(c.PANE_IMAGE).attr("src",d)}f.isDssMbsEuComplianceActive()&&f.isDssMbsEnhancementEnabled()?a.$(c.PANE_ADD_BUTTON_T1).click(function(){n.setSelectedWarrantyOptionDataOnATCFormEU(a.$(this))}):a.$(c.PANE_ADD_BUTTON).click(function(){if(f.isDssMbsEnhancementEnabled())n.setSelectedWarrantyOptionDataOnATCForm();else{var b=a.$(this).find("button");
f.servicesInterstitialDeprecated()&&(b=a.$(this).find("[data-asin]"));var d=b.attr("data-asin");b=b.attr("data-offering-id");n.appendWarrantyToATCForm(d,b);n.closeSheetAndSubmitForm()}});f.isDssMbsEnhancementEnabled()&&(a.$(c.WARRANTY_CHECKBOX).change(function(d){var e=this;d="cn";var f=e.name,g=a.$(this).closest(c.WARRANTY_BOX).find("input[name\x3d'asin."+f+"']").val();e.checked&&(d="cy",a.$(c.WARRANTY_NOT_ADDED).hide(),a.$(c.WARRANTY_NOT_ADDED_T1).hide(),a.$("div[id^\x3dattach-no-warranty-alert-]").hide(),
a.$(b.selectedBaseLightningDeal?c.PANE_LD:c.PANE).find(c.WARRANTY_CHECKBOX).each(function(b){e!==this&&a.$(this).prop("checked",!1)}));h.logWarrantyWidgetInteraction({index:f,asin:g,action:d})}),a.$(c.WARRANTY_LEARN_MORE_HEADER).click(function(){h.logWarrantyInteractionData("LEARN_MORE_CLICK",this)}),a.$(c.WARRANTY_REVIEW_LINK).click(function(){h.logWarrantyInteractionData("REVIEW_CLICK",this)}),a.$(c.WARRANTY_DETAIL_PAGE_LINK).click(function(){h.logWarrantyInteractionData("DETAIL_PAGE_LINK_CLICK",
this)}),a.$(c.WARRANTY_POLICY_DOCUMENTS).click(function(){h.logWarrantyInteractionData("POLICY_DOCUMENTS_CLICK",this)}));a.$(c.PANE_NO_BUTTON).click(function(){f.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.addBaseProduct();m.next()});f.isDssMbsEuComplianceActive()&&f.isDssMbsEnhancementEnabled()?a.$(c.PANE_ADD_BUTTON_LD_T1).click(function(){var b=function(b){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);q.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});
b=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);a.$(b).closest(c.WARRANTY_BOX).find("img.attach-warranty-image").clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");m.next()},d=function(a){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);m.next()},k=a.$(this).find(".a-button-input").attr("name"),g=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);if(g&&g.name==k){var n=a.$(g).closest(c.WARRANTY_BOX);k=n.find("input[name\x3d'asin."+g.name+
"']").val();g=n.find("input[name\x3d'offerId."+g.name+"']").val();g={warrantyAsin:k,offeringId:g,addWarranty:1,quantity:a.$(c.ATC_DEAL_QUANTITY).val()||1};g.baseItemAsin=a.$(c.BASE_ASIN).val();e.addLinkedWarranty(g,b,d)}else f.isLdDssMbsEnhancementEnabled()?a.$(this).closest(c.WARRANTY_BOX).find(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED+"-"+k).show()}):a.$(c.PANE_ADD_BUTTON_LD).click(function(){var b=function(b){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);q.when("EWC").execute("attach-everywhere-cart",
function(a){a.refresh()});f.isDssMbsEnhancementEnabled()?(b=a.$(c.WARRANTY_CHECKBOX+":checked").get(0),b=a.$(b).closest(c.WARRANTY_BOX).find("img.attach-warranty-image")):b=a.$("#attach-sheet-warranty-image");b.clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");m.next()},d=function(a){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);m.next()};if(f.isDssMbsEnhancementEnabled()){var k=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);if(k){var g=
a.$(k).closest(c.WARRANTY_BOX),n=g.find("input[name\x3d'asin."+k.name+"']").val();k=g.find("input[name\x3d'offerId."+k.name+"']").val();n={warrantyAsin:n,offeringId:k,addWarranty:1,quantity:a.$(c.ATC_DEAL_QUANTITY).val()||1};n.baseItemAsin=a.$(c.BASE_ASIN).val();e.addLinkedWarranty(n,b,d)}else f.isLdDssMbsEnhancementEnabled()?a.$(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED).show()}else n=a.$(c.PANE_ADD_BUTTON_LD).find("input"),n={warrantyAsin:n.attr("data-asin"),offeringId:n.attr("data-offering-id"),
addWarranty:1,quantity:a.$(c.ATC_DEAL_QUANTITY).val()||1},n.baseItemAsin=a.$(c.BASE_ASIN).val(),e.addLinkedWarranty(n,b,d)});a.$(c.PANE_NO_BUTTON_LD).click(function(){m.next()});a.off("attach:add-base-to-cart",n.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",n.onAttachAddBaseToCart)};n.show=function(){b.selectedBaseLightningDeal?b.selectedBaseLightningDeal&&a.$(c.PANE_LD).show():a.$(c.PANE).removeClass("aok-hidden");a.$(c.PANE).fadeIn(400,n.setFocus);f.isDssMbsEnhancementEnabled()?b.selectedBaseLightningDeal?
a.$(c.PANE_LD).find(c.WARRANTY_CHECKBOX).each(function(b){var d=a.$(this).closest(c.WARRANTY_BOX),e=d.find("input[name\x3d'asin."+b+"']").val();b=d.find("input[name\x3d'warrantyPrice."+b+"']").val();h.logWarrantyImpression(h.getWarrantyPayload(e,b))}):a.$(c.PANE).find(c.WARRANTY_CHECKBOX).each(function(){var a=b.getInputValueByNameAndIndex("asin",this.name),d=b.getInputValueByNameAndIndex("warrantyPrice",this.name);h.logWarrantyImpression(h.getWarrantyPayload(a,d))}):h.logWarrantyImpression(n.getWarrantyLoggingPayload());
a.$(c.PANE).find("h1").first().attr("id","attach-warranty-header");n.sheet&&n.sheet.$container&&n.sheet.$container.attr("aria-labelledby","attach-warranty-header")};n.hide=function(){a.$(c.PANE+", "+c.PANE_LD).fadeOut()};n.setFocus=function(){p.focusDescendant(a.$(c.PANE).get(0),"first");p.focusDescendant(a.$(c.PANE_LD).get(0),"first")};return n});"use strict";q.when("A","attach-common","attach-weblabs","attach-logging","attach-variant-registration","attach.utilities.focus-management","attach.amazonapi.client",
"attach.amazonapi.cart.add-items","attach.amazonapi.cart.summary","attach.amazonapi.deals.claim-and-add-to-cart","attach.amazonapi.products.productV2","attach.amazonapi.products.media-builder","attach.utilities.strings").register("attach-desktop-accessories-pane",function(a,b,h,e,f,k,p,n,c,m,d,C,t){function D(b){b=a.$('\x3cdiv class\x3d"a-alert-content"\x3e\x3c/div\x3e').append(b);var d=a.$('\x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e');b=a.$('\x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\x3c/div\x3e').append(d).append(b);
b=a.$('\x3cdiv class\x3d"a-box a-alert a-alert-error" role\x3d"alert"\x3e\x3c/div\x3e').append(b);return a.$('\x3cdiv class\x3d"attach-sidesheet-card attach-add-to-cart-message-card aok-hidden"\x3e\x3c/div\x3e').append(b)}var g={name:"accessories"},x=!0,B,z=!1;g.isEmptyAccessoryList=!1;var A=g.Endpoints={RENDER:"/gp/product/ajax?experienceId\x3dattach"},l=g.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",
ALM_ATC_BUTTON:".primary-VUZHIFdob2xlIEZvb2Rz-btn",PANE:"#attach-accessory-pane",PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",
PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE:"#attach-cart-description-failure",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",
PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:"#attach-string-cart-subtotal-single",PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE:"#attach-string-cart-subtotal-multiple",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:"#attach-string-cart-ptc-button-single",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE:"#attach-string-cart-ptc-button-multiple",PANE_CART_GENERIC_ERROR_MESSAGE:"#attach-string-cart-generic-error",PANE_CART_TRY_AGAIN_MESSAGE:"#attach-string-cart-try-again",
PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",
PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",
PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",
PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",
DEAL_QUANTITY:"#dealx_quantity_dropdown",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},v=g.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};g.load=function(d){q.now("attach-external-atc-interceptor").execute(function(a){B=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var c=a.$.Deferred();q.now("dp-util-cookie").execute(function(d){d&&d("session-id")!==a.$("#attach-sessionId").val()&&b.rejectPromise(c,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID",
information:"Unexpected session ID received; expected "+a.$("#attach-sessionId").val()+" but cookie value was "+d("session-id")})});var e={asin:a.$(l.BASE_ASIN).val()};b.isWFMPage()&&h.isAttachEnabledForWFM()&&(e.fpw="alm",e.almBrandId=b.getAlmBrandId());e=a.$.get(A.RENDER,e);a.$.when(e).done(function(e){var u=a.$(e.trim()),f=!u.is(l.PANE);g.isEmptyAccessoryList=0===u.find(l.PANE_ACCESSORY_ASIN).length;f||g.isEmptyAccessoryList?b.rejectPromise(c,b.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE",
"ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"],information:"Failed to render DSS: isPaneMissing\x3d"+f+" isEmptyAccessoryList\x3d"+g.isEmptyAccessoryList}):(d.$container.append(a.$(e).get(0)),c.resolve())}).fail(function(){b.rejectPromise(c,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE",information:"Failed to render DSS: network request failed"})});return c.promise()};g.onAttachAddBaseToCart=function(a){x=!1;b.isPromise(a)||(a=b.getPromiseFromDeferred(a));a.then(g.handleAddBaseAndGetCartDescription).catch(function(a){q.logError(a,
"Base product add to cart failed: ","ERROR","attach-desktop-accessories-pane");g.sheet.fail(b.FailureModes.ERROR_500)})};g.runOnceSetup=function(){z||(z=!0,a.declarative("attach-accessory-add","click",function(b){var d=b.$currentTarget,c=b.data,u=c.a,f=c.oid,h=c.isLightningDeal;c=c.isPEDOTD;e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);e.beginLatencyCapture(e.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);b=!0===a.$(l.PANE_CATEGORIZED_ACCESSORIES_CARD).data(l.PANE__DATA_CATEGORY_VIEW)?a.$(b.$target).data(l.PANE__DATA_ASIN_INDEX):
a.$(l.PANE_ACCESSORY_ADD_DECLARATIVES).index(d);h||c?g.addAccessoryToCartWithDeal(b,u,h):g.addAccessoryToCart(u,f,b)}))};g.setup=function(d){g.runOnceSetup();a.$(l.PANE).hide();g.sheet=d;a.off("attach:add-base-to-cart",g.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",g.onAttachAddBaseToCart);b.setupDesktopEgressButtons();a.$(l.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var b=a.$(this).attr("data-asin"),d=a.$(this).attr("data-oid"),c=a.$(this).attr("data-idx");g.addAccessoryToCart(b,d,c)});
a.$(l.PANE).find(l.PANE_CLOSE_BUTTON).appendTo(l.PANE_CART_BLOCK);a.$(l.PANE_CLOSE_BUTTON).click(d.next);a.$(l.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});h.isShowAccessoryCouponsDssEnabled()&&g.initializeCoupons();a.$(l.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var b=a.$(this).data().idx;g.updateLightningDealTimer(b);g.initializeLightningDealStatusRefresher(b)});0===a.$(l.PANE_CART_GENERIC_ERROR_MESSAGE).length&&a.$(l.PANE_CART_BLOCK).append(a.$("\x3cspan\x3e\x3c/span\x3e").attr("id",
"attach-string-cart-generic-error").addClass("aok-hidden").text(a.$(".attach_add_accessory_alert.a-alert-inline-error .a-alert-content span").first().text()));0===a.$(l.PANE_CART_TRY_AGAIN_MESSAGE).length&&a.$(l.PANE_CART_BLOCK).append(a.$("\x3cspan\x3e\x3c/span\x3e").attr("id","attach-string-cart-try-again").addClass("aok-hidden").text(a.$(".attach_add_accessory_alert.a-alert-inline-error .attach-add-to-cart-retry").first().text()))};g.show=function(){b.selectedBaseLightningDeal||b.isWFMPage()||
!x||b.addBaseProduct(function(a){a.request.isWarrantyAddedWithBase()&&("add-items.incomplete-add.error/v1"===a.response.type?e.logCount(e.CSM_METRICS.WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_INCOMPLETE):e.logCount(e.CSM_METRICS.WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_SUCCESS))},function(a){a.request.isWarrantyAddedWithBase()&&e.logCount(e.CSM_METRICS.WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_FAILURE)});a.$(l.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear");if(b.selectedBaseLightningDeal)a.$(l.PANE_CART_BLOCK).addClass("aok-hidden"),
a.$("#attach-accessory-pane").css("height",a.$(r).height()-161);else{var d=a.$(l.PANE_CART_BLOCK_INNER);d.find("div").addClass("aok-hidden");d.append(a.$(l.PANE_CART_SPINNER).removeClass("aok-hidden"))}g.initializeAccessoriesDisplay();q.now("attach-categorized-cards").execute(function(a){a!==w&&a.initializeCategorizedCards()})};g.hide=function(){a.$(l.PANE).hide();a.$(l.PANE_CART_SPINNER).addClass("aok-hidden");a.$(l.PANE).find(l.ALM_ATC_BUTTON).removeClass("a-button-focus");a.$(l.PANE_HUC_MESSAGE).remove();
a.$(l.PANE_ACCESSORY_ASIN).each(function(b,d){(d=a.$(d).data(l.PANE__DATA_ASIN_INDEX))&&(b=d);g.updateAccessoryStatus(b,v.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");B&&B.unloadAttachModule();a.trigger("aloha:detailPage:reappear");x=!0};g.updateNavCartDisplayQuantity=function(b){var d=Number(b);b=isNaN(d)?"":100>d?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===d).toggleClass("nav-cart-1",1<=d&&10>d).toggleClass("nav-cart-10",10<=d&&20>d).toggleClass("nav-cart-20",20<=d&&
100>d).toggleClass("nav-cart-100",100<=d).text(b)};g.createCartSubtotalLabelString=function(b){var d=a.$(1==b?l.PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:l.PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE).val();return t.substituteParameters(d,{quantity:b})};g.createProceedToCheckoutString=function(b){var d=a.$(1==b?l.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:l.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE).val();return t.substituteParameters(d,{quantity:b})};g.updateCartSummary=function(){return c.get([c.CART_TYPE_RETAIL]).then(g.handleCartDescription).catch(g.handleCartDescriptionError)};
g.updateALMCartSummary=function(){c.get([c.CART_TYPE_LOCAL_MARKET]).then(g.handleCartDescription).catch(g.handleCartDescriptionError)};g.handleAddBaseAndGetCartDescription=function(b){e.logCount(e.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);b.request?g.renderBaseProductStatus(b):(b=a.$(b),b.find("#sw-atc-confirmation").length?(g.renderFallbackSmartWagonFeedback(b),g.renderFallbackSmartWagonBaseAddStatusIcon(b)):(g.renderHUCFeedback(b),g.renderBaseAddStatusIcon(b)));if(B)try{var d=a.$(l.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();
B.loadAttachModule(d)}catch(E){q.logError(E,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}g.sheet.$container.attr("aria-labelledby","attachDisplayAddBaseAlert");k.focusDescendant(a.$(l.PANE).get(0),"first");return g.updateCartSummary()};g.handleCartDescription=function(d){var u=d.entity.summary[0]||c.EMPTY_CART_RETAIL,f=u.itemCount;u=p.formatMoney(u.subtotal);var k=g.createCartSubtotalLabelString(f),m=g.createProceedToCheckoutString(f);g.updateNavCartDisplayQuantity(f);
a.$(l.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(k);a.$(l.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(u);a.$(l.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(m);a.$(l.PANE_CHECKOUT_BUTTON).removeClass("aok-hidden");a.$(l.PANE_VIEW_CART_BUTTON).removeClass("a-button-primary");a.$("#attach-customerId").val()&&q.when("attach-preinitiate-checkout").execute(function(a){b.cartInitiateId=a.getCartInitiateId();a.preinitiateCheckout(b.cartInitiateId)});b.isAttachEnabledForWFM=h.isAttachEnabledForWFM();b.selectedBaseLightningDeal||
(a.$(l.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(l.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(l.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).addClass("aok-hidden"));a.delay(g.revealIMBMessages,200);q.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});e.logCount(e.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);return d};g.handleCartDescriptionError=function(d){q.logError(d,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");
e.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE");b.selectedBaseLightningDeal||(a.$(l.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(l.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(l.PANE_CART_BLOCK_SUBTOTAL_LABEL).empty(),a.$(l.PANE_CART_BLOCK_SUBTOTAL_PRICE).empty(),a.$(l.PANE_CHECKOUT_BUTTON).addClass("aok-hidden"),a.$(l.PANE_VIEW_CART_BUTTON).addClass("a-button-primary"),a.$(l.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).removeClass("aok-hidden"))};g.updateAccessoryStatus=
function(b,d){a.$(l.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).toggleClass("aok-hidden",d!==v.INITIAL);a.$(l.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).toggleClass("aok-hidden",d!==v.ADDING);a.$(l.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).toggleClass("aok-hidden",d!==v.SUCCESS);a.$(l.PANE_ACCESSORY_ADD_ERROR_PREFIX+b).toggleClass("aok-hidden",d!==v.ERROR);a.$("#tile-add-accessory-badge-"+b).toggleClass("aok-hidden",d!==v.SUCCESS);a.$("#attach-accessory-tile-"+b).toggleClass("in-cart",d===v.SUCCESS);b=a.$("#attach-accessory-asin-"+
(b+1)).parent();k.focusDescendant(b.get(0),"first")};g.addAccessoryToCart=function(d,c,f){g.updateAccessoryStatus(f,v.ADDING);var u=a.$(l.BASE_ASIN).val(),h=(b.selectedBaseLightningDeal?parseInt(a.$(l.DEAL_QUANTITY).val()):parseInt(a.$(l.QUANTITY).val()))||1,k=w;b.isDiscriminatedOffersEnabled()&&(k={itemAssociation:{programType:"Attach",renderType:"renderAll",associatedItemId:u,deleteConstraint:{mutuallyInclusive:!1}}});n.addItems([{asin:d,offerListingId:c,quantity:h,additionalParameters:k}],"dp_atch_dss_atc_ce").then(function(a){if(a.type===
n.RESPONSE_TYPE_SUCCESS)return g.updateCartSummary();q.logError(Error(a.entity.details.message),"Could not add accessory via AmazonAPI ("+d+"):","ERROR","attach-desktop-accessories-pane");throw a.entity.details.message;}).then(function(b){g.updateAccessoryStatus(f,v.SUCCESS);e.logAccessoryAddToCart(g.getAccessoryLoggingData(f));e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",f);q.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()})}).catch(function(){e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);
g.updateAccessoryStatus(f,v.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",f)})};g.addAccessoryToCartWithDeal=function(d,c,f){g.updateAccessoryStatus(d,v.ADDING);var u=a.$("#attach-accessory-claim-deal-url-"+d).val();u=g.getDealId(u);m.claimAndAddDeal(u,c,"dp_atch_dss_atc_ce").then(function(c){var u=c.entity;c=u.customerState;if(!0!==u.claimed&&"INWAITLIST"!==c)return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===c?a.$(l.PANE_ACCESSORY_ADD_SPINNER_PREFIX+d).addClass("aok-hidden"):
g.updateAccessoryStatus(d,v.SUCCESS);e.logAccessoryAddToCart(g.getAccessoryLoggingData(d));e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);f&&(u=u.msUntilExpiration,g.handleLightningDealAddToCart(d,u?u:900,c));a.trigger("UPSELL_ASIN_ADDED_TO_CART",d);q.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});g.updateCartSummary()}).catch(function(){e.logCount(e.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);g.updateAccessoryStatus(d,v.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",d)})};
g.getDealId=function(a){return(a=a.match(/\/api\/marketplaces\/\w+\/deals\/(.*?)\/claim-and-add-to-cart/))?a[1]:w};g.revealIMBMessages=function(){var b=a.$(l.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",top:0}).removeClass("aok-hidden");var d=b.children().height();0<d&&b.css({marginTop:-1*(d+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}};g.renderHUCFeedback=function(d){var c=d.find("#hlb-ship-message");d=a.$().add(d.find("#huc-v2-message-group")).add(d.find("#hlb-imb"));
h.isCoreFreeShippingMessageEnabled()&&b.elementExists(c)&&a.$(l.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(c.html());0<d.length&&(c=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),c.append(d),c.insertAfter(l.PANE_CART_BLOCK),c.find(".a-declarative a").unwrap(),c.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),c.find(".sc-action-quantity").hide(),(c=d.find(".a-alert-heading").text())&&e.logDSSWarningMessage(c))};
g.renderBaseAddStatusIcon=function(d){var c;b.elementExists(d.find("#huc-v2-order-row-confirm-text"))?c=d.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):b.elementExists(d.find("#hl-confirm-text"))&&(c=d.find("#hl-confirm-text").hasClass("a-alert-warning"));c=(c?a.$(l.PANE_CART_BASE_ERROR_ALERT):a.$(l.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(l.PANE_CART_BASE_ALERT).remove();a.$(l.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(c);c=d.find(".huc-v2-order-row-image").clone();
b.elementExists(c)||(c=d.find(".hlb-product-image").clone());if(1<c.length){c=c.first();var e=a.$('input[name^\x3d"asin"].attach-warranty-input');0===e.length&&(e=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(b.elementExists(e))for(var f=0;f<e.length;f++){var g=e[f].value,u=d.find("#huc-v2-order-row-item-"+g);if(u.length){d=b.elementExists(u)?u.find(".huc-v2-order-row-image"):d.find(".hlb-item-link.hlb-asin-"+g+" \x3e img");c=c.add(d.clone());break}}}a.$(l.PANE_CART_BASE_HUC_IMAGE).remove();
a.$(l.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(c);c.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};g.showAlmBaseAddToCartStatusIcon=function(b){b=(b?a.$(l.PANE_CART_BASE_ERROR_ALERT):a.$(l.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");b.removeClass("added-to-cart-message-box");b.addClass("alm-added-to-cart-message-box");a.$(l.PANE_CART_BASE_ALERT).remove();a.$(l.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(b)};g.renderFallbackSmartWagonFeedback=
function(b){b=b.find("#cart-important-message-box");if(0<b.length){var d=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e");d.append(b);d.find("#sc-important-message-alert").removeClass("a-spacing-medium-plus").addClass("a-spacing-mini");d.find(".sc-action-quantity").hide();d.insertAfter(l.PANE_CART_BLOCK)}};g.renderFallbackSmartWagonBaseAddStatusIcon=function(b){var d=b.find(".sw-atc-message").first().parent().clone();d.prop("id","attachDisplayAddBaseAlert");
d.addClass("sw-fallback");d.addClass("aok-hidden");a.$(l.PANE_CART_BASE_ALERT_IMAGE_AREA).empty();a.$(l.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);b.find("#add-to-cart-confirmation-image").find(".sc-product-image").clone().appendTo(l.PANE_CART_BASE_ALERT_IMAGE_AREA).wrap('\x3cdiv class\x3d"huc-image-wrapper aok-hidden sw-fallback"\x3e\x3c/div\x3e');b=b.find(".sw-atc-extra-item").clone().appendTo(l.PANE_CART_BASE_ALERT_IMAGE_AREA);b.addClass("aok-hidden sw-fallback");b.find(".sw-atc-item-no").prepend('\x3cspan class\x3d"a-size-small"\x3e+\x3c/span\x3e')};
g.renderBaseProductStatus=function(c){var f=c.response&&c.response.type===n.RESPONSE_TYPE_SUCCESS,h=c.response&&c.response.type===n.RESPONSE_TYPE_INCOMPLETE_ADD;h=!f&&!h;f=(f?a.$(l.PANE_CART_BASE_SUCCESS_ALERT):a.$(l.PANE_CART_BASE_ERROR_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(l.PANE_CART_BASE_ALERT).remove();a.$(l.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(f);if((f=c.response&&c.response.entity&&c.response.entity.details&&c.response.entity.details.message)||h){var u=a.$("\x3cdiv\x3e\x3c/div\x3e");
f?u.append(c.response.entity.details.message):u.append(a.$(l.PANE_CART_GENERIC_ERROR_MESSAGE).clone().removeClass("aok-hidden"));h&&u.append(a.$('\x3ca href\x3d"#"\x3e\x3c/a\x3e').click(function(a){a.preventDefault();e.logCount("ATTACH_DSS_BASE_PRODUCT_TRY_AGAIN_CLICKED");g.sheet.fail(b.FailureModes.RESUBMIT_BUY_BOX)}).append(a.$(l.PANE_CART_TRY_AGAIN_MESSAGE).clone().removeClass("aok-hidden")));D(u).insertAfter(l.PANE_CART_BLOCK);a.delay(g.revealIMBMessages,200)}f=c.response&&c.response.entity&&
c.response.entity.internalInfo&&c.response.entity.internalInfo.message;h&&e.logCount("ATTACH_DSS_BASE_PRODUCT_UNRECOVERABLE_FAILURE");f&&q.logError(Error(c.response.entity.internalInfo.message),"Error when trying to add the base product to cart: ","FATAL","attach-desktop-accessories-pane:renderBaseProductStatus");a.$(l.PANE_CART_BASE_HUC_IMAGE).remove();a.$(l.PANE_CART_BASE_INITIAL_IMAGE).hide();var k=a.$(l.PANE_CART_BASE_INITIAL_IMAGE).parent();c=c.request.getAsins();d.getProductsBatch(c,[d.RESOURCE_INCLUSIONS.PRODUCT_IMAGES]).then(function(b){b.entities&&
b.entities.forEach(function(b){if(b.type===d.RESPONSE_TYPE_SUCCESS){var c=b.entity;if(c&&c.productImages&&c.productImages.entity&&c.productImages.entity.images&&c.productImages.entity.images.length){var e=c.productImages.entity;b=e.altText;e=C.init(e.images[0].lowRes).scaleToSquare(60).build().url;c="/dp/"+c.asin;b=a.$("\x3cimg\x3e\x3c/img\x3e").attr("src",e).attr("alt",b);b=a.$("\x3ca\x3e\x3c/a\x3e").attr("href",c).append(b);b=a.$("\x3cdiv\x3e\x3c/div\x3e").addClass("huc-image-wrapper").append(b)}else b=
a.$();k.append(b)}})}).catch(function(a){q.logError(a,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");e.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE")})};g.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+
b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+
b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};g.createAccessoryImpressions=function(){var b=[];a.$(l.PANE_ACCESSORY_ASIN).parent().each(function(d,c){c=a.$(c);if(c.is(":hidden")||"hidden"===c.css("visibility")||c.prop("data-accessory-seen"))return null;c.prop("data-accessory-seen",!0);b.push(g.getAccessoryLoggingData(d))});return b};g.resetAccessoryImpressions=function(){a.$(l.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};g.initializeAccessoriesDisplay=
function(){g.initializeAccessoriesCards();g.initializeAccessoriesTiles();g.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){g.resetAccessoryImpressions();e.logAccessoryImpressions(g.createAccessoryImpressions())})};g.initializeAccessoriesCards=function(){a.$(l.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),d=b.find(l.PANE_ACCESSORY_CARD_SEE_MORE),c=b.find(l.PANE_ACCESSORY_CARD_SEE_LESS),f=b.find(l.PANE_ACCESSORY_CARD_EXPAND_CONTENT);d.show();c.hide();f.hide();b.removeProp("data-card-expanded");
b.removeProp("data-card-previously-expanded");d.click(function(){d.hide();c.show();f.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),e.logAccessoryImpressions(g.createAccessoryImpressions()));e.logCount(e.CSM_METRICS.ATTACH_SHOW_MORE)});c.click(function(){c.hide();d.show();f.slideUp(400);b.prop("data-card-expanded",!1);e.logCount(e.CSM_METRICS.ATTACH_SHOW_LESS)})})};
g.initializeAccessoriesTiles=function(){q.when("a-truncate").execute(function(b){a.$(l.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(l.PANE_ACCESSORY_TILE_ITEM).hover(function(){var d=a.$(this).find(l.PANE_ACCESSORY_TITLE);d.length&&b.get(d.get()).update()})});a.$(l.PANE_ACCESSORY_TILE_ITEM).attr("tabindex",0)};g.initializeCategorizedAccessoriesCards=function(){b.elementExists(l.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",
function(){e.logAccessoryImpressions(g.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){e.logAccessoryImpressions(g.createAccessoryImpressions())}))};g.initializeAccessoriesCarousel=function(){q.when("a-truncate","a-carousel-framework").execute(function(b,d){if(a.$(l.PANE_ACCESSORY_CAROUSEL).length){a.$(l.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});d.createAll();var c=d.getCarousel(a.$(l.PANE_ACCESSORY_CAROUSEL));c&&(c.attachViewedPages=
[1],c.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=c.getAttr("pageNumber"),-1===c.attachViewedPages.indexOf(a)&&(c.attachViewedPages.push(a),e.logAccessoryImpressions(g.createAccessoryImpressions())))}))}})};g.initializeCoupons=function(){var b;a.$(l.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",g.handleCouponPopoverPositionUpdated);
a.on("a:popover:beforeShow:attach-coupon-popover",function(d){d.popover.$trigger.parents(l.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=g.createCouponPopoverPositionHandler(d);a.$(r).bind("scroll",b);a.$(l.PANE+" \x3e .a-scroller").bind("scroll",b)});a.on("a:popover:afterHide:attach-coupon-popover",function(d){d.popover.$trigger.parents(l.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(r).unbind("scroll",b);a.$(l.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox",
"change",function(b){var d=b.data,c=b.$currentTarget.parents(l.PANE_ACCESSORY_COUPON);d&&d.ajaxClaimUrl?a.$.get(d.ajaxClaimUrl).done(function(){g.handleCouponClaimSuccess(c,d.accessoryItemIndex)}).fail(function(a,b,d){q.logError(Error(d),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");g.handleCouponClaimError(c)}):(q.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),g.handleCouponClaimError(c))})};g.handleCouponPopoverPositionUpdated=
function(a){a.popover.$container.css("z-index",6E3)};g.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};g.handleCouponClaimSuccess=function(a,b){e.logPromotionClaimed(g.getAccessoryLoggingData(b-1));a.find(l.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(l.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(l.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(l.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),
a.find(l.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};g.handleCouponClaimError=function(a){a.find(l.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(l.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(l.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};g.updateLightningDealTimer=function(b){var d=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(d);var c=g.convertTimeLeftToString(d);
a.$("#attach-accessory-deal-timer-string-"+b).text(c);0===d?g.handleDealHasEnded(b):setTimeout(g.updateLightningDealTimer,1E3,b)};g.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),d=Math.floor(a/60)%60;a%=60;return 0>=b?g.appendZeroIfSingleDigit(d)+":"+g.appendZeroIfSingleDigit(a):b+":"+g.appendZeroIfSingleDigit(d)+":"+g.appendZeroIfSingleDigit(a)};g.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};g.handleDealHasEnded=function(b){a.$(l.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&
(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};g.updateLightningDealTimeToCheckoutTimer=function(b){var d=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(d);var c=g.convertTimeLeftToString(d);a.$("#attach-accessory-time-to-checkout-string-"+b).text(c);0===d?(a.$("#attach-accessory-ld-in-cart-details-"+
b).addClass("aok-hidden"),a.$(l.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(l.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(g.updateLightningDealTimeToCheckoutTimer,1E3,b)};g.handleLightningDealAddToCart=function(b,d,c){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===c?a.$("#attach-accessory-deal-on-waitlist-"+
b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(d/1E3),g.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+b).removeClass("aok-hidden"))};g.initializeLightningDealStatusRefresher=function(b){if(a.$("#attach-accessory-deal-has-ended-"+b).hasClass("aok-hidden")){var d=a.$("#attach-accessory-claim-deal-url-"+b).val(),c=g.getDealId(d);c!==w&&(d=[{dealID:c}],d=
JSON.stringify({requestMetadata:{marketplaceID:a.$(l.MARKETPLACE_ID).val(),clientID:"DetailPageAttachAssets",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:d,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:d,success:function(a){a=a.dealStatus[c];var d=Number.MAX_VALUE;a&&g.updateLightningDealInfo(b,a.dealState,a.percentClaimed)&&
setTimeout(g.initializeLightningDealStatusRefresher,d<a.msCacheTtl?d:3E4,b)}}))}};g.updateLightningDealInfo=function(b,d,c){if("AVAILABLE"!==d&&"WAITLIST"!==d)return g.handleDealHasEnded(b),!1;var e=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===d?e.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===d&&e.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(c);a.$("#attach-accessory-deal-progress-bar-width-"+
b).width(c+"%");return!0};return g});"use strict";q.when("A","attach-logging","attach-common","attach-weblabs","attach.utilities.focus-management").register("attach-desktop-side-sheet",function(a,b,h,e,f){var k={},p=[],n=-1,c,m,d,q,t,D,g=null,x=null,B=null,z=!1,A=null,l="false",v="auto",u=null,y=k.Selectors={PAGE_BACKGROUND:"#a-page",PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",MODAL_LAYER:".attach-dss-modal-layer",LIGHTBOX:"#attach-popover-lgtbox",WARRANTY_BOX:".attach-warranty-box",
WARRANTY_MONTHLY:"#attach-monthly-warranty",WARRANTY_MULTI_DEVICE:"#attach-warranty-multi-device-container"};k.transitionDuration=500;k.onKeyDown=function(a){27===a.which&&k.next()};k.initialize=function(){p=[];h.elementExists(y.MODAL_LAYER)?q=a.$(y.MODAL_LAYER):(q=a.$("\x3cdiv class\x3d'attach-dss-modal-layer'\x3e\x3c/div\x3e"),q.hide(),q.appendTo(document.body));h.elementExists(y.SHEET)?k.$container=a.$(y.SHEET):(k.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),
k.$container.addClass("aok-hidden"),k.$container.appendTo(y.PLACEHOLDER));g=k.$container.parent();h.elementExists(y.LIGHTBOX)||(t=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'attach-dss-backdrop'\x3e\x3c/div\x3e"),t.hide(),t.appendTo(q),t.click(k.next));a.$(document).unbind("keydown",k.onKeyDown);a.$(document).keydown(k.onKeyDown);c=function(){};m=function(){};d=!0};k.setFailureHandler=function(a){c=a};k.setCloseHandler=function(a){m=a};k.fail=function(a,b){c(a,b)};k.addPane=function(a){p.push(a)};
k.removePane=function(a){a=p.indexOf(a);-1<a&&p.splice(a,1)};k.hideMultiQuantityMonthlyWarranties=function(b){var d=h.selectedBaseLightningDeal?a.$("#attach-warranty-pane-ld "+y.WARRANTY_BOX):a.$("#attach-warranty-pane "+y.WARRANTY_BOX),c=d.has("[id\x3dattach-monthly-warranty]");a.$(y.WARRANTY_MULTI_DEVICE).addClass("aok-hidden");c.addClass("aok-hidden");c.length===d.length&&k.removePane(b)};k.showMonthlyWarranties=function(){var b=(h.selectedBaseLightningDeal?a.$("#attach-warranty-pane-ld "+y.WARRANTY_BOX):
a.$("#attach-warranty-pane "+y.WARRANTY_BOX)).has("[id\x3dattach-monthly-warranty]");a.$(y.WARRANTY_MULTI_DEVICE).removeClass("aok-hidden");b.removeClass("aok-hidden")};k.getPaneIndex=function(a){return p.indexOf(a)};k.insertPane=function(a,b){b===w&&(b=p.length);p.splice(b,0,a);d=!0};k.hasPane=function(a){return-1<k.getPaneIndex(a)};k.next=function(){if(n+1===p.length){t.hide();k.$container.animate({right:D},{duration:k.transitionDuration,complete:function(){var a=p[n];a&&a.hide?a.hide():b.logError("Unable to hide current pane. Index: "+
n);n=-1;m();q.hide();u.focus();k.$container.appendTo(g)}});r.ue&&r.ue.count&&r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1);var d=a.$(y.PAGE_BACKGROUND).get(0);document.body.style.overflow=v;d.ariaHidden=l;x.remove();B.remove();a.$("#attach-ld-image-container").first().children().not(":nth-child(1)").remove();a.trigger("HIDE_SIDE_SHEET")}else-1!==n&&(p[n].hide(),p[n+1].show(),n+=1)};k.show=function(){if(d){d=!1;var b=a.$.map(p,function(a){return a.load(k)});
a.$.when.apply(a.$,b).fail(k.fail).done(function(){a.$.each(p,function(a,b){b.setup(k)});k.show()})}else{q.show();k.$container.addClass("aok-hidden").attr("role","dialog").attr("aria-modal","true").appendTo(q);n=0;p[n].show();D=k.$container.css("right");k.$container.removeClass("aok-hidden");k.$container.animate({right:"0"},k.transitionDuration,"linear");t.show();r.ue&&r.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",r.ue.count(b,(r.ue.count(b)||
0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",r.ue.count(b,(r.ue.count(b)||0)+1));b=document.body;var c=a.$(y.PAGE_BACKGROUND).get(0);l=c.ariaHidden;c.ariaHidden="true";v=b.style.overflow;b.style.overflow="hidden";u=document.activeElement;x=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(k.$container);B=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(k.$container);a.trigger("attach:show_side_sheet")}};k.isEmpty=
function(){return 0===p.length};document.addEventListener("focus",function(a){if(!z&&-1!==n){var b=k.$container.get(0);b.contains(a.target)?A=a.target:(z=!0,f.focusDescendant(b,"first"),A===document.activeElement&&f.focusDescendant(b,"last"),z=!1,A=document.activeElement)}},!0);k.isOpen=function(){return-1!==n};return k});"use strict";q.when("A","attach-common","attach-weblabs","attach-logging","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach-variant-registration",
"attach.utilities.add-to-cart.base-product").register("attach-desktop",function(a,b,h,e,f,k,p,n,c){function m(){return b.elementExists(p.Selectors.PLACEHOLDER)?b.elementExists(g.STS_FEATURE)?(z||(e.logCount("attachSuppressForShipToStoreFeature"),z=!0),!0):!1:!0}var d={},C,t=d.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",LD_CLAIM_ERROR:"deals_claimDealError"},
D=d.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},g=d.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ASIN:"#ASIN,#asin",QUANTITY:"#quantity",DEAL_QUANTITY:"#dealx_quantity_dropdown",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",INSTALLMENTS_BUTTON:"#installments-button",MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",
WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc, #dealsx_atc_btn",ATTACH_LD_CONTAINER:"#attach-ld-container",ALM_BRAND_ID:"#attach-alm-brand-id",ALM_ATC_BUTTON:"#freshAddToCartButton",STS_FEATURE:"#addProfessionalServicesRow"},x=d.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},w=-1,z=!1,A=function(){a.off(t.LD_CLAIM_SUCCESS,A);a.off(t.LD_CLAIM_ERROR,l);b.selectedBaseLightningDeal||
(b.selectedBaseLightningDeal=!0,p.setCloseHandler(d.setupAddToCartButton),d.handleLdAddToCartClick(),q.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()}))},l=function(){a.off(t.LD_CLAIM_ERROR,l);a.off(t.LD_CLAIM_SUCCESS,A);a.$(g.LD_ATC_BUTTON).bind(t.CLICK,v)},v=function(){a.$(g.LD_ATC_BUTTON).unbind(t.CLICK,v);a.on(t.LD_CLAIM_SUCCESS,A);a.on(t.LD_CLAIM_ERROR,l)};d.initialize=function(){if(m()||p.isOpen())return!1;d.setupDependencies();d.setupSideSheet();d.setupAddToCartButton()};
d.setupDependencies=function(){var b=a.$(g.ATTACH_MARKETPLACE_ID).val();e.initialize(e.FEATURES.DSS,b);e.setPayloadBuilder(function(){return{baseAsin:a.$(g.ASIN).val(),baseItemPriceDecimal:parseFloat(a.$(g.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(g.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(g.QUANTITY).val())||1,almBrandId:a.$(g.ALM_BRAND_ID).val()||null}});q.when("attach-external-atc-interceptor").execute(function(a){C=a;C.enableModule()})};d.setupSideSheet=
function(){p.initialize();p.setFailureHandler(d.failure);var a=b.hasWarranty();!h.isWarrantyPaneSuppressed()&&a&&p.addPane(f);!h.servicesInterstitialDeprecated()||b.hasAccessories()?(p.addPane(k),p.setCloseHandler(d.setupAddToCartButton)):p.setCloseHandler(d.failureTransitionToHUC)};d.setupAddToCartButton=function(){a.$(document.body).delegate(g.ADD_TO_CART_BUTTON,t.ATTACH_ATC_CLICK_NAMESPACE,d.handleAddToCartClick);a.$(g.ADD_TO_CART_BUTTON).prop("type","button").addClass(x.ATTACH_DSS_ATC);a.$(document.body).delegate(g.INSTALLMENTS_BUTTON,
t.ATTACH_ATC_CLICK_NAMESPACE,d.handleAddToCartClick);a.$(g.INSTALLMENTS_BUTTON).prop("type","button").addClass(x.ATTACH_DSS_ATC);b.elementExists(g.LD_BUY_BOX)&&b.elementExists(g.ATTACH_LD_CONTAINER)?(a.$(g.LD_ATC_BUTTON).bind(t.CLICK,v).addClass(x.ATTACH_DSS_ATC),!h.isWarrantyPaneSuppressed()&&b.hasWarranty()&&!p.hasPane(f)&&-1<w&&p.insertPane(f,w),e.logCountOnce(e.CSM_METRICS.ATTACH_BASE_LD_PRESENT)):b.elementExists(g.LD_BUY_BOX)&&!b.elementExists(g.ATTACH_LD_CONTAINER)&&e.logCount(e.CSM_METRICS.DSS_LD_MISSING_ATTACH);
b.isWFMPage()&&h.isAttachEnabledForWFM()&&(q.when("fresh-add-to-cart").execute("attach-dss-wfm",function(a){a.addToFreshCart({success:d.almAtcHandler,error:function(a,b,d,c){e.logError({message:"Error reported by almAtcHandler: textStatus: "+d+"errorThrown: "+c});e.logCount(e.CSM_METRICS.ALM_DSS_BASE_ATC_FAILURE)}})}),a.$(g.ALM_ATC_BUTTON).addClass(x.ATTACH_DSS_ATC));e.logCount(e.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};d.almAtcHandler=function(c){b.buyButton=a.$(c.target);p.isOpen()||(a.on("attach:show_side_sheet",
function(){k.updateALMCartSummary();k.showAlmBaseAddToCartStatusIcon(!1)}),a.$.when().pipe(d.checkClientSideWeblabTriggering).pipe(d.checkFeatureExists).pipe(d.checkAccessoryListNotEmpty).pipe(d.show).done(function(){e.logCount(e.CSM_METRICS.ALM_DSS_BASE_ATC_SUCCESS)}).fail(d.failure))};d.checkAccessoryListNotEmpty=function(){if(k.isEmptyAccessoryList)return b.reject(b.FailureModes.REBIND_ATC)};d.failure=function(a,c){switch(a){case b.FailureModes.ERROR_500:d.failureError500();break;case b.FailureModes.RESUBMIT_BUY_BOX:d.failureResubmitBuyBox();
break;case b.FailureModes.UNBIND_ATC:d.failureUnbindATC();break;case b.FailureModes.REBIND_ATC:d.failureRebindATC();break;default:case b.FailureModes.TRANSITION_TO_HUC:d.failureTransitionToHUC()}};d.failureError500=function(){r.location=D.ERROR_500_URL};d.failureResubmitBuyBox=function(){b.selectedBaseLightningDeal?d.failureRebindATC():(d.failureUnbindATC(),b.buyButton.click())};d.failureUnbindATC=function(){a.$(document.body).undelegate(g.ADD_TO_CART_BUTTON,t.ATTACH_ATC_CLICK_NAMESPACE);a.$(document.body).undelegate(g.INSTALLMENTS_BUTTON,
t.ATTACH_ATC_CLICK_NAMESPACE);a.$(g.INSTALLMENTS_BUTTON).prop("type","submit");a.$(g.ADD_TO_CART_BUTTON).prop("type","submit")};d.failureTransitionToHUC=function(){if(b.selectedBaseLightningDeal)return d.failureUnbindATC();h.servicesInterstitialDeprecated()?a.$(document.body).undelegate(g.ADD_TO_CART_BUTTON,t.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(g.ADD_TO_CART_BUTTON,t.WARRANTY_SI_CLICK_NAMESPACE);h.servicesInterstitialDeprecated()?a.$(document.body).undelegate(g.INSTALLMENTS_BUTTON,
t.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(g.INSTALLMENTS_BUTTON,t.WARRANTY_SI_CLICK_NAMESPACE);d.failureResubmitBuyBox()};d.failureRebindATC=function(){d.setupAddToCartButton()};d.handleAddToCartClick=function(c){b.buyButton=a.$(c.target);a.$(document.body).undelegate(g.ADD_TO_CART_BUTTON,t.ATTACH_ATC_CLICK_NAMESPACE);a.$(document.body).undelegate(g.INSTALLMENTS_BUTTON,t.ATTACH_ATC_CLICK_NAMESPACE);b.getAtcForm().append(b.buyButton.filter("input").clone().attr("type","hidden"));b.elementExists(g.LD_BUY_BOX)&&
a.$(g.LD_ATC_BUTTON).unbind(t.CLICK,v);b.selectedBaseLightningDeal||!h.servicesInterstitialDeprecated()||b.hasAccessories()||p.setCloseHandler(d.failureTransitionToHUC);a.$.when().pipe(d.checkCanAddBaseProduct).pipe(d.checkWarranty).pipe(d.checkFeatureExists).pipe(d.show).fail(d.failure);c.preventDefault();c.stopImmediatePropagation();return!1};d.handleLdAddToCartClick=function(){a.$(document.body).undelegate(g.ADD_TO_CART_BUTTON,t.ATTACH_ATC_CLICK_NAMESPACE);a.$(g.LD_ATC_BUTTON).unbind(t.CLICK,v);
a.$.when().pipe(d.checkWarranty).pipe(d.checkFeatureExists).pipe(d.show).fail(d.failure)};d.checkCanAddBaseProduct=function(){c.canAddWithCartApi(b.getAtcForm())?e.logCount("Attach.CanAddBaseProduct.CartAPI"):e.logCount("Attach.CanAddBaseProduct.Gurupa")};d.checkFeatureExists=function(){if(d.shouldSuppressForFeatureNotPresent())return b.selectedBaseLightningDeal?(a.trigger("HIDE_SIDE_SHEET"),b.selectedBaseLightningDeal=!1,b.reject(b.FailureModes.REBIND_ATC)):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,
{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};d.checkWarranty=function(){if(!h.isWarrantyPaneSuppressed()){var c=!1,g=h.isDssMbsEnhancementEnabled()?a.$("#attach-warranty-ld .attach-warranty-box").length:a.$("#attach-warranty-ld #attach-warranty-asin").val();!b.selectedBaseLightningDeal||a.$("#atch__bl").length&&g?d.shouldSuppressForWarrantyInMbb()?(c=!0,e.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1)):b.elementExists(".mbb__mdbi")?c=!0:h.servicesInterstitialDeprecated()&&d.shouldSuppressforMultiQuantityMonthlyWarranty()?
(h.isDssMbsEnhancementEnabled()?p.hideMultiQuantityMonthlyWarranties(f):c=!0,e.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1)):h.isDssMbsEnhancementEnabled()&&p.showMonthlyWarranties():(w=p.getPaneIndex(f),c=!0);c?p.removePane(f):h.triggerWarrantySuppressionExperiment(!0)}};d.handleSICheck=function(a){if(!a)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(p.removePane(f),e.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};
d.handleSIFailure=function(){return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};d.shouldSuppressForFeatureNotPresent=function(){return h.servicesInterstitialDeprecated()?!b.elementExists(p.Selectors.PLACEHOLDER)||p.isEmpty():!b.elementExists(p.Selectors.PLACEHOLDER)||!b.hasAccessories()||!b.elementExists(g.ATTACH_MARKETPLACE_ID)||!b.elementExists(g.ATTACH_BASE_ASIN)};d.shouldSuppressForWarrantyInMbb=function(){return h.isWarrantyTwisterPlusDesktopEnabled()?
0<a.$(g.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(g.WTY_TWISTER_SELECTED_GROUP).filter(g.WTY_TWISTER_WTY_OPTION).length:0<a.$(g.MBB_WARRANTY_ITEM).filter(":checked").length};d.shouldSuppressforMultiQuantityMonthlyWarranty=function(){var d=h.isLdDssMbsEnhancementEnabled()&&b.selectedBaseLightningDeal?Number(a.$(g.DEAL_QUANTITY).val())||1:Number(a.$(g.QUANTITY).val())||1;return b.hasMonthlyWarranty()&&1<d};d.show=function(){p.show()};a.on("a:popover:show:dss-basisprice-legal-message",function(a){a.popover.$container.css("z-index",
6E3)});return d});q.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",function(a,b,h){b.initialize();a.on("a:pageUpdate",a.debounce(function(){b.initialize();a.trigger("attach:dss:initialized")},300))});"use strict";q.when("A","attach-logging","attach-common").register("attach-lightning-deals-common",function(a,b,h){var e={Constants:{ATTACH_LD_CONTAINER:'\x3cdiv id\x3d"attach-ld-container" class\x3d"aok-hidden"\x3e\x3c/div\x3e',ALERTS:["a-alert-success","a-alert-warning",
"a-alert-error"],ATTACH_LD_TIME:'\x3cp class\x3d"a-color-success a-text-bold" id\x3d"attach-ld-time"\x3e\x3c/p\x3e'},Selectors:{ATTACH_LD_CONTAINER:"#attach-ld-container",ATTACH_LD_ALERT:"#attach-ld-alert",ATTACH_LD_ICON:"#attach-ld-icon",ATTACH_LD_STATUS:"#attach-ld-status",ATTACH_LD_SUCCESS:"#attach-ld-success",ATTACH_LD_RECLAIM:"#attach-ld-reclaim",ATTACH_LD_EXPIRED:"#attach-ld-expired",ATTACH_LD_ERROR:"#attach-ld-error",ATTACH_LD_INFO:".attach-ld-info",ATTACH_LD_TIME:"#attach-ld-time",ATTACH_BASE_ASIN:"#attach-baseAsin, #attach-base-asin",
ATTACH_MARKETPLACE:"#attach-marketplaceId",LD_TIMER_PREFIX:"#deal_checkout_timer_",LD_ID_OBJECT:"div[id^\x3dgb_atc_]",LD_ATC_DECLARATIVE:'*[data-action\x3d"dealsx-addtocart-button-action"]',LD_TIMER:"#dealsx_checkout_timer"},Events:{CLICK:"click",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",DSS_CLOSE:"HIDE_SIDE_SHEET",MBS_CLOSE:"a:sheet:afterHide:attach_accessory_sheet"},DealStates:{AVAILABLE:"AVAILABLE",UNKNOWN:"UNKNOWN",UPCOMING:"UPCOMING",WAITLIST:"WAITLIST",WAITLISTFULL:"WAITLISTFULL"},CustomerDealStates:{CLAIMED:"CLAIMED",
EXPIRED:"EXPIRED",IN_CART:"IN_CART",IN_WAITLIST:"IN_WAITLIST",NONE:"NONE",PENDING_ATC:"PENDING_ADD_TO_CART",UNKNOWN:"UNKNOWN"}};e.dealItemState;e.dealCustomerState;e.dealMsToCustomerStateExpiry;e.dealId;e.baseAsin;e.marketplace;e.initializeAttachLD=function(){e.baseAsin=a.$(e.Selectors.ATTACH_BASE_ASIN).val();e.marketplace=a.$(e.Selectors.ATTACH_MARKETPLACE).val();var b=a.$(e.Selectors.LD_ATC_DECLARATIVE).data();b.dealsxAddtocartButtonAction&&b.dealsxAddtocartButtonAction.dealId&&(e.dealId=b.dealsxAddtocartButtonAction.dealId);
c()};e.hasLightningDealTimer=function(){return h.elementExists(e.Selectors.LD_TIMER)};e.attachDealTimerExists=function(){return 0<a.$(e.Selectors.ATTACH_LD_INFO+" p").length};e.updateLDUX=function(){0>e.dealMsToCustomerStateExpiry&&(e.dealCustomerState=e.CustomerDealStates.EXPIRED);switch(e.dealItemState){case e.DealStates.AVAILABLE:case e.DealStates.WAITLIST:switch(e.dealCustomerState){case e.CustomerDealStates.NONE:case e.CustomerDealStates.CLAIMED:case e.CustomerDealStates.IN_CART:case e.CustomerDealStates.IN_WAITLIST:case e.CustomerDealStates.PENDING_ATC:f();
break;case e.CustomerDealStates.EXPIRED:k(e.Selectors.ATTACH_LD_RECLAIM);break;default:p()}a.delay(e.updateLDUX,1E3);break;case e.DealStates.UPCOMING:case e.DealStates.WAITLISTFULL:k(e.Selectors.ATTACH_LD_EXPIRED);break;default:p()}};var f=function(){if(e.dealCustomerState!==e.DealStates.NONE){n(e.Selectors.ATTACH_LD_SUCCESS);var b=a.$(e.Selectors.LD_TIMER).text();a.$(e.Selectors.ATTACH_LD_TIME).text(b);e.dealMsToCustomerStateExpiry-=1E3;a.$(e.Selectors.ATTACH_LD_ALERT).hasClass("a-alert-success")||
(a.$(e.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-warning a-alert-error").addClass("a-alert-success"),a.$(e.Selectors.ATTACH_LD_ICON).removeClass("a-icon-warning a-icon-error").addClass("a-icon-success"));a.$("#attachSiAddCoverage-ld").hasClass("aok-hidden")&&a.$("#attachSiAddCoverage-ld").removeClass("aok-hidden")}},k=function(b){if(e.dealCustomerState===e.CustomerDealStates.IN_CART||e.dealCustomerState==e.CustomerDealStates.CLAIMED)return f();n(b);a.$(e.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-warning");
a.$(e.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-warning");a.$("#attachSiAddCoverage-ld").addClass("aok-hidden")},p=function(){n(e.Selectors.ATTACH_LD_ERROR);a.$(e.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-error");a.$(e.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-error")},n=function(b){b=a.$(b);b.hasClass("aok-hidden")&&(a.$(e.Selectors.ATTACH_LD_STATUS).find("\x3e div:not(.aok-hidden)").each(function(){a.$(this).addClass("aok-hidden")}),
b.removeClass("aok-hidden"))},c=function(){var c=new RegExp("/api/marketplaces/"+e.marketplace+"/products/"+e.baseAsin+"?.*buyingOptionTypes\x3dLIGHTNING_DEAL");a.$(document).ajaxSuccess(function(a,f,h){if(c.test(h.url))try{var d=JSON.parse(f.responseText).entity.buyingOptions;d=d.filter(function(a){return a.dealDetails.entity.id==e.dealId});if(1!=d.length)throw Error("Multiple LD buyingOptions found for deal: "+e.dealId);var g=d[0].dealCustomerStatus.entity;e.dealItemState=d[0].dealDetails.entity.state;
e.dealCustomerState=g.state;e.dealMsToCustomerStateExpiry=new Date(g.expiryTime)-new Date}catch(x){b.logCount(b.CSM_METRICS.ATTACH_BASE_LD_DEAL_STATUS_ERROR)}})};return e});"use strict";q.when("A","attach-common","attach-lightning-deals-common","attach-desktop-side-sheet","attach-logging").register("attach-lightning-deals-desktop",function(a,b,h,e,f){var k={},p=/(\{0})/,n=function(){h.initializeAttachLD();b.setupDesktopEgressButtons();2===a.$(h.Selectors.ATTACH_LD_ALERT).find(".a-icon").length&&a.$(h.Selectors.ATTACH_LD_ALERT+
" .a-icon").first().remove();a.$("#attach-ld-close-button").hasClass("close-button")||a.$("#attach-ld-close-button").addClass("close-button").click(e.next);if(h.hasLightningDealTimer()&&!h.attachDealTimerExists()){var k=a.$("#attach-base-ld-timer").val();k&&k.length?k.split(p).forEach(function(b){b="{0}"===b?h.Constants.ATTACH_LD_TIME:"\x3cp\x3e"+b+"\x3c/p\x3e";a.$("#attach-ld-success .attach-ld-info").append(b)}):(f.logCount(f.CSM_METRICS.DSS_BASE_LD_MISSING_TIMER),f.logError({message:"Attach desktop base LD missing timer translation. Base ASIN\x3d"+
a.$("#attach-baseAsin").val()}))}a.$(h.Selectors.ATTACH_LD_CONTAINER).removeClass("aok-hidden");a.on(h.Events.DSS_CLOSE,c);h.updateLDUX()},c=function(){a.off(h.Events.DSS_CLOSE,c);b.selectedBaseLightningDeal=!1;a.$("#attach-accessory-pane").height("");a.$(h.Selectors.ATTACH_LD_CONTAINER).addClass("aok-hidden");a.$(".attach-primary-atc-confirm-box").removeClass("aok-hidden");a.$("#attachSiAddCoverage").removeClass("aok-hidden")};k.handleDealClaim=function(){f.logCount(f.CSM_METRICS.DSS_BASE_LD_ATC_CLICK);
h.dealCustomerState=h.CustomerDealStates.IN_CART;h.dealItemState=h.DealStates.AVAILABLE;h.dealMsToCustomerStateExpiry=w;n()};return k});"use strict";q.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,b,h){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(h("session-id"))});"use strict";q.when("A","3p-promise","attach.utilities.price-formatter").register("attach.amazonapi.client",function(a,b,h){var e={buildRequestUrl:function(b){var e=a.$("#attach-aapi-ajax-endpoint").val()+
"/"+b.apiPath,f=[];if(b.additionalParameters)for(var h in b.additionalParameters)b.additionalParameters.hasOwnProperty(h)&&f.push(h+"\x3d"+encodeURIComponent(b.additionalParameters[h]));f.length&&(e+="?"+f.join("\x26"));return e},buildAcceptHeader:function(a){var b=["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&b.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');return b.join("; ")},buildRequestHeaders:function(b){var f=a.$("#attach-aapi-ajax-csrf-token").val();
f={Accept:e.buildAcceptHeader(b),"Accept-Language":a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"),"x-cc-currency-of-preference":a.$("#attach-currency-of-preference").val(),"x-api-csrf-token":f};b.requestType&&(f["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+b.requestType+'"');return f},makeRequest:function(f){return new b(function(b,h){var k=e.buildRequestUrl(f),c=e.buildRequestHeaders(f),m=f.data?JSON.stringify(f.data):w;return a.$.ajax({type:f.method,
url:k,headers:c,data:m,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){b(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(t){b.data=a.responseText}h(b)}})})},isException:function(a){return a&&"undefined"!==typeof a.statusCode&&"undefined"!==typeof a.xhr},formatMoney:function(b){return b.displayString?b.displayString:b.convertedFrom&&b.currencyCode===b.convertedFrom.currencyCode&&b.convertedFrom.displayString?b.convertedFrom.displayString:
h.formatPrice(Number(b.amount),b.currencyCode||a.$("#attach-currency-of-preference").val(),a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"))}};return e});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.cart.add-items",function(a){var b={RESPONSE_TYPE_SUCCESS:"cart.add-items/v1",RESPONSE_TYPE_INCOMPLETE_ADD:"add-items.incomplete-add.error/v1"},h=function(a){return a},e=function(a){if(a.data&&"add-items.incomplete-add.error/v1"===a.data.type)return a.data;
throw a;};b.addItems=function(b,k){b={apiPath:"cart/carts/retail/items",requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:b},additionalParameters:{}};k&&(b.additionalParameters.ref=k);return a.makeRequest(b).then(h).catch(e)};return b});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.cart.items",function(a){return{items:function(b,h){b={apiPath:"cart/items",requestType:"cart.items.request/v1",responseType:"cart.items/v1",method:"GET",
additionalParameters:b};h&&(b.additionalParameters.ref=h);return a.makeRequest(b)}}});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.cart.summary",function(a){var b={CART_TYPE_RETAIL:"RETAIL",CART_TYPE_LOCAL_MARKET:"LOCAL_MARKET",EMPTY_CART_RETAIL:{itemCount:0,lastModified:null,cartType:"RETAIL",subtotal:{amount:0}}},h=function(a){return a};b.get=function(b){var e={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};b&&(e.additionalParameters.cartTypes=
b);return a.makeRequest(e).then(h)};return b});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.deals.claim-and-add-to-cart",function(a){var b={RESPONSE_TYPE_SUCCESS:"deals.claim.response/v1",RESPONSE_TYPE_QUANTITY_ERROR:"deal.claim.quantity_restriction_violation.error/v1",RESPONSE_TYPE_ERROR:"error/v1"},h=function(a){return a},e=function(a){throw a;};b.claimAndAddDeal=function(b,k,p){b={apiPath:"deals/"+b+"/claim-and-add-to-cart",requestType:"deals.claim.request/v1",responseType:"deals.claim.response/v1",
method:"POST",data:{asin:k,quantity:1},additionalParameters:{}};p&&(b.additionalParameters.ref=p);return a.makeRequest(b).then(h).catch(e)};return b});"use strict";q.when("A").register("attach.amazonapi.products.media-builder",function(a){var b={},h,e,f,k,p,n,c,m;b.init=function(a){h=a;p=k=f=e=w;n=h.width;c=h.height;m=[];h.styleCode&&m.push(encodeURIComponent(h.styleCode));return b};b.cdn=function a(a){e=a;return b};b.withNameAndOU=function(a,c,e){f=a.startsWith("/")?a.substring(1):a;k=1===c.length?
"0"+c:c;p=e;return b};b.crop=function(a,e,f,h){n=Math.round(Math.min(f,n-a));c=Math.round(Math.min(h,c-e));m.push("_CR"+[a,e,f,h].join());return b};b.autoCrop=function(){m.push("_AC");return b};b.blur=function(a){m.push("_BL"+a);return b};b.scaleToRectangle=function(a,e){n=a;c=e;m.push("_SR"+a+","+e);return b};b.scaleToSquare=function(a){c=n=a;m.push("_SS"+a);return b};b.scaleToWidth=function(a){n>a&&(c=Math.round(a*c/n),n=Math.round(a));m.push("_SX"+a);return b};b.scaleToHeight=function(a){c>a&&
(n=Math.round(a*n/c),c=Math.round(a));m.push("_SY"+a);return b};b.scaleToLongest=function(a){n>c?a<n&&(c=Math.round(a*c/n),n=Math.round(a)):a<c&&(n=Math.round(a*n/c),c=Math.round(a));m.push("_SL"+a);return b};b.upscaleToHeight=function(a){n=0<c?Math.round(a*n/c):0;c=Math.round(a);this.rendering.push("_UY"+a);return b};b.upscaleToLongest=function(a){n>c?(c=Math.round(a*c/n),n=Math.round(a)):(n=0<c?Math.round(a*n/c):0,c=Math.round(a));this.rendering.push("_UL"+a);return b};b.upscaleToWidth=function(a){c=
0<n?Math.round(a*c/n):0;n=Math.round(a);this.rendering.push("_UX"+a);return b};b.custom=function a(a){this.rendering.push(encodeURIComponent(a));return b};b.build=function(){var a=[];a.push("https://");a.push(e?e:"m.media-amazon.com");f?a.push("/images/G/",k,"/",f,"._CB",p):a.push("/images/I/",h.physicalId,".");m.length&&a.push(m.join(""));(p||m.length)&&a.push("_");"."!==a[a.length-1]&&a.push(".");a.push(h.extension);return{url:a.join(""),width:n,height:c}};return b});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.products.productV2",
function(a){return{RESPONSE_TYPE_SUCCESS:"product/v2",RESOURCE_INCLUSIONS:{LINKS:"links(product.links/v2)",PRODUCT_IMAGES:"productImages(product.product-images/v2)"},getProduct:function(b,h,e,f){b={apiPath:"products/"+b,requestType:"product.request/v2",responseType:"product/v2",method:"GET",resourceInclusions:h,additionalParameters:e||{}};f&&(b.additionalParameters.ref=f);return a.makeRequest(b)},getProductsBatch:function(b,h,e,f){b={apiPath:"products/"+b.join(","),requestType:"product.request/v2",
responseType:"collection(product/v2)/v1",method:"GET",resourceInclusions:h,additionalParameters:e||{}};f&&(b.additionalParameters.ref=f);return a.makeRequest(b)}}});"use strict";q.when("A").register("attach.events",function(a){return{Accessories:{ADD_TO_CART_STATUS:"attach:accessories:add-to-cart:status",SHOW:"attach:accessories:pane:show",HIDE:"attach:accessories:pane:hide",SEE_MORE_EXPAND:"attach:accessories:see-more:expand",SEE_MORE_COLLAPSE:"attach:accessories:see-more:collapse",CAROUSEL_PAGE_VIEW:"attach:accessories:carousel:page-view"},
Cart:{ADD_BASE_HUC:"attach:add-base-to-cart",ADD_BASE_HUC_SUCCESS:"attach:add-base-to-cart:huc-success",UPDATE_SUMMARY:"attach:cart:summary:update"}}});"use strict";q.when("A").register("attach.utilities.add-to-cart.natc-parameter-parser",function(a){var b={},h=/items?\[(\d+(?:\.\w+)?)\]\.?(.*)/,e=/\w+/g,f={asin:"string",offerListingId:"string",quantity:"integer","additionalParameters.giftOptions.includeGiftReceipt":"boolean","additionalParameters.installments.programId":"string"};b.attemptTypeCoercion=
function(b,e){if(f.hasOwnProperty(b))switch(f[b]){case "string":return e;case "integer":return parseInt(e);case "boolean":return"true"===e}try{var h=JSON.parse(e);return null===h||"string"===typeof h||a.$.isPlainObject(h)?e:h}catch(c){}return e};b.checkValidParameters=function(a){return a.hasOwnProperty("items[0.base][asin]")||a.hasOwnProperty("item[0].asin")};b.createAddItemsRequestItems=function(a){var f=[],k={},c;for(c in a)if(a.propertyIsEnumerable(c)){var m=a[c],d=h.exec(c);if(d){var q=d[1];
if(d=d[2].match(e)){k.hasOwnProperty(q)||(k[q]={});q=k[q];for(var r=d.join("."),w=0;w<d.length;w++){var g=d[w];w===d.length-1?q[g]=b.attemptTypeCoercion(r,m):(q.hasOwnProperty(g)||(q[g]={}),q=q[g])}}}}for(var x in k)k.propertyIsEnumerable(x)&&(a=k[x],"0.base"===x||"0"===x?f.unshift(a):f.push(a));return f};return b});"use strict";q.when("A","attach-logging","attach-variant-registration","attach.utilities.add-to-cart.natc-parameter-parser","attach.amazonapi.cart.add-items","attach.utilities.page-reader").register("attach.utilities.add-to-cart.base-product",
function(a,b,h,e,f,k){function p(a){return new n(a)}var n=a.createClass({_container:null,_rawNatcParameters:null,_cartItems:[],init:function(b){var c=a.$(b);this._container=b;b=c.serializeArray();c={};for(var d=0;d<b.length;d++){var f=b[d];c[f.name]=f.value}this._rawNatcParameters=c;this._cartItems=e.createAddItemsRequestItems(this._rawNatcParameters)},isValid:function(){return e.checkValidParameters(this._rawNatcParameters)&&this.shouldUseNatc()},shouldUseNatc:function(){var b=a.$(this._container).find("[data-a-state*\x3datc-page-state]");
0< !b.length&&(b=a.$(this._container).siblings("[data-a-state*\x3datc-page-state]"));0< !b.length&&(b=a.$("[data-a-state*\x3datc-page-state]"),0<b.length&&(b=b.first()));return 0<b.length&&(b=JSON.parse(b.text()))&&b.hasOwnProperty("shouldUseNatc")?b.shouldUseNatc:!0},getAsins:function(){return this._cartItems.map(function(a){return a.asin})},isWarrantyAddedWithBase:function(){var a=k.getAvailableWarrantyAsinsOnDetailPage(),b=this._cartItems.map(function(a){return a.asin});return a.some(function(a){return b.some(function(b){return b===
a})})},execute:function(a){var c=this;return f.addItems(this._cartItems,a?a:"dp_atch_dss_base").then(function(a){b.logCount("attach.utilities.add-to-cart.base-product.success");return{request:c,response:a}}).catch(function(a){b.logCount("attach.utilities.add-to-cart.base-product.error");return{request:c,response:a?a.data:w,error:a}})}});return{canAddWithCartApi:function(a){return p(a).isValid()},createRequest:p}});"use strict";q.register("attach.utilities.focus-management",function(){var a={attemptFocus:function(a){try{a.focus()}catch(h){}return a===
document.activeElement},focusDescendant:function(b,h){if(b&&b.children)for(var e=0;e<b.children.length;e++){var f=b.children.item("last"===h?b.children.length-e-1:e);if(a.attemptFocus(f)||a.focusDescendant(f,h))return!0}return!1}};return a});"use strict";q.when("attach-logging").register("attach.utilities.price-formatter",function(a){var b={};return{formatPrice:function(h,e,f){if(!r.Intl||!r.Intl.NumberFormat)return a.logCount("attach.utilities.price-formatter:UsedSimpleFormat"),e+" "+h.toFixed(2);
a.logCount("attach.utilities.price-formatter:UsedIntlNumberFormat");var k=f+"/"+e;b.hasOwnProperty(k)||(b[k]=new Intl.NumberFormat(f,{style:"currency",currency:e}));return b[k].format(h)}}});"use strict";q.when("A").register("attach.utilities.page-reader",function(a){return{getAvailableWarrantyAsinsOnDetailPage:function(){var b=a.capabilities.mobile?a.$("input[id|\x3dmbb-checkbox-input]").map(function(){return this.value}).get():a.$('#abbWrapper input[name^\x3d"asin"]').map(function(){return this.value}).get();
var h=a.$('[data-action\x3d"warranty-option-swatch-select"]').map(function(){var b=a.$(this).data("warranty-option-swatch-select");return b?b.warrantyAsin:null}).get();return b.concat(h)}}});"use strict";q.register("attach.utilities.strings",function(){var a=/\$\{(?:hash-get\s+)?([^\}]+)\}/g;return{substituteParameters:function(b,h){return b.replace(a,function(a,b){return h&&h.hasOwnProperty(b)?h[b]:""})}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageComparisonChartAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(f){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,b=h?h("DetailPageFluxComponents",""):g;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,g,h){f.when("dp-flux-utils").register("dp-flux-action",function(b){function e(d,a,c){if(b.isNonEmptyString(d)&&b.isNonEmptyString(a))this._name=d,this._source=a,this._metadata=c;else throw Error("Action(...): Action must be created with valid name and source");}e.prototype={getName:function(){return this._name},
getSource:function(){return this._source},getMetaData:function(){return this._metadata}};return e.prototype.constructor=e});f.when("dp-flux-utils").register("dp-flux-attribution",function(b){function e(d,a,c,k){if(b.isNonEmptyString(d)&&b.isNonEmptyString(a)&&b.isNonEmptyString(c)&&b.isNonEmptyString(k))this._name=d,this._category=a,this._type=c,this._item=k;else throw Error("All parameters (name, categoty, type, item) must be a non-empty string");}e.prototype={getName:function(){return this._name},
getAttribution:function(){return"name: "+this._name+"; CTI\x3d "+this._category+"/"+this._type+"/"+this._item}};return e.prototype.constructor=e});f.when("A","dp-flux-action","dp-flux-attribution").register("dp-flux-dispatcher",function(b,e,d){function a(){this._callbacks={};this._isDispatching=!1;this._pendingAction=null;this._lastID=1}var c=b.$;a.prototype={register:function(a,b){if(!(a instanceof d))throw Error("Dispatch.register(...): attribution must be instance of Attribution");if(!c.isFunction(b))throw Error("Dispatch.register(...): callback must be a function");
var e="ID_"+this._lastID++;this._callbacks[e]={attribution:a,callback:b,_isCallbackExecutionStarted:!1,_isCallbackExecutionCompleted:!1};return e},unregister:function(a){if(this._callbacks[a])delete this._callbacks[a];else throw Error("Dispatcher.unregister(...): "+a+" does not map to a registered callback");},dispatch:function(a){if(this._isDispatching)throw Error("Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch");if(!(a instanceof e))throw Error("Dispatch.dispatch(...): action param must be of type Action");
this._startDispatching(a);for(var c in this._callbacks)this._callbacks[c]._isCallbackExecutionStarted||this._invokeCallback(c);this._stopDispatching()},waitFor:function(a){if(!this._isDispatching)throw Error("Dispatcher.waitFor(...): Must be invoked while dispatching");if(!c.isArray(a))throw Error("Dispatcher.waitFor(...): dispatchTokenList must be an array");for(var b=0;b<a.length;b++){var d=a[b];if(!this._callbacks[d])throw Error("Dispatcher.waitFor(...): "+d+" does not map to a registered callback. ");
if(this._callbacks[d]._isCallbackExecutionStarted)if(this._callbacks[d]._isCallbackExecutionCompleted)continue;else throw Error("Dispatcher.waitFor(...): Circular dependency detected while waiting for "+d);this._invokeCallback(d)}},_invokeCallback:function(a){this._callbacks[a]._isCallbackExecutionStarted=!0;try{this._callbacks[a].callback(this._pendingAction)}catch(c){f.log("Dispatcher._invokeCallback(...): Error while calling dispatcher callback: error message \x3d "+c.message,"FATAL",this._callbacks[a].attribution.getAttribution())}this._callbacks[a]._isCallbackExecutionCompleted=
!0},_startDispatching:function(a){for(var c in this._callbacks)this._callbacks[c]._isCallbackExecutionStarted=!1,this._callbacks[c]._isCallbackExecutionCompleted=!1;this._pendingAction=a;this._isDispatching=!0},_stopDispatching:function(){this._pendingAction=null;this._isDispatching=!1}};return a.prototype.constructor=a});f.when("A","dp-flux-utils").register("dp-flux-emitter",function(b,e){function d(){this._subscriptions={}}var a=b.$;d.prototype={emit:function(a){if(e.isNonEmptyString(a))b.each(this._subscriptions[a]||
[],function(a){a()});else throw Error("Emitter.emit()...: eventType must be a non empty string");},addListener:function(c,b){if(e.isNonEmptyString(c)&&a.isFunction(b))this._subscriptions[c]=this._subscriptions[c]||[],this._subscriptions[c].push(b);else throw Error("Emitter.addListener()...: Invalid arguments - eventType must be a non empty string \x26 callback must be a function ");},removeListener:function(c,b){if(e.isNonEmptyString(c)&&a.isFunction(b)){if(c=this._subscriptions[c])b=a.inArray(b,
c),-1!==b&&c.splice(b,1)}else throw Error("Emitter.removeListener()...: Invalid arguments - eventType must be a non empty string \x26 callback must be a function");}};return d});f.when("A","dp-flux-emitter","dp-flux-attribution","dp-flux-dispatcher","dp-flux-utils").register("dp-flux-store",function(b,e,d,a,c){function f(b,k,g,h){if(!(b instanceof d))throw Error("storeAttribution should be instance of Attribution");if(!(g instanceof a))throw Error("dispatcher must be an instance of Dispatcher");if(!l.isFunction(k))throw Error("Store must provide a reduce callback method");
this.reduce=k;this.dispatcher=g;this._storeAttribution=b;this._state=h||{};c.deepFreeze(this._state);this._dispatchToken=this.dispatcher.register(this._storeAttribution,this._invokeOnDispatch.bind(this));this._changed=!1;this._changeEvent=this._storeAttribution.getName()+":change";this._emitter=new e}var l=b.$;f.prototype={addListener:function(a){return this._emitter.addListener(this._changeEvent,a)},removeListener:function(a){this._emitter.removeListener(this._changeEvent,a)},getDispatcher:function(){return this.dispatcher},
getDispatchToken:function(){return this._dispatchToken},getState:function(){return this._state},getStoreAttribution:function(){return this._storeAttribution},_invokeOnDispatch:function(a){this._changed=!1;var b=this._state;(a=this.reduce(this._state,a)||b)&&a!==b&&(this._state=a,c.deepFreeze(this._state),this._changed=!0,this._emitter.emit(this._changeEvent))}};return f.prototype.constructor=f});f.when("A","dp-flux-attribution").register("dp-flux-store-group",function(b){function e(b,a,c){this._stores=
a;this._callBack=c;this._attribution=b;this._registerStoreGroup()}e.prototype={_registerStoreGroup:function(){var b=this._getUniformDispatcher();this._dispatchToken=b.register(this._attribution,function(){b.waitFor(this._getStoreTokens());this._callBack()}.bind(this))},unregisterStoreGroup:function(){this._getUniformDispatcher().unregister(this._dispatchToken)},_getUniformDispatcher:function(){var d=this._stores[0].getDispatcher();b.each(this._stores,function(a){if(d!==a.getDispatcher())throw Error("All stores must have common dispatcher");
});return d},_getStoreTokens:function(){return b.map(this._stores,function(b){return b.getDispatchToken()})}};return e.prototype.constructor=e});f.when("A","dp-flux-store-group").register("dp-flux-store-subscription",function(b,e){function d(a,b,d){this._stores=b;this._changed=!1;this._updatedStores=[];this._viewUpdateCallBack=d;this._viewAttribution=a;this._allListeners=[];this._addListenerToAllStores();this._storeGroup=new e(a,b,this._viewCallBack.bind(this))}d.prototype={_storeListener:function(a){this._changed=
!0;this._updatedStores.push(a)},_addListenerToAllStores:function(){var a;b.each(this._stores,function(b){a=this._storeListener.bind(this,b);this._allListeners.push({listener:a,store:b});b.addListener(a)},this)},_removeListenerFromAllStores:function(){b.each(this._allListeners,function(a){a.store.removeListener(a.listener)})},_viewCallBack:function(){if(this._changed){try{this._viewUpdateCallBack(this._updatedStores)}catch(a){f.log("StoreSubscription._viewCallBack(...): view callback failed "+a,"WARN",
this._viewAttribution.getAttribution())}this._changed=!1;this._updatedStores=[]}},reset:function(){this._removeListenerFromAllStores();this._storeGroup.unregisterStoreGroup()}};return d.prototype.constructor=d});f.when("A").register("dp-flux-utils",function(b){function e(a){return"string"===typeof a||"[object String]"===Object.prototype.toString.call(a)}function d(a){if(!Object.isFrozen(a)){var c=Object.getOwnPropertyNames(a);b.each(c,function(b){var c=a[b];a[b]=c&&"object"===typeof c?d(c):c});Object.freeze(a)}return a}
return{isString:e,isNonEmptyString:function(a){return!(!e(a)||!b.trim(a).length)},deepFreeze:function(a){return Object.freeze&&Object.getOwnPropertyNames&&Object.isFrozen?(d(a),!0):!1}}});f.when("A","dp-flux-attribution","dp-flux-store","dp-flux-store-subscription").register("dp-flux-view",function(b,e,d,a){function c(c,g,h){if(!(c instanceof e))throw Error("View(...): viewAttribution should be an instance of Attribution");if(f.isArray(g)&&1<=g.length)b.each(g,function(a){if(!(a instanceof d))throw Error("View(...): storeList contains an object which is not of type Store");
});else throw Error("View(...): View must listen on at least one store");if(!f.isFunction(h))throw Error("View(...): View must provide update callback method");this._viewAttribution=c;this._storeSubscription=new a(c,g,h)}var f=b.$;c.prototype.getViewAttribution=function(){return this._viewAttribution};c.prototype.unregisterStores=function(){this._storeSubscription.reset()};return c})});
/* ******** */
(function(g){var k=window.AmazonUIPageJS||window.P,l=k._namespace||k.attributeErrors,d=l?l("DetailPageMobileAppAssets",""):k;d.guardFatal?d.guardFatal(g)(d,window):d.execute(function(){g(d,window)})})(function(g,k,l){g.when("jQuery","aw-mash-handler","dp-instant-map","dp-client-counter").execute("dp-instant-atc-handler",function(d,f,e,a){Object.keys(e).forEach(function(c){var f=e[c].instant,g=e[c].triggerButton,x=f.getShouldTrigger();f.disable();x&&(a.inc("dp-instant-"+c+"-clicked"),d(g).trigger("click"))})});
"use strict";g.register("dp-mash-pre-registry-handler");g.when("A","aw-mash","dp-util-cookie","mobile-app-atc-action","mobile-app-gift","mobile-app-device-prereg","natc-check","atc-metrics","update-atc-data","atc-data-validation","aw-mbb-checkbox-helper","patc-csm-init","atc-eligibility").register("aw-mash-handler",function(d,f,e,a,c,h,v,x,q,u,m,t,D){function y(b){b.preventDefault();b.stopPropagation()}function B(){w("#atc-toast-overlay").css("display","");z.addClass("udp-stop-scrolling");z.bind("touchmove touchstart touchend touchcancel",
y)}function C(){z.removeClass("udp-stop-scrolling");z.unbind("touchmove touchstart touchend touchcancel",y);w("#atc-toast-overlay").css("display","none")}function p(b){b="."+b;var a=w(b);0<w("#buybox .a-accordion-active").length&&(a=w("#buybox .a-accordion-active "+b));return a}function R(){B();var b=p("atc-button"),a=p("atc-button-text"),d=p("inst-button-space"),c=p("inst-indicator");b.addClass("inst-btn-opacity");a.hide();d.removeClass("aok-hidden");c.removeClass("aok-hidden")}function K(b){var a=
p("atc-toast"),d=p("atc-success"),c=p("atc-failed"),e=p("atc-failed-deals"),f=p("inst-indicator"),m=p("inst-button-space"),h=p("atc-button-text"),u=p("atc-button");k.requestAnimationFrame(function(){u.removeClass("inst-btn-opacity");f.addClass("aok-hidden");m.addClass("aok-hidden");h.show();a.css("display","");0===b?(d.css("display",""),a.addClass("atc-toast-success-styles")):-1===b?(c.css("display",""),a.addClass("atc-toast-failure-styles")):-2===b&&(e.css("display",""),a.addClass("atc-toast-failure-styles"))})}
function A(b){var a=p("atc-toast"),d=p("atc-success"),c=p("atc-failed"),e=p("atc-failed-deals"),f=p("inst-indicator"),m=p("inst-button-space"),h=p("atc-button-text"),u=p("atc-button");k.requestAnimationFrame(function(){u.removeClass("inst-btn-opacity");f.addClass("aok-hidden");m.addClass("aok-hidden");h.show();a.removeClass("atc-toast-failure-styles");a.removeClass("atc-toast-success-styles");c.css("display","none");e.css("display","none");d.css("display","none");a.css("display","none");setTimeout(function(){C()},
b)})}function O(b,a,d){A(1E3);f.showAlert({title:a,message:b,buttonTitles:[d],successCallback:function(b){},failCallback:function(b){console.log(b)}})}function E(b){b=parseInt(b,10);f.cart.didUpdate({newCartQuantity:b});amazon.cordova.notification.vibrate(50)}function L(b,a,c){function e(){var f=v.getAtcEndpoint(b),h=v.getShouldUseNatc()&&b.queryString!==l&&""!==b.queryString?"?"+b.queryString:"";u.validateData(b);m()&&P?(b.queryParameters={customizers:"BOTTOM_SHEET",isUssEligible:q()&&p()&&D()},
g.when("action-executor").execute(function(a){a.executeAddToCart(b,C,B)})):(P&&t.initialize(),x.recordAtcAjaxCall(),d.ajax(f+"/ref\x3d"+b.reftag+h,{method:"post",params:b.inputs,timeout:b.timeout,success:function(c,d,e){x.recordAtcAjaxSuccess();v.getShouldUseNatc()?(c&&c.successful?I(c):(c&&c.count&&E(c.count),z()),t.recordAXControlMetric(e)):c&&c.ok?I(c):c&&c.isDeal?L(c):c&&"perOfferingRestrictionViolated"===c.error?a(b,c):c&&c.isCartServiceFailed?F("[Detail Page Mobile App Add to Cart failed due to Cart Service Failure]",
c):Q(c)},error:function(a,d,e){x.recordAtcAjaxFailure();v.getShouldUseNatc()?z():(a="[Detail Page Mobile App Add to Cart Error Status: "+d+"]",b.inputs.isUSSAjax?r.aa_mash_add_to_cart_lost_connection_message&&r.aa_mash_add_to_cart_lost_connection_title?F(a):(c(),G()):r.aa_mash_add_to_cart_lost_connection_message&&r.aa_mash_add_to_cart_lost_connection_title?(O(r.aa_mash_add_to_cart_lost_connection_message,r.aa_mash_add_to_cart_lost_connection_title,r.aa_mash_ok),F(a)):G())}}))}function m(){if(q()&&
p()&&D()){var c,a;J&&(a=N+"weblabValue\x3d"+J,navigator&&navigator.sendBeacon?(c=navigator.sendBeacon(a))||d.$.ajax({url:a}):d.$.ajax({url:a}))}return v.getShouldUseNatc()&&!M&&(!q()&&b.showBottomSheetDefaultAddToCartExperience||q()&&p()&&D()&&("T1"===b.ussConvergenceExperimentTreatment||"T2"===b.ussConvergenceExperimentTreatment))}function h(){var b=!1;g.now("action-executor").execute(function(c){c!==l?b=!0:n&&n.count&&n.count("ax_bottom_sheet_not_ready",(n.count("ax_bottom_sheet_not_ready")||0)+
1)});return b}function q(){return"true"===d.$("#uss-mobileApp").val()&&d.$("#ussEligible").length&&"1"===d.$("#ussEligible").val()}function p(){return"true"===d.$("#uss-serverPreconditionsPassed").val()}function D(){var b;if(b=d.capabilities.transform&&d.capabilities.transition)b=d.$("\x3cdiv\x3e\x3c/div\x3e")[0],b=""===b.style.flex||""===b.style.webkitFlex||""===b.style.msFlex||""===b.style.MozBoxFlex||""===b.style.webkitBoxFlex?!0:!1;if(b=b&&!y("scheduledDelivery")&&!y("partialStateBuyBox"))b=d.$("#add-to-cart-button"),
b=b.length&&"submit"==b.prop("type");return b&&!(d.$("#attach-accessory-card-deck").length&&("true"===d.$("#uss-mobileApp").val()||d.$("#attach-accessory-mobile-web-mbs").length))}function y(b){b=d.$("#"+b+"_feature_div").html();null!==b&&(b=b.trim());return null!==b&&0<b.length}function z(){c&&b.inputs.isUSSAjax?c():(K(-1),setTimeout(function(){A(0)},2E3))}function Q(a){d.trigger("dpx:add-to-cart:error");b.inputs.isUSSAjax?r.aa_mash_failed_add_to_cart&&r.aa_mash_encounter_problem&&r.aa_mash_ok?F("[Detail Page Mobile App Add to Cart Mash Failure]",
a):(c(a),G()):r.aa_mash_failed_add_to_cart&&r.aa_mash_encounter_problem&&r.aa_mash_ok?(O(r.aa_mash_failed_add_to_cart,r.aa_mash_encounter_problem,r.aa_mash_ok),F("[Detail Page Mobile App Add to Cart Mash Failure]")):(K(-1),setTimeout(function(){A(0)},2E3),G())}function F(a,e){d.trigger("dpLogFatalsEvent",a,"ERROR","mobileApp_addtocart_fatal");b.inputs.isUSSAjax&&c(e)}function G(){d.trigger("dpLogFatalsEvent","[Detail Page Mobile App Add to cart String error]","ERROR","mobileApp_addtocart_string_error")}
function L(a){b.inputs.isUSSAjax?c(a):r.aa_mash_deal_not_available?(A(1E3),f.showAlert({title:r.aa_mash_deal_not_available,message:"",successCallback:function(b){},buttonTitles:[r.aa_mash_ok],failCallback:function(b){console.log(b)}})):G()}function I(a){d.trigger("dpx:add-to-cart:success",a);M||(K(0),setTimeout(function(){A(0)},2E3));v.getShouldUseNatc()?a&&a.count&&E(a.count):E(a.numActiveItemsInCart);c&&(b.inputs.isUSSAjax?c(a):c())}var H=w("#add-to-cart-button");if(!H.length||"submit"===H.prop("type")){var r=
b.strings,M=c!==l;n&&n.count&&(n.count("dp-mobile-app-doatc",(n.count("dp-mobile-app-doatc")||0)+1),M&&n.count("dp-mobile-app-doatc-skiptoast",(n.count("dp-mobile-app-doatc-skiptoast")||0)+1));H=w("#subscribeToApubPrimeFirstEmailList");"use strict";var P=h();"use strict";"use strict";"use strict";var N="/ussx/weblab-trigger?",J="CONSUMABLES_CSE_USS_SW_CONVERGENCE_692339";"use strict";M||m()&&P||R();H.length?(H.is(":checked")&&(b.inputs.subscribeToApubPrimeFirstEmailList=1),b.requiresSignIn&&!k.apubPrimeFirstSignInSuccessful?
(k.apubPrimeFirstSignInSuccessful=1,f.showLoginDialog({successCallback:function(){e(b)},failCallback:function(b){k.apubPrimeFirstSignInSuccessful=0;"CANCELED"!==b&&Q(b)}})):e(b)):b.requiresSignIn?f.showLoginDialog({successCallback:function(){e()},failCallback:function(b){"CANCELED"!==b&&Q(b)}}):e()}}function S(b){L(b,function(b,a){A(1E3);E(a.numActiveItemsInCart);f.showAlert({message:b.strings.aa_mash_some_out_of_stock,buttonTitles:[b.strings.multi_aa_mash_go_to_cart,b.strings.multi_aa_mash_continue_shopping],
successCallback:function(b){0===b&&(k.location="/gp/cart/view.html")},failCallback:function(b){console.log(b)}})})}function I(b,a){b=JSON.parse(JSON.stringify(b));if("undefined"===typeof b.inputs.isSecondaryAtc||1!==b.inputs.isSecondaryAtc)"true"!==w("#twister-plus-mbb-selected").val()&&(b=q.updateQuantity(b)),"undefined"===typeof b.inputs.isUsedBuyBox||"1"!==b.inputs.isUsedBuyBox?("reftag"in b||(b.reftag="undefined"!==typeof b.isMobbSecondNew&&b.isMobbSecondNew?"dp_atc_ma_secondnew":"mw_pa_dp_buy_crt"),
"000-0000000-8675309"===b.inputs.verificationSessionID&&(b.inputs.verificationSessionID=e("session-id")),m.mbbCheckboxIsChecked()&&!v.getShouldUseNatc()&&m.updateData(b)):"reftag"in b||(b.reftag="dp_uatc_ma");b=c.updateData(b);b=h.updateData(b);b=D.updateEligibilityData(b);L(b,function(b,c){b.inputs.isUSSAjax?a(c):O(b.strings.aa_mash_add_to_cart_failed_quantity_message,b.strings.aa_mash_add_to_cart_failed_quantity_title,b.strings.aa_mash_ok);E(c.numActiveItemsInCart)},a)}function N(b){return{asin:b.a,
offerId:b.oid,listId:b.colid,listItemId:b.coliid,dealId:b.di,clickStream:""}}var w=d.$;d.state("a-page-options");var z=w("body");"use strict";var n=k.ue;"use strict";var J={"add-to-cart":function(b){n&&n.count&&n.count("mobileAppAddToCartMash",(n.count("mobileAppAddToCartMash")||0)+1);a.atcAction(b,I)},"add-multiple-to-cart":function(b){n&&n.count&&n.count("mobileAppAddMultipleToCartMash",(n.count("mobileAppAddMultipleToCartMash")||0)+1);S(b)},"add-to-wish-list":function(b){n&&n.count&&n.count("mobileAppAddToWishListMash",
(n.count("mobileAppAddToWishListMash")||0)+1);B();f.addToWishList({asin:b.inputs.a});C()},"buy-now":function(b){n&&n.count&&n.count("mobileAppBuyNowMash",(n.count("mobileAppBuyNowMash")||0)+1);var a=document.getElementById("same-day-swatches-shipping-speed");b=N(b.inputs);b.shippingSpeed=a&&a.value||"default";f.buyNow(b)},"buy-now-one-click":function(b){n&&n.count&&n.count("mobileAppBuyNowOneClickMash",(n.count("mobileAppBuyNowOneClickMash")||0)+1);var a=document.getElementById("prime-toggle-main");
b=N(b.inputs);b.oneClickShippingSpeed=a&&a.name||"default";f.buyNowWithOneClick(b)}};w.isFunction(k.markFeatureInteractive)&&k.markFeatureInteractive("atc",{hasComponents:!0,components:[{name:"aw-mash",alwaysInteractive:!0}]});d.declarative("aw-mash",["click"],function(b){var a=k.ue;b&&b.data&&v.setShouldUseNatc(b.data);a&&a.count&&b&&b.data&&"add-to-cart"===b.data.buttonID&&a.count("DetailPage_MobileApp_AddToCart",(a.count("DetailPage_MobileApp_AddToCart")||0)+1);"undefined"!==typeof b.$target.context.id&&
"mobb.addToCart"===b.$target.context.id&&(b.data.isMobbSecondNew=!0);b=q.setNatcQuantityFromDom(b);"object"===typeof b&&"object"===typeof b.data&&"string"===typeof b.data.buttonID&&"function"===typeof J[b.data.buttonID]&&J[b.data.buttonID](b.data)});d.declarative("aw-mash",["touchstart"],function(b){var a=b.$event.originalEvent,c=k.ue;a.acknowledge&&(a.acknowledge(0<b.$currentTarget.length?b.$currentTarget[0]:l),c&&c.count&&c.count("tnr-post-ack-atc",(c.count("tnr-post-ack-atc")||0)+1))});d.on("js-trigger-aw-mash",
function(b,a){v.setShouldUseNatc(b);I(b,a)});return{hideAtcToast:A,updateAtcToast:K}});"use strict";g.when("A","aw-mash").register("aw-mash-open-external-url",function(d,f){d.declarative("aw-mash-open-external-url",["click"],function(d){f.openInExternalBrowser({url:d.data.url});return!1})});"use strict";g.when("A").register("mobileiv-images",function(){return{imageArray:[]}});g.when("A","jQuery","a-carousel-framework","atf","mobileiv-images").execute(function(d,f,e,a,c){function h(a,c,d){amazon.mash.showImageGallery({title:a,
startIndex:c,imageUrls:d});g.when("mobileIBmetricCollectionWeblab").execute(function(a){if(a.isMobileIBmetricCollectionEnabled)if(a.onPrimaryImg)if(a.IVReqCount>a.IVSuccessCount){a.logCountAndTime("dpmob_primaryImageImmersiveViewRequestServed");a.IVSuccessCount++;var c=a.IVCountsDiff;a.IVCountsDiff=a.IVReqCount-a.IVSuccessCount;a.IVCountsDiff>c&&(a.logSpecificCount("dpmob_primaryImageImmersiveViewRequestFailed",1),a.logSpecificCount("dpmob_primaryImageInteractionFailed",1))}else a.logCountAndTime("dpmob_primaryImageImmersiveViewRequestServedWithoutPlaced");
else a.logCountAndTime("dpmob_altImagesImmersiveViewRequestServed")})}function v(a){var c=e.getCarouselByName(a);if("undefined"===typeof c)for(var d=e.getAllCarousels(),f=0;f<d.length;f++){var h=d[f];if(h.getAttr("name")===a){c=h;break}}return c}k.ue&&k.ue.count&&k.performance&&k.performance.now&&ue.count("immersive_view_mobile_app_time",performance.now());d.declarative("a-secondary-view-native",["click"],function(a){var d=a.data&&a.data.titleText?a.data.titleText:"Product Image Gallery",e=0<f(".lookbook \x3e .lookbook-container .a-carousel").length?
!1:0<f(".lookbook \x3e .lookbook-container").length,m=e?f(".lookbook \x3e .lookbook-container"):v("image-block-carousel"),t=0,l=f("#landing-image-wrapper").data("includeInGallery")?1:0;if("undefined"!==typeof m&&(e=e?m.parent().find("progress").prop("value"):m.getAttr("pageNumber"),"number"===typeof e)){t=Math.max(0,e-1-l);c.enableDp60Videos&&t>=c.dp60VideoStartIndex-1&&(t-=c.dp60VideoCount);var l=m.dom.$carousel.children("li"),y=1,B=l.find(".preferredmodel-imageblock-main-image").last().closest("li").index()||
0;0<B&&e>B&&(y+=1,--t);0!=t&&"undefined"!==typeof m.dom&&"undefined"!==typeof m.dom.$carousel&&0<f(m.dom.$carousel.children("li")[y]).find("a.video-data-wrapper").length&&--t;l=l.find(".lookbook-stylefeed").last().closest("li").index()||0;0!=t&&"undefined"!==typeof m.dom&&"undefined"!==typeof m.dom.$carousel&&0<l&&l<e&&--t;0!=t&&"undefined"!==typeof m.dom&&"undefined"!==typeof m.dom.$carousel&&c.dedicatedSecondImageBlockEnabled&&--t;c&&c.imageArray&&t>=c.imageArray.length&&(t=0)}if(0<f("#swf-share-icon.android").length&&
a.data.shareParams){var m=a.data.shareParams,C={apply:function(a,c){}},p={title:d,startIndex:t,imageUrls:c.imageArray,messagePlain:m.messagePlain,subject:m.subject,imageUrl:m.imageURL,url:m.url};g.when("immersiveViewWithShare").execute(function(a){(k.cordova&&k.cordova.require("cordova/exec"))(C,C,"ShowImageGallerySocial","ShowImageGalleryWithShare",p)})}else h(d,t,c.imageArray);a.$event.preventDefault()})});"use strict";g.when("A","aw-mash").execute(function(d,f){var e={offers:function(a){var c=
a.asin||a.inputs.asin;"1"===a.nativePage?f.showOfferListingPage({asin:c}):k.location.href="/gp/aw/ol/"+c}};d.declarative("aw-mash",["click"],function(a){"object"===typeof a&&"object"===typeof a.data&&"string"===typeof a.data.buttonID&&"function"===typeof e[a.data.buttonID]&&e[a.data.buttonID](a.data)})});"use strict";g.when("A","a-checkbox").register("aw-mbb-checkbox-helper",function(d,f){var e=d.$;return{updateData:function(a){var c=0<e(".a-accordion-active ").length?".a-accordion-active ":"";a.inputs.a+=
"|"+e(c+"#mbb-checkbox-input").val();a.inputs.oid+="|"+e(c+"#mbb-offering-id").val();a.inputs.quantity+="|"+e(c+"#mbb-quantity").val();return a},mbbCheckboxIsChecked:function(){var a=f(".mbb-checkbox");return 0<a.size()&&a.isChecked()}}});"use strict";g.when("a-checkbox","add-to-cart-parameter-name","add-to-cart-constants","natc-check").register("mobile-app-gift",function(d,f,e,a){return{updateData:function(c){var h=d("#gift-wrap");0<h.size()&&h.isChecked()&&(a.getShouldUseNatc()?(h=f.constructParameterName(e.ITEM_TYPES.BASE,
0,e.PARAMETER_PATHS.GIFTOPTIONS),c.inputs[h]="true"):c.inputs.isToBeGiftWrapped=!0);return c}}});"use strict";g.when("A").register("mobile-app-atc-action",function(d){return{atcAction:function(f,e){var a=d.state("program-winner");null!=a&&"undefined"!==typeof a&&"Pantry"===a.Type?g.when("pantry-mobile-app-atc-setup").execute(function(a){a.addToCart(f)}):e(f)}}});"use strict";g.when("A").register("natc-check",function(d){function f(a){e=a!==l&&a.shouldUseNATCMobileApp!==l&&a.addToCartUrl!==l?a.shouldUseNATCMobileApp:
!1}var e=!1;return{setShouldUseNatc:f,getShouldUseNatc:function(){return e},getAtcEndpoint:function(a){f(a);return e?a.addToCartUrl:a.formAction||"/gp/aw/detail/ajax/add-to-cart"}}});"use strict";g.when("natc-check","dp-csm-metrics","atc-constants").register("atc-metrics",function(d,f,e){function a(a,d){f.updateCount(d);f.recordLatencyTime(a)}return{recordAtcAjaxCall:function(){if(d.getShouldUseNatc()){var a=e.NATC_AJAX_LATENCY;f.updateCount(e.NATC_AJAX_COUNT)}else a=e.ATC_AJAX_LATENCY,f.updateCount(e.ATC_AJAX_COUNT);
f.startLatencyTime(a)},recordAtcAjaxSuccess:function(){d.getShouldUseNatc()?a(e.NATC_AJAX_LATENCY,e.NATC_AJAX_SUCCESS_COUNT):a(e.ATC_AJAX_LATENCY,e.ATC_AJAX_SUCCESS_COUNT)},recordAtcAjaxFailure:function(){d.getShouldUseNatc()?a(e.NATC_AJAX_LATENCY,e.NATC_AJAX_FAILURE_COUNT):a(e.ATC_AJAX_LATENCY,e.ATC_AJAX_FAILURE_COUNT)}}});"use strict";g.register("atc-constants",function(){return{ATC_AJAX_COUNT:"mobileApp:atc:ajax",ATC_AJAX_SUCCESS_COUNT:"mobileApp:atc:ajax:success",ATC_AJAX_FAILURE_COUNT:"mobileApp:atc:ajax:failure",
ATC_AJAX_LATENCY:"mobileapp:atc:ajax",NATC_AJAX_COUNT:"mobileApp:atc:ajax:natc",NATC_AJAX_SUCCESS_COUNT:"mobileApp:atc:ajax:success:natc",NATC_AJAX_FAILURE_COUNT:"mobileApp:atc:ajax:failure:natc",NATC_AJAX_LATENCY:"mobileapp:atc:ajax:natc",ADD_TO_CART_INPUT_VALIDATION_SUCCESS:"mobileApp:addToCart:inputValidation:success",ADD_TO_CART_INPUT_VALIDATION_FAILURE:"mobileApp:addToCart:inputValidation:failure"}});"use strict";g.when("A","add-to-cart-parameter-name","add-to-cart-constants").register("update-atc-data",
function(d,f,e){var a=d.$;return{updateQuantity:function(c){var d=f.constructParameterName(e.ITEM_TYPES.BASE,0,e.PARAMETER_PATHS.QUANTITY);c.inputs[d]?c.inputs.quantity=c.inputs[d]:a("#mobileQuantityDropDown").length&&(a(".a-accordion-active select.mobileQuantityDropDown").length?c.inputs[d]=a(".a-accordion-active select.mobileQuantityDropDown").val():c.inputs[d]=a("#mobileQuantityDropDown").val(),c.inputs.quantity=c.inputs[d]);return c},setNatcQuantityFromDom:function(a){var d=JSON.parse(a.$currentTarget.attr("data-aw-mash")).inputs.quantity,
g=f.constructParameterName(e.ITEM_TYPES.BASE,0,e.PARAMETER_PATHS.QUANTITY);d&&(a.data.inputs[g]=d);return a}}});"use strict";g.when("A","atc-constants","add-to-cart-constants","add-to-cart-parameter-name","dp-csm-metrics").register("atc-data-validation",function(d,f,e,a,c){var h=d.$;return{validateData:function(g){var k,q;q=l;0<h("#buybox .a-accordion-active #atc-declarative").length?q=h("#buybox .a-accordion-active #atc-declarative")[0]:0<h("#buybox #atc-declarative").length&&(q=h("#buybox #atc-declarative")[0]);
var u=l;if(q!==l&&q.dataset!=l)for(k in q.dataset)try{u=JSON.parse(String(q.dataset[k]));break}catch(t){}k=u;if(k!==l){if(q=[e.CSRF_TOKEN,e.CLIENT_NAME,a.constructParameterName(e.ITEM_TYPES.BASE,0,e.PARAMETER_PATHS.ASIN),a.constructParameterName(e.ITEM_TYPES.BASE,0,e.PARAMETER_PATHS.OFFER_LISTING_ID)],k!==l&&k.inputs!==l&&g!==l&&g.inputs!==l&&Array.isArray(q))for(u=0;u<q.length;u++){var m=q[u];k.inputs[m]!==g.inputs[m]?(c.updateCount(f.ADD_TO_CART_INPUT_VALIDATION_FAILURE),d.trigger("dpLogFatalsEvent",
'ERROR: Add To Cart Input Validation Failed for "'+m+'". Expected "'+k.inputs[m]+'", but received "'+g.inputs[m]+'".',"ERROR","mobileApp_addtocart_fatal")):c.updateCount(f.ADD_TO_CART_INPUT_VALIDATION_SUCCESS)}}else d.trigger("dpLogFatalsEvent","WARNING: Could not validate add to cart parameters. Could not fetch expected data","WARN","mobileApp_addtocart_fatal")}}});"use strict";g.when("a-checkbox","add-to-cart-parameter-name","add-to-cart-constants","natc-check").register("mobile-app-device-prereg",
function(d,f,e,a){return{updateData:function(c){var h=d("#account-linking");if(a.getShouldUseNatc()&&0<h.size()){var g=f.constructParameterName(e.ITEM_TYPES.BASE,0,e.PARAMETER_PATHS.DEVICEPREREGISTRATION);c.inputs[g]=h.isChecked()?"true":"false"}return c}}});"use strict";g.when("add-to-cart-parameter-name","add-to-cart-constants").register("atc-eligibility",function(d,f){var e={};return{updateEligibilityData:function(a){var c=d.constructParameterName(f.ITEM_TYPES.BASE,0,f.PARAMETER_PATHS.ASIN),h=
d.constructParameterName(f.ITEM_TYPES.BASE,0,f.PARAMETER_PATHS.OFFER_LISTING_ID);a.inputs.programEligibility=JSON.stringify({primaryAsinData:{asin:a.inputs[c],offerListingId:a.inputs[h]},eligibility:e});return a},registerProgramEligibility:function(a,c){a&&(e[a]=c)}}});"use strict";g.when("A","aw-mash").register("patc-csm-init",function(d,f){function e(){return"true"===d.$("#uss-mobileApp").val()&&d.$("#ussEligible").length&&"1"===d.$("#ussEligible").val()}var a;"use strict";return{initialize:function(){e()||
g.when("ax:csm-metrics","ax:constants").execute(function(c,d){c.initLatencyTime(d.CSM_PREFIX);a=c})},recordAXControlMetric:function(c){!e()&&a&&((c=c.http.getResponseHeader("x-amz-rid"))?a.mapRequestToLatencyMetrics(c):a.updateCount("no-rid"),a.recordLatencyTime("ld"))}}});"use strict";g.when("A","mash").register("aw-mash",function(d,f){return f});"use strict";g.when("A").execute("tnr-hack-acknowledgement",function(d){function f(){}function e(a,c){d.trigger("dp:click-to-buyable",{featureName:c});
a.addEventListener("touchstart",function(a){var d="tnr-post-ack-"+c;a.ack&&(a.ack(),h(d,h(d)||1))})}function a(a,c,d){l("tnr-"+a+"-marked");l("tnr-"+a+"-"+c+"-seen");h("tnr-features-tracked",h("tnr-features-tracked")||1);d?h("tnr-"+a+"-element-exist",1):h("tnr-"+a+"-element-does-not-exist",1)}var c=k.ue,h=c&&c.count||f,l=c&&c.tag||f,x={imageBlock:"tnr-imageblock",mobile_buybox:"tnr-mobile_buybox",buybox:"tnr-buybox",buyBoxAccordion:"tnr-buyboxaccordion",buyBoxAccordionApp:"tnr-buyboxaccordionapp",
mobileapp_buybox:"tnr-mobileapp_buybox",pantryBuyBox:"tnr-pantrybuybox",agsTips:"tnr-agstips"};d.each({imageBlock:["imageBlock"],buybox:"mobile_buybox buybox buyBoxAccordion buyBoxAccordionApp mobileapp_buybox pantryBuyBox agsTips".split(" ")},function(c,f){d.each(c,function(c){var d=c+"_feature_div",k=document.getElementById(d);k?(e(k,f),a(f,c,!0)):x[c]&&g.when(x[c]).execute(function(){var g=document.getElementById(d);g?(e(g,f),a(f,c,!1)):h("tnr-"+f+"-element-not-available",1)})})});var q=d.$;d.each(["#atc-declarative",
"#atc-twister-declarative","#prohibitedBuyBox-popover"],function(a){q(a).each(function(){var c=q(this).attr("id")||"unknown-id",e=q(this).data("action")||"unknown-action";l("tnr-atc-marked");"#atc-twister-declarative"===a&&d.trigger("dp:click-to-buyable",{featureName:"atc"});l("tnr-atc-"+c+"-"+e+"-seen");h("tnr-features-tracked",h("tnr-features-tracked")||1)})});(c=document.getElementById("#prohibited-buybox-addToCart"))&&c.addEventListener("touchstart",function(a){a.ack&&(a.ack(),h("tnr-post-ack-atc",
h("tnr-post-ack-atc")||1))})});"use strict";"use strict"});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("USSAlmCartActionAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){"use strict";b.when("A").register("uss-alm-atc-constants",function(a){return{clientIdList:{USS_ALM_WIDGET_DP_MOBILE:"uss-alm-widget-dp-mobile",USS_ALM_WIDGET_DP_DESKTOP:"uss-alm-widget-dp-desktop",USS_ALM_WIDGET_SEARCH_MOBILE:"uss-alm-widget-search-mobile",USS_ALM_WIDGET_SEARCH_DESKTOP:"uss-alm-widget-search-desktop"},
metrics:{SECONDARY_ALM_ADD_TO_CART_CLICK_SUCCESS_COUNTER:"secondaryAlmAtcClickSuccess",SECONDARY_ALM_ADD_TO_CART_CLICK_ERROR_COUNTER:"secondaryAlmAtcClickError"}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageUSSPromotionNudgesAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(g){var r=window.AmazonUIPageJS||window.P,u=r._namespace||r.attributeErrors,f=u?u("DetailPageUSSAssets",""):r;f.guardFatal?f.guardFatal(g)(f,window):f.execute(function(){g(f,window)})})(function(g,r,u){g.when("A").register("uss-constants-common",function(f){return{classList:{SHOW_ELEMENT:"aok-block",HIDE_ELEMENT:"aok-hidden",STOP_SCROLLING:"uss-u-no-scroll",LIGHT_BOX_JS_HOOK:"js-light-box",LIGHT_BOX_IDENTIFIER:"uss-o-light-box",RIGHT_SIDE_SHEET:"uss-o-right-side-sheet",RIGHT_SIDE_SHEET_LAYOUT:"uss-l-right-side-sheet",
SHEET_OPEN:"is-open",SHEET_CLOSE:"is-close",USS_SHEET_VIEW_IDENTIFIER:"uss-sheet-view",CLOSE_ICON:"uss-o-close-icon",CLOSE_ICON_MEDIUM:"uss-o-close-icon-medium",USS_SHEET_VIEW_CLOSE_ICON:"uss-sheet-view-close-icon",PROMISING_UI_ELEMENT:"uss-o-promising-ui-element",PROMISING_UI_ELEMENT_ANIMATION:"uss-o-promising-ui-element-animation",IS_LOADING:"is-loading",IS_RESOLVED:"is-resolved",UI_PROMISE:"ui-promise",UI_VALUE:"ui-value",TEMPLATE_STORE:"uss-template-store",TEMPLATE:"uss-template",TEMPLATE_NAME:"template-name",
ATC_ACKNOWLEDGEMENT_MESSAGE:"atc-acknowledgement-message",ATC_GENERIC_ERROR:"atc-generic-error",ATC_STATUS_MESSAGE_COMPONENT:"uss-c-atc-status-msg",ATC_SUCCESS:"uss-mobile-atc-success",ATC_ERROR:"atc-error",ITEM_IN_CART:"item-in-cart",CART_STATUS_MESSAGE_COMPONENT:"uss-c-cart-status-msg",CART_SUB_TOTAL:"cart-sub-total",CART_COUNT:"cart-count",SHIPPING_DETAILS:"uss-c-shipping-details",SHIPPING_MESSAGE_PLACEHOLDER:"shipping-message-placeholder",MAIN_IMAGE:"main-image",SUB_NAV:"uss-c-sub-nav",CHECKOUT_BUTTON:"checkout-btn",
CART_BUTTON:"cart-btn",CHECKOUT_FORM:"checkout-form",FACEOUT_IMAGE:"p13n-sc-list-image-container",FACEOUT_TITLE:"uss-asin-title",FACEOUT_REVIEW_STARS:"uss-review-stars",FACEOUT_BEST_SELLER:"p13n-best-seller",FACEOUT_PRICE:"uss-price",ADDITIONAL_RECOMMENDATIONS_TOGGLE_ACTION:"uss-additional-recommendations-toggle-button",CONTINUE_SHOPPING_LINK:"continue-shopping",SUCCESS_ELEMENT:".p13n-sc-atc-success",ERROR_ELEMENT:".p13n-sc-atc-error",REMOVE_FROM_CART_ERROR_ELEMENT:".p13n-sc-remove-from-cart-error",
BUTTON_ELEMENT:".a-button-primary",DISABLE_BUTTON:"a-button-disabled",QS_GRID_ELEMENT:".uss-qs-widget-container",QS_INC_BUTTON:".qs-increase-quantity",QS_DEC_BUTTON:".qs-decrease-quantity",QS_LABEL_ELEMENT:".qs-quantity-label-text",QS_MAX_ORDER_LIMIT:".max-order-quantity-message",QS_OPACITY:"uss-qs-opacity",QS_TRASH_CAN:".qs-decrease-quantity-trash-can",QS_DEC_BUTTON_HYPHEN:".uss-qs-decrease-quantity-hyphen"},fatalMessagesList:{INVALID_SHEET_ID:"sheetID must be valid string",INVALID_CONSTRUCTOR_USAGE:"Constructor needs to be called with 'new' keyword",
INCORRECT_PARAMETER_PASSED:"Incorrect parameter passed."},quantityStepperUpdateType:{INCREMENT:"increment",DECREMENT:"decrement"},pageType:{detailPage:{mobileApp:"DetailWebView",mobileWeb:"DetailAW"}},subPageType:"mobile-uss",widgetType:{WIDGET:"uss-widget",RECOMMENDATION_WIDGET:"uss-recommendation-widget",NO_RECOMMENDATION_WIDGET:"uss-no-recommendation-widget",LIST_RECOMMENDATION:"uss-list-recommendation-widget",CAROUSEL_RECOMMENDATION:"uss-carousel-recommendation-widget",PRIMARY_ACTION_STATUS_WIDGET:"uss-primary-action-status-widget",
ATCStatusWidget:"uss-c-atc-status-widget",ATC_STATUS_IMB_WIDGET:"atc-status-imb-widget"},layout:{defaultLayout:{DEFAULT_LAYOUT:"uss-l-default-layout",HEAD:"uss-c-head",BODY:"uss-c-body",HEAD_DIVIDER:"uss-c-head-divider",BOTTOM_MARGIN_BETWEEN_WIDGETS:"a-spacing-medium",TOP_MARGIN_BETWEEN_WIDGETS:"a-spacing-top-medium",SKELETON_LOADER:"uss-loading-skeleton",RECOMMENDATION_LOADING_MESSAGE:"loading-message",RECOMMENDATION_LOADED_MESSAGE:"uss-recommendations-loaded-message"},quantityStepper:{CONTAINER_ID_PREFIX:"#uss-qs-container-"}},
actionSources:{DP_ATC_CLICK:"dp-atc-click",USS_INGRESS_CLICK:"uss-ingress-click",USS_INLINE_ATC_CLICK:"uss-inline-atc-click",SHEET_CLOSE_BUTTON_CLICK:"sheet-close",CONTINUE_SHOPPING_CLICK:"continue-shopping-click"},stores:{ATC_STATUS_STORE:"uss-atc-status-store",RECOMMENDATION_DATA_STORE:"uss-recommendation-data-store",USS_SHEET_STORE:"uss-sheet-store"},actions:{USS_OPEN:"uss-open",USS_CLOSE:"uss-close",RECOMMENDATION_DATA_RECEIVE:"recommendation-data-receive",ATC_RECEIVE:"atc-receive"},metrics:{CART_API_PROMISE_RESOLVED_TIMER:"cartApiPromiseResolve",
PRIMARY_SUMMARY_API_PROMISE_RESOLVED_TIMER:"primarySummaryApiPromiseResolve",SECONDARY_SUMMARY_API_PROMISE_RESOLVED_TIMER:"secondarySummaryApiPromiseResolve",PRODUCTV2IMAGES_API_PROMISE_RESOLVED_TIMER:"productV2ImagesApiPromiseResolve",ATC_PROMISE_RESOLVED_TIMER:"atcPromiseResolve",SECONDARY_ATC_PROMISE_RESOLVED_TIMER:"secondaryAtcPromiseResolve",PRIMARY_ATC_STATUS_PROMISE_RESOLVED_TIMER:"primaryAtcStatusPromiseResolve",SECONDARY_ATC_STATUS_PROMISE_RESOLVED_TIMER:"secondaryAtcStatusPromiseResolve",
PRIMARY_ADDITEMS_API_PROMISE_RESOLVED_TIMER:"primaryAddItemsApiPromiseResolve",SECONDARY_ADDITEMS_API_PROMISE_RESOLVED_TIMER:"secondaryAddItemsApiPromiseResolve",PERCOLATE_DATA_PROMISE_RESOLVED_TIMER:"percolateDataPromiseResolve",CART_API_PROMISE_REJECTED_COUNTER:"cartApiPromiseRejected",PRIMARY_SUMMARY_API_PROMISE_REJECTED_COUNTER:"primarySummaryApiPromiseRejected",SECONDARY_SUMMARY_API_PROMISE_REJECTED_COUNTER:"secondarySummaryApiPromiseRejected",PRODUCTV2IMAGES_API_PROMISE_REJECTED_COUNTER:"productV2ImagesApiPromiseRejected",
USS_PRIMARY_ADD_ITEMS_API_CALL_COUNTER:"ussPrimaryAddItemsApiCall",USS_PRIMARY_ATC_MASON_CALL_COUNTER:"ussPrimaryAtcMasonCall",USS_PRIMARY_ATC_AW_MASH_CALL_COUNTER:"ussPrimaryAtcAwMashCall",USS_PRIMARY_AW_MASH_GURUPA_COUNTER:"ussPrimaryAtcAwMashCallGurupa",USS_PRIMARY_AW_MASH_NATC_COUNTER:"ussPrimaryAtcAwMashCallNatc",USS_PRIMARY_AW_MASH_SERVER_FAILURE_COUNTER:"ussPrimaryAtcAwMashServerFailure",USS_PRIMARY_AW_MASH_NATC_FAILURE_COUNTER:"ussPrimaryAtcAwMashNatcFailure",USS_PRIMARY_AW_MASH_GURUPA_FAILURE_COUNTER:"ussPrimaryAtcAwMashGurupaFailure",
PRIMARY_ATC_NATC_PARAM_V1_COUNTER:"primaryAtcNatcParamV1",PRIMARY_ATC_NATC_PARAM_V2_COUNTER:"primaryAtcNatcParamV2",PRIMARY_ATC_NATC_PARAM_INVALID_COUNTER:"primaryAtcNatcParamInvalid",ATC_PROMISE_REJECTED_COUNTER:"atcPromiseRejected",PRIMARY_ATC_STATUS_PROMISE_REJECTED_COUNTER:"primaryAtcStatusPromiseRejected",PRIMARY_ATC_MASON_CALL_REJECTED_COUNTER:"primaryAtcMasonCallRejected",SECONDARY_ATC_STATUS_PROMISE_REJECTED_COUNTER:"secondaryAtcStatusPromiseRejected",PRIMARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER:"primaryAddItemsApiPromiseRejected",
SECONDARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER:"secondaryAddItemsApiPromiseRejected",PERCOLATE_DATA_PROMISE_REJECTED_COUNTER:"percolateDataPromiseRejected",SECONDARY_ADD_TO_CART_CLICK_COUNTER:"secondaryAtcClick",COMPATIBLE_BROWSER_COUNTER:"compatibleBrowser",NON_COMPATIBLE_BROWSER_COUNTER:"nonCompatibleBrowser",FACEOUT_IMAGE_CLICK_COUNTER:"faceout:imageClick",FACEOUT_REVIEW_STARS_CLICK_COUNTER:"faceout:reviewStarClick",FACEOUT_TITLE_CLICK_COUNTER:"faceout:titleClick",FACEOUT_PRICE_CLICK_COUNTER:"faceout:priceClick",
FACEOUT_BEST_SELLER_CLICK_COUNTER:"faceout:bestSellerClick",SEE_MORE_EXISTENCE_COUNTER:"ussListWidget:seeMore",SEE_MORE_CLICK_COUNTER:"ussListWidget:seeMoreClick",SEE_LESS_CLICK_COUNTER:"ussListWidget:seeLessClick",CHECKOUT_FORM_CLICK_COUNTER:"checkoutFormClick",CART_BUTTON_CLICK_COUNTER:"cartButtonClick",CONTINUE_SHOPPING_CLICK:"continueShoppingClick",PAGE_LANDING_PRECONDITIONS_PASSED:"pageLandingPreconditionsPassed",POST_ATC_PRECONDITIONS_FAILED:"postATCPreconditionsFailed",PROGRAM_ELIGIBILITY_REGISTRY_OVERWRITTEN:"programEligibilityRegistryOverwritten",
USS_WEBLAB_IN_TREATMENT:"ussWeblabInTreatment",POST_ATC_WARRANTY_SELECTED_OR_INVALID_ACTION:"postATCFailedForWarrantyOrInvalidAction",POST_ATC_WEBLAB_DISABLED:"postATCFailedWeblabIsDisabled",PRIMARY_ADD_TO_CART_CLICK_COUNTER:"primaryAtcClick",USS_PRIMARY_ATC_DEFAULT_ENDPOINT_SUCCESS_RESPONSE:"primaryAtcSuccessMobileWebUsingDefaultEndpoint",USS_PRIMARY_ATC_DEFAULT_ENDPOINT_FAIL_RESPONSE:"primaryAtcFailureMobileWebUsingDefaultEndpoint",PRIMARY_ATC_SUCCESS_COUNTER:"ussAtcSuccess",PRIMARY_ATC_SUCCESS_USS_ELIGIBLE_COUNTER:"ussAtcSuccessWithUssEligibleTrue",
PRIMARY_ATC_WARRANTY_SELECTED_USS_ELIGIBLE:"PrimaryAtcWarrantySelectedInBuyboxAndUssEligible",PRIMARY_ADD_TO_CART_SUCCESS_METHOD_CALLED:"onPrimaryAddToCartSuccessCalled",AFTER_PRIMARY_ATC_ACTION_METHOD_CALLED:"callAfterPrimaryATCActionCalled",QUANTITY_STEPPER_CLICK:"ussQuantityStepperClick",QUANTITY_STEPPER_INCREMENT_CLICK:"ussQuantityStepperIncrementClick",QUANTITY_STEPPER_DECREMENT_CLICK:"ussQuantityStepperDecrementClick",QUANTITY_STEPPER_QUANTITY_UPDATE_FAILURE:"ussQuantityStepperQuantityUpdateFailure",
QUANTITY_STEPPER_MODIFY_ITEMS_API_PROMISE_RESOLVED_TIMER:"ussQuantityStepperModifyItemsApiPromiseResolve",QUANTITY_STEPPER_MAX_ORDER_QUANTITY_REACHED:"ussQuantityStepperMaxOrderQuantityReached",QUANTITY_STEPPER_SUMMARY_API_CALL_FAILURE:"ussQuantityStepperSummaryApiCallFailure"},transitionTimingFunction:{EVEN_EASE:"cubic-bezier(0.4, 0, 0.6, 1)",ENTER_EASE:"cubic-bezier(0, 0, 0.2, 1)",EXIT_EASE:"cubic-bezier(0.4, 0, 1, 1)",EASE_IN:"ease-in",EASE_OUT:"ease-out"},animationType:{FADE_IN:"fadeIn",NO_ANIMATION:"noAnimation"},
nexusConstants:{PRODUCER_ID:"uss",SCHEMA_ID:"uss.CounterData.",SCHEMA_VERSION:"3"},cartApiConstants:{USS_CHECKOUT_URL:"/gp/cart/mobile/go-to-checkout.html/ref\x3dpa_lh_co_dup?ie\x3dUTF8\x26dp\x3dcheckout",USS_CART_TYPE:"RETAIL",USS_SHIPPING_MESSAGE:'\n\n      \n\n\n\n  \x3cdiv class\x3d"a-row a-spacing-base"\x3e\n    \n\n  \x3c/div\x3e\n',USS_ENVIRONMENT_PROD:"prod",USS_ENVIRONMENT_DEV:"dev",USS_PRODUCTV2IMAGES_PROD_URL_PATH:"https://m.media-amazon.com/images/I/",USS_PRODUCTV2IMAGES_DEV_URL_PATH:"https://media-origin-na-ssl.integ.amazon.com/images/I/",
USS_PRODUCTV2IMAGES_DIMENSIONS:"._SS40_.",USS_SECONDARY_ATC_QUANTITY:1,USS_PRIMARY_ATC_REFTAG:"mw_pa_dp_buy_crt",BASE_10:10},queryStrings:{qid:"qid",sr:"sr"},events:{PRIMARY_ATC_SUCCESS_EVENT:"dpx:add-to-cart:success",QUANTITY_STEPPER_UPDATE_EVENT:"uss-qs-update-quantity"}}});g.when("dp-flux-attribution","uss-constants-common").register("uss-constants",function(f,g){g.ussCTI={CATEGORY:"Website",TYPE:"Detail Page",ITEM:"USS"};g.metrics.PREFIX="uss:";g.ajaxParams={BASE_URL:"/gp/product/handle-buy-box",
REFTAG:"dp_start-bbf_1_glance",ASIN:"ASIN",OFFER_LISTING_ID:"offerListingID",AJAX_TIMEOUT:1E4};g.actionSources.SHEET_CLOSE_BUTTON_CLICK="sheet-close-button-click";g.ussCommonAttribution=new f("uss-common",g.ussCTI.CATEGORY,g.ussCTI.TYPE,g.ussCTI.ITEM);g.defaultAtcAnimationType=g.animationType.FADE_IN;g.atcAnimationStatusEvent="uss:atc:animation:status:resolved";return g});g.when("dp-flux-utils","uss-constants","nexus-util").register("uss-logger-service",function(f,g,n){function q(b,a){if(f.isNonEmptyString(b))b=
g.metrics.PREFIX+b,ue&&ue.count&&(a===u&&(a=1),ue.count(b,a),n.emitCounterData(b,a));else throw Error("counterKey must be non empty string");}function d(b){if(f.isNonEmptyString(b))this._timerName=b,this._startTime=0;else throw Error("timerName must be non empty string");}d.prototype={start:function(){this._startTime=Date.now()},stop:function(){this._startTime&&q(this._timerName,Date.now()-this._startTime)}};return{logCounter:q,Timer:d}});g.when("A","uss-utils","uss-logger-service","uss-constants").register("uss-preconditions",
function(f,g,n,q){function d(a){a=f.$("#"+a+"_feature_div").html();null!==a&&(a=a.trim());return null!==a&&0<a.length}function b(){return f.capabilities.transform&&f.capabilities.transition&&g.isFlexBoxSupported()}function a(){return f.$("#uss-weblabTreatment").val()}var c=/^T[0-9]+$/;b()?n.logCounter(q.metrics.COMPATIBLE_BROWSER_COUNTER):n.logCounter(q.metrics.NON_COMPATIBLE_BROWSER_COUNTER);return{isUssConditionsPassed:function(){var a;if(a="true"===f.$("#uss-serverPreconditionsPassed").val()){if(a=
b()&&!d("scheduledDelivery")&&!d("partialStateBuyBox"))a=f.$("#add-to-cart-button"),a=a.length&&"submit"==a.prop("type");a=a&&!(f.$("#attach-accessory-card-deck").length&&(g.isMobileApp()||f.$("#attach-accessory-mobile-web-mbs").length))}return a},isUssWeblabInTreatment:function(){return c.test(a())},triggerUSSWeblabValue:function(){return c.test(f.$("#uss-miniFrameworkWeblabTreatment").val())?f.$("#uss-weblabValue").val():1},ussWeblabTreatmentValue:a,checkIfSnsInterstitialExists:function(){return d("snsInterstitialWidget")},
getSnsInterstitialTrigger:function(){return"show-sns-interstitial"},isBrowserUssCompatible:b,isMobileAppUssEligible:function(){return f.$("#ussEligible").length&&"1"===f.$("#ussEligible").val()}}});g.when("A","3p-promise","uss-constants","uss-logger-service").register("uss-utils",function(f,g,n,q){function d(){return"true"===f.$("#uss-mobileApp").val()}function b(a){var e=null;m.hasOwnProperty(a)&&(e=m[a]);return e}function a(){}function c(a){}var h=f.$,l=n.classList,k=n.pageType,p=n.subPageType,
e=h("body"),m={},w=["isPreview","forceWidgets","previewCampaigns","auditEnabled"];(function(){var a=r.location.search,a=a.substr(1);a.split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&(m[a[0]]=a[1])})})();return{loadImage:function(a,e){return new g(function(b,c){e=e||"";var m=h("\x3cimg src\x3d'"+a+"' alt\x3d'"+e+"'\x3e");m.load(function(){b(m)});m.error(function(a){c(a)});m[0].complete&&b(m)})},isFlexBoxSupported:function(){var a=f.$("\x3cdiv\x3e\x3c/div\x3e")[0];return""===a.style.flex||
""===a.style.webkitFlex||""===a.style.msFlex||""===a.style.MozBoxFlex||""===a.style.webkitBoxFlex?!0:!1},disablePageScroll:function(){e.addClass(l.STOP_SCROLLING)},enablePageScroll:function(){e.removeClass(l.STOP_SCROLLING)},isMobileApp:d,getPageType:function(){return!1===d()?k.detailPage.mobileWeb:k.detailPage.mobileApp},getSubPageType:function(){return p},getDebugParams:function(){var a={};w.forEach(function(e){var m=b(e);m&&(a[e]=m)});return a},shouldFireAndForgetWeblabTrigger:function(){var a=
!1;0!=h("#uss-shouldFireAndForgetWeblabTrigger").length&&(a="true"===h("#uss-shouldFireAndForgetWeblabTrigger").val());return a},fireAndForgetWeblabTrigger:function(a,e){var b="/ussx/weblab-trigger?",b=/^T[0-9]+$/.test(f.$("#uss-miniFrameworkWeblabTreatment").val())?b+("weblabValue\x3d"+a+"\x26treatment\x3d"+e):b+("triggerWeblab\x3d"+a+"\x26treatment\x3d"+e);r.navigator&&navigator.sendBeacon?navigator.sendBeacon(b)||f.$.ajax({url:b}):f.$.ajax({url:b})},showATCSuccess:function(){f.$("#atc-toast").length&&
f.$("#atc-success").length&&(f.$("#atc-toast").css("display","block"),f.$("#atc-toast").addClass("atc-toast-success-styles"),f.$("#atc-success").css("display","block"),setTimeout(function(){f.$("#atc-success").css("display","none");f.$("#atc-toast").css("display","none");f.$("#atc-toast").removeClass("atc-toast-success-styles")},1500))},showATCFailure:function(){f.$("#atc-toast").length&&f.$("#atc-failed").length&&(f.$("#atc-toast").css("display","block"),f.$("#atc-toast").addClass("atc-toast-failure-styles"),
f.$("#atc-failed").css("display","block"),setTimeout(function(){f.$("#atc-failed").css("display","none");f.$("#atc-toast").css("display","none");f.$("#atc-toast").removeClass("atc-toast-failure-styles")},1500))},vibrateMobileApp:function(){return r.amazon&&r.amazon.cordova&&r.amazon.cordova.notification&&r.amazon.cordova.notification.vibrate&&r.amazon.cordova.notification.vibrate(50)},handleATCAnimationEnd:function(){f.$(".inst-button-space").length&&f.$(".inst-indicator").length&&(f.$(".inst-button-space").addClass("aok-hidden"),
f.$(".inst-indicator").addClass("aok-hidden"),f.$(".atc-button-text").removeClass("aok-hidden"),f.$("#add-to-cart-button").removeAttr("disabled"),f.$("body").removeClass("inst-btn-opacity"))},handleATCAnimationEndWeb:function(){f.$("#add-to-cart-button").removeAttr("disabled");var a=f.$("#a-page");0!==a.length&&a[0].style.removeProperty("opacity")},updateCartCount:function(e){r.amazon&&r.amazon.mash&&r.amazon.mash.cart&&r.amazon.mash.cart.didUpdate&&"function"===typeof r.amazon.mash.cart.didUpdate&&
r.amazon.mash.cart.didUpdate({newCartQuantity:e,successCallback:a,failCallback:c})},getUrlParameter:b,getQuantityStepperContainer:function(a){return document.querySelector(n.layout.quantityStepper.CONTAINER_ID_PREFIX+a)}}});g.when("A","atf","uss-utils").register("uss-init-helper",function(f,t,n,q){return{loadUssCommonAssetsAfterPreload:function(){g.when("uss-constants","dp-flux-action","uss-dispatcher","uss-utils").register("uss-action-creator-helper",function(d,b,a,c){function h(){f.$("#add-to-cart-button").removeAttr("disabled")}
return{primaryATCClick:function(l,k){var p=new b(d.actions.USS_OPEN,d.actionSources.DP_ATC_CLICK,{recommendationBaseIdentifier:l});k.percolateData.then(function(e){var m={isContainsRecommendation:!1,widgets:[]};e.recommendationData&&(m.widgets=e.recommendationData.widgets||[]);h();m.widgets.length||(m.widgets.push({widgetType:d.widgetType.NO_RECOMMENDATION_WIDGET}),m.recommendationBaseIdentifier=l);a.dispatch(p);k.atcData.then(function(e){var m={};1===e.isOk?m=e.atcStatusData:m.isAtcGenericError=
!0;e=new b(d.actions.ATC_RECEIVE,d.actionSources.DP_ATC_CLICK,m);a.dispatch(e)},function(){var e=new b(d.actions.ATC_RECEIVE,d.actionSources.DP_ATC_CLICK,{isAtcGenericError:!0});a.dispatch(e)});m.recommendationBaseIdentifier=l;e=new b(d.actions.RECOMMENDATION_DATA_RECEIVE,d.actionSources.DP_ATC_CLICK,m);a.dispatch(e)},function(){k.atcData.then(function(a){h();1===a.isOk?c.showATCSuccess():c.showATCFailure()},function(){c.showATCFailure()})})},secondaryATCClick:function(c,k){c.atcData.then(function(c){var e=
{};1===c.isOk?e=c.atcStatusData:e.isAtcGenericError=!0;e.params=k;c=new b(d.actions.ATC_RECEIVE,d.actionSources.USS_INLINE_ATC_CLICK,e);a.dispatch(c)},function(){})}}})},loadUssCommonAssets:function(){g.when("dp-flux-dispatcher").register("uss-dispatcher",function(d){return new d});g.when("A","uss-constants").register("promising-ui-element",function(d,b){var a=b.classList;return d.createClass({_element:null,_uiPromiseElement:null,_uiValueElement:null,_isResolved:!1,init:function(b){var d=b.find("."+
a.UI_PROMISE),l=b.find("."+a.UI_VALUE);if((b.hasClass(a.PROMISING_UI_ELEMENT)||b.hasClass(a.PROMISING_UI_ELEMENT_ANIMATION))&&d.length&&l.length)this._uiPromiseElement=d,this._uiValueElement=l,this._element=b,this.showUIPromise();else throw Error("PromisingUIElement.init()...: HTML structure is not compatible with PromisingUIElement");},showUIPromise:function(){this._element.addClass(a.IS_LOADING);this._element.removeClass(a.IS_RESOLVED);this._isResolved=!1},showUIValue:function(){this._element.addClass(a.IS_RESOLVED);
this._element.removeClass(a.IS_LOADING);this._isResolved=!0},getValueElement:function(){return this._uiValueElement},getElement:function(){return this._element},isResolved:function(){return this._isResolved}})});g.when("A","uss-sheet-component","uss-constants","uss-logger-service","uss-store-repository","dp-flux-attribution","uss-final-layout","dp-flux-view","widget-creation-helper","dp-flux-action","uss-dispatcher").register("uss-sheet-view",function(d,b,a,c,h,l,k,p,e,m,w){function f(){n=!0;var B=
a.classList,v=a.ussCTI,t=h.getStore(a.stores.USS_SHEET_STORE),q=h.getStore(a.stores.RECOMMENDATION_DATA_STORE),r=[t,q],v=new l("uss-sheet-view",v.CATEGORY,v.TYPE,v.ITEM);d.declarative(B.ADDITIONAL_RECOMMENDATIONS_TOGGLE_ACTION,"click",function(e){e=e.$target;var b=g(e.context.parentElement.parentElement.parentElement.childNodes.item(3)),m=e.context.nextElementSibling.nextElementSibling.nextElementSibling;"false"===m.value?(m.value="true",m=e.context.nextElementSibling,b.context.classList.remove(B.HIDE_ELEMENT),
e.context.textContent=m.value,c.logCounter(a.metrics.SEE_MORE_CLICK_COUNTER)):(m.value="false",m=e.context.nextElementSibling.nextElementSibling,b.context.classList.add(B.HIDE_ELEMENT),e.context.textContent=m.value,c.logCounter(a.metrics.SEE_LESS_CLICK_COUNTER))});var y=new b(B.USS_SHEET_VIEW_IDENTIFIER,{beforeClose:function(){w.dispatch(new m(a.actions.USS_CLOSE,a.actionSources.SHEET_CLOSE_BUTTON_CLICK))}}),F=y.getSheetElement(),z=new k(F);new p(v,r,function(b){var m;if(-1!==g.inArray(t,b))if(m=
t.getState(),m.isSheetOpen()){if(m.getActionSource()===a.actionSources.DP_ATC_CLICK){z.reset();var c=e.createAtcStatusWidget();m=e.createIMBWidget(m.getActionSource());z.renderWidgets([c,m])}y.open()}else m.getActionSource()!==a.actionSources.SHEET_CLOSE_BUTTON_CLICK&&y.close();-1!==g.inArray(q,b)&&z.renderWidgets(e.createRecommendationWidget(q))})}var g=d.$,n=!1;return{initializeUSSSheetView:function(){n||f()}}});g.when("A","uss-constants","uss-template-store","uss-widget-factory").register("widget-creation-helper",
function(d,b,a,c){return{createAtcStatusWidget:function(){var d={content:a.getTemplate(b.widgetType.ATCStatusWidget),widgetType:b.widgetType.ATCStatusWidget};return c.getWidget(d)},createRecommendationWidget:function(a){var b,k=[];a=a.getState().getNewRecommendations();d.each(a,function(a){(b=c.getWidget(a))&&k.push(b)});return k},createIMBWidget:function(){return c.getWidget({content:"\x3cdiv\x3e\x3c/div\x3e",widgetType:b.widgetType.ATC_STATUS_IMB_WIDGET})}}});g.when("A","dp-flux-store","uss-dispatcher").register("uss-store-repository",
function(d,b,a){var c={};return{registerStore:function(d,l,k){l=new b(d,l,a,k);return c[d.getName()]=l},getStore:function(a){return c[a]},getDispatcher:function(){return a}}});g.when("A","uss-store-repository","dp-flux-attribution","uss-sheet-store","uss-constants").register("uss-recommendation-data-store",function(d,b,a,c,h){function l(a,b,c){this._unprocessedChunkIndex=c||0;this._recommendationBaseIdentifier=a;this._dataChunks=b||[]}var k=d.$,p=h.ussCTI;a=new a(h.stores.RECOMMENDATION_DATA_STORE,
p.CATEGORY,p.TYPE,p.ITEM);c=b.getStore(h.stores.USS_SHEET_STORE);l.prototype={_getRecommendations:function(a){var b=[];a<this._dataChunks.length&&d.each(this._dataChunks,function(c,l){l>=a&&d.each(c,function(a){b.push(a)})});return b},getAllRecommendations:function(){return this._getRecommendations(0)},getNewRecommendations:function(){return this._getRecommendations(this._unprocessedChunkIndex)},getRecommendationBaseIdentifier:function(){return this._recommendationBaseIdentifier},addRecommendationChunk:function(a){var b=
[];d.each(a,function(a){a.widgetType=a.widgetType||h.widgetType.RECOMMENDATION_WIDGET});b=k.merge(b,this._dataChunks);b=k.merge(b,[a]);return new l(this._recommendationBaseIdentifier,b,this._dataChunks.length)}};p=new l;return b.registerStore(a,function(a,m){var d=a,k=h.actions;switch(m.getName()){case k.USS_OPEN:b.getDispatcher().waitFor([c.getDispatchToken()]);c.getState().getActionSource()===h.actionSources.DP_ATC_CLICK&&(d=new l(c.getState().getRecommendationBaseIdentifier()));break;case k.RECOMMENDATION_DATA_RECEIVE:k=
c.getState().getRecommendationBaseIdentifier(),m=m._metadata,m.recommendationBaseIdentifier===k&&(d=a.addRecommendationChunk(m.widgets))}return d},p)});g.when("uss-store-repository","dp-flux-attribution","uss-constants").register("uss-sheet-store",function(d,b,a){function c(a,b,e){this._isSheetOpen=a||!1;this._actionSource=b;this._recommendationBaseIdentifier=e}var h=a.actions,l=a.ussCTI;b=new b(a.stores.USS_SHEET_STORE,l.CATEGORY,l.TYPE,l.ITEM);c.prototype={isSheetOpen:function(){return this._isSheetOpen},
getActionSource:function(){return this._actionSource},getRecommendationBaseIdentifier:function(){return this._recommendationBaseIdentifier}};l=new c(!1);return d.registerStore(b,function(b,d){var e=b;switch(d.getName()){case h.USS_OPEN:b.isSheetOpen()||(d.getSource()===a.actionSources.DP_ATC_CLICK?e=new c(!0,d.getSource(),d.getMetaData().recommendationBaseIdentifier):d.getSource()===a.actionSources.USS_INGRESS_CLICK&&b.getRecommendationBaseIdentifier()&&(e=new c(!0,d.getSource(),b.getRecommendationBaseIdentifier())));
break;case h.USS_CLOSE:b.isSheetOpen()&&(e=new c(!1,d.getSource(),b.getRecommendationBaseIdentifier()))}return e},l)});g.when("A","uss-store-repository","dp-flux-attribution","uss-constants","dp-flux-utils").register("uss-atc-status-store",function(d,b,a,c,h){function l(){this.status=u;this.cart={subTotal:{}};this.mainImage={};this.isAtcGenericError=this.shippingMessageHTML=this.imbHTML=u}d=new a("uss-atc-status-store",c.ussCTI.CATEGORY,c.ussCTI.TYPE,c.ussCTI.ITEM);l.prototype={setStatus:function(a){this.status=
1===a||a===c.classList.ATC_SUCCESS?c.classList.ATC_SUCCESS:c.classList.ATC_ERROR},setCart:function(a,b,e){a&&(this.cart.count=a);b&&(this.cart.subTotal=b);h.isNonEmptyString(e)&&(this.cart.checkoutUrl=e)},setMainImage:function(a,b){h.isNonEmptyString(a)&&(this.mainImage.src=a,h.isNonEmptyString(b)?this.mainImage.altText:this.mainImage.altText="")},setImbHTML:function(a){h.isNonEmptyString(a)&&(this.imbHTML=a)},setShippingMessageHTML:function(a){h.isNonEmptyString(a)&&(this.shippingMessageHTML=a)},
setIsAtcGenericError:function(a){this.isAtcGenericError=a}};a=new l;b.registerStore(d,function(a,b){var e=a;switch(b.getName()){case c.actions.ATC_RECEIVE:var m=b.getMetaData();b.getSource()===c.actionSources.DP_ATC_CLICK?(e=new l,m.isAtcGenericError?e.setIsAtcGenericError(!0):(e.setStatus(m.status),e.setCart(m.cart.count,m.cart.subTotal,m.cart.checkoutUrl),e.setMainImage(m.mainImage.src,m.mainImage.altText),e.setImbHTML(m.imbHTML),e.setShippingMessageHTML(m.shippingMessageHTML))):b.getSource()!==
c.actionSources.USS_INLINE_ATC_CLICK||m.isAtcGenericError||(e=new l,e.setStatus(a.status),e.setMainImage(a.mainImage.src,a.mainImage.altText),e.setImbHTML(a.imbHTML),e.setShippingMessageHTML(a.shippingMessageHTML),m.cart&&e.setCart(m.cart.count,m.cart.subTotal,a.cart.checkoutUrl));break;case c.actions.USS_OPEN:b.getSource()===c.actionSources.DP_ATC_CLICK&&(e=new l)}return e},a)});g.when("A","uss-constants").register("uss-template-store",function(d,b){var a=d.$,c=b.classList,h={};return{init:function(){var b=
a("."+c.TEMPLATE_STORE),d;1===b.length&&b.find("."+c.TEMPLATE).each(function(b,e){d=a("\x3cdiv\x3e\x3c/div\x3e");e=a(e);d.append(e);(b=e.data(c.TEMPLATE_NAME))&&(h[b]=d.html())})},getTemplate:function(a){return h[a]},_nameToTemplateMap:h}});g.when("A","dp-flux-attribution","dp-flux-utils","uss-store-repository","uss-widget","uss-constants").register("uss-widget-factory",function(d,b,a,c,h,l){var k=d.$,p={};p[l.widgetType.WIDGET]=h;d=l.ussCTI;var e=new b("uss-widget-factory",d.CATEGORY,d.TYPE,d.ITEM);
return{registerWidgetType:function(b,e){if(!a.isNonEmptyString(b))throw Error("uss-widget-factory.registerWidgetType()... : name parameter must be valid string. provided name param is \x3d "+b);if(!(e.prototype instanceof h))throw Error("uss-widget-factory.registerWidgetType()... : constructor.prototype must be instance of Widget. provided constructor param is \x3d "+e);p[b]=e},getWidgetType:function(a){return p[a]},getWidget:function(a){var d,c=e;try{var h=a.widgetType||l.widgetType.WIDGET,f=p[h];
if(!f)return g.log("Widget.getWidget()... : Constructor not exist for type : "+h,"FATAL",c.getAttribution()),d;var n=f.getAttribution&&f.getAttribution();n&&(c=n);if(a.attribution)var v=a.attribution,c=new b(v.name,v.category,v.type,v.item);var t=k(a.content),q=k("\x3cdiv\x3e\x3c/div\x3e");q.append(t);d=new f(c,q)}catch(r){g.log("Widget.getWidget()... : "+r.message,"FATAL",c.getAttribution&&c.getAttribution())}return d}}});g.when("A","uss-constants","dp-flux-view","uss-store-repository","uss-dispatcher").register("uss-widget",
function(d,b,a,c,h){function l(a){var b=[];d.each(a,function(a){var e=c.getStore(a);if(e)b.push(e);else throw Error("Widget.getWidget().getStores()... : store with name \x3d "+a+" not exists");});return b}var k=b.classList,p=b.widgetType;return d.createClass({init:function(b,c){this._element=c;this._element.addClass(p.WIDGET);this._element.addClass(k.HIDE_ELEMENT);this._attribution=b;this._dispacther=h;this.getStoreNames().length&&(c=l(this.getStoreNames()),this._fluxView=new a(b,c,this.update.bind(this)),
this.update(c))},show:function(a){a=a||{};a=a.showWidgetAnimation||{};var c=b.animationType;a.animationType=a.animationType||c.NO_ANIMATION;switch(a.animationType){case c.FADE_IN:d.fadeIn(this._element,a.timeDuration||100,a.transitionTimingFunction||b.transitionTimingFunction.EVEN_EASE);break;case c.NO_ANIMATION:this._element.addClass(k.SHOW_ELEMENT),this._element.removeClass(k.HIDE_ELEMENT)}},hide:function(){this._element.addClass(k.HIDE_ELEMENT);this._element.removeClass(k.SHOW_ELEMENT)},beforeRender:function(){},
afterRender:function(){},getElement:function(){return this._element},getAttribution:function(){return this._attribution},getDispatcher:function(){return this._dispacther},update:function(a){},getStoreNames:function(){return[]},deleteWidget:function(){this._element.remove();this._fluxView&&this._fluxView.unregisterStores()}})});g.when("A","uss-constants","uss-widget-factory","uss-logger-service").register("uss-recommendation-widget",function(d,b,a,c){var h=b.widgetType;d=a.getWidgetType(h.WIDGET);
var l=b.classList,k=b.metrics;b=d.extend({init:function(a,b){this._super(a,b);this._element.addClass(h.RECOMMENDATION_WIDGET);this._addTrackingMetrics()},_addTrackingMetrics:function(){this._element.find("."+l.FACEOUT_IMAGE).click(function(){c.logCounter(k.FACEOUT_IMAGE_CLICK_COUNTER)});this._element.find("."+l.FACEOUT_REVIEW_STARS).click(function(){c.logCounter(k.FACEOUT_REVIEW_STARS_CLICK_COUNTER)});this._element.find("."+l.FACEOUT_PRICE).click(function(){c.logCounter(k.FACEOUT_PRICE_CLICK_COUNTER)});
this._element.find("."+l.FACEOUT_TITLE).click(function(){c.logCounter(k.FACEOUT_TITLE_CLICK_COUNTER)});this._element.find("."+l.FACEOUT_BEST_SELLER).click(function(){c.logCounter(k.FACEOUT_BEST_SELLER_CLICK_COUNTER)})}});a.registerWidgetType(h.RECOMMENDATION_WIDGET,b);return b});g.when("A","uss-constants","uss-widget-factory","dp-flux-attribution","uss-template-store","dp-flux-action","uss-logger-service").register("uss-no-recommendation-widget",function(d,b,a,c,h,l,k){var p=b.widgetType;d=a.getWidgetType(p.WIDGET);
var e=b.ussCTI,m=new c(b.widgetType.NO_RECOMMENDATION_WIDGET,e.CATEGORY,e.TYPE,e.ITEM);c=d.extend({init:function(a,e){this._super(a,e);this._element.addClass(p.NO_RECOMMENDATION_WIDGET);a=h.getTemplate(b.widgetType.NO_RECOMMENDATION_WIDGET);this._element.append(a);this._continueShoppingLink=this._element.find("."+b.classList.CONTINUE_SHOPPING_LINK);this._continueShoppingLink.click(function(a){a.preventDefault();k.logCounter(b.metrics.CONTINUE_SHOPPING_CLICK);this.getDispatcher().dispatch(new l(b.actions.USS_CLOSE,
b.actionSources.CONTINUE_SHOPPING_CLICK))}.bind(this))}});c.getAttribution=function(){return m};a.registerWidgetType(p.NO_RECOMMENDATION_WIDGET,c);return c});g.when("A","uss-constants","uss-widget-factory").register("primary-action-status-widget",function(d,b,a){var c=b.widgetType;d=a.getWidgetType(c.WIDGET).extend({init:function(a,b){this._super(a,b);this.getElement().addClass(c.PRIMARY_ACTION_STATUS_WIDGET)}});a.registerWidgetType(c.PRIMARY_ACTION_STATUS_WIDGET,d);return d});g.when("A","promising-ui-element",
"uss-utils","uss-constants").register("promising-image",function(d,b,a,c){var h=d.$,l=c.classList;return b.extend({init:function(a,b){this._element=h(b);this._attribution=a;this._super(this._element);this._eventHandle=u},_showTickMarkImage:function(a){switch(a){case l.ATC_SUCCESS:this._showSuccessTickMark();break;case l.ATC_ERROR:this._showErrorTickMark();break;default:return}d.off(this._eventHandle.event,this._eventHandle.callback)},_showSuccessTickMark:function(){h(".main-image").find(".success-tick-mark-placeholder").addClass("success-tick-mark-image")},
_showErrorTickMark:function(){var a=h(".main-image").find(".error-tick-mark-placeholder");a.addClass("error-tick-mark-image");d.fadeIn(a,200,c.transitionTimingFunction.EASE_OUT)},showUIValue:function(b,l,e){var m=this,w=c.defaultAtcAnimationType,f=this._super.bind(this);w===c.animationType.FADE_IN&&(this._eventHandle=d.on(c.atcAnimationStatusEvent,this._showTickMarkImage.bind(this,e)));return a.loadImage(b,l).then(function(a){if(w===c.animationType.FADE_IN){var b=h(".main-image").find(".ui-promise");
d.fadeOut(b,200,c.transitionTimingFunction.EASE_IN,function(){m._appendImageToUIValue(a);f();var b=h(".main-image").find(".ui-value");d.fadeIn(b,200,c.transitionTimingFunction.EASE_OUT)})}else this._appendImageToUIValue(a),f();return!0}.bind(this),function(){g.log("PromisingImage.showUIValue() ... : failed to load image","FATAL",this._attribution.getAttribution());return!1}.bind(this))},_appendImageToUIValue:function(a){this.getValueElement().empty();this.getValueElement().append(a)}})});g.when("A",
"promising-ui-element","uss-constants").register("atc-status-msg",function(d,b,a){var c=a.classList;return b.extend({init:function(a){this._atcStatusElement=a;this._super(this._atcStatusElement)},_showSuccessMessage:function(){this._atcStatusElement.addClass(c.ATC_SUCCESS);this._atcStatusElement.removeClass(c.ATC_ERROR);this._atcStatusElement.removeClass(c.ITEM_IN_CART)},_showFailureMessage:function(){this._atcStatusElement.addClass(c.ATC_ERROR);this._atcStatusElement.removeClass(c.ATC_SUCCESS);this._atcStatusElement.removeClass(c.ITEM_IN_CART)},
_showItemInCartMessage:function(){this._atcStatusElement.addClass(c.ITEM_IN_CART);this._atcStatusElement.removeClass(c.ATC_ERROR);this._atcStatusElement.removeClass(c.ATC_SUCCESS)},showUIValue:function(b){var l=this,k=a.defaultAtcAnimationType;switch(b){case c.ATC_SUCCESS:this._showSuccessMessage();break;case c.ATC_ERROR:this._showFailureMessage();break;case c.ITEM_IN_CART:this._showItemInCartMessage();break;default:return}this._super();k===a.animationType.FADE_IN&&(b=this._atcStatusElement.find("."+
c.UI_PROMISE),d.fadeOut(b,200,a.transitionTimingFunction.EASE_IN,function(){var b=l._atcStatusElement.find("."+c.UI_VALUE);d.fadeIn(b,200,a.transitionTimingFunction.EASE_OUT,function(){d.trigger(a.atcAnimationStatusEvent)})}))}})});g.when("A","promising-ui-element","uss-constants","dp-flux-utils").register("cart-status-message",function(d,b,a,c){var h=a.classList;return b.extend({init:function(a){this._cartStatusElement=a;this._subTotalElement=this._cartStatusElement.find("."+h.CART_SUB_TOTAL);this._cartCountElement=
this._cartStatusElement.find("."+h.CART_COUNT);this._cartCountSingularTemplate=this._cartCountElement.data("cart-count-singular-template");this._cartCountPluralTemplate=this._cartCountElement.data("cart-count-plural-template");this._super(this._cartStatusElement);this._eventHandle=u},_atcAnimationStatusResolved:function(){setTimeout(function(){this._cartStatusElement.addClass("uss-c-cart-status-msg-transition");d.off(this._eventHandle.event,this._eventHandle.callback)}.bind(this),200)},showUIValue:function(b,
h){var p=a.defaultAtcAnimationType;if("number"===typeof b&&c.isNonEmptyString(h)){var e;1===b?e=this._cartCountSingularTemplate.replace("###cartCount",b):1<b&&(e=this._cartCountPluralTemplate.replace("###cartCount",b));this._cartCountElement.html(e);this._subTotalElement.html(h);this._super();p===a.animationType.FADE_IN&&(this._eventHandle=d.on(a.atcAnimationStatusEvent,this._atcAnimationStatusResolved.bind(this)))}}})});g.when("A","a-button","uss-constants","uss-logger-service").register("uss-sub-nav",
function(d,b,a,c){var h=a.classList,l=a.metrics;return{getInstance:function(k){var p={},e=k.find("."+h.CHECKOUT_FORM);b("."+h.CHECKOUT_BUTTON,k);var m=k.find("."+h.CART_BUTTON),f=u;e.submit(function(){c.logCounter(l.CHECKOUT_FORM_CLICK_COUNTER)});m.click(function(){c.logCounter(l.CART_BUTTON_CLICK_COUNTER)});p.updateCheckoutUrl=function(a){e.attr("action",a)};p.hide=function(){d.$(k).addClass("is-hidden")};p.atcAnimationStatusResolved=function(){setTimeout(function(){d.$(k).addClass("uss-c-sub-nav-margin");
d.$(k).addClass("uss-c-sub-nav-transition");d.off(f.event,f.callback)}.bind(),200)};p.show=function(){d.$(k).removeClass("is-hidden");a.defaultAtcAnimationType===a.animationType.FADE_IN&&(f=d.on(a.atcAnimationStatusEvent,p.atcAnimationStatusResolved.bind()))};p.preInitiate=function(){var a=e.parent();a.find("iframe#ussCheckoutPrefetch").remove();var b=(new Date).getTime(),c;c="/gp/checkoutprefetch/checkout-prefetch.html?cartInitiateId\x3d"+b;var d=document.getElementById("gift-wrap");c+="\x26isToBeGiftWrapped\x3d"+
(d&&d.checked?"1":"0");d=document.createElement("iframe");d.setAttribute("src",c);d.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");d.setAttribute("name","ussCheckoutPrefetch");d.setAttribute("id","ussCheckoutPrefetch");a.append(d);a=e.find("#cartInitiateId");a.length?a.val(b):e.append("\x3cinput type\x3d'hidden' name\x3d'cartInitiateId' id\x3d'cartInitiateId' value\x3d'"+b+"'\x3e")};p.hide();return p}}});g.when("A","uss-constants").register("uss-shipping-details",function(d,
b){var a=d.$;return{getInstance:function(c){var h=c.find("."+b.classList.SHIPPING_DETAILS),l=h.find("."+b.classList.SHIPPING_MESSAGE_PLACEHOLDER),k=b.defaultAtcAnimationType,p=u,e=function(){var b=l.find(".a-row").find("a"),e=b.attr("onclick");if("undefined"!==typeof e&&e.includes("amz_js_PopWin")){var c=[];a.each(b[0].attributes,function(a,b){c.push(b.name)});a.each(c,function(a,e){b.removeAttr(e)});b.attr("href","/gp/help/customer/display.html?nodeId\x3d527692")}},m={hide:function(){h.addClass(b.classList.HIDE_ELEMENT);
h.removeClass(b.classList.SHOW_ELEMENT)},atcAnimationStatusResolved:function(){setTimeout(function(){h.addClass("uss-c-shipping-details-transition");d.off(p.event,p.callback)}.bind(),200)},show:function(a){l.empty();l.append(d.$(a));e();h.addClass(b.classList.SHOW_ELEMENT);h.removeClass(b.classList.HIDE_ELEMENT);k===b.animationType.FADE_IN&&(p=d.on(b.atcAnimationStatusEvent,m.atcAnimationStatusResolved.bind()))}};m.hide();return m}}});g.when("A","uss-constants","primary-action-status-widget","dp-flux-attribution",
"uss-widget-factory","atc-status-msg","cart-status-message","promising-image","uss-sub-nav","uss-shipping-details").register("atc-status-widget",function(d,b,a,c,h,l,k,p,e,m){var f=b.ussCTI,g=b.widgetType,n=b.classList,t=new c(b.widgetType.ATCStatusWidget,f.CATEGORY,f.TYPE,f.ITEM);a=a.extend({init:function(a,b){this._atcGenericError=b.find("."+n.ATC_GENERIC_ERROR);this._atcAcknowledgementMessage=b.find("."+n.ATC_ACKNOWLEDGEMENT_MESSAGE);this._mainImage=new p(a,this._atcAcknowledgementMessage.find("."+
n.MAIN_IMAGE));this._atcStatusMessage=new l(this._atcAcknowledgementMessage.find("."+n.ATC_STATUS_MESSAGE_COMPONENT));this._cartStatusMessage=new k(this._atcAcknowledgementMessage.find("."+n.CART_STATUS_MESSAGE_COMPONENT));this._subNav=e.getInstance(this._atcAcknowledgementMessage.find("."+n.SUB_NAV));this._shippingDetails=m.getInstance(this._atcAcknowledgementMessage);this._viewState={};this._super(a,b)},update:function(a){var e;d.each(a,function(a){if(a.getStoreAttribution().getName()===b.stores.ATC_STATUS_STORE){var c=
a.getDispatcher()._pendingAction;c&&c.getName()===b.actions.ATC_RECEIVE&&this._subNav.preInitiate();e=a.getState();e.isAtcGenericError?this.showGenericError():(a=d.diff(this._viewState,e),a.status&&e.status&&this._atcStatusMessage.showUIValue(e.status),a.cart.count&&e.cart.count&&(this._cartStatusMessage.showUIValue(e.cart.count,e.cart&&e.cart.subTotal&&e.cart.subTotal.displayString||""),a.cart.checkoutUrl&&e.cart.checkoutUrl&&this._subNav.updateCheckoutUrl(e.cart.checkoutUrl),this._subNav.show()),
a.mainImage.src&&e.mainImage.src&&this._mainImage.showUIValue(e.mainImage.src,e.mainImage.altText,e.status),a.shippingMessageHTML&&e.shippingMessageHTML&&this._shippingDetails.show(e.shippingMessageHTML));this._viewState=e}}.bind(this))},showGenericError:function(){this._atcAcknowledgementMessage.addClass(n.HIDE_ELEMENT);this._atcAcknowledgementMessage.removeClass(n.SHOW_ELEMENT);this._atcGenericError.removeClass(n.HIDE_ELEMENT);this._atcGenericError.addClass(n.SHOW_ELEMENT)},getStoreNames:function(){return[b.stores.ATC_STATUS_STORE]}});
a.getAttribution=function(){return t};h.registerWidgetType(g.ATCStatusWidget,a);return a});g.when("A","uss-constants","dp-flux-attribution","uss-widget-factory").register("atc-status-imb-widget",function(d,b,a,c){var h=c.getWidgetType(b.widgetType.WIDGET),l=b.ussCTI,k=new a("atc-status-imb-widget",l.CATEGORY,l.TYPE,l.ITEM);a=h.extend({init:function(a,e){e.addClass(b.widgetType.ATC_STATUS_IMB_WIDGET);this._super(a,e)},update:function(a){var e;d.each(a,function(a){if(a.getStoreAttribution().getName()===
b.stores.ATC_STATUS_STORE)if(e=a.getState(),e.imbHTML){this.getElement().empty();a=d.$(e.imbHTML);var c=a.children().length;if(1<=c){a.find(".a-declarative a").unwrap();var l=a.find(".a-declarative span");l.removeClass("a-color-link huc-cursor-pointer");l.unwrap();this.getElement().append(a);this.show();1<c&&g.log("ImbWidget.update(...): More than one IMB message exist : html \x3d "+e.imbHTML,"WARN",k.getAttribution())}else this.hide()}else this.hide()}.bind(this))},afterRender:function(){this.hide()},
getStoreNames:function(){return[b.stores.ATC_STATUS_STORE]}});a.getAttribution=function(){return k};c.registerWidgetType(b.widgetType.ATC_STATUS_IMB_WIDGET,a);return a});g.when("A").register("uss-base-layout",function(d){return d.createClass({init:function(b){this._ussSheetElement=b},renderWidgets:function(b){throw Error("Layout.renderWidgets()...: Subclass must implement update method");},reset:function(){throw Error("Layout.reset()...: Subclass must implement reset method");},getUssSheetElement:function(){return this._ussSheetElement}})});
g.when("A","uss-base-layout","promising-ui-element","uss-constants","primary-action-status-widget","atc-status-imb-widget").register("uss-default-layout",function(d,b,a,c,h,l){var k=c.layout.defaultLayout;return b.extend({init:function(a){this._super(a);this._element=a.find("."+k.DEFAULT_LAYOUT);this._ussHead=this._element.find("."+k.HEAD);this._ussBody=this._element.find("."+k.BODY);this._widgetList=[];this._recommendationLoader=d.$("."+k.SKELETON_LOADER);this._recommendationLoadingMessage=d.$("."+
k.RECOMMENDATION_LOADING_MESSAGE);this._recommendationLoadedMessage=d.$("."+k.RECOMMENDATION_LOADED_MESSAGE);this._ussBody.append(this._recommendationLoader);this._recommendationLoaderFadeOutOptions={timeDuration:200,transitionTimingFunction:c.transitionTimingFunction.EASE_IN};this._recommendationLoaderFadeInOptions={timeDuration:200,transitionTimingFunction:c.transitionTimingFunction.EASE_OUT};this._recommendationWidgetOptions={showWidgetAnimation:{animationType:c.animationType.FADE_IN,timeDuration:200,
transitionTimingFunction:c.transitionTimingFunction.EASE_OUT}}},renderWidgets:function(a){var b,c=!1;d.each(a,function(a){b={};a.beforeRender();this._widgetList.push(a);if(a instanceof h)this._ussHead.prepend(a.getElement());else if(a.getElement().addClass(k.BOTTOM_MARGIN_BETWEEN_WIDGETS),a.getElement().addClass(k.TOP_MARGIN_BETWEEN_WIDGETS),a instanceof l)this._ussBody.prepend(a.getElement());else{if(!c){c=!0;var f=this;d.fadeOut(this._recommendationLoader,this._recommendationLoaderFadeOutOptions.timeDuration,
this._recommendationLoaderFadeOutOptions.transitionTimingFunction,function(){d.fadeIn(f._recommendationLoadedMessage,f._recommendationLoaderFadeInOptions.timeDuration,f._recommendationLoaderFadeInOptions.transitionTimingFunction)})}b=this._recommendationWidgetOptions;this._ussBody.append(a.getElement())}a.show(b);a.afterRender()}.bind(this))},reset:function(){d.each(this._widgetList,function(a){a.deleteWidget()});this._widgetList=[];this._ussBody.empty();this._ussBody.append(this._recommendationLoader);
this._ussBody.append(this._recommendationLoadedMessage);this._recommendationLoader.css({display:"block"});this._recommendationLoadingMessage.css({display:"none"});this._recommendationLoadedMessage.css({display:"none"});this.resetScrollPosition()},resetScrollPosition:function(){this._ussBody.scrollTop(0)}})});g.when("uss-constants","dp-flux-action","uss-dispatcher","uss-utils").register("uss-action-creator-helper",function(d,b,a,c){function h(){f.$("#add-to-cart-button").removeAttr("disabled")}return{primaryATCClick:function(l,
k){var f=new b(d.actions.USS_OPEN,d.actionSources.DP_ATC_CLICK,{recommendationBaseIdentifier:l});k.percolateData.then(function(e){var c={isContainsRecommendation:!1,widgets:[]};e.recommendationData&&(c.widgets=e.recommendationData.widgets||[]);h();c.widgets.length||(c.widgets.push({widgetType:d.widgetType.NO_RECOMMENDATION_WIDGET}),c.recommendationBaseIdentifier=l);a.dispatch(f);k.atcData.then(function(e){var c={};1===e.isOk?c=e.atcStatusData:c.isAtcGenericError=!0;e=new b(d.actions.ATC_RECEIVE,d.actionSources.DP_ATC_CLICK,
c);a.dispatch(e)},function(){var e=new b(d.actions.ATC_RECEIVE,d.actionSources.DP_ATC_CLICK,{isAtcGenericError:!0});a.dispatch(e)});c.recommendationBaseIdentifier=l;e=new b(d.actions.RECOMMENDATION_DATA_RECEIVE,d.actionSources.DP_ATC_CLICK,c);a.dispatch(e)},function(){k.atcData.then(function(a){h();1===a.isOk?c.showATCSuccess():c.showATCFailure()},function(){c.showATCFailure()})})},secondaryATCClick:function(c,h){c.atcData.then(function(c){var e={};1===c.isOk?e=c.atcStatusData:e.isAtcGenericError=
!0;e.params=h;c=new b(d.actions.ATC_RECEIVE,d.actionSources.USS_INLINE_ATC_CLICK,e);a.dispatch(c)},function(){})}}})},initializeUSSComponents:function(){g.when("uss-template-store","uss-sheet-store","uss-recommendation-data-store","uss-store-repository","uss-widget","uss-recommendation-widget","primary-action-status-widget","uss-widget-factory","uss-sheet-view","uss-final-layout").register("uss-framework-ready",function(d){d.init()});g.when("uss-sheet-view","uss-framework-ready").register("uss-sheet-view-ready",
function(d){d.initializeUSSSheetView()})},initializeAtcInterceptor:function(){g.when("uss-atc-interceptor","atc-status-widget","atc-status-imb-widget","uss-atc-status-store","uss-framework-ready","uss-sheet-view-ready").execute(function(d){d.init()})},initializeBuyBox:function(){g.when("buy-box-override","atc-status-widget","atc-status-imb-widget","uss-atc-status-store","uss-framework-ready","uss-sheet-view-ready").execute(function(d){d.init()})}}});g.when("A","uss-constants","uss-logger-service").register("uss-eligibility",
function(f,g,n){var q=f.$,d=g.metrics,b={};return{getUssEligibility:function(a,c){var d=q("#uss-isPrimaryAsinVirtualBundle").val();return{primaryAsinData:d?{asin:a,offerListingId:c,isVirtualBundle:d}:{asin:a,offerListingId:c},eligibility:b}},registerProgramEligibility:function(a,c){a&&(b[a]&&n.logCounter(d.PROGRAM_ELIGIBILITY_REGISTRY_OVERWRITTEN+"."+programName),b[a]=c)}}});g.when("A","atf","uss-init-helper","uss-preconditions","uss-logger-service","uss-constants").register("uss-init",function(f,
t,n,q,d,b){function a(){n.loadUssCommonAssets();g.when("A","3p-promise","uss-light-box","uss-constants","uss-logger-service").register("uss-sheet-component",function(a,b,c,e,d){function h(b,k){if(!(this instanceof h))throw Error(t.INVALID_CONSTRUCTOR_USAGE);if("string"===typeof b)if(this._sheet=f("#"+b),1===this._sheet.length)this._sheetID=b,this._sheet.addClass(g.RIGHT_SIDE_SHEET),this._sheet.addClass(g.RIGHT_SIDE_SHEET_LAYOUT),this._sheet.addClass(g.SHEET_CLOSE),this._sheet.attr("role","dialog"),
this._sheet.appendTo(r),this._closeIcon=this._createCloseIcon(),this._closeIcon.click(function(){var a=this.close();k.beforeClose&&k.beforeClose(a);d.logCounter(this._sheetID+":closeIconClick")}.bind(this)),this._sheet.append(this._closeIcon),c.getElement().click(function(){var a=this.close();k.beforeClose&&k.beforeClose(a);d.logCounter(this._sheetID+":lightBoxClick")}.bind(this)),this._sheet.removeClass(g.HIDE_ELEMENT),a.on(e.atcAnimationStatusEvent,function(){u.is(":visible")&&a.fadeIn(D,200,n.EASE_OUT)});
else throw Error("Unique element with id '"+b+"' must exist inside a DOM");else throw Error(t.INVALID_SHEET_ID);}var f=a.$,g=e.classList,n=e.transitionTimingFunction,t=e.fatalMessagesList,q=e.layout.defaultLayout,r=f("body"),u=f("."+q.SKELETON_LOADER),D=f("."+q.RECOMMENDATION_LOADING_MESSAGE);h.prototype.open=function(){var e=this;return new b(function(b){var h=e._getSheetSize();e._sheet.css({right:"-"+h+"px"});c.show();a.animationFrameDelay(function(){a.animate(e._sheet,{right:0},400,n.ENTER_EASE,
function(){e._sheet.removeClass(g.SHEET_CLOSE);e._sheet.addClass(g.SHEET_OPEN);e.showCloseIcon();b(!0);d.logCounter(e._sheetID+":open")})});e._closeIcon.css({right:h+15+"px"})})};h.prototype.close=function(){return new b(function(b){var e="-"+this._getSheetSize()+"px";a.animate(this._sheet,{right:e},300,n.EXIT_EASE,function(){this._sheet.removeClass(g.SHEET_OPEN);this._sheet.addClass(g.SHEET_CLOSE);b(!0);d.logCounter(this._sheetID+":close")}.bind(this));this.hideCloseIcon();c.hide()}.bind(this))};
h.prototype.getSheetElement=function(){return this._sheet};h.prototype._getSheetSize=function(){return this._sheet.outerWidth()};h.prototype._createCloseIcon=function(){return f("\x3cdiv class \x3d '"+(g.CLOSE_ICON+" "+g.CLOSE_ICON_MEDIUM+"  "+g.HIDE_ELEMENT)+"'\x3e\x3c/div\x3e")};h.prototype.showCloseIcon=function(){a.fadeIn(this._closeIcon,200,n.EVEN_EASE)};h.prototype.hideCloseIcon=function(){a.fadeOut(this._closeIcon,200,n.EVEN_EASE)};return h});g.when("A","uss-constants","uss-utils").register("uss-light-box",
function(a,b,c){var e=a.$,d=b.classList,h=e("\x3cdiv class\x3d'"+d.LIGHT_BOX_IDENTIFIER+" "+d.LIGHT_BOX_JS_HOOK+" "+d.HIDE_ELEMENT+"'\x3e\x3c/div\x3e");e("body").append(h);return{show:function(){h.addClass(d.SHOW_ELEMENT);h.removeClass(d.HIDE_ELEMENT);c.disablePageScroll();a.animationFrameDelay(function(){a.animate(h,{opacity:.6},400,b.transitionTimingFunction.EVEN_EASE)})},hide:function(){h.removeClass(d.SHOW_ELEMENT);a.animate(h,{opacity:0},300,b.transitionTimingFunction.EVEN_EASE,function(){h.addClass(d.HIDE_ELEMENT);
h.removeClass(d.SHOW_ELEMENT);c.enablePageScroll()})},getElement:function(){return h}}});g.when("A","uss-constants","dp-flux-attribution","dp-flux-view","uss-store-repository","uss-atc-status-store").register("nav-bar-cart-count-view",function(a,b,c,e,d,h){var f=a.$;a=b.ussCTI;c=new c("nav-bar-cart-count-view",a.CATEGORY,a.TYPE,a.ITEM);h=d.getStore(b.stores.ATC_STATUS_STORE);new e(c,[h],function(a){if(-1!==f.inArray(h,a)){var b=h.getState();r.$Nav.when("api.setCartCount").run(function(a){b.cart.count&&
a(b.cart.count)})}})});g.when("A").register("buy-box-utility",function(a){var b=a.$;return{isWarrantySelectedInBuyBox:function(){var a=!1;b("#abbWrapper .abbListItem input[type\x3dcheckbox]").each(function(){a=a||b(this).prop("checked")});return a}}});g.when("A","uss-action-creator-helper","uss-preconditions","uss-logger-service","uss-constants","uss-utils","uss-eligibility","uss.cart.add-items","aapi-handler","percolateUI-ajax-utility").register("uss-atc",function(a,b,c,e,d,h,f,g,n,t){function q(){a.$("#add-to-cart-button").attr("disabled",
!0);var b=a.$("#a-page");0!==b.length&&(b[0].style.opacity=.3)}function r(a){this.widgetName=a;this.isPrimaryAtc="DetailPageBuyBox"===a}function u(){var b=a.$("body");return(b=a.parseJSON(b.find("[data-a-state*\x3datc-page-state]").html()))&&b.shouldUseNatc?b.shouldUseNatc:!1}function D(){var a="",b=y("#addToCart");0!=b.length&&(a=b.attr("action"));return a}var y=a.$,F=d.ajaxParams.AJAX_TIMEOUT,z={},x=d.metrics,C=d.queryStrings;r.prototype._addQueryParams=function(a){var b="",c=h.getUrlParameter(C.qid),
e=h.getUrlParameter(C.sr);null!=c&&null!=e&&(b=C.qid+"\x3d"+c+"\x26"+C.sr+"\x3d"+e);a.queryString=b;return a};r.prototype._addUssParameters=function(a){a.params.isUSSAjax=1;this.isPrimaryAtc&&(a.params.isPrimaryATC=1,h.shouldFireAndForgetWeblabTrigger()||(a.params.triggerUSSWeblab=c.triggerUSSWeblabValue()));a=this._addEligibilityParameters(a);var b=h.getDebugParams();Object.keys(b).forEach(function(c){a.params[c]=b[c]});return a};r.prototype._addEligibilityParameters=function(a){var b=f.getUssEligibility(a.params[d.ajaxParams.ASIN],
a.params[d.ajaxParams.OFFER_LISTING_ID]);a.params.ussEligibility=JSON.stringify(b);return a};r.prototype._callback=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);"function"===typeof a&&a.apply(this,b)};var E=function(a,c,d,h,m,l){h?(e.logCounter(x.PRIMARY_ADD_TO_CART_CLICK_COUNTER),l=t.callPercolateUI(a,c),m.percolateData=l,b.primaryATCClick(a,m)):(c={},c.baseAsin=a,c.baseReftag=d,e.logCounter(x.SECONDARY_ADD_TO_CART_CLICK_COUNTER),b.secondaryATCClick(m,c))},A=function(a,
b,c,e,d,m,l,f){n.atcStatusDataByApi(a,e).then(function(h){h.atcStatusData.status=l;m.resolve(h);E(a,b,c,e,d,f)}).catch(function(g){m.reject();e&&l?(h.handleATCAnimationEndWeb(),h.showATCSuccess()):E(a,b,c,e,d,f)});d.atcData=m},G=function(b,c,d,h,m,f,g,k,p){var n=0;a.post(p,{params:f.params,success:function(a,l,p){f.hasOwnProperty("success")&&self._callback(f.success,a,l,p);e.logCounter(x.USS_PRIMARY_ATC_DEFAULT_ENDPOINT_SUCCESS_RESPONSE);n=1;A(b,c,d,h,g,m,n,k)},error:function(a,l,p){f.hasOwnProperty("error")&&
self._callback(f.error,a,l,p);e.logCounter(x.USS_PRIMARY_ATC_DEFAULT_ENDPOINT_FAIL_RESPONSE);A(b,c,d,h,g,m,n,k)},abort:function(a){f.hasOwnProperty("abort")&&self._callback(f.abort,a);A(b,c,d,h,g,m,n,k)},timeout:f.timeout||F})},H=function(a,b,c,d,h,m,l,f,k){var p=0,n=new e.Timer(x.SECONDARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER);n.start();f.done(function(a){n.stop()});f.fail(function(){e.logCounter(x.SECONDARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER);n.stop()});m.inputs=m.params;var t=m.inputs;t&&t["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]&&
(t["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]="true"===t["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]);g.addItems(m,d).then(function(a){f.resolve(a)}).catch(function(a){f.reject(a)});l.addItems=f;l.addItems.then(function(e){p=1;A(a,b,c,d,l,h,p,k)},function(e){A(a,b,c,d,l,h,p,k)})};r.prototype._addToCart=function(a,b){this.isPrimaryAtc&&c.isUssWeblabInTreatment()&&q();b=this._addUssParameters(b);b=this._addQueryParams(b);var h=y.Deferred(),l=
y.Deferred(),f=y.Deferred(),g={},k=b.params.a;a=a.ref;var n=b.params[d.ajaxParams.OFFER_LISTING_ID],t=this.isPrimaryAtc,w=D();g.atcData=h;var r=new e.Timer(t?x.PRIMARY_ATC_STATUS_PROMISE_RESOLVED_TIMER:x.SECONDARY_ATC_STATUS_PROMISE_RESOLVED_TIMER);r.start();h.done(function(a){r.stop()});h.fail(function(){r.stop()});t&&!u()?G(k,n,a,t,h,b,g,f,w):H(k,n,a,t,h,b,g,f,l);return g};return{addToCart:function(a,b,c){if(!a||!a.trim().length||"object"!==typeof b)throw d.fatalMessagesList.INCORRECT_PARAMETER_PASSED;
z[a]||(z[a]=new r(a));return z[a]._addToCart(c,b)},callToActionCreator:E}});g.when("A","uss-atc","uss-action-creator-helper","uss-preconditions","uss-logger-service","uss-constants","buy-box-utility","uss-utils").register("buy-box-override",function(a,b,c,e,d,h,f,g){var n=a.$;a={actionButton:null,AllowedActions:{"submit.add-to-cart":1},init:function(){this.checkPreconditionsAndManipulateBuyBox()},checkPreconditionsAndManipulateBuyBox:function(){this.buyBoxForm=n("#addToCart");e.isUssConditionsPassed()&&
this.attachFormHandler()},attachFormHandler:function(){this.buyBoxForm.submit(this.submitForm.bind(this));this.buyBoxForm.find("input[type\x3dsubmit], input[type\x3dbutton]").click(function(a){this.actionButton=a.target}.bind(this))},isValidAction:function(){return this.actionButton&&this.actionButton.name in this.AllowedActions},submitForm:function(a){if(!f.isWarrantySelectedInBuyBox()&&this.isValidAction())if(e.isUssWeblabInTreatment()){a.preventDefault();a={params:this.getAddToCartParameters()};
var c={ref:h.ajaxParams.REFTAG};g.shouldFireAndForgetWeblabTrigger()&&g.fireAndForgetWeblabTrigger(e.triggerUSSWeblabValue(),e.ussWeblabTreatmentValue());b.addToCart("DetailPageBuyBox",a,c)}else d.logCounter(h.metrics.POST_ATC_WEBLAB_DISABLED),g.shouldFireAndForgetWeblabTrigger()?g.fireAndForgetWeblabTrigger(e.triggerUSSWeblabValue(),e.ussWeblabTreatmentValue()):this.addHiddenUSSField("triggerUSSWeblab",e.triggerUSSWeblabValue());else d.logCounter(h.metrics.POST_ATC_WARRANTY_SELECTED_OR_INVALID_ACTION)},
addHiddenUSSField:function(a,b){n("\x3cinput\x3e").attr({type:"hidden",id:a,name:a,value:b}).appendTo(this.buyBoxForm)},getAddToCartParameters:function(){var a={},b=this.buyBoxForm.serializeArray();n.each(b,function(b,c){a[c.name]=c.value});return a}};return{init:a.init.bind(a)}});g.when("A","uss-constants","uss-logger-service","uss-eligibility","uss-utils").register("percolateUI-ajax-utility",function(a,b,c,e,d){var h=b.ajaxParams.AJAX_TIMEOUT,f=d.getPageType(),g=d.getSubPageType(),n=b.metrics;return{callPercolateUI:function(b,
k){var t={pageType:f,baseAsin:b,subPageType:g,ussEligibility:JSON.stringify(e.getUssEligibility(b,k))};b=a.$("#uss-mraiCategory").val();k=a.$("#uss-mraiGl").val();b&&(t.mraiCategory=b);k&&(t.mraiGl=k);var q=d.getDebugParams();Object.keys(q).forEach(function(a){t[a]=q[a]});var r=a.$.Deferred(),u=new c.Timer(n.PERCOLATE_DATA_PROMISE_RESOLVED_TIMER);u.start();a.post("/ussx",{params:t,success:function(a,b,c){r.resolve(a)},error:function(a,b){r.reject()},timeout:h});r.done(function(a){u.stop()});r.fail(function(){c.logCounter(n.PERCOLATE_DATA_PROMISE_REJECTED_COUNTER)});
return r.promise()}}})}function c(){q.isUssConditionsPassed()&&(d.logCounter(b.metrics.PAGE_LANDING_PRECONDITIONS_PASSED),h||(a(),h=!0,n.initializeUSSComponents()),n.initializeBuyBox())}var h=!1;f.on("PageRefresh:ATF",function(){c()});c()});"use strict";g.when("jQuery","A","a-component","uss-widget-footer","uss-widget-partial-content","uss-widget-full-content","p13n-sc-call-on-visible","p13n-sc-logger").register("uss-list-widget",function(f,g,n,q,d,b,a,c){function h(a){var b="a:expandControl:"+a._$footer.getName()+
":toggle";g.on(b,function(){var b=!a.isExpanded();a._$element.attr("data-a-expanded",b);k(a,b);a._$firstToggleEvent&&0<a._$widgetImpressionElement.length&&(a._$firstToggleEvent=0,l(a._$widgetImpressionElement,a._$fullContent._$element,{action:"see_more"}))})}function l(b,d,h){a.register(b,function(){c.logAsyncAction(f.extend(!0,{},{featureElement:b,isEventComplete:function(){return d.is(":visible")},logOnlyNew:!0,replicateAsinImpressions:!0},h))},{distance:10})}function k(a,b){a._$footer.toggleExpansion(b,
!a.isExpanded(),a._$firstToggleEvent);a._$fullContent.toggleExpansion(b);a._$partialContent.toggleExpansion(b)}var p=n.create({_componentName:"ussListWidget",init:function(a,f){this._super(a,f);this._$partialContent=d(this._$element.find(".uss-partial-list-container"));this._$fullContent=b(this._$element.find(".uss-full-list-container"));this._$footer=q(this._$element.find(".uss-widget-footer"));this._$firstToggleEvent=1;this._$widgetImpressionElement=this._$element.find(".p13n-sc-static-list");0<
this._$widgetImpressionElement.length&&("function"===typeof c.resetImpressions&&c.resetImpressions(this._$widgetImpressionElement.attr("data-p13n-feature-name")),l(this._$widgetImpressionElement,this._$partialContent._$element,{action:"view",initialDelay:0}));h(this);k(this,this.isExpanded())},isExpanded:function(){return"true"===this._$element.attr("data-a-expanded")}});return function(a,b){return new p(a,b)}});g.when("jQuery","A").execute("uss-sp-help-link",function(f,g){g.on("a:popover:beforeShow:uss-sp-help-link-popover",
function(f){f.popover.$container.css("z-index",501)})});"use strict";g.when("jQuery","A","p13n-sc-line-truncator","a-component").register("uss-widget-partial-content",function(f,g,n,q){var d=q.create({_componentName:"ussWidgetPartialContent",init:function(b,a){this._super(b,a);this._$element.find(".p13n-sc-truncate").toggleClass("uss-asin-title");n.truncateLines(this._$element);g.loadDynamicImage(this._$element.find(".p13n-sc-list-image-container"))},toggleExpansion:function(b){var a=this;a._$element.attr("data-a-expanded",
b);b?a._$element.hide():g.delay(function(){a._$element.show()},50)}});return function(b,a){return new d(b,a)}});"use strict";g.when("jQuery","A","p13n-sc-line-truncator","a-component").register("uss-widget-full-content",function(f,g,n,q){var d=q.create({_componentName:"ussWidgetFullcontent",init:function(b,a){this._super(b,a);this._$dynamicImagesLoaded=this._$isTitleTruncated=!1;b=this._$element.find(".p13n-sc-truncate");b.toggleClass("uss-asin-title");b.attr("data-rows","4")},toggleExpansion:function(b){var a=
this;a._$element.attr("data-a-expanded",b);b?g.delay(function(){a._$element.show();n.truncateLines(a._$element);a._$dynamicImagesLoaded||(g.loadDynamicImage(a._$element.find(".p13n-sc-list-image-container")),a._$dynamicImagesLoaded=!0)},50):a._$element.hide()}});return function(b,a){return new d(b,a)}});"use strict";g.when("jQuery","A","a-component","uss-widget-see-more","uss-widget-expander-icon","uss-constants","uss-logger-service").register("uss-widget-footer",function(f,g,n,q,d,b,a){function c(b){var c=
b.getName();b=b.isExpanded();g.trigger("a:expandControl:"+c+":toggle");b?(a.logCounter(h.SEE_LESS_CLICK_COUNTER),a.logCounter(h.SEE_LESS_CLICK_COUNTER+":"+c)):(a.logCounter(h.SEE_MORE_CLICK_COUNTER),a.logCounter(h.SEE_MORE_CLICK_COUNTER+":"+c))}var h=b.metrics,l=function(a,b){return a+":"+b},k=n.create({_componentName:"ussWidgetFooter",init:function(b,e){var f=this;f._super(b,e);f._$expanderIcon=d(f._$element.find(".uss-expander-icon-container"));f._$seeMore=q(f._$element.find(".uss-see-more"));f._$element.length&&
(a.logCounter(h.SEE_MORE_EXISTENCE_COUNTER),a.logCounter(l(h.SEE_MORE_EXISTENCE_COUNTER,f.getName())));f._$element.click(function(){c(f)});f._$element.keypress(function(a){var b=g.constants.keycodes;a=a.which;a!==b.ENTER&&a!==b.SPACE||c(f)})},toggleExpansion:function(a,b,c){var d=this;d._$element.attr("data-a-expanded",a);g.fadeOut(d._$element,200,"linear",function(){d._$seeMore.toggleSeeMore(a);d._$expanderIcon.toggleExpanderIcon(a);g.fadeIn(d._$element,200)});a||!b||c||d._$element.parent().get(0).scrollIntoView(!0)},
isExpanded:function(){return"true"===this._$element.attr("data-a-expanded")},getName:function(){return this._$element.attr("data-name")}});return function(a,b){return new k(a,b)}});"use strict";g.when("jQuery","A","a-component").register("uss-widget-see-more",function(f,g,n){var q=n.create({_componentName:"ussWidgetSeeMore",init:function(d,b){this._super(d,b);this._$seeMoreText=this._$element.find(".uss-see-more-text");this._$seeLessText=this._$element.find(".uss-see-less-text")},toggleSeeMore:function(d){this._$seeMoreText.toggle(!d);
this._$seeLessText.toggle(d)}});return function(d,b){return new q(d,b)}});"use strict";g.when("jQuery","A","a-component").register("uss-widget-expander-icon",function(f,g,n){var q=n.create({_componentName:"ussWidgetExpanderIcon",init:function(d,b){this._super(d,b);this._$icon=this._$element.find(".uss-expander-icon")},toggleExpanderIcon:function(d){this._$icon.toggleClass("a-css-icon-expand",!d).toggleClass("a-css-icon-collapse",d)}});return function(d,b){return new q(d,b)}});"use strict";g.when("jQuery",
"A","uss-atc").execute("uss-inline-atc",function(f,g,n){function q(b){var a={};b.find("input[type\x3dhidden]").each(function(b,d){a[d.name]=f(d).val()});return a}function d(b,a,c,d){b.atcData.then(function(b){d.hide();1===b.isOk?a.show():c.show()},function(){d.hide();c.show()})}(function(){f("body").delegate(".uss-list-widget .uss-add-to-cart-button","click",function(b){b=f(b.currentTarget);var a=b.parent().find("input[name\x3dASIN]").val(),c=f(".uss-add-to-cart-form-"+a),a=c.siblings(".uss-atc-success"),
h=c.siblings(".uss-atc-error"),g=c.siblings(".uss-atc-spinner");c.hide();g.show();var k={params:q(c)},p=JSON.parse(c.attr("data-link-params")),c={linkParams:f.param(p),ref:c.attr("data-ref")};b=n.addToCart(b.parents(".uss-widget-body").attr("data-p13n-feature-name"),k,c);d(b,a,h,g)})})()});g.when("uss-constants-common").register("nexus-util",function(f){return{emitCounterData:function(g,n){g={counterName:g,counterValue:n};r.ue&&ue.event&&r.ue.event(g,f.nexusConstants.PRODUCER_ID,f.nexusConstants.SCHEMA_ID+
f.nexusConstants.SCHEMA_VERSION)}}});g.when("A","3p-promise","uss-constants").register("uss-amazonapi-client",function(f,g,n){function q(a){var c=f.$(b.ENDPOINT).val()+"/"+a.apiPath,d=[];if(a.additionalParameters)for(var g in a.additionalParameters)a.additionalParameters.hasOwnProperty(g)&&d.push(g+"\x3d"+encodeURIComponent(a.additionalParameters[g]));d.length&&(c+="?"+d.join("\x26"));return c}function d(a){var c=f.$(b.CSRF_TOKEN).val(),d;d=["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+
'"'];a.resourceInclusions&&d.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');d=d.join("; ");var g;g=f.$(b.LANGUAGE_OF_PREFERENCE).val();a.languageOfPreference&&(g=a.languageOfPreference);g=g.replace(/_/g,"-");c={Accept:d,"Accept-Language":g,"x-api-csrf-token":c};a.requestType&&(c["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+a.requestType+'"');return c}var b={CSRF_TOKEN:"#uss-amazonApiAjaxCsrfToken",ENDPOINT:"#uss-amazonApiAjaxEndpoint",LANGUAGE_OF_PREFERENCE:"#uss-languagePreference"};
return{makeRequest:function(a){return new g(function(c,h){var g=q(a),k=d(a),n=a.data?JSON.stringify(a.data):u,e;e="integ.amazon.com"!==f.$(b.ENDPOINT).val().split("/")[2].substring(8,24)?"prod":void 0;return f.$.ajax({type:a.method,url:g,headers:k,data:n,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){a.environment=e;c(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(c){b.data=a.responseText}h(b)}})})}}});g.when("summary-api",
"productV2Images-api","3p-promise","uss-constants","uss-logger-service").register("aapi-handler",function(f,g,n,q,d){var b=q.metrics,a=q.cartApiConstants,c=new d.Timer(b.PRIMARY_SUMMARY_API_PROMISE_RESOLVED_TIMER),h=new d.Timer(b.SECONDARY_SUMMARY_API_PROMISE_RESOLVED_TIMER),l=new d.Timer(b.PRODUCTV2IMAGES_API_PROMISE_RESOLVED_TIMER),k=function(c,e){c=g.productV2Images(c);c.then(function(b){if(!(b&&b.entity&&b.entity.productImages&&b.entity.productImages.entity&&b.entity.productImages.entity.images))throw b;
var c=b.entity.productImages.entity.images[0].lowRes.physicalId,d=b.entity.productImages.entity.images[0].lowRes.extension,h=b.entity.productImages.entity.altText;b=b.environment===a.USS_ENVIRONMENT_PROD?a.USS_PRODUCTV2IMAGES_PROD_URL_PATH+c+a.USS_PRODUCTV2IMAGES_DIMENSIONS+d:a.USS_PRODUCTV2IMAGES_DEV_URL_PATH+c+a.USS_PRODUCTV2IMAGES_DIMENSIONS+d;e.mainImage.altText=h;e.mainImage.src=b;l.stop()}).catch(function(a){d.logCounter(b.PRODUCTV2IMAGES_API_PROMISE_REJECTED_COUNTER);l.stop();return a});return c};
return{atcStatusDataByApi:function(f,e){return new n(function(g,q){var r={cart:{checkoutUrl:a.USS_CHECKOUT_URL,count:{},subTotal:{amount:{},displayString:{},iso:{}}},imbHTML:"",mainImage:{altText:{},src:{}},shippingMessageHTML:a.USS_SHIPPING_MESSAGE,status:1};e?c.start():h.start();var t=[];if(!0===e){l.start();var u=k(f,r);t.push(u)}n.all(t).then(function(){g({atcStatusData:r,isOk:1})}).catch(function(){d.logCounter(b.CART_API_PROMISE_REJECTED_COUNTER);q()})})}}});g.when("A","uss-amazonapi-client",
"natc-utils","buy-box-utility","uss-constants").register("uss.cart.add-items",function(f,g,n,q,d){function b(a,b){b.reftag&&(a.additionalParameters.ref_=b.reftag);(b.queryString!==u&&""!==b.queryString?b.queryString:"").split("\x26").forEach(function(b){b=b.split("\x3d");2===b.length&&(a.additionalParameters[b[0]]=b[1])})}var a=d.cartApiConstants;return{addItems:function(c,d){var f;if(d){f=n.constructAddItemsRequest(c);c.reftag=a.USS_PRIMARY_ATC_REFTAG;var k=f.items,p=c.inputs.a;if(k)for(var e=0;e<
k.length;++e)if(p&&p===k[e].asin){var m=q.getSelectedQuantityInMobileAppBuyBox();m&&!isNaN(m)?k[e].quantity=Number(m):k[e].quantity=1}}else c?(f=c.cartArgs.offerListingID,k=a.USS_SECONDARY_ATC_QUANTITY,p=c.inputs.additionalParameters,e={},e.asin=c.inputs.a,e.offerListingId=f,e.quantity=k,p&&(e.additionalParameters=p),f={items:[e]}):f={};k=!d&&c&&c.reftag?"cart/carts/retail/items?ref_\x3d"+c.reftag.replace("?","\x26"):"cart/carts/retail/items";f={apiPath:k,requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",
method:"POST",data:f,additionalParameters:{}};d&&c&&b(f,c);return g.makeRequest(f)}}});g.when("A","uss-amazonapi-client").register("uss.cart.modify-items",function(f,g){return{modifyItems:function(f){return g.makeRequest({apiPath:"cart/carts/retail/items",requestType:"cart.modify-items.request/v1",responseType:"cart.modify-items/v1",method:"PUT",data:{items:f}})}}});"use strict";g.when("uss-amazonapi-client").register("summary-api",function(f){return{summary:function(g){var n={apiPath:"cart/summary",
responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};g&&(n.additionalParameters.cartTypes=g);return f.makeRequest(n)}}});g.when("uss-amazonapi-client").register("productV2Images-api",function(f){"use-strict";return{productV2Images:function(g){return f.makeRequest({apiPath:"products/"+g,responseType:"product/v2",method:"GET",resourceInclusions:["productImages(product.product-images/v2)"]})}}});g.when("A").register("natc-utils",function(f){function g(b){if(!b||!b.inputs)return d.INVALID;
b=b.inputs;for(var a in b){if(a.startsWith("items[0.base][asin]"))return d.V2;if(a.startsWith("item[0].asin"))return d.V1}return d.INVALID}function n(b){var a=b.inputs;b={};for(var c in a){var d=c.replace("items[","").slice(0,-1).split("][");d.reduce(function(b,f,g){return b[f]||(b[f]=d.length-1===g?a[c]:{})},b)}return b}function q(b){var a=b.inputs;b={};for(var c in a){var d=c.replace(/item\[(\d+)\]/,"$1").split(".");d.reduce(function(b,f,g){return b[f]||(b[f]=d.length-1===g?a[c]:{})},b)}return b}
var d={V1:"NATC_Params_Version_1",V2:"NATC_Params_Version_2",INVALID:"NATC_Params_Version_Invalid"};String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(b,a){a=0<a?a|0:0;return this.substring(a,a+b.length)===b}});return{constructAddItemsRequest:function(b){switch(g(b)){case d.V2:b=n(b);break;case d.V1:b=q(b);break;default:throw Error("Could not determine or invalid NATC params version");}var a=[],c;for(c in b)"object"===typeof b[c]&&b[c].asin&&a.push(b[c]);
return{items:a}},determineNATCParamsVersion:g,PARAM_VERSIONS:d}});g.when("uss-default-layout").register("uss-final-layout",function(f){return f})});
/* ******** */
(function(m){var L=window.AmazonUIPageJS||window.P,n=L._namespace||L.attributeErrors,h=n?n("DetailPageTwisterPlusAssets",""):L;h.guardFatal?h.guardFatal(m)(h,window):h.execute(function(){m(h,window)})})(function(m,L,n){"use strict";m.when("A").register("twister-plus-constants",function(h){return{ASIN:"asin",PRICE:"price",SAVINGS:"savings",TOTAL_PRICE:"totalPrice",YOU_SAVE:"youSave",PRICE_UNIT:"priceUnit",OFFER_LISTING_ID:"offerListingId",QUANTITY:"quantity",TWISTER_REFRESH_EVENT:"twister-refresh",
CC_SELECTION_UPDATE_EVENT:"cc-selection-update",TWISTER_PLUS_FRAMEWORK:"TwisterPlusFramework",UNKNOWN:"UNKNOWN",DEVICE_TYPE_WEB:"web",DEFAULT_BUYING_OPTION_POSITION:0,SPACE:" ",OPENING_BRACKET:"(",CLOSING_BRACKET:")",TP_AFTER_BUYBOX_UPDATE_EVENT:"twisterPlus:selection:afterBuyBox:update",ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",DEFAULT_WEB_GROUP_NAME:"desktop_buybox_group_1",DEFAULT_MOBILE_WEB_GROUP_NAME:"mobile_buybox_group_1",DEFAULT_MOBILE_APP_GROUP_NAME:"mobileapp_buybox_group_1",registrationMap:{CALLBACKS:"callbacks",
FEATURE_ATTRIBUTION:"featureAttribution",IS_MULTI_SELECTION:"isMultiSelection",UPDATE_QTY_AS_BASE_ITEM:"updateQtyAsBaseItem",INCLUDE_SAVINGS_CALCULATION_IN_SUBTOTAL:"includeSavingsCalculationInSubtotal",DISPLAY_SAVINGS_ROW_IN_BOTTOM_SHEET:"displaySavingsRowInBottomSheet",BASE_ITEM_SAVINGS:"baseItemSavings"},TWISTER_PLUS_VIEW_REGISTRATION:{viewAttribution:"DetailPage",viewName:"MobileTwisterPlusFramework"},ccManager:{FEATURE_NAME:"ccManager",ACTIVE_CARDS:"twisterPlusActiveCards",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",
UNSUPPORTED_BUYING_OPTION_LIST:["ALM","SNS","UNKNOWN"]},itemAssociation:{KEY_BUYBACK:"buyback",CUSTOM_NAME_STRING:"custom-name",CUSTOM_VALUE_STRING:"custom-value",CUSTOM_DATA_KEY:"customData",INPUT_TYPE_HIDDEN:"hidden",ENCODED_ITEM_ASSOC_VAL:"encodedItemAssocVal",ITEM_ASSOCIATION_GROUP_KEY:"ItemAssociationGroupKey",ITEM_ASSOCIATION_GROUP_VAL:"itemAssociationGroup",ASIN_KEY:"asin",QUANTITY_KEY:"quantity",OFFERING_ID_KEY:"offeringID",OFFER_LISTING_ID_KEY:"offerListingId",FORM_DATA_ASIN_KEY:"a",FORM_DATA_OID_KEY:"oid",
FIRST_INDEX:".1",DEVICE_TYPE_MOBILE_WEB:"mWeb",DEVICE_TYPE_MOBILE_APP:"mApp",IS_BUYBACK_INPUT_FLAG:"isBuyBack",IS_BUYBACK_INPUT_FLAG_VALUE:"1",PIPE_SEPARATOR:"|",FEATURE_NAME_KEY:"featureName",BASE_ASIN_INDEX:1,BASE_ASIN_INDEX_FOR_NATC:0,BASE_ASIN_ITEM_TYPE:"base",ITEMS_PREFIX:"items",PARAM_NAMES:{ASIN:["asin"],QUANTITY:["quantity"],OFFER_LISTING_ID:["offerListingId"],ITEM_ASSOCIATION:["additionalParameters","itemAssociation"],ASSOCIATED_ITEM_ID:["associatedItemId"],DELETE_CONSTRAINT:["deleteConstraint",
"mutuallyInclusive"],PROGRAM_TYPE:["programType"],RENDER_TYPE:["renderType"],ACCESSORY_TYPE:["properties","accessoryType"],CUSTOMER_APPOINTMENT_TYPE:["properties","customerAppointmentType"],paymentOfferInfo:["additionalParameters","paymentOfferInfo"],inHouseInstallments:["additionalParameters","installments","programId"],buybackOfferSelectionKey:["additionalParameters","buybackOfferSelectionKey"]},OPENING_SQUARE_BRACKET:"[",CLOSING_SQUARE_BRACKET:"]"},htmlTags:{INPUT:"input",FIELDSET:"fieldset"},
selectors:{DECLARATIVE_CLASS:".a-declarative",BUYBOX_ACCORDION:"#buybox .a-accordion",BUYBOX_ACCORDION_ACTIVE:"#buybox .a-accordion-active",BUYBOX:"#buybox",ACTIVE_ACCORDION:".a-accordion-active",ACCORDION:".a-accordion",TAB_PREFIX:"#tab_",BUYBOX_TAB_ACTIVE:"#buybox .a-tab-heading.a-active",NO_TABS_GROUP_DESKTOP:"#buybox div:first-child",NO_TABS_GROUP_MOBILE:"#buybox div:first-child div:first-child",TAB_GROUP_NAME:"data-csa-c-content-id",OFFER_DISPLAY_GROUP:"#offerDisplayGroup",MOBILEAPP_TABS_ELEMENT_ID:"[id^\x3dtab_mobileapp_buybox_group]",
MOBILEAPP_ACCORDION_OR_SINGLEOFFER_ELEMENT_ID:".accordion-row, [id^\x3dgsod_singleOfferDisplay]",BUYNOW_ELEMENT_ID:"form#buyNow, form#buyNowCheckout",BUYNOW_CHECKOUT_ELEMENT_ID:"#buyNowCheckout",BUYNOW_BUTTON_ID:"#buy-now-button",ADD_TO_CART_BUTTON_ID:"#add-to-cart-button, #installments-button, #add-to-cart-button-ubb-mobile, #pickup-add-to-cart-button",ADD_TO_CART_ELEMENT_ID:"#addToCart, #mobile-installments",ITEM_ASSOCIATION_INPUTS_CLASS:".itemAssocInputs",ITEM_ASSOCIATION_INPUTS_CLASS_NAME:"itemAssocInputs",
DATA_ATTRIBUTE_ACTION:"action",PPD_RIGHT_COL_ID:"#rightCol",BUYING_OPTIONS_PRICE_DATA_CLASS:".twister-plus-buying-options-price-data",ACCORDION_ROW_CLASS:".accordion-row"},ccFeatures:{PAYMENT_OPTIONS_FEATURE:"paymentOptions",PAYMENT_OPTIONS_BUY_NOW_CART_TYPE:"BUY_NOW",PAYMENT_OPTIONS_ATC_CART_TYPE:"ADD_TO_CART",CART_TYPE:"cartType",IS_BUYBACK_KEY:"isBuyBackKey",IS_BUYBACK_FEE:"isBuyBackFee",BUY_NOW_DATA:"buynowData",COUPONS_FEATURE:"couponsCard",PAYMENT_OFFER_INPUT_NAME:"paymentOfferInfo"},bottomSheet:{FEATURE_NAME:"bottomSheet",
EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",BOTTOM_SHEET_NAME:"twisterPlusBottomSheet",RESIZE_DURATION:.3,BOTTOM_SPACING:21,ITEM_COUNT_SINGULAR_TEMPLATE:"item-count-singular-template",ITEM_COUNT_PLURAL_TEMPLATE:"item-count-plural-template",ITEM_COUNT_PLACEHOLDER:"###itemQuantity",DEFAULT_DISCOUNT_STRING:"default-discount-string",MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE:"monthly-payment-footnote-template"},unavailableMessage:{ACTIVE_ACCORDION:".a-accordion-active",
CLASS:".",DISPLAYABLE_MESSAGE:"tp-bbm-info-message-displayable",HIDDEN:"aok-hidden",MESSAGE_ITEM:"twister-plus-unavailable-message-item",MULTIPLE:".tp-bbm-info-message-container",SINGLE:".tp-bbm-info-message-with-card-name-container",TEMPLATE:"twister-plus-unavailable-message-item-template",QUANTITY_RESTRICTION:".tp-bbm-info-message-quantity-restriction-container",BUYBOX_ACCORDION_ROWS:"#buyBoxAccordion"},sideSheet:{FEATURE_NAME:"sideSheet",EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",
RESIZE_DURATION:300,SYMBOL_HASH:"#",DISPLAY:"display",INLINE:"inline",CAROUSEL_CONTAINER_CLASS:".a-carousel-container",CAROUSEL_CONTAINER_CLASS_NAME:"a-carousel-container",CAROUSEL_INITIALIZED_CLASS_NAME:"a-carousel-initialized",CAROUSEL_NOT_INITIALIZED_CLASS_NAME:"a-carousel-static",SIDE_SHEET_AJAX_SUCCESS:"twister-plus:side-sheet:ajax:success"},ccCardsRefresh:{SINGLE_CARD_INVALID:"single-card-invalid-message",SINGLE_SELECTION_INVALID:"single-selection-invalid-message",SINGLE_DETAILS_UPDATE:"single-details-update-message",
MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH:"multiple-details-update-or-cards-refresh-message",MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID:"multiple-card-invalid-or-selection-invalid-message",CARD_NAME_PLACEHOLDER:"###cardName"},metrics:{CC_CARD_COUNT:"ccCardCount",TWISTER_PLUS_TTI:"TTI",BOTTOM_SHEET_GV:"priceBottomSheetGV",BOTTOM_SHEET_TIMER:"priceBottomSheetTimer",CC_REMOVAL:"ccRemoval",CC_SELECTION:"ccSelection",PREFIX:"twisterPlus.",FEATURE_NAME:"twisterPlus",TWISTER_PLUS_TWISTER_REFRESH_GV:"twisterPlusTwisterRefreshGV"},
toolTip:{FEATURE_NAME:"toolTip",EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",TOOL_TIP_NAME:"twisterPlusPopOver",ITEM_COUNT_SINGULAR_TEMPLATE:"item-count-singular-template",ITEM_COUNT_PLURAL_TEMPLATE:"item-count-plural-template",ITEM_COUNT_PLACEHOLDER:"###itemQuantity",MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE:"monthly-payment-footnote-template"}}});"use strict";m.when("A").register("twister-plus-preconditions",function(h){return{isTwisterPlusEligible:function(){return"true"===
h.$("#twister-plus-eligible").val()},isCcCardsRendered:function(){return"true"===h.$("#ccCardsRendered").val()}}});"use strict";m.when("A","twister-plus-logger-service","twister-plus-constants").register("twister-plus-feature-state",function(h,d,f){function e(a){b.currentBuyingOptionPosition=a||0}function x(a){return b.ccFeaturesState[a]}function c(a){return b.ccRemovedSelections[a]}var b={},g=f.metrics;return{initialize:function(a){b.twisterState=a.twisterState||{};b.priceData=a.priceData||{};e(a.currentBuyingOptionPosition);
b.currentGroupName=a.currentGroupName||"";b.ccFeaturesState=a.ccFeaturesState||{};b.ccRemovedSelections=a.ccRemovedSelections||{}},getTwisterPlusFeaturesState:function(){return b},getTwisterState:function(){return b.twisterState},setTwisterState:function(a){b.twisterState=a||{}},getCCFeaturesState:function(){return b.ccFeaturesState},getCCRemovedSelections:function(){return b.ccRemovedSelections},getPriceData:function(){return b.priceData},getCurrentBuyingOptionPosition:function(){return b.currentBuyingOptionPosition},
getCurrentGroupName:function(){return b.currentGroupName},updateCCFeatureState:function(a,c,e){var f=!1;if(a!==n&&c!==n){var f=b.ccFeaturesState,h;h=x(a);if("add"===c.selectionType)e[a].hasOwnProperty("updateQtyAsBaseItem")&&e[a].updateQtyAsBaseItem&&(c.quantity=b.twisterState.quantity),h!==n?h.push(c):(b.ccFeaturesState[a]=[],b.ccFeaturesState[a].push(c)),d.logCounter(g.CC_SELECTION+"."+a);else if("delete"===c.selectionType&&(e=c.itemType,c=c[e],h!==n))for(var A=0;A<h.length;A++)if(h[A][e]===c){h.splice(A,
1);d.logCounter(g.CC_REMOVAL+"."+a);break}h=x(a);f[a]=h;f=!0}else m.log("CC featureName or featureData passed to Twister+ is not defined.","FATAL",a);return f},updateTwisterPlusFeatureStateForQuantity:function(a,c){b.twisterState.quantity=a;h.each(b.ccFeaturesState,function(g,d){c[d].hasOwnProperty("updateQtyAsBaseItem")&&c[d].updateQtyAsBaseItem&&h.each(g,function(c,g){b.ccFeaturesState[d][g].quantity=a})})},updateCCRemovedSelections:function(a,g){var d=!1;a!==n&&g!==n?(d=b.ccRemovedSelections,c(a)===
n&&(b.ccRemovedSelections[a]=[]),c(a).push(g),g=c(a),d[a]=g,d=!0):m.log("CC featureName or featureData passed to Twister+ is not defined.","FATAL",a);return d},clearCCFeatureSelections:function(a){var c=!1;a!==n?(x(a)!==n&&(c=b.ccFeaturesState[a].length,0<c&&d.logCounter(g.CC_REMOVAL+"."+a,c),b.ccFeaturesState[a]=[]),c=!0):m.log("CC featureName passed to Twister+ is not defined.","FATAL",a);return c},clearCCRemovedSelections:function(a){var g=!1;a!==n?(c(a)!==n&&delete b.ccRemovedSelections[a],g=
!0):m.log("CC featureName passed to Twister+ is not defined.","FATAL",a);return g},updatePriceData:function(a){b.priceData=a||{}},updateCurrentBuyingOptionPosition:function(a){e(a)},updateGroupName:function(a){b.currentGroupName=a||""}}});"use strict";m.when("A","twister-plus-constants").register("twister-plus-feature-registration",function(h,d){var f={},e=[d.TWISTER_REFRESH_EVENT,d.CC_SELECTION_UPDATE_EVENT];(function(){for(var d=0;d<e.length;d++)f[e[d]]=[]})();return{registerFeature:function(d,
c,b){var g;g=!0;d.hasOwnProperty("featureName")&&d.hasOwnProperty("featureAttribution")||(g=!1,m.log("Feature Registration does not contain valid featureName or featureAttribution","ERROR",d.featureName+": "+d.featureAttribution));g&&(g=!0,-1===e.indexOf(c)&&(m.log("Feature passed invalid event name while registering to Twister+: "+c,"ERROR",d.featureName+": "+d.featureAttribution),g=!1));if(g){g=d.featureName;for(var a=!1,v=0;v<f[c].length;v++)if(f[c][v].featureName===g){a=!0;break}a?m.log("Feature already registered to TwisterPlus for the event: "+
c,"ERROR",g):(a={},a.featureName=g,a.featureAttribution=d.featureAttribution,a.callback=b,f[c].push(a))}},callRegisteredFeaturesCallback:function(d){for(var c=0;c<f[d].length;c++)f[d][c].callback.apply()}}});"use strict";m.when("A","twister-plus-feature-state","twister-plus-feature-registration","twister-plus-constants","priceUpdate","itemAssociation","buy-box-price-update","twister-plus-unavailable-message","turbo-checkout-handler","utils").register("twister-plus-framework",function(h,d,f,e,x,c,
b,g,a,v){function C(){var a=v.getBuyingOptionPriceDataMap(),c=O;if(a){var b=J;if(Array.isArray(a))return a[b]===n&&m.log("Buying option data missing for the selected offer at position: "+JSON.stringify(b),"FATAL",e.TWISTER_PLUS_FRAMEWORK),a[b];var d=a[c];d===n&&(d=a[Object.keys(a)[0]]);if(d===n||d[b]===n)m.log("Buying option data missing for the selected offer at position: "+JSON.stringify(b)+" and groupName: "+JSON.stringify(c),"FATAL",e.TWISTER_PLUS_FRAMEWORK);else return d[b]}}function D(){O=v.getActiveGroupName();
J=v.getBuyingOptionPosition(O);w=A();H=p();var a=h.$("#twister-plus-asin");z=a?a.val():n;d.initialize(t())}function y(){K(document).delegate("#quantity","change",function(a){a=k();I=!0;d.updateTwisterPlusFeatureStateForQuantity(a,E);l();I=!1})}function A(){var a=C();if(a)return{price:a.priceAmount,savings:0,priceUnit:a.currencySymbol};var a=(a=h.$("#twister-plus-price-data-price"))?a.val():n,c=h.$("#twister-plus-price-data-savings"),c=c?c.val():n,b=h.$("#twister-plus-price-data-price-unit"),b=b?b.val():
n;return{price:parseFloat(a),savings:parseFloat(c),priceUnit:b}}function p(){var a=C();return a?a.offerListingId:(a=h.$("#twister-plus-offer-listing-id"))?a.val():n}function t(){var a=F(),c={};c[u.TOTAL_PRICE]=w.price;c[u.YOU_SAVE]=w.savings;return{twisterState:a,priceData:c,currentBuyingOptionPosition:J,currentGroupName:O}}function F(){var a={};a[u.ASIN]=z;a[u.PRICE]=w.price;a[u.SAVINGS]=w.savings;a[u.PRICE_UNIT]=w.priceUnit;a[u.OFFER_LISTING_ID]=H;a[u.QUANTITY]=k();return a}function k(){var a=v.getBaseItemQuantity();
a===n&&(a=1);return a}function l(){w=A();H=p();d.setTwisterState(F());var l=d.getTwisterPlusFeaturesState(),k=x.getTotalPriceAndYouSave(l,E);d.updatePriceData(k);d.updateCurrentBuyingOptionPosition(J);d.updateGroupName(O);b.updatePriceSubtotalFeature(l);g.update(d);v.getBuyingOptionType(J,O)===e.UNKNOWN||I&&!v.isFeatureSelectionPresent(d.getCCFeaturesState())||c.addItemAssociationBundleData(d.getTwisterPlusFeaturesState(),!0);f.callRegisteredFeaturesCallback(u.CC_SELECTION_UPDATE_EVENT);a.updateInputCheckbox(l)}
var u=e,w,H,z,K=h.$,E,I=!1,J,O;return{initializeTwisterPlus:function(){D();y()},refreshTwisterPlusData:function(){D();y();f.callRegisteredFeaturesCallback(u.TWISTER_REFRESH_EVENT)},ccSelectionFetch:function(a){return d.getCCFeaturesState()[a]},ccRemovedSelectionFetch:function(a){return d.getCCRemovedSelections()[a]},ccSelectionUpdate:function(a,c){a=d.updateCCFeatureState(a,c,E);l();return a},ccRemovedSelectionUpdate:function(a,c){a=d.updateCCRemovedSelections(a,c);l();return a},ccSelectionsClear:function(a){a=
d.clearCCFeatureSelections(a);l();return a},ccRemovedSelectionsClear:function(a){a=d.clearCCRemovedSelections(a);l();return a},setFeatureRegistrationMap:function(a){E=a},setCurrentBuyingOptionPosition:function(a){J=a;d.updateCurrentBuyingOptionPosition(a);c.reInitialiseItemCountVal()},setCurrentGroupName:function(a){O=a;d.updateGroupName(a);c.reInitialiseItemCountVal()},getCurrentBuyingOptionPosition:function(){return J},getCurrentGroupName:function(){return O},updateTwisterPlusComponents:function(){l()},
getTwisterPlusState:function(){return h.copy(d.getTwisterPlusFeaturesState())},registerFeature:function(a,c,b){try{"function"===typeof b?f.registerFeature(a,c,b):m.log("Registering function should provide callback as a function","ERROR",a.featureName)}catch(d){L.ueLogError&&L.ueLogError(d,{logLevel:"ERROR",attribution:a.featureName,message:"TwisterPlus Framework: Error caused by the feature: "+a.featureName+" (C/T/I: "+a.featureAttribution+") while registering to TwisterPlus to listen to "+c+" event"+
d})}}}});m.when("A","twister-plus-framework","twister-plus-constants","twister-plus-logger-service","utils").register("cc-manager",function(h,d,f,e,x){function c(a){return t[a].hasOwnProperty(l.IS_MULTI_SELECTION)&&t[a][l.IS_MULTI_SELECTION]}function b(a){var c=u.indexOf(a);if(-1!==c&&c!==u.length-1&&(c=g(c),!(0>c))){var b=F(".cc-card-"+a);a=u[c];var d=t[a]&&t[a].callbacks;setTimeout(function(){b[0]&&F("html, body").animate({scrollTop:b.offset().top},500);d&&d.hasOwnProperty("cardExpand")&&d.cardExpand()},
800)}}function g(a){var c=x.getActiveGroupName(),b=x.getBuyingOptionPosition(c),d=x.getBuyingOptionType(b,c),l=F(f.selectors.BUYBOX_TAB_ACTIVE),g=x.getAAPIBuyingOptionIndex(b,c);for(a+=1;a<u.length;a++){var k=u[a];if((k=t[k]&&t[k].callbacks)&&k.hasOwnProperty("isBuyingOptionUnsupported")){if(!k.isBuyingOptionUnsupported(b,d,1===l.length?c:n,g!==n?g:b))return a}else return a}return-1}function a(a,c){E=d.getTwisterPlusState();c=d.ccSelectionUpdate(a,c);d.ccRemovedSelectionsClear(a);return c}function v(a){E=
d.getTwisterPlusState();return d.ccSelectionsClear(a)}function C(a){var c=!0,b=a;u=D();t.hasOwnProperty(a)?-1===u.indexOf(a)&&(c=!1,b=t[a][l.FEATURE_ATTRIBUTION],m.log("CC selection update called for non rendered feature","ERROR",b)):(c=!1,m.log("CC selection update called for unregistered feature","ERROR",b));return c}function D(){var a=F("#twister-plus-active-cards"),a=a.length?a.val():"";return(a=a.trim())?a.split(","):[]}function y(a,c){var b={},d;for(d in u){var k=u[d];if(k!==c&&t.hasOwnProperty(k)){var g=
t[k];g[l.CALLBACKS].hasOwnProperty("refreshCard")&&(g=g[l.CALLBACKS].refreshCard(a,c),"NO_CHANGE"!==g&&a.ccFeaturesState[k]!==n&&0<a.ccFeaturesState[k].length&&(b[g]===n&&(b[g]=[]),b[g].push(k)))}}a=t[c][l.CALLBACKS];k=Object.keys(b).length;if(a.hasOwnProperty("ccCardsRefreshNotification")&&0<k){var e;c=F("#tp-cc-cards-refresh-strings");d=!0;if(1===k)if(k=Object.keys(b)[0],b=b[k],1===b.length){switch(k){case "CARD_INVALID":e=c.data(H.SINGLE_CARD_INVALID);break;case "SELECTION_INVALID":e=c.data(H.SINGLE_SELECTION_INVALID);
break;case "DETAILS_UPDATE":e=c.data(H.SINGLE_DETAILS_UPDATE),d=!1}e=e.replace(H.CARD_NAME_PLACEHOLDER,b[0])}else switch(k){case "CARD_INVALID":e=c.data(H.MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID);break;case "SELECTION_INVALID":e=c.data(H.MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID);break;case "DETAILS_UPDATE":e=c.data(H.MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH),d=!1}else 1<k&&(e=c.data(H.MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH));b=d?F("#tp-cc-cards-refresh-red-notification"):F("#tp-cc-cards-refresh-green-notification");
b.find(".a-alert-content").text(e);e=b.html();a.ccCardsRefreshNotification(e)}else 0<k&&m.log("Feature callback ccCardsRefreshNotification() missing for the feature","ERROR",t[c][l.FEATURE_ATTRIBUTION])}function A(a,c,b){for(var d in u){var k=u[d];if(k!==b&&t.hasOwnProperty(k)){var g=t[k];g[l.CALLBACKS].hasOwnProperty("restorePreviousSelection")&&g[l.CALLBACKS].restorePreviousSelection(a.ccFeaturesState[k],c.ccFeaturesState[k],b)}}}function p(a,c){var b=!1;if(K&&K===a&&E.ccFeaturesState!==n&&E.ccFeaturesState[K]!==
n)if("SELECTION_CLEAR_ITEM_DATA"===c)b=0===E.ccFeaturesState[K].length?!0:!1;else{a=E.ccFeaturesState[K];for(var d=c.itemType,k=0;k<a.length;k++){var g=a[k].itemType;if(g===d&&a[k][g]===c[d]){b=!0;break}}}return b}var t={},F=h.$,k=f.ccManager,l=f.registrationMap,u,w=f.metrics,H=f.ccCardsRefresh,z,K,E,I="",J;return{registerFeature:function(a,c){var b=!0;a.hasOwnProperty("featureName")&&a.hasOwnProperty(l.FEATURE_ATTRIBUTION)||(m.log("Properties missing in feature registration passed","ERROR",a.featureAttribution||
a.featureName),b=!1);b&&(b=!0,c.hasOwnProperty("init")&&c.hasOwnProperty("validateInputParams")||(m.log("Functions missing in callbacks passed","ERROR",a.featureAttribution||a.featureName),b=!1),b&&(b=a.featureName,t[b]={},t[b][l.CALLBACKS]=c,t[b][l.FEATURE_ATTRIBUTION]=a.featureAttribution,t[b][l.IS_MULTI_SELECTION]=a.isMultiSelection,t[b][l.UPDATE_QTY_AS_BASE_ITEM]=a.updateQtyAsBaseItem,t[b][l.BASE_ITEM_SAVINGS]=a.baseItemSavings,t[b][l.DISPLAY_SAVINGS_ROW_IN_BOTTOM_SHEET]=a.displaySavingsRowInBottomSheet,
t[b][l.INCLUDE_SAVINGS_CALCULATION_IN_SUBTOTAL]=a.includeSavingsCalculationInSubtotal,c.init()))},ccSelectionUpdate:function(k,g,e){var v=!1;if(C(k))if(t[k][l.CALLBACKS].validateInputParams(g)){if("T2"===J||"T3"===J)if(b(k),e)return;p(k,g)?(v=a(k,g),A(d.getTwisterPlusState(),E,k)):(K=k,v=a(k,g),y(d.getTwisterPlusState(),k));g=c(k);I===f.DEVICE_TYPE_WEB&&v&&!g&&(g=t[k][l.CALLBACKS],g.hasOwnProperty("cardCollapse")?g.cardCollapse():m.log("Feature callback cardCollapse() missing for the feature","ERROR",
t[k][l.FEATURE_ATTRIBUTION]))}else m.log("Validation failed for the passed itemData","ERROR",t[k][l.FEATURE_ATTRIBUTION]);return v},ccRemovedSelectionUpdate:function(a,c){var b=!1;C(a)&&(t[a][l.CALLBACKS].validateInputParams(c)?b=d.ccRemovedSelectionUpdate(a,c):m.log("Validation failed for the passed itemData","ERROR",t[a][l.FEATURE_ATTRIBUTION]));return b},ccSelectionsClear:function(a,c){var k=!1;C(a)&&(!c||"T2"!==J&&"T3"!==J||b(a),p(a,"SELECTION_CLEAR_ITEM_DATA")?(k=v(a),A(d.getTwisterPlusState(),
E,a)):(K=a,k=v(a),y(d.getTwisterPlusState(),a)));return k},ccRemovedSelectionsClear:function(a){var c=!1;C(a)&&(c=d.ccRemovedSelectionsClear(a));return c},getFeatureRegistrationDetails:function(){return t},init:function(){I=x.getDeviceType();u=D();d.setFeatureRegistrationMap(t);for(var a in u){var c=u[a];t.hasOwnProperty(c)&&t[c][l.CALLBACKS].init()}e.logCounter(w.CC_CARD_COUNT,u.length);if(a=F("[data-wireless-multi-card]").data("wireless-multi-card"))J=a.enhancementTreatment},getRenderedFeaturesList:D,
cardExpanded:function(a){var c=C(a),b=z;c&&(h.trigger("twisterPlus-removeCCCardNotification"),b&&b!==a?(z=a,a=t[b][l.CALLBACKS],a.hasOwnProperty("cardCollapse")?"T3"!==J&&a.cardCollapse():m.log("Feature callback cardCollapse() missing for the feature","ERROR",t[b][l.FEATURE_ATTRIBUTION])):z=a)},switchBuyingOption:function(a,c){var b=x.getBuyingOptionType(a,c);d.setCurrentBuyingOptionPosition(a);d.setCurrentGroupName(c);var g=F(f.selectors.BUYBOX_TAB_ACTIVE),e=x.getAAPIBuyingOptionIndex(a,c),v;for(v in u){var p=
u[v];if(t.hasOwnProperty(p)){var h=t[p];h[l.CALLBACKS].hasOwnProperty("switchBuyingOption")&&h[l.CALLBACKS].switchBuyingOption(a,d.ccSelectionFetch(p),d.ccRemovedSelectionFetch(p),b,1===g.length?c:n,e!==n?e:a,k.UNSUPPORTED_BUYING_OPTION_LIST.includes(b))}}u&&u.length&&d.updateTwisterPlusComponents()},getFeatureCurrentlyExpanded:function(){return z},isMultiSelectionFeature:c}});"use strict";m.when("A","utils").register("buy-box-price-update",function(h,d){function f(){A.text("/"+a.termType);p.text(a.termCount.toString()+
" "+a.termType);t.removeClass("aok-hidden")}function e(){A.text("");p.text("");t.addClass("aok-hidden")}function x(){2===v.length?C.find(".a-price-fraction").text(String(v[1].substring(0,2))):C.find(".a-price-fraction").text("00");C.find(".a-price-whole").contents().filter(function(){return 3===this.nodeType||""===this.textContent.trim()}).first().replaceWith(Number(v[0]).toLocaleString(n))}var c=h.$;h={};var b,g,a,v,C,D,y,A,p,t;h.init=function(){b=0;C=c("#tp_price_block_total_price_ww");D=c("#tp_options_detail");
y=c("#tp_monthly_options_detail");A=c("#tp-price-update-payment-term");p=c("#tp-price-update-payment-term-length");t=c("#tp-price-update-payment-period")};h.updatePriceSubtotalFeature=function(p){g=p.ccFeaturesState;var k=p.priceData;if(k&&d.isValidNumber(k.totalPrice)&&d.isValidNumber(k.youSave)){var k=g.hasOwnProperty("paymentOptions")&&0<g.paymentOptions.length,l=0,h;for(h in g)if("paymentOptions"!==h&&0<g[h].length){l=1;break}k?(a=g.paymentOptions[0],a.isOrderLevel?(v=a.price.toFixed(2).split("."),
x(),f(),1===l?D.removeClass("aok-hidden"):D.addClass("aok-hidden"),y.addClass("aok-hidden")):1===l?(v=(p.priceData.totalPrice+a.price-p.twisterState.price).toFixed(2).split("."),x(),e(),D.addClass("aok-hidden"),y.removeClass("aok-hidden")):(v=a.price.toFixed(2).split("."),x(),f(),D.addClass("aok-hidden"),y.addClass("aok-hidden"))):(v=p.priceData.totalPrice.toFixed(2).split("."),x(),e(),D.removeClass("aok-hidden"),y.addClass("aok-hidden"));p=c("#tp_price_update_feature_ww");h=c("#tp_price_row_ww");
1===b&&(h.css("display","none"),p.css("display","none"),b=0)}};return h});"use strict";m.when("A","twister-plus-constants").register("priceUpdate",function(h,d){function f(a,d,e,h){var f=a;x.each(e,function(a,e){var C=h&&h[a]&&h[a][g.INCLUDE_SAVINGS_CALCULATION_IN_SUBTOTAL];x.each(e,function(d,k){a!==c.PAYMENT_OPTIONS_FEATURE&&k.price!==n&&(a===b.KEY_BUYBACK?k.isBuyBack&&(f=f-k.savings+k.price):a===c.COUPONS_FEATURE?f-=k.savings:(d=k.quantity!==n?k.quantity:1,f+=k.price*d,C&&k.savings!==n&&(f-=k.savings*
d)))});C&&h[a][g.BASE_ITEM_SAVINGS]!==n&&(f-=h[a][g.BASE_ITEM_SAVINGS]*d)});return f}function e(a,d,e,h,f){var m=d;x.each(h,function(a,d){x.each(d,function(d,k){a!==c.PAYMENT_OPTIONS_FEATURE&&k.savings!==n&&(a===b.KEY_BUYBACK?k.isBuyBack&&(m+=k.savings):m+=k.savings*(k.quantity!==n?k.quantity:1))});f&&f[a]&&f[a][g.BASE_ITEM_SAVINGS]!==n&&(m+=f[a][g.BASE_ITEM_SAVINGS]*e)});return m}var x=h.$;h={};var c=d.ccFeatures,b=d.itemAssociation,g=d.registrationMap;h.getTotalPrice=function(a,c){var b={},d=a.twisterState.quantity?
a.twisterState.quantity:1;b.totalPrice=f(a.twisterState.price*d,d,a.ccFeaturesState,c);return b};h.getTotalPriceAndYouSave=function(a,c){var b={},d=a.twisterState.quantity?a.twisterState.quantity:1,g=a.twisterState.price*d,h=a.twisterState.savings*d;b.totalPrice=f(g,d,a.ccFeaturesState,c);b.youSave=e(g,h,d,a.ccFeaturesState,c);return b};return h});"use strict";m.when("A","utils","twister-plus-constants","twister-plus-feature-state","item-association-utils").register("itemAssociation",function(h,d,
f,e,x){function c(){var a=d.getActiveAccordionRow(e.getCurrentBuyingOptionPosition(),e.getCurrentGroupName());return a&&1===a.length?a.find(B.ADD_TO_CART_ELEMENT_ID):r(B.ADD_TO_CART_ELEMENT_ID)}function b(){var a=d.getActiveAccordionRow(e.getCurrentBuyingOptionPosition(),e.getCurrentGroupName());return a&&1===a.length?a.find(B.BUYNOW_ELEMENT_ID):r(B.BUYNOW_ELEMENT_ID)}function g(a){return 0<c().clone().find(B.ITEM_ASSOCIATION_INPUTS_CLASS).remove().end().find('input[name\x3d"'+a+'"]').length}function a(a,
c,b){var d=[],k=q.CUSTOM_NAME_STRING+"."+a+"."+c,k=r("\x3c"+N.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:k,name:k,value:b[q.ITEM_ASSOCIATION_GROUP_KEY]});a=q.CUSTOM_VALUE_STRING+"."+a+"."+c;b=r("\x3c"+N.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:a,name:a,value:JSON.stringify(b[q.ENCODED_ITEM_ASSOC_VAL])});d.push(k);d.push(b);return d}function v(a){return r("\x3c"+N.INPUT+"\x3e",{type:a.inputType,id:a.inputId,name:a.inputName,value:"string"===typeof a.inputValue?a.inputValue:JSON.stringify(a.inputValue)})}
function C(a,c,b,d){var k=a.featureName;a=a.formData;var g=[];if(a!==n){var l;k===V.PAYMENT_OPTIONS_FEATURE&&a[0].inputName===V.PAYMENT_OFFER_INPUT_NAME&&(l=b?V.PAYMENT_OPTIONS_BUY_NOW_CART_TYPE:V.PAYMENT_OPTIONS_ATC_CART_TYPE);for(b=0;b<a.length;b++)l!==n&&(a[b].inputValue[V.CART_TYPE]=l),k=a[b],"function"!==typeof c||d&&!q.PARAM_NAMES[k.inputName]||(k=c(k),g.push(k))}return g}function D(a,c,b){var k=b.quantity,d=b.offerListingId;k!==n&&d!==n?(a.push('\x3cinput type\x3d"hidden" id\x3d"asin.'+c+'" name\x3d"asin.'+
c+'" value\x3d"'+b.asin+'"\x3e'),b=O(c,k,!1),a.push(b),c=L(c,d,!1),a.push(c)):m.log("offerListingId or quantity is not defined for the asin in the itemData","Error",JSON.stringify(b));return a}function y(){return r("\x3c"+N.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:q.IS_BUYBACK_INPUT_FLAG,name:q.IS_BUYBACK_INPUT_FLAG,value:q.IS_BUYBACK_INPUT_FLAG_VALUE})}function A(a){var c=b(),k=c.find(B.ITEM_ASSOCIATION_INPUTS_CLASS);k.length?r(k).replaceWith(a):c.append(a)}function p(b,k){var l=Y(b),e=r("\x3c"+
N.FIELDSET+"\x3e",{"class":B.ITEM_ASSOCIATION_INPUTS_CLASS_NAME}),h=[],f={},p=2;if(da&&d.isFeatureSelectionPresent(T.ccFeaturesState)){p={};p.quantity=r("#addToCart #atc-mbb-quantity").val();var u=r("input[id|\x3dmbb-checkbox-input]:checked"),w=u.closest(".a-declarative[data-action\x3d'mbb-mobile-checkbox-toggle']");p.asin=u.val();p.offerListingId=w.data("mbb-mobile-checkbox-toggle")?w.data("mbb-mobile-checkbox-toggle").offeringId:"";h=D(h,2,p);p=3}for(u=0;u<l.length;u++){var w=l[u],S=w.featureName;
f[S]=f[S]!==n?f[S]+1:0;if(Z)for(var t=l[u].customData||[],m=0;m<t.length;m++){var R=a(p,m+1,t[m]);r.merge(h,R);R=x.createCustomInputFieldsForNATC(f[S],S,t[m]);r.merge(h,R)}w.asin!==n&&(h=D(h,p,w),p++,h=x.addAsinItemsInputFieldsForNATC(f[S],S,h,w));w=C(l[u],v,!1,!1);r.merge(h,w);w=C(l[u],x.createFormInputFieldForNATC,!1,!0);r.merge(h,w)}if(h.length)for(l=[],g(q.ASIN_KEY+q.FIRST_INDEX)||(f=q.BASE_ASIN_INDEX,l.push('\x3cinput type\x3d"hidden" id\x3d"asin.'+f+'" name\x3d"asin.'+f+'" value\x3d"'+T.baseAsinState.asin+
'"\x3e')),g(q.QUANTITY_KEY+q.FIRST_INDEX)||(ea?(f=d.getBaseItemQuantity(),f===n&&(f=1)):f=c().find('input[id\x3d"quantity"]').val(),f=O(q.BASE_ASIN_INDEX,f),l.push(f)),g(q.OFFERING_ID_KEY+q.FIRST_INDEX)||(f=L(q.BASE_ASIN_INDEX,T.baseAsinState.offerListingId),l.push(f)),r.merge(h,l),k&&(l=y(),h.push(l)),l=0;l<h.length;l++)r(e).append(h[l]);h=r("\x3c"+N.FIELDSET+"\x3e",{"class":B.ITEM_ASSOCIATION_INPUTS_CLASS_NAME});l=[];f=2;p=1;for(u=0;u<b.length;u++){w=b[u];if(Z)if(b[u][q.FEATURE_NAME_KEY]===q.KEY_BUYBACK){for(var t=
b[u].buynowData||[],S=f,m=[],G=0;G<t.length;G++)R=t[G].name===V.IS_BUYBACK_KEY?r("\x3c"+N.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:t[G].id,name:q.CUSTOM_NAME_STRING+"."+S+".1",value:t[G].value}):t[G].name===V.IS_BUYBACK_FEE?r("\x3c"+N.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:t[G].id,name:q.CUSTOM_VALUE_STRING+"."+S+".1",value:t[G].value}):r("\x3c"+N.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:t[G].id,name:t[G].name,value:t[G].value}),m.push(R);S=m;r.merge(l,S)}else for(t=b[u].customData||[],m=0;m<
t.length;m++)S=a(f,m+1,t[m]),r.merge(l,S);w.asin!==n&&(l=D(l,p,w),f++,p++);w=C(b[u],v,!0,!1);r.merge(l,w)}if(l.length)for(k&&(b=y(),l.push(b)),b=0;b<l.length;b++)r(h).append(l[b]);e.length&&(b=c().find(B.ITEM_ASSOCIATION_INPUTS_CLASS),b.length?r(b).replaceWith(e):c().append(e));h.length&&A(h)}function t(){if(W===n||0===W.length)W=c().find('input[name\x3d"itemCount"]'),fa=0===W.length?0:parseInt(W[0].value)}function F(){if(X===n||0===X.length)X=b().find('input[name\x3d"itemCount"]'),ga=0===X.length?
0:parseInt(X[0].value)}function k(){var a=r(B.OFFER_DISPLAY_GROUP);return a&&1===a.length?a.find(B.ADD_TO_CART_BUTTON_ID):(a=r(B.BUYBOX_ACCORDION))&&1===a.length?a.find(B.ADD_TO_CART_BUTTON_ID):r(B.ADD_TO_CART_BUTTON_ID)}function l(){var a=r(B.OFFER_DISPLAY_GROUP);return a&&1===a.length?a.find(B.BUYNOW_BUTTON_ID):(a=r(B.BUYBOX_ACCORDION))&&1===a.length?a.find(B.BUYNOW_BUTTON_ID):r(B.BUYNOW_BUTTON_ID)}function u(a,c,b){var k={};k[q.CUSTOM_NAME_STRING+"."+a+"."+c]=b[q.ITEM_ASSOCIATION_GROUP_KEY];k[q.CUSTOM_VALUE_STRING+
"."+a+"."+c]=JSON.stringify(b[q.ENCODED_ITEM_ASSOC_VAL]);return k}function w(a){var c={},b=a.inputName;a="string"===typeof a.inputValue?a.inputValue:JSON.stringify(a.inputValue);c[b]=a;return c}function H(a,c){c={};var b={};U={};ba={};for(var k=T.baseAsinState.asin,l=d.getBaseItemQuantity(),l=l?l:M.addToCartData[0]&&M.addToCartData[0].initialFormData&&M.addToCartData[0].initialFormData.inputs?M.addToCartData[0].initialFormData.inputs.quantity:"",g=T.baseAsinState.offerListingId,h=2,e=0;e<a.length;e++){var f=
a[e],p=f.featureName;b[p]=b[p]!==n?b[p]+1:0;var v=f.asin,t=f.quantity,m=f.offerListingId;v!==n&&t!==n&&m!==n&&(k+=q.PIPE_SEPARATOR+v,l+=q.PIPE_SEPARATOR+t,g+=q.PIPE_SEPARATOR+m,ba[v]={quantity:t,offerListingId:m},v=x.addAsinItemKeyValuePairsForNATC(b[p],p,f),U=r.extend(U,v));if(Z)for(v=a[e].customData||[],t=0;t<v.length;t++)m=u(h,t+1,v[t]),c=r.extend(c,m),m=x.createCustomKeyValuePairForNATC(b[p],p,v[t]),U=r.extend(U,m);f.asin!==n&&h++;p=C(a[e],w,!1,!1);for(f=0;f<p.length;f++)c=r.extend(c,p[f]);U=
r.extend(U,c);p=C(a[e],x.createFormInputKeyValuePairForNATC,!1,!0);for(f=0;f<p.length;f++)U=r.extend(U,p[f])}c[q.FORM_DATA_ASIN_KEY]=k;c[q.QUANTITY_KEY]=l;c[q.FORM_DATA_OID_KEY]=g;return c}function z(a,c){var b={},k=d.getBaseItemQuantity();b[q.QUANTITY_KEY]=k?k:P.buyNowData[0]&&P.buyNowData[0].initialFormData&&P.buyNowData[0].initialFormData.inputs?P.buyNowData[0].initialFormData.inputs.quantity:"";for(k=0;k<a.length;k++){var l=a[k],g=k+2,f=k+1;b[q.ASIN_KEY+"."+f]=l.asin;var e=O(f,l.quantity,!0),
b=r.extend(b,e),l=L(f,l.offerListingId,!0),b=r.extend(b,l);if(Z)if(a[k][q.FEATURE_NAME_KEY]===q.KEY_BUYBACK){l=a[k].buynowData||[];f={};for(e=0;e<l.length;e++){var h=l[e].name,p=l[e].value;l[e].name===V.IS_BUYBACK_KEY?f[q.CUSTOM_NAME_STRING+"."+g+".1"]=p:l[e].name===V.IS_BUYBACK_FEE?f[q.CUSTOM_VALUE_STRING+"."+g+".1"]=p:f[h]=p}b=r.extend(b,f)}else for(l=a[k].customData||[],e=0;e<l.length;e++)f=u(g,e+1,l[e]),b=r.extend(b,f);g=C(a[k],w,!0,!1);for(l=0;l<g.length;l++)b=r.extend(b,g[l])}!d.isEmpty(b)&&
c&&(b[q.IS_BUYBACK_INPUT_FLAG]=q.IS_BUYBACK_INPUT_FLAG_VALUE);return b}function K(a){var b=[];a.each(function(){var a=r(this).parents(B.MOBILEAPP_TABS_ELEMENT_ID).parent().attr(B.TAB_GROUP_NAME),a=a?a:d.getActiveGroupName();if(d.getAccordionRowBuyingOptionType(r(this).parents(B.MOBILEAPP_ACCORDION_OR_SINGLEOFFER_ELEMENT_ID),a)!==f.UNKNOWN&&(a=r(this).parents(B.DECLARATIVE_CLASS),0<a.length)){var c=r(a).data(B.DATA_ATTRIBUTE_ACTION),c=d.convertHTMLDataAttributesToKeys(c),a=h.copy(r(a).data(c));b.push({dataActionKey:c,
initialFormData:a})}});return b}function E(a,b,c){var k=c.a.split(q.PIPE_SEPARATOR);c=b[q.FORM_DATA_ASIN_KEY].split(q.PIPE_SEPARATOR);b[q.QUANTITY_KEY].split(q.PIPE_SEPARATOR);var l=b[q.FORM_DATA_OID_KEY].split(q.PIPE_SEPARATOR);h.each(c,function(b,c){k.includes(b)||ca[b]!==n||(a[q.FORM_DATA_ASIN_KEY]=a[q.FORM_DATA_ASIN_KEY]+q.PIPE_SEPARATOR+b,b=d.getBaseItemQuantity(),a[q.QUANTITY_KEY]=a[q.QUANTITY_KEY]+q.PIPE_SEPARATOR+(b?b:M.addToCartData[0]&&M.addToCartData[0].initialFormData&&M.addToCartData[0].initialFormData.inputs?
M.addToCartData[0].initialFormData.inputs.quantity:""),a[q.FORM_DATA_OID_KEY]=a[q.FORM_DATA_OID_KEY]+q.PIPE_SEPARATOR+l[c])})}function I(a,b,c,k){var l=0;a.each(function(){var a=r(this).parents(B.MOBILEAPP_TABS_ELEMENT_ID).parent().attr(B.TAB_GROUP_NAME),a=a?a:d.getActiveGroupName();if(d.getAccordionRowBuyingOptionType(r(this).parents(B.MOBILEAPP_ACCORDION_OR_SINGLEOFFER_ELEMENT_ID),a)!==f.UNKNOWN&&(a=r(this).parents(B.DECLARATIVE_CLASS),0<a.length)){var g=b[l++];if(g!==n){var e=r.extend({},g.initialFormData.inputs,
c),h=r.extend({},g.initialFormData);k&&E(e,g.initialFormData.inputs,c);h.inputs=e;a.data(g.dataActionKey,h)}}});if(k){var l=0,g=K(a);a.each(function(){var a=r(this).parents(B.MOBILEAPP_TABS_ELEMENT_ID).parent().attr(B.TAB_GROUP_NAME),a=a?a:d.getActiveGroupName();if(d.getAccordionRowBuyingOptionType(r(this).parents(B.MOBILEAPP_ACCORDION_OR_SINGLEOFFER_ELEMENT_ID),a)!==f.UNKNOWN&&(a=r(this).parents(B.DECLARATIVE_CLASS),0<a.length)){var b=g[l++];if(b!==n){h.each(Object.keys(G),function(a,c){delete b.initialFormData.inputs[a]});
var c=r.extend({},b.initialFormData.inputs,U),k=r.extend({},b.initialFormData);k.inputs=c;a.data(b.dataActionKey,k)}}});G=U;ca=ba}}function J(a,b){var c=Y(a),d=H(c,b);h.delay(function(){P.addToCartData=K(k());I(k(),P.addToCartData,d,!0)});a=z(a,b);I(l(),P.buyNowData,a,!1)}function O(a,b,c){return c?(c={},c[q.QUANTITY_KEY+"."+a]=b,c):'\x3cinput type\x3d"hidden" id\x3d"quantity.'+a+'" name\x3d"quantity.'+a+'" value\x3d"'+b+'"\x3e'}function L(a,b,c){return c?(c={},c[q.OFFERING_ID_KEY+"."+a]=b,c):'\x3cinput type\x3d"hidden" id\x3d"offeringID.'+
a+'" name\x3d"offeringID.'+a+'" value\x3d"'+b+'"\x3e'}function aa(k,l){if(R===q.DEVICE_TYPE_MOBILE_APP)J(k,l),p(k,l);else if(R===q.DEVICE_TYPE_MOBILE_WEB)p(k,l);else{var d=Y(k);k=r("\x3c"+N.FIELDSET+"\x3e",{"class":B.ITEM_ASSOCIATION_INPUTS_CLASS_NAME});r(B.ITEM_ASSOCIATION_INPUTS_CLASS).remove();var g=[],e={},f=c().find('input[name^\x3d"offeringID"]').length+1,h=f+1,u=d.length;t();W.length?W[0].value=fa+u:(c().append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+u+'"\x3e'),W=c().find('input[name\x3d"itemCount"]'));
for(u=0;u<d.length;u++){var w=d[u],m=w.featureName;e[m]=e[m]!==n?e[m]+1:0;if(Z)for(var G=d[u].customData||[],Q=0;Q<G.length;Q++){var z=a(h,Q+1,G[Q]);r.merge(g,z);z=x.createCustomInputFieldsForNATC(e[m],m,G[Q]);r.merge(g,z)}w.asin!==n&&(g=D(g,f,w),f++,h++,g=x.addAsinItemsInputFieldsForNATC(e[m],m,g,w));w=C(d[u],v,!1,!1);r.merge(g,w);w=C(d[u],x.createFormInputFieldForNATC,!1,!0);r.merge(g,w)}if(g.length)for(l&&(e=y(),g.push(e)),e=0;e<g.length;e++)r(k).append(g[e]);g=r("\x3c"+N.FIELDSET+"\x3e",{"class":B.ITEM_ASSOCIATION_INPUTS_CLASS_NAME});
e=[];f={};h=b().find('input[name^\x3d"offeringID"]').length+1;u=h+1;w=d.length;F();X.length?X[0].value=ga+w:(b().append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+w+'"\x3e'),X=b().find('input[name\x3d"itemCount"]'));for(w=0;w<d.length;w++){m=d[w];G=m.featureName;f[G]=f[G]!==n?f[G]+1:0;if(Z)for(Q=d[w].customData||[],z=0;z<Q.length;z++){var H=a(u,z+1,Q[z]);r.merge(e,H);H=x.createCustomInputFieldsForNATC(f[G],G,Q[z]);r.merge(e,H)}m.asin!==n&&(e=D(e,h,m),h++,u++,e=x.addAsinItemsInputFieldsForNATC(f[G],
G,e,m));m=C(d[w],v,!1,!1);r.merge(e,m);m=C(d[w],x.createFormInputFieldForNATC,!1,!0);r.merge(e,m)}if(e.length)for(l&&(l=y(),e.push(l)),l=0;l<e.length;l++)r(g).append(e[l]);k.length&&(l=c().find(B.ITEM_ASSOCIATION_INPUTS_CLASS),l.length?r(l).replaceWith(k):c().append(k));g.length&&A(g)}}function Y(a){for(var b=[],c=0;c<a.length;c++){var k=a[c];k[q.FEATURE_NAME_KEY]!==q.KEY_BUYBACK&&b.push(k)}return b}var r=h.$,Q={name:"itemAssociation"},R="",da,ea=!1,G={},U={},ba={},ca={},Z,T={ccFeaturesState:{},baseAsinState:{}},
P={addToCartData:[],buyNowData:[]},M={addToCartData:[]},q=f.itemAssociation,N=f.htmlTags,B=f.selectors,V=f.ccFeatures,W,X,fa,ga;Q.addItemAssociationBundleData=function(a,b,c,k){da=c;Z=b;ea=k;var l=!1,d=[];T.ccFeaturesState=a.ccFeaturesState;T.baseAsinState=a.twisterState;r.each(T.ccFeaturesState,function(a,b){r.each(b,function(b,c){a===q.KEY_BUYBACK&&c.isBuyBack&&(l=!0);b={};var k=[];b[q.ASIN_KEY]=c.asin;b[q.QUANTITY_KEY]=c.quantity;b[q.OFFER_LISTING_ID_KEY]=c.offerListingId;if(c.enableIA){var g=
{};g[q.ITEM_ASSOCIATION_GROUP_KEY]=q.ITEM_ASSOCIATION_GROUP_VAL;g[q.ENCODED_ITEM_ASSOC_VAL]=c.IAData;k.push(g);b[q.CUSTOM_DATA_KEY]=k}b[q.FEATURE_NAME_KEY]=a;c.formData!==n&&0<c.formData.length&&(b.formData=c.formData);a===q.KEY_BUYBACK&&(b[V.BUY_NOW_DATA]=c.buynowData);d.push(b)})});aa(d,l);R===q.DEVICE_TYPE_MOBILE_APP&&h.trigger(f.TP_AFTER_BUYBOX_UPDATE_EVENT)};Q.init=function(){R=d.getDeviceType();G={};ca={};R===q.DEVICE_TYPE_MOBILE_APP&&(M.addToCartData=K(k()),P.addToCartData=K(k()),P.buyNowData=
K(l()));R===f.DEVICE_TYPE_WEB&&(t(),F())};Q.reInitialiseItemCountVal=function(){X=W=n;R=d.getDeviceType();R===f.DEVICE_TYPE_WEB&&(t(),F())};return Q});"use strict";m.when("A","twister-plus-constants").register("utils",function(h,d){var f=h.$,e={},x=d.selectors;e.isEmpty=function(c){for(var b in c)if(c.hasOwnProperty(b))return!1;return!0};e.capitalizeFirstLetter=function(c){return c.charAt(0).toUpperCase()+c.slice(1)};e.convertHTMLDataAttributesToKeys=function(c){c=c.split("-");for(var b=c[0],d=1;d<
c.length;d++)b+=e.capitalizeFirstLetter(c[d]);return b};e.getBaseItemQuantity=function(c){var b;c=this.getDeviceType();var d,a=e.getActiveGroupName(),h=f(x.BUYBOX_TAB_ACTIVE);d=1===h.length?f(x.TAB_PREFIX+a+" "+x.ACTIVE_ACCORDION):f(x.BUYBOX_ACCORDION_ACTIVE);var m;if("web"===c){if(1===d.length)return f(".a-accordion-active #quantity").val();m=1===h.length?x.TAB_PREFIX+a+" #quantity":"#quantity"}else f("#mobileQuantityDropDown").length&&(1===d.length?b=f(".a-accordion-active select.mobileQuantityDropDown").val():
m=1===h.length?x.TAB_PREFIX+a+" #mobileQuantityDropDown":"#mobileQuantityDropDown");f(m).length&&(b=f(m).val());return b};e.getDeviceType=function(){var c=f("#twister-plus-device-type").val();return"web"===c?"web":"mobile"===c?"mWeb":"mApp"};e.isMbbCheckboxChecked=function(){return 0<f("input[id|\x3dmbb-checkbox-input]").filter(":checked").length};e.isFeatureSelectionPresent=function(c){var b=!1,d;for(d in c)if(0<c[d].length){b=!0;break}return b};e.isValidNumber=function(c){var b=!1;null===c||isNaN(c)||
(b=!0);return b};e.getBuyingOptionPosition=function(c){var b=d.DEFAULT_BUYING_OPTION_POSITION;1===f(x.BUYBOX_TAB_ACTIVE).length?(c===n&&(c=e.getActiveGroupName()),c=f(x.BUYBOX+" "+x.TAB_PREFIX+c+" "+x.ACTIVE_ACCORDION)):c=f(x.BUYBOX_ACCORDION_ACTIVE);c.length&&(b=c.index());return b};e.getBuyingOptionPriceDataMap=function(){var c,b=f(x.BUYING_OPTIONS_PRICE_DATA_CLASS).html();if(b)try{c=JSON.parse(b)}catch(g){m.log("Error ( "+g+" ) while parsing twister plus price json: "+b,"ERROR",d.TWISTER_PLUS_FRAMEWORK)}return c};
e.getActiveGroupName=function(){var c;c=f(x.BUYBOX_TAB_ACTIVE);var b=this.getDeviceType();1!==c.length&&(c="web"===b?f(x.NO_TABS_GROUP_DESKTOP):f(x.NO_TABS_GROUP_MOBILE));c=c.attr(x.TAB_GROUP_NAME);c&&-1!==c.indexOf("_buybox_group")||(b===d.DEVICE_TYPE_WEB?c=d.DEFAULT_WEB_GROUP_NAME:b===d.itemAssociation.DEVICE_TYPE_MOBILE_WEB?c=d.DEFAULT_MOBILE_WEB_GROUP_NAME:b===d.itemAssociation.DEVICE_TYPE_MOBILE_APP&&(c=d.DEFAULT_MOBILE_APP_GROUP_NAME));return c};e.getBuyingOptionType=function(c,b){b===n&&(b=
e.getActiveGroupName());var d,a=e.getBuyingOptionPriceDataMap();a&&(Array.isArray(a)?a&&a[c]&&(d=a[c].buyingOptionType):(b=a[b],b===n&&(b=a[Object.keys(a)[0]]),b!==n&&b[c]!==n&&(d=b[c].buyingOptionType)));return d};e.getAAPIBuyingOptionIndex=function(c,b){b===n&&(b=e.getActiveGroupName());var d,a=e.getBuyingOptionPriceDataMap();a&&(b=a[b],b===n&&(b=a[Object.keys(a)[0]]),b!==n&&b[c]!==n&&(d=b[c].aapiBuyingOptionIndex));return d};e.getAccordionRowBuyingOptionType=function(c,b){var d;c.length&&(c=c.index(),
d=e.getBuyingOptionType(c,b));return d};e.getActiveAccordionRow=function(c,b){if(e.isValidNumber(c)){var g,a=f(x.BUYBOX_TAB_ACTIVE);1===a.length?(b===n&&(b=e.getActiveGroupName()),g=f(x.TAB_PREFIX+b+" "+d.unavailableMessage.BUYBOX_ACCORDION_ROWS)):g=f(d.unavailableMessage.BUYBOX_ACCORDION_ROWS);if(1===g.length)return g.children().eq(c);if(1===a.length)return f(x.TAB_PREFIX+b)}return null};return e});"use strict";m.when("A").register("turbo-checkout-handler",function(h){var d=h.$,f;return{updateInputCheckbox:function(e){var h;
e=e.ccFeaturesState;var c=!1;for(h in e)if(0<e[h].length){c=!0;break}h=c;f=d("#twister-plus-checkbox");e=f.prop("checked");h&&!e?f.prop("checked","true").trigger("change"):!h&&e&&f.click()}}});m.when("twister-plus-constants").register("twister-plus-logger-service",function(h){function d(d,f){if(d!==n&&""!==d)d=h.metrics.PREFIX+d,ue&&ue.count&&(f===n&&(f=(ue.count(d)||0)+1),ue.count(d,f),"undefined"!=typeof L.csa&&(f=ue.count(d),L.csa("Events",{producerId:"dp-rpcx"})("log",{schemaId:"dpRpcx.CSALoggingSchema.5",
eventName:d,valueToLog:f},{ent:"all"})));else throw Error("counterKey must be non empty string");}function f(d){if(d!==n&&""!==d)this._timerName=d,this._startTime=0;else throw Error("timerName must be non empty string");}f.prototype={start:function(){this._startTime=Date.now()},stop:function(){this._startTime&&d(this._timerName,Date.now()-this._startTime)}};return{Timer:f,logCounter:d}});"use strict";m.when("A","dp-time-to-interactive","twister-plus-logger-service","twister-plus-constants","ready",
"twister-plus-init").register("twister-plus-tti-logger",function(h,d,f,e){function m(){var c=e.metrics,b=d.getTimeToInteractivity({twisterPlus:{name:"twisterPlus"}});if(b&&b.interactiveTime){var g=L.performance;"object"===typeof g&&"object"===typeof g.timing&&f.logCounter(c.TWISTER_PLUS_TTI,b.interactiveTime-g.timing.navigationStart)}}m();return{logTTI:m}});"use strict";m.when("A","twister-plus-constants").register("item-association-utils",function(h,d){function f(a,b){var c=p.ITEMS_PREFIX;return c+=
p.OPENING_SQUARE_BRACKET+(a+"."+b)+p.CLOSING_SQUARE_BRACKET}function e(a,b){var c="string"===typeof a?a:"";"object"===typeof b&&Array.isArray(b)?h.each(b,function(a,b){c+=p.OPENING_SQUARE_BRACKET+a+p.CLOSING_SQUARE_BRACKET}):"string"===typeof b&&(c+=p.OPENING_SQUARE_BRACKET+b+p.CLOSING_SQUARE_BRACKET);return c}function n(a,b,c){return y("\x3c"+t.INPUT+"\x3e",{type:c,id:a,name:a,value:b})}function c(a,b){var c={};c[a]=b;return c}function b(a,b){if("number"===typeof a&&0<=a&&"string"===typeof b)return a=
f(a,b),a=e(a,p.PARAM_NAMES.ITEM_ASSOCIATION);m.log("Invalid data-type for itemIndex or itemType: itemIndex \x3d "+a+", itemType \x3d "+b,"ERROR",F)}function g(a,b,d){return d?c(a,b):n(a,b,p.INPUT_TYPE_HIDDEN)}function a(a,b,c,d){if("string"===typeof c)return a=e(a,b),g(a,c,d)}function v(a,b,c){if("string"===typeof b||"number"===typeof b)return a=e(a,p.PARAM_NAMES.QUANTITY),g(a,b,c)}function C(a,b,c){if("object"===typeof b&&Array.isArray(b)&&"DELETE"===b[0].type)return a=e(a,p.PARAM_NAMES.DELETE_CONSTRAINT),
g(a,b[0].mutuallyInclusive,c)}function D(a,b,d){var g;if(b){if(b.AccessoryType){var f=e(a,p.PARAM_NAMES.ACCESSORY_TYPE);d?(g={},f=c(f,b.AccessoryType),g=y.extend(g,f)):(g=[],f=n(f,b.AccessoryType,p.INPUT_TYPE_HIDDEN),g.push(f))}b.CustomerAppointmentType&&(a=e(a,p.PARAM_NAMES.CUSTOMER_APPOINTMENT_TYPE),d?(b=c(a,b.CustomerAppointmentType),g=y.extend(g,b)):(b=n(a,b.CustomerAppointmentType,p.INPUT_TYPE_HIDDEN),g.push(b)))}return g}var y=h.$,A={},p=d.itemAssociation,t=d.htmlTags,F=d.ATTRIBUTION;A.createCustomInputFieldsForNATC=
function(c,d,g){var f=[];c=b(c,d);g=g[p.ENCODED_ITEM_ASSOC_VAL];"string"===typeof c&&g&&(d=a(c,p.PARAM_NAMES.ASSOCIATED_ITEM_ID,g.parentAsin,!1),f.push(d),d=a(c,p.PARAM_NAMES.PROGRAM_TYPE,g.type,!1),f.push(d),d=a(c,p.PARAM_NAMES.RENDER_TYPE,g.renderType,!1),f.push(d),d=C(c,g.constraintList,!1),f.push(d),c=D(c,g.properties,!1),f=f.concat(c));return f};A.addAsinItemsInputFieldsForNATC=function(b,c,d,g){var e=g.asin,h=g.quantity,n=g.offerListingId;e&&h&&n?(b=f(b,c),e=a(b,p.PARAM_NAMES.ASIN,e,!1),d.push(e),
h=v(b,h,!1),d.push(h),n=a(b,p.PARAM_NAMES.OFFER_LISTING_ID,n,!1),d.push(n)):m.log("Invalid data (asin/offerListingId/quantity) is present in itemData"+JSON.stringify(g),"ERROR",F);return d};A.createFormInputFieldForNATC=function(a){var b=f(p.BASE_ASIN_INDEX_FOR_NATC,p.BASE_ASIN_ITEM_TYPE),b=e(b,p.PARAM_NAMES[a.inputName]),c="string"===typeof a.inputValue?a.inputValue:JSON.stringify(a.inputValue);return n(b,c,a.inputType)};A.createCustomKeyValuePairForNATC=function(c,d,g){var f={};c=b(c,d);g=g[p.ENCODED_ITEM_ASSOC_VAL];
"string"===typeof c&&g&&(d=a(c,p.PARAM_NAMES.ASSOCIATED_ITEM_ID,g.parentAsin,!0),f=y.extend(f,d),d=a(c,p.PARAM_NAMES.PROGRAM_TYPE,g.type,!0),f=y.extend(f,d),d=a(c,p.PARAM_NAMES.RENDER_TYPE,g.renderType,!0),f=y.extend(f,d),d=C(c,g.constraintList,!0),f=y.extend(f,d),c=D(c,g.properties,!0),f=y.extend(f,c));return f};A.createFormInputKeyValuePairForNATC=function(a){var b=f(p.BASE_ASIN_INDEX_FOR_NATC,p.BASE_ASIN_ITEM_TYPE),b=e(b,p.PARAM_NAMES[a.inputName]);a="string"===typeof a.inputValue?a.inputValue:
JSON.stringify(a.inputValue);return c(b,a)};A.addAsinItemKeyValuePairsForNATC=function(b,c,d){var g={},e=d.asin,h=d.quantity,n=d.offerListingId;e&&h&&n?(b=f(b,c),e=a(b,p.PARAM_NAMES.ASIN,e,!0),g=y.extend(g,e),h=v(b,h,!0),g=y.extend(g,h),n=a(b,p.PARAM_NAMES.OFFER_LISTING_ID,n,!0),g=y.extend(g,n)):m.log("Invalid data (asin/offerListingId/quantity) is present in itemData"+JSON.stringify(d),"ERROR",F);return g};return A});"use strict";m.when("A","twister-plus-constants").register("twister-plus-pinning",
function(h,d){var f=h.$,e=d.selectors;return{init:function(){var d=f(e.PPD_RIGHT_COL_ID);d&&d.addClass("twister-plus-pinning")}}});"use strict";m.when("A","twister-plus-constants").register("side-sheet",function(h,d){function f(){b("#twister-plus-side-sheet-content").show(function(){m({right:"0px"})})}function e(){b("#twister-plus-side-sheet-content").show(function(){m({right:"-600px"})})}function m(d,a){h.animate(b("#twister-plus-side-sheet-content"),d,c.RESIZE_DURATION,a)}var c=d.sideSheet,b=h.$;
h.declarative("side-sheet","click",function(c){b("body").css("overflow","hidden");h.show("#twister-plus-dp-bg");f()});h.declarative("close-side-sheet","click",function(c){e();h.hide("#twister-plus-dp-bg");b("body").css("overflow","scroll")});return{getContentContainer:function(){return b("#tp-side-sheet-main-section")}}});"use strict";m.when("A","twister-plus-constants","cc-manager","twister-plus-framework","side-sheet","a-carousel-framework").register("twister-plus-side-sheet",function(h,d,f,e,m,
c){function b(){var a=f.getFeatureCurrentlyExpanded();a&&((a=f.isMultiSelectionFeature(a))||h.trigger("a:declarative:close-side-sheet:click"))}function g(a){(a=a.hasClass(v.CAROUSEL_CONTAINER_CLASS_NAME)?a:a.find(v.CAROUSEL_CONTAINER_CLASS))&&0<a.length&&!a.hasClass(v.CAROUSEL_INITIALIZED_CLASS_NAME)&&(a.addClass(v.CAROUSEL_NOT_INITIALIZED_CLASS_NAME),c.createAll(),c.initializeAll())}var a=h.$,v=d.sideSheet,n,D,y,A=!1;h.on("a:declarative:side-sheet:click",function(b){n.html(D.html());y=m.getContentContainer();
var c=a(v.SYMBOL_HASH+b.data.contentId),d=a(v.SYMBOL_HASH+b.data.contentId).clone(),f=b.data.url;f&&!c.prop("data-urlLoaded")?(d=a(v.SYMBOL_HASH+b.data.preUrlLoadDomId).clone(),d.prop("id",b.data.contentId+"-sideSheet"),d.removeClass("aok-hidden"),y.html(d),y.removeClass("aok-hidden"),a("#twister-plus-side-sheet-content").removeClass("aok-hidden"),h.ajax(f,{method:"get",success:function(d){c.prop("data-urlLoaded","true");c.html(d);d=a(v.SYMBOL_HASH+b.data.contentId).clone();d.prop("id",b.data.contentId+
"-sideSheet");y.html(d);b.data.postLoadEvent&&h.trigger(b.data.postLoadEvent,b.data);h.trigger(v.SIDE_SHEET_AJAX_SUCCESS,b);d.css(v.DISPLAY,"block");y.removeClass("aok-hidden");a("#twister-plus-side-sheet-content").removeClass("aok-hidden")},failure:function(c){c=a(v.SYMBOL_HASH+b.data.failedUrlLoadDomId).clone();c.removeClass("aok-hidden");y.html(c);y.removeClass("aok-hidden");a("#twister-plus-side-sheet-content").removeClass("aok-hidden")}})):(d.prop("id",b.data.contentId+"-sideSheet"),y.append(d),
d.css(v.DISPLAY,"block"),y.removeClass("aok-hidden"),a("#twister-plus-side-sheet-content").removeClass("aok-hidden"),g(d))});return{init:function(){n=a("#tp-side-sheet");D=n.clone();if(!A){var c={};c.featureName=v.FEATURE_NAME;c.featureAttribution=v.FEATURE_ATTRIBUTION;e.registerFeature(c,v.EVENT_NAME,b);A=!0}}}});m.when("A","twister-plus-feature-state","twister-plus-constants","cc-manager","a-popover","twister-plus-framework").register("twister-plus-price-tool-tip",function(h,d,f,e,m,c){function b(){u=
!0;z.html(E.html());H=z.find("#tp-tool-tip-price-section");F=d.getTwisterPlusFeaturesState()}function g(a,b,c){var d=b[0];(b=b[1])&&"00"!==b?a.find(".a-price-fraction").text(String(b)):c?(a.find(".a-price-fraction").addClass("aok-hidden"),a.find(".a-price-decimal").addClass("aok-hidden")):(b="00",a.find(".a-price-fraction").text(String(b)));a.find(".a-price-whole").contents().filter(function(){return 3===this.nodeType||""===this.textContent.trim()}).first().replaceWith(Number(d).toLocaleString(n))}
function a(a,b){a.find("#display-string").text(b)}function v(a,b,c){a.find("#tp-item-quantity").text(b);a=a.find(".tp-tool-tip-quantity-block");a.removeClass("aok-hidden");g(a,c.toFixed(2).split("."),!0)}function C(a){a+=K.data(1<Y?w.ITEM_COUNT_PLURAL_TEMPLATE:w.ITEM_COUNT_SINGULAR_TEMPLATE);return a=a.replace(w.ITEM_COUNT_PLACEHOLDER,Y)}function D(a){var b=t.clone();a!==n&&b.attr("id",a);b.find("#tp-tool-tip-price").removeClass("twister-plus-price-template");return b}function y(){var a=z.find(".twister-plus-subtotal-price-template").clone().removeClass("twister-plus-subtotal-price-template");
a.find("#tp-tool-tip-subtotal-price-value").removeAttr("id");return a}function A(a){return I.hasOwnProperty(a)&&0<I[a].length}var p=h.$,t=p("#tp-tool-tip-price-block"),F,k,l,u=!1,w=f.toolTip,H=p("#tp-tool-tip-price-section"),z=p("#twister-plus-tool-tip"),K=z.find("#tp-tool-tip-item-strings"),E=z.clone(),I,J,O=[],L=0,aa,Y,r=!1;h.on("a:popover:beforeShow:twisterPlusPopOver",function(){var b=p(".twister-plus-tool-tip-padding").parents(".a-popover"),c=p("#twister-plus-popover-inner").parents(".a-popover");
b.addClass("twister-plus-popover-margin");c.addClass("twister-plus-popover-margin");if(u){c=0;I=F.ccFeaturesState;var d=A("paymentOptions"),b=F.twisterState.quantity;Y=parseInt(b);J=F.priceData.totalPrice.toFixed(2).split(".");for(var f in k){var e=k[f];if("paymentOptions"!==e&&A(e)){var h=I[e][0],t=!1;l[e].hasOwnProperty("isMultiSelection")&&l[e].isMultiSelection&&(t=!0);var r=D("tp-tool-tip-price-block-"+e),E=h.orderSummaryDisplayString,T=I[e].length,P=0,M=0;if("couponsCard"===e){for(var q=0;q<
T;q++)var N=I[e][q].quantity!==n?I[e][q].quantity:1,M=M+parseInt(N),P=P+I[e][q].savings*N;r.find("#price-sign-string").text("-")}else for(q=0;q<T;q++)N=I[e][q].quantity!==n?I[e][q].quantity:1,M+=parseInt(N),P+=I[e][q].price*N;d&&(L+=P,T=c?E.toLowerCase():E,O.push(T),c++);t?E=1<M?E+K.data(w.ITEM_COUNT_PLURAL_TEMPLATE):E+K.data(w.ITEM_COUNT_SINGULAR_TEMPLATE):h.hasOwnProperty("shortDisplayTitle")&&h.shortDisplayTitle!==n&&(E=E+" ("+h.shortDisplayTitle+")",1<M&&v(r,M,I[e][0].price));Y+=M;E=E.replace(w.ITEM_COUNT_PLACEHOLDER,
M);g(r.find("#tp-tool-tip-price"),P.toFixed(2).split("."),!1);a(r,E);H.append(r)}}d?(c=I.paymentOptions[0],f=z.find("#tp-tool-tip-footnote-section"),e=D("tp-tool-tip-price-block-interest"),d=c.interestAmount.toFixed(2).split("."),g(e.find("#tp-tool-tip-price"),d,!1),a(e,c.interestDisplayString),H.append(e),c.isOrderLevel||0===O.length?(z.find("#twister-plus-order-level-monthly-payments-section").removeClass("aok-hidden"),e=z.find("#tp-tool-tip-order-level-monthly-payments-price-block"),a(e,c.orderSummaryDisplayString),
d=y(),e.find("#tp-order-level-monthly-payment-subtotal-price").append(d),d=c.price.toFixed(2).split("."),g(e,d,!1),c=c.toolTipFootnoteDisplayString):(z.find("#twister-plus-item-level-monthly-payments-section").removeClass("aok-hidden"),e=D("tp-tool-tip-price-block-monthly-payment"),d=c.price.toFixed(2).split("."),g(e.find("#tp-tool-tip-price"),d,!1),a(e,c.orderSummaryDisplayString),e.addClass("a-spacing-top-base"),h=z.find("#tp-monthly-payments-breakdown-section"),h.append(e),e=D("tp-tool-tip-price-block-all-selections"),
d=L.toFixed(2).split("."),g(e.find("#tp-tool-tip-price"),d),a(e,O.join(", ")),h.append(e),e=y(),z.find("#tp-item-level-monthly-payment-subtotal-price").append(e),d=(c.price+L).toFixed(2).split("."),g(e,d,!1),c=z.find("#tp-tool-tip-footnote-string").data(w.MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE)),d=z.find("#tp-tool-tip-monthly-payment-subtotal-price-block"),e=d.find("#display-string").text(),e=C(e),a(d,e),e=z.find(".twister-plus-price-template").clone().removeClass("twister-plus-price-template").addClass("a-text-bold"),
d.find("#tp-monthly-payment-subtotal-price").append(e),g(d,J,!1),z.find("#tp-tool-tip-subtotal-price-block").addClass("aok-hidden"),d.removeClass("aok-hidden"),e=z.find("#tp-footnote-text").clone().attr("id","tp-monthly-payment-footnote-text"),e.text(c),f.append(e)):(g(z.find("#tp-tool-tip-subtotal-price-value"),J,!1),f=z.find("#tp-tool-tip-subtotal-price-block"),c=f.find("#display-string").text(),c=C(c),a(f,c));1<b&&(f=D(),c=F.twisterState.price,v(f,b,c),b*=c,g(f.find("#tp-tool-tip-price"),b.toFixed(2).split("."),
!1),H.find("#tp-tool-tip-price-block").replaceWith(f));aa=m.get(w.TOOL_TIP_NAME).getContent();aa.html(z.html());aa.addClass("twister-plus-tool-tip-padding")}u=!1});return{init:function(){t=p("#tp-tool-tip-price-block");H=p("#tp-tool-tip-price-section");z=p("#twister-plus-tool-tip");E=z.clone();K=z.find("#tp-tool-tip-item-strings");u=!1;F=d.getTwisterPlusFeaturesState();k=e.getRenderedFeaturesList();if(!r){var a={};a.featureName=w.FEATURE_NAME;a.featureAttribution=w.FEATURE_ATTRIBUTION;c.registerFeature(a,
w.EVENT_NAME,b);l=e.getFeatureRegistrationDetails();r=!0}}}});m.when("A","twister-plus-constants","utils").register("twister-plus-unavailable-message",function(h,d,f){function e(e,a,h,m){m=f.getActiveAccordionRow(h,m);h=e[0];a=a[h];var n=a[0].displayQuantityMessage;n?(e=1===e.length?b.QUANTITY_RESTRICTION:b.MULTIPLE,m=1===c(e).length?c(e):m?m.find(e):c(b.ACTIVE_ACCORDION).find(e)):(e=1===e.length?b.SINGLE:b.MULTIPLE,m=m?m.find(e):c(b.ACTIVE_ACCORDION).find(e));e=m.parent().first();var x=a[0]&&a[0].maxQuantity,
A=a[0]&&a[0].orderSummaryDisplayString;A?(h=a[0].invalidSelectionTitle)&&(A=A+d.SPACE+d.OPENING_BRACKET+h+d.CLOSING_BRACKET):A=h;h=m.clone();h.removeClass(b.HIDDEN).addClass(b.DISPLAYABLE_MESSAGE);h.html(function(a,b){return n?b.replace("${cardName}",A).replace("${maxQuantity}",x):b.replace("${cardName}",A)});c(e).append(h)}function m(d,a){var e=c(b.CLASS+b.TEMPLATE),f=e.parent();c.each(d,function(c,d){c=e&&e.first()&&e.first().clone();c.removeClass(b.HIDDEN).removeClass(b.TEMPLATE).addClass(b.MESSAGE_ITEM);
var g=a[d],h=g[0]&&g[0].orderSummaryDisplayString||d;c.html(function(a,b){return b.replace("%cardName%",h)});f.append(c)})}var c=h.$,b=d.unavailableMessage;return{update:function(d){c(b.CLASS+b.DISPLAYABLE_MESSAGE).remove();c(b.CLASS+b.MESSAGE_ITEM).remove();var a=d.getCCRemovedSelections(),f=d.getCurrentBuyingOptionPosition();d=d.getCurrentGroupName();var h=a?Object.keys(a):n;h&&0<h.length&&(e(h,a,f,d),m(h,a))}}});"use strict";m.when("A","cc-manager","utils","twister-plus-constants").register("twister-plus-mod",
function(h,d,f,e){function m(){var a=h.$("#twister-plus-feature");!g&&0<a.length&&!a.is(":hidden")?(h.on("a:accordion:buybox-accordion:select",b),h.on("a:tabs:offerDisplayGroup_tabs:select",c),g=!0):g&&(0===a.length||a.is(":hidden"))&&(h.off("a:accordion:buybox-accordion:select",b),h.off("a:tabs:offerDisplayGroup_tabs:select",c),g=!1)}function c(b){var c=b.selectedTab.$tab.attr(a.TAB_GROUP_NAME);b=h.$("#"+b.selectedTab.tabName+" "+a.ACTIVE_ACCORDION);b=b.length?b.index():0;d.switchBuyingOption(b,
c)}function b(a){a=a.selectedRow.$row.index();var b=f.getActiveGroupName();d.switchBuyingOption(a,b)}var g=!1,a=e.selectors;m();h.on("PageRefresh:ATF",function(){m()});h.on("twisterPlus:visibility:change",function(){m()})});"use strict";m.when("A","twister-plus-constants","twister-plus-logger-service","twister-plus-preconditions","buy-box-price-update","cc-manager","itemAssociation","twister-plus-framework","twister-plus-price-tool-tip","twister-plus-side-sheet","twister-plus-pinning").register("twister-plus-init",
function(h,d,f,e,m,c,b,g,a,n,C){function D(){b.init();a.init();n.init();m.init();c.init()}var y=d.metrics;h.on("PageRefresh:ATF",function(){e.isTwisterPlusEligible()&&(g.refreshTwisterPlusData(),D(),e.isCcCardsRendered()&&f.logCounter(y.TWISTER_PLUS_TWISTER_REFRESH_GV))});e.isTwisterPlusEligible()&&(g.initializeTwisterPlus(),D(),"function"===typeof L.markFeatureInteractive&&L.markFeatureInteractive(y.FEATURE_NAME,{}))})});
/* ******** */
