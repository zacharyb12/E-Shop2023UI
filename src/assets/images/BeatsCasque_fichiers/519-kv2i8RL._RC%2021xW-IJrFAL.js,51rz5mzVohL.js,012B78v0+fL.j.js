(function(z){var C=window.AmazonUIPageJS||window.P,G=C._namespace||C.attributeErrors,d=G?G("DPTwisterPlusDesktopConfiguratorAssets",""):C;d.guardFatal?d.guardFatal(z)(d,window):d.execute(function(){z(d,window)})})(function(z,C,G){z.when("A","desktop-configurator-view","desktop-configurator-widgets-factory","desktop-configurator-slot-manager","twister-dynamic-style","desktop-configurator-logger","desktop-configurator-dimension-handler","desktop-configurator-side-sheet-view","desktop-configurator-popover-factory",
"twister-js-init-dpx-data","twister-plus-desktop-configurator-mark-render").register("desktop-configurator-view-initialiser",function(d,k,p,m,f,n,h,t,w,g){var q=g?g.inlineTwisterData||{}:{};q.inlineTwisterEnabled&&(n=new n,new k(g,p.Row,m,f,n,h,t,w),!q.shouldDelayRegistrationWithTwisterCore&&d.trigger("desktop-configurator-view-initialized"))});"use strict";z.when("A").register("desktop-configurator-dimension-handler",function(d){function k(d){this.numberOfDimensionsExpandedOnLanding=d.numberOfDimensionsExpanded||
0;this.expandAllDimensions=-1===this.numberOfDimensionsExpandedOnLanding;this.dimensionKeyRowMap={};this.expandedDimensionList=[];this.maxNumberOfDimensionsExpanded=d.maxNumberOfDimensionsExpanded||1}k.prototype={registerDimension:function(d,k){this.dimensionKeyRowMap[d]=k;(this.expandAllDimensions||this.expandedDimensionList.length<this.numberOfDimensionsExpandedOnLanding)&&this.expandedDimensionList.push(d)},init:function(){-1===this.maxNumberOfDimensionsExpanded&&(this.maxNumberOfDimensionsExpanded=
Object.keys(this.dimensionKeyRowMap).length)},expandDimension:function(d){-1===this.expandedDimensionList.indexOf(d)&&this.expandedDimensionList.push(d);if(this.maxNumberOfDimensionsExpanded<this.expandedDimensionList.length)for(var k=0;k<this.expandedDimensionList.length&&(this.expandedDimensionList[k]!==d&&this.dimensionKeyRowMap[this.expandedDimensionList[k]].collapse(),this.maxNumberOfDimensionsExpanded!==this.expandedDimensionList.length);k++);},collapseDimension:function(d){d=this.expandedDimensionList.indexOf(d);
-1!==d&&this.expandedDimensionList.splice(d,1)}};return k});"use strict";z.when("A","desktop-configurator-constants","3p-promise","desktop-configurator-price-mismatch-utils").register("desktop-configurator-view",function(d,k,p,m){function f(h,f,w,g,q,A,y,b){function a(){"function"===typeof C.markFeatureInteractive&&C.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"twister-desktopConfigurator"}]})}function e(){if(!D)return 0===h.unselectedDimCount;var c=u();return!!D.util.getAsinFromSelectionInfo(c)}
function r(c,b,a,e,r,u,d,v,h,g,x,f){return{text:c,image:b||"",popoverImage:a||"",name:e,id:x+"_"+e,selected:r,slotHtm:u,showSlot:d,isVisible:v,unavailable:h,defaultSlotUnavailable:U,isCirclularImageSwatch:l.inlineTwisterData&&"CIRCLE"===l.inlineTwisterData.swatchShape,asin:g,pageUrl:f}}function v(c){V[c]||null===J[c]||(c=l.rows[c],c.toggleSwatch&&c.toggleSwatch.removeMisplacedSwatch())}function c(c,b){var a=O.unselectedDimensionPrompt||"",e=h&&h.variationDisplayLabels?h.variationDisplayLabels[c]:
"",r=h&&h.variationValues?h.variationValues[c][b]:"";return{dimKey:c,titleSelectorPrefix:"inline-twister-dim-title-",titleValueSelector:"inline-twister-dim-title-value",mainText:e,subText:-1!==b?r:a.replace("###dimension",e||"")}}function u(){if(!D){var c=[];d.each(l.dimList,function(b){c.push({dimKey:b,val:h.selectedVariationValues?h.selectedVariationValues[b]:-1})});return c}return D.state()}function x(){return d.map(l.dimList,function(c,b){if(!l.isSingletonMap[c])return new p(function(a){B(l.rows[c],
c,b);a()})})}function B(c,b,a){var u=l.inlineTwisterData.slotsEnabledDimensions,v=!!((l.dimList.length===u.length?u[a]:u[0])&&e(b));a=h.variationValues[b];var g=c.getInitialVisibleSwatchList(),x=[];d.each(a,function(c,a){c=r(c,W[b+"::"+a],X[b+"::"+a],a,l.initSelectionState[b].val===a,g[a]?g[a].slotHtm:"",v,g[a]&&g[a].isVisible,g[a]&&g[a].unavailable,G,b,N[b]?N[b][c]:null);x.push(c)});l.swatches[b]=x}function E(){d.each(l.rows,function(c){l.isSingletonMap[c.dimKey]||(c.createDisplaySwatches(),l.textSwatchMap[c.dimKey]&&
c.toggleSwatch.alignTextSwatches())})}function K(){function g(c,b,a){var e,u,v,x=c.expanderContent.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)"),f=h.variationValues[b]||[],k=l.inlineTwisterData.inlineVariationsSize,n=-1,w=k,B=[],t=null;-1===k&&(n=parseInt(c.expanderContent.attr("data-swatchCountPerRow"))||x.length,w=n*P[b]);d.each(x,function(d,l){var h=parseInt(d.getAttribute("data-idxInToggleSwatchList")),g="true"===d.getAttribute("data-initiallySelected"),x="true"===d.getAttribute("data-initiallyUnavailable");
e=d.getAttribute("data-asin");u=h;v=f[h]||"";var q,E,p;q=W[b+"::"+u];E=X[b+"::"+u];p=v;x=r(p,q,E,u,g,"",a,!0,x,e,b,N[b]?N[b][p]:null);c.toggleSwatch&&(q=c.toggleSwatch.createSwatch(x,d),x.isVisible=q.isVisible);B.push(x);g&&l>=w&&(J[b]=h);-1!==k&&-1===n&&(d=d.getBoundingClientRect().top,null===t?t=d:d!==t&&(n=l))});-1!==k&&(-1===n&&(n=x.length),P[b]=Math.ceil(x.length/n));l.inlineVariationsSize[b]=x.length;c.toggleSwatch&&c.toggleSwatch.setNumberOfSwatchesPerRow(n);return B}function x(c,a,r){var u=
!(!c||!e(a)),v=l.rows[a].getInitialVisibleSwatchList();u&&d.each(v,function(e){if(!e.unavailable){var u=b.updateIfCurrentlyActive.bind(b,e.id),u=l.slotManager.get(e.asin,a,l.noOfLoadingIndicator,!1,Z,u,r);e.updateSlotNode({showSlot:c,slotHtm:u},!1,a)}})}function w(c,b,a){c={dimIndex:l.dimIndexMap[c],dimValueIndex:b};b=k.DP_STATE_VIEW_SUBTYPE;var e=l.dimensionsMap,r;r=u();for(var d=k.CHAR_UNDERSCORE,v=[],h=0;h<l.dimensionsMap.length;h++){var g=r[h].val;-1===g&&(g=k.CHAR_ASTERISK);v.push(String(g))}r=
d?v.join(d):v;return{divMetadata:c,eventType:a,subType:b,dimensionsMap:e,currDimCombId:r}}var B=u(),q=0,E={},p=l.inlineTwisterData.slotsEnabledDimensions,K=l.inlineTwisterData.popoverSlotsEnabledDimensions;n.each(B,function(c,b){E[b.dimKey]=b;l.dimIndexMap[b.dimKey]=c;l.dimensionsMap[c]=b.dimKey});l.initSelectionState=E;n.each(l.dimList,function(b,a){var e=E[a].val;b=F(a);var e=c(a,e),r=!(!Q&&(l.dimList.length===p.length?p[q]:p[0])),d=-1!==R.indexOf(a);l.textSwatchMap[a]=b;b=new f("inline-twister-row-",
e,{showSlot:!1,dimKey:a,inlineTwisterData:l.inlineTwisterData},{handleDimensionExpansion:function(c,b,e){a=c.dimKey;if(e){l.dimensionHandler.expandDimension(a);c=G;e={};S[a]?(e=T(l.swatches[a],b,a,u(),!1,!d,r),l.indexTranslationMap[a]=e,c={swatches:l.swatches[a]}):(x(b,a,r),S[a]=!0);var v=l.rows[a];v.setState(c,e,L,null,!1);I(b,v,a);l.logger.logDimensionExpanded(a);d||(J[a]=null)}else l.dimensionHandler.collapseDimension(a),l.logger.logDimensionCollapsed(a)}},l.logger);l.rows[a]=b;m.createLandingPromises(l.logger,
a);q+=1});0===l.inlineTwisterData.numberOfDimensionsExpanded&&(a(),aa=!0);q=0;n.each(l.dimList,function(c,a){function r(c,e,u){if(e){var d=parseInt(e.buttonName,10),v=c[d]&&c[d].id?c[d].id:"";a=e.buttonGroupName;c[d]&&c[d].selected&&l.logger.logSelectedSwatchClick();v&&b.exists(v)&&b.hide(v);L=a;c={dimKey:a,val:d};C.newTwisterInteractionStartTime=new Date;l.twister.metaData(w(a,d,k.viewEvents.CLICK));l.twister.dimensionChanged(c);l.logger.logDimensionValueClick();u&&l.logger.logDimValueClickAfterAutoUpdate()}}
function x(c,a){var r=a.data,d=a.type;a=a.$currentTarget;var v=r.id,h=!!e(c),h=M&&h&&A,h=r.showImageInPopOver||h,g=!A,f=[];if(r){if(d===k.viewEvents.MOUSE_ENTER){var n=parseInt(r.name,10);f.push({dimKey:c,val:n});h&&b.show(v,a,r,g)}else h&&b.hide(v),f=u();D&&(l.twister.metaData(w(c,n,d)),l.twister.dimensionPeek(f));L=c}}function f(c,a){var b=parseInt(c.buttonName,10),e=l.swatches[a];(e?e[b]:G)?(H.setUserInteracting(!0),d.delay(function(){r(e,c)},350),l.logger.logSecViewSwatchClick()):z.log("Selected swatch not found on side sheet toggle button click. Value clicked: "+
b+" ; Swatch length: "+l.swatches[a].length,ba.ERROR,ba.ATTRIBUTION)}function B(c,a){l.isSideSheetOpen=a;l.isWindowResizedAfterSideSheetOpen&&!a&&n.each(l.dimList,function(c,a){l.textSwatchMap[a]&&(E(a),(c=l.rows[a])&&c.toggleSwatch&&(c.toggleSwatch.alignTextSwatches(),c.toggleSwatch.alignTextSwatchNodesInLastRow()))});l.isWindowResizedAfterSideSheetOpen=!1}function t(c,a,e){var r=O.desktopConfiguratorAllOptionsString||"",h=l.swatches[c].length,g={dimensionDisplayText:e.mainText,displayValueText:e.subText,
dimKey:c,getSwatchInfo:H.getSwatch.bind(H),destroyPopover:b.destroy,optionsText:r,totalValueCount:h,isTextSwatch:F};l.sideSheet.open(g);var x={swatches:l.swatches[c]};d.delay(function(){var b=T(l.swatches[c],a,c,u(),!0,!1,y);Y&&v(c);H.setState(x,b,L,null,!0,!0);l.sideSheet.update(g);V[c]=!0;d.delay(function(){F&&I(a,H,c,!0);F&&H.toggleSwatch&&h<k.TEXT_ALIGNMENT_LIMIT&&H.toggleSwatch.alignTextSwatches(!1,!0)})},1E3);l.isSideSheetOpen=!0;l.isWindowResizedAfterSideSheetOpen=!1;l.logger.logSeeAllLinkClick("Dimension"+
(l.dimIndexMap[c]+1))}function E(c){D&&(l.isWindowResizedAfterSideSheetOpen=!0,l.isSideSheetOpen||I(l.showSlotMap[c],l.rows[c],c,!1))}var F=l.textSwatchMap[a];c=[];var m=!Q&&(l.dimList.length===p.length?p[q]:p[0]),A=l.dimList.length===K.length?K[q]:K[0],y=!m,M=m||A,Y=-1!==R.indexOf(a),H=l.rows[a];l.showSlotMap[a]=M;P[a]=l.inlineTwisterData.numOfRowsPerDimension;m=-1!==h.singletonDimensionKeys.indexOf(a);l.isSingletonMap[a]=m;q+=1;!m&&H&&(m=!(!M||!e(a)),J[a]=null,c={name:a,swatches:c,isTextSwatch:F,
onChange:r,onHover:x,hideSlotsFromMainView:y,totalSwatchCount:(h.variationValues[a]||[]).length,preserveNaturalSwatchOrder:Y},l.sideSheet.registerToggleButtonGroup(a,f,B),H.initializeComponents(c,M,{showSideSheet:t,handleWindowResize:E}),l.dimensionHandler.registerDimension(a,H),c=g(H,a,m),l.swatches[a]=c)});aa||a()}function F(c){var a=!0;(l.inlineTwisterData.disableImageSwatch===G?0:l.inlineTwisterData.disableImageSwatch)||(a=!l.inlineTwisterData.imageDimensionKeysMap[c]);return a}function T(c,a,
r,u,h,g,x,f){var k=!(!a||!e(r));a=D.util.getDimAvailability(r,u);var B=-1!==R.indexOf(r),t=d.state("filteredAvailability");if(t!==G&&!0===t.filterApplicable&&1===u.length){for(var w={},q=0;q<t.asins.length;++q)w[t.asins[q]]=1;for(var t=[],E=[],q=0;q<a.available.length;++q){var p=a.available[q];p.asin in w?t.push(p):E.push(p)}a.available=t;a.unavailable=E}var F={},m=0,K=b.updateIfCurrentlyActive,A=-1,y=-1;n.each(u,function(c,a){a.dimKey===r&&(A=a.val,y=c)});-1!==A&&(g&&(F[A]=m),m++);var I=l.rows[r];
d.each(a.available,function(a){c[a.index]=c[a.index]||{};var e=c[a.index];e.unavailable=!1;e.selected&&(A=a.index,e.isVisible||(null!==J[r]&&c[J[r]]&&(c[J[r]].isVisible=!1,B&&v(r)),J[r]=a.index),e.isVisible=!0);g&&(e.isVisible=m<l.inlineVariationsSize[r]||e.selected);var u=e.isVisible||h,n=h?e.id+"_sec":e.id;k&&u?e.slotHtm=l.slotManager.get(a.asin,r,l.noOfLoadingIndicator,h,Z,K.bind(b,n),x,f):(e.slotHtm=e.slotHtm||"",K(n,e.slotHtm));h&&I&&I.toggleSwatch&&(u=I.toggleSwatch.getSwatch(a.index),d.objectIsEmpty(u)&&
(F[a.index]=m));g&&A!==a.index&&(F[a.index]=m);e.showSlot=k;e.selected||m++});d.each(a.unavailable,function(a){c[a.index]=c[a.index]||{};var b=c[a.index];b.unavailable=!0;g&&(b.isVisible=m<l.inlineVariationsSize[r]);var e=d.state("filteredAvailability"),u=U;e!==G&&!0===e.filterApplicable&&(a.index in e.variations[y]||(u='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+ca+"\x3c/span\x3e"),b.defaultSlotUnavailable=u);b.slotHtm=k?u:"";g&&(F[a.index]=m);b.showSlot=k;m++});S[r]=!0;B&&(F=
{});return F}function I(c,a,b,e,r){var u=l.textSwatchMap[b];!c||!u&&!r||e&&!l.isSideSheetOpen||(l.slotManager.resetMinSlotHeight(b),c=a.toggleSwatch.getSlotNodes(e),da(c,b,e),l.slotManager.updateSlotHeight(b,e))}function da(c,a,b){l.slotManager.resetSlotHeight(a,b);d.each(c,function(c,b){d.each(c,function(c){l.slotManager.setState(c,a,b)})})}function Z(c,a){a&&!l.isSideSheetOpen||I(!0,l.rows[c],c,a)}var l=this,D=G;this.isWindowResizedAfterSideSheetOpen=!1;this.data=h;this.noOfLoadingIndicator=1;this.dimList=
h.reorderedDimensionListKeys||[];this.dimensionsMap=[];this.logger=q;this.inlineTwisterData=h?h.inlineTwisterData||{}:{};this.swatches={};this.sideSheet=new y;var J={},O=this.inlineTwisterData&&this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap:{},U='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+(O.defaultSlotUnavailableString||"")+"\x3c/span\x3e",W=h.imageHashMap||{},X=h.desktopConfiguratorPopoverImageMap||{},N=h.dimensionPageLoadUrls||{},ca=
"pwASINs"in h&&h.pwASINs instanceof Array&&0<h.pwASINs.length?h.pwUnavailableMessage:"",P={},Q=!!h.isAssemblyVariationsEnabled;this.rows={};this.dimensionHandler=new A(l.inlineTwisterData);this.isSingletonMap={};this.indexTranslationMap={};this.textSwatchMap={};var L,ba=k.loggingConstants;this.initSelectionState={};b.setVisibleSlotConfig(this.inlineTwisterData&&this.inlineTwisterData.desktopConfiguratorSlotsInPopover?this.inlineTwisterData.desktopConfiguratorSlotsInPopover:[]);this.inlineVariationsSize=
{};this.dimIndexMap={};this.isSideSheetOpen=!1;this.showSlotMap={};var R=l.inlineTwisterData.dimsWithSwatchReorderingDisabled||[],V={},S={},aa=!1;(function(){var c=l.logger.createFunctionTimerInstance("desktopConfiguratorInitTime");c.start();K();c.stop()})();d.on("register-desktop-configurator-with-twisterCore",function(a,b){D=a;l.logger.registerTwisterCore(D);l.sideSheet.init(l.logger);a=u();var e=l.inlineTwisterData.slotsEnabledDimensions,r=l.inlineTwisterData.popoverSlotsEnabledDimensions,v={};
n.each(a,function(c,a){v[a.dimKey]=a});D.slotsDimSum.addDefaultQueryParameter("showFancyPrice",l.inlineTwisterData.showFancyPrice);D.slotsDimSum.addDefaultQueryParameter("twisterFlavor",k.DESKTOP_CONFIGURATOR_FLAVOR);l.slotManager=new w(D,g,l.logger,l.inlineTwisterData);l.dimensionHandler.init();var h=0;d.each(l.rows,function(a){function b(e){var r,v={},h;r=e.selected().selectionInfo();n.each(r,function(c,a){v[a.dimKey]=a});h=v[u].val;var f=l.swatches[u];f[h]=f[h]||{};f[g]=f[g]||{};f[g].selected=
!1;f[h].selected=!0;var k=c(u,g);g===h||x||a.setThumbnailImage(f[h].image);g=h;T(f,B,u,r,!1,!1,t,B);r=c(u,h);h={swatches:f};var w=d.filter(f,function(c){return c.isVisible});f.length===w.length&&(a.hideSideSheetLink(),l.inlineVariationsSize[u]=f.length);a.setExpanderHeaderAriaLabel(k,r);a.setState(h,{},L,r,!1);m.createTwisterUpdatePromises(B,q,e,D,u);I(B,a,u,G,!0)}if(!l.isSingletonMap[a.dimKey]){a.postInitialize();var u=a.dimKey,g=v[u].val,x=F(u),f=l.dimList.length===r.length?r[h]:r[0],k=!Q&&(l.dimList.length===
e.length?e[h]:e[0]),t=!k,B=k||f,f={viewAttribution:"DetailPage",viewName:"DesktopConfiguratorRowView_"+u};d.on("update-desktop-configurator-view",function(c){b(c)});l.twister=D.registerActive(f,{updateView:function(e,r){var d={};"VARIATION_CHANGE"===e?b(r):"VARIATION_PEEK"===e&&(e=r.peek().selectionInfo(),n.each(e,function(c,a){d[a.dimKey]=a}),e=d[u].val,e=c(u,e),L===u&&a.title.setState(e),l.sideSheet.activeDimKey===u&&l.sideSheet.updateDimVal(e))}})}h++});d.trigger("desktop-configurator-twisterCore-initialized",
l);p.all(x()).then(function(){E()});b.then(function(){d.each(l.rows,function(c){c.activatePageRefresh()})})})}var n=d.$;f.prototype={updateView:function(h){d.trigger("update-desktop-configurator-view",h.tsm.currentState())}};return f});"use strict";z.when("A").register("desktop-configurator-constants",function(d){return{AJAX_CALL_TIMEOUT:2E4,DIMENSION_VALUE:"DimensionValue###",DISPLAY_VALUE:"DisplayValue###",SWATCH_DATA:"SwatchData###",DESKTOP_CONFIGURATOR_FLAVOR:"twisterPlusDesktopConfigurator",
MAX_DIMENSION_FLAVOUR_CAP:3,POPOVER_DELAY:500,MAX_INLINE_ROWS:7,SIDE_SHEET_ANIMATION_SPEED:300,SIDE_SHEET_PADDING:32,TEXT_SWATCH_MARGIN_RIGHT:6,CONFIGURED_SLOTS:["price","ms3","twisterPrimeWardrobe","twisterAvailability","deliveryPromise"],SIZE_DIMENSION_NAME:"size_name",DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",DEFAULT_SCROLLER_WIDTH:20,BORDER_WIDTH:2,TEXT_ALIGNMENT_LIMIT:400,ABS_PACK_DESCRIPTION_RENDERED:"absPackDescriptionRendered",DEFAULT_TEXT_SWATCH_SPACING:16,
DEFAULT_IMAGE_SWATCH_SPACING:8,REDUCED_IMAGE_SWATCH_SPACING:4,viewEvents:{MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CLICK:"click"},sideSheetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",SEC_VIEW_DIMENSION_VALUE_LIST:" #tp-inline-twister-dim-values-container",DIMENSION_VALUES_LIST:" .dimension-values-list",DIMENSION_VALUES_LIST_ODD_CHILD:" .dimension-values-list \x3e :nth-child(odd)",DIMENSION_VALUES_LIST_EVEN_CHILD:" .dimension-values-list \x3e :nth-child(even)",LIST_ITEM_CIRCULAR_IMAGE:".dimension-value-list-item-circular-image",
CIRCULAR_IMAGE_SWATCH_BUTTON:".circle-image-swatch-button",LIST_ITEM_SQUARE_IMAGE:".dimension-value-list-item-square-image",SQUARE_IMAGE_SWATCH_BUTTON:".image-swatch-button",TEXT_LIST_ITEM:".swatch-list-item-text",TEXT_SWATCH_BUTTON:".text-swatch-button",TEXT_SWATCH_BUTTON_WITH_SLOTS:".text-swatch-button-with-slots",IMAGE_SELECTOR:".swatch-image",SEC_VIEW_TOGGLE_BUTTON_PREFIX:"sec_",DELAY:200},widgetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",EXPANDER_HEADER_PREFIX:"#inline-twister-expander-header-",
DIMENSION_EXPANDER_ICON_PREFIX:"#dimension-expander-icon-",DIMENSION_EXPANDER_ICON_WRAPPER:".dimension-expander-icon-wrapper",EXPANDED_DIMENSION_TEXT_PREFIX:"#inline-twister-expanded-dimension-text-",COLLAPSED_DIMENSION_TEXT_PREFIX:"#inline-twister-collapsed-dimension-text-",AUTO_NOTIFICATION_EXPANDED:"#inline-twister-auto-notification-expanded",AUTO_NOTIFICATION_COLLAPSED:"#inline-twister-auto-notification-collapsed",IMAGE_THUMBNAIL:".dimension-collapsed-image-thumbnail",SWATCH_NODE_SELECTOR:".inline-twister-swatch",
SLOT_NODE_SELECTOR:".dimension-slot-info",TOGGLE_BUTTON_SELECTOR:".a-button-toggle",IMAGE_SELECTOR:".swatch-image",DIMENSION_VALUES_LIST:".dimension-values-list"},classes:{A_COLOR_ATTAINABLE:"a-color-attainable",AOK_HIDDEN:"aok-hidden",DIMENSION_EXPANDER_CONTENT_EXPAND:"dimension-expander-content-expand",ROTATE:"rotate",A_BUTTON_UNAVAILABLE:"a-button-unavailable",A_BUTTON_SELECTED:"a-button-selected",A_BUTTON_FOCUS:"a-button-focus",ROW_IDENTIFIER_PREFIX:"desktop-configurator-dim-row-"},cssConstants:{BG_COLOR:"background-color",
GREEN_BG_COLOR:"#D9EED9",WHITE_BG_COLOR:"white"},loggingConstants:{ATTRIBUTION:"TwisterPlusDesktopConfigurator",ERROR:"ERROR"}}});"use strict";z.when("A").register("desktop-configurator-logger",function(d){function k(){if(!(this instanceof k))return new k;f||(f=this);return f}function p(d){if("undefined"!==typeof C.csa){var f=C.csa("Events",{producerId:"dp-rpcx"}),k=n.count(d)||0;f("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:d,valueToLog:k},{ent:"all"})}}var m=d.$,f,n=C.ue;k.prototype={registerTwisterCore:function(d){this.twisterCore=
d},logCSMDataOnLanding:function(){var d=0,f=0,k=0,g=this.twisterCore.util,q=g.tvm.dimensionInfo,A=this.twisterCore.state().length,y=Object.keys(g.tvm.dimCombinations).length;m.each(q,function(b,a){b=a.dimKey;g.isRequiredDim(b)&&k++;g.isSingletonDim(b)?f++:d++});n&&n.count&&(n.count("dpMobileTwisterDropdownPresent",d),p("dpMobileTwisterDropdownPresent"),n.count("dpMbileTwisterSingletonDim",f),p("dpMbileTwisterSingletonDim"),n.count("dpMobileTwisterRequiredDim",k),p("dpMobileTwisterRequiredDim"),n.count("dpMobileTwisterDimSize",
A),p("dpMobileTwisterDimSize"),n.count("dpMobileTwisterFamilySize",y),p("dpMobileTwisterFamilySize"),n.count("twisterPlus.inlineTwisterGV",1),p("twisterPlus.inlineTwisterGV"))},logCSMTagsOnLanding:function(h){function f(c,a,b){var e=[];if(a===b)e.push(""),c=c[a],d.$.isArray(c)?d.each(c,function(c,a){e.push(c)}):e.push(c);else{var r=Math.floor((a+b)/2);a=f.call(this,c,a,r);var v=f.call(this,c,r+1,b);d.each(a,function(c,a){d.each(v,function(a,b){e.push(""===c?a:""===a?c:c+":"+a)})})}return e}function k(c){c&&
n.push(c)}var g=this,n=[],m=!0,p=!0,b=[0,3,8,25,50,100,1E3,5E3],a=Object.keys(this.twisterCore.util.tvm.dimCombinations).length,e,r;h.dimensionList&&(e="variation_dimension:"+h.dimensionList.length,d.each(h.dimensionList,function(c,a){g.addCSMTag(c)}));for(var v=1;v<b.length;v++)if(a<=b[v]){r="family_size_bucket:"+b[v-1]+"-"+b[v];break}else v===b.length-1&&(r="family_size_bucket:gt"+b[v]);h.dimensionInfo&&d.each(h.dimensionInfo,function(c,a){c.isSingleton||(m=!1)});b=m?"SingletonFamily":"DesktopConfigurator";
h.initDimCombination&&d.each(h.initDimCombination,function(c,a){-1===c.val&&(p=!1)});k(e);k(r);k(b);p&&k("defaultSelection");h=f.call(this,n,0,n.length-1);(function(c){var a=this;d.each(c,function(c,b){c&&a.addCSMTag(c)})}).call(this,h)},createFunctionTimerInstance:function(d){var f=this;return{eventType:d,start:function(){this.startTime=Date.now()},stop:function(){this.startTime&&f.logCounter(this.eventType,Date.now()-this.startTime)}}},addCSMTag:function(d){C.ue&&C.ue.tag&&C.ue.tag(d)},logCounter:function(d,
f){n&&n.count&&(f===G?n.count(d,(n.count(d)||0)+1):n.count(d,f),p(d))},logBottomSheetPageUpdate:function(d){this.logCounter("twisterPlus.inlineTwisterPageUpdate")},logSelectedSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.selectedSwatchClick")},logDimensionValueClick:function(){this.logCounter("dpmobiletwisterclickOndimval")},logSecViewTotalCount:function(d){this.logCounter("twisterPlus.inlineTwister.secondaryViewCount."+d)},logSecViewGV:function(d){this.logCounter("twisterPlus.inlineTwister.secondaryViewGV."+
d)},logSecViewClosed:function(d){this.logCounter("twisterPlus.inlineTwister.secondaryViewClosed."+d)},logDimensionCollapsed:function(d){this.logCounter("twisterPlus.inlineTwister.dimCollapse."+d)},logDimensionExpanded:function(d){this.logCounter("twisterPlus.inlineTwister.dimExpand."+d)},logSecViewSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.secViewSwatchClick")},logDimExpansionAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimExpansionAfterAutoUpdate")},
logDimValueClickAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimValueClickAfterAutoUpdate")},logAvailabilitySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.availabilitySlotRender")},logPPUSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.ppuSlotRender")},logPrimeSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.primeSlotRender")},logPriceSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.priceSlotRender")},logDeliverySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.deliverySlotRender")},
logReviewsSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.reviewsSlotRender")},logSeeAllLinkClick:function(d){this.logCounter("twisterPlus.inlineTwister.seeAllLinkClick."+d)}};return k});"use strict";z.when("A").register("twister-dynamic-style",function(d){function k(d,k){this.name=d;this.styleNode;this.rules=k||[];this.pendingRefresh}var p=d.$,m={};k.prototype={refresh:function(){var d=p("\x3cdiv /\x3e",{html:"\x26shy;\x3cstyle\x3e"+this.rules.join(" ")+"\x3c/style\x3e"});this.styleNode?
(this.styleNode.replaceWith(d),delete this.styleNode,this.styleNode=d):(this.styleNode=d,this.styleNode.appendTo("body"))}};return{addCSSRules:function(d,n){m[d]?m[d].rules=n||[]:m[d]=new k(d,n);m[d].refresh()}}});"use strict";z.when("A","desktop-configurator-constants","desktop-configurator-twister-register","desktop-configurator-price-mismatch-utils","3p-promise").register("desktop-configurator-slot-manager",function(d,k,p,m,f){function n(a,b,c,e){this.twisterCore=a;this.batch={};this.currentBatch;
this.maxSlotHeight={};this.minSlotHeight={};this.dynamicStyle=b;this.slotIdentifierMap={};this.logger=c;this.auiPriceSize=e&&e.auiPriceSize?e.auiPriceSize:"m";this.currentlyUnavailableMessage=e&&e.stringTranslationMap?e.stringTranslationMap.currentlyUnavailableMessage:"";this.desktopConfiguratorSlotsInMainView=e&&e.desktopConfiguratorSlotsInMainView?e.desktopConfiguratorSlotsInMainView:[]}function h(b,e,c,u,g){var h=this.batch,f=this;h[b]=h[b]||[];h[b].push(c);clearTimeout(this.currentBatch);this.currentBatch=
setTimeout(function(){var c=d.map(f.batch,function(c,a){return a});f.twisterCore.slotsDimSum.get(c,function(c){var b=f.batch[c.ASIN];b&&(a.each(b,function(a,b){b(c)}),delete f.batch[c.ASIN]);A(f.batch)&&(b=Object.keys(f.maxSlotHeight),d.each(b,function(c){u(c,g&&c===e)}))})},0)}function t(b,e,c,d){c[e]=c[e]||{};c[e].uniqueCount=c[e].uniqueCount||0;var g="inline-twister-dimsum-loading-"+e+"-"+c[e].uniqueCount;c[e].uniqueCount+=1;return{loadingHtm:'\x3cdiv class\x3d"'+g+(b?" loading-indicator-1":"")+
(d?" aok-hidden":"")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',promise:function(c,b){var e=a("."+g+":not(.loading-indicator-in-popover)").parent();e.length&&(e.html(c),b(e))}}}function w(a){return a.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function g(a,b,c,d){return w(e.default.call(this,a.content.twisterSlotDiv,b,c,d))}function q(a,b){if(!a||0===a.length)return b;if(0<a.find(".loading-indicator-1").length)return a[0].scrollHeight;
if(0===a.find(".defaultSlotUnavailable").length)return b;a=a[0].scrollHeight;b<a&&(b=a);return b}function A(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function y(){var a=b("PageRefresh:ATF"),e=b("PageRefresh:AjaxCallCompletedButCFMarkingNotDone");return[a,e]}function b(a){return new f(function(b,c){d.on(a,function(){b()})})}var a=d.$,e={default:function(b,e,c,d){b=a("\x3cdiv\x3e"+b+"\x3c/div\x3e");var g=b.find(".price_slot_ppu"),h=b.find("#ms3slot"),f=b.find("#twisterAvailability"),
k=b.find("#deliveryPromisePrefix"),n=b.find(".variationReviewsSection"),q=c?[]:this.desktopConfiguratorSlotsInMainView,t=b.find(".twister_swatch_price");f.length&&((t.length||c)&&-1===q.indexOf("twisterAvailability")&&f.parent().addClass("aok-hidden"),f.parent().append("\x3cdiv class\x3d'js-dummy-twister-availability'\x3e\x3c/div\x3e"),f.parent().find(".a-size-medium").removeClass("a-size-medium").addClass("a-size-small"),f.parent().find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-small"),
f.parent().find(".a-size-large").removeClass("a-size-large").addClass("a-size-small"),e&&this.logger.logAvailabilitySlotRender());0<t.length?(-1===q.indexOf("price")&&t.addClass("aok-hidden"),t.addClass("inline-twister-swatch-price"),c=b.find(".a-price"),0<c.length?c[0].dataset&&(c[0].dataset.aSize=this.auiPriceSize):(t.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),t.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),
t.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base")),c="a-size-small",t.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(c),g.length&&(c="twister-plus-inline-twister-ppu a-size-micro",g.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(c),e&&this.logger.logPPUSlotRender()),e&&this.logger.logPriceSlotRender()):(t=b.find("#sndbox-mobile-twister-price"),
0<t.length&&e&&this.logger.logPriceSlotRender());h.length&&(h.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small"),-1===q.indexOf("ms3")&&h.addClass("aok-hidden"),e&&this.logger.logPrimeSlotRender());0<k.length&&(k.removeClass("a-size-small a-color-secondary").addClass("a-color-base"),-1===q.indexOf("deliveryPromise")&&k.parent().addClass("aok-hidden"),k.find("br").remove(),g=k.find("b"),0===g.length&&(g=k.find("span")),g.length&&(h=" "+w(g.text()),g.addClass("aok-hidden"),k.append('\x3cspan style\x3d"font-weight: bold;"\x3e'+
h+"\x3c/span\x3e")),e&&this.logger.logDeliverySlotRender());0<n.length&&(n.removeClass("a-spacing-micro a-spacing-top-micro").addClass("a-spacing-none a-spacing-top-none"),-1===q.indexOf("variationReviews")&&n.addClass("aok-hidden"),e&&this.logger.logReviewsSlotRender());p.executeModifiers(b);return m.updateSlotHtm(b.html(),d)}};n.prototype={get:function(a,b,c,e,d,k,n,q){var m=this,w=this.twisterCore.slotsDimSum.get([a]);if(w[a])return g.call(m,w[a].Value,!1,n);var p=t(c,b,m.slotIdentifierMap,n);
q?(c=y.call(this),f.any(c).then(function(){h.call(m,a,b,function(c){p.promise(g.call(m,c.Value,!0,n),k)},d,e)})):h.call(this,a,b,function(c){p.promise(g.call(m,c.Value,!0,n),k)},d,e);return p.loadingHtm},setState:function(a,b,c){m.handleDimensionSlotPromise(a);this.minSlotHeight[b]||(this.minSlotHeight[b]=[]);this.maxSlotHeight[b]||(this.maxSlotHeight[b]=[]);this.minSlotHeight[b][c]=this.minSlotHeight[b][c]||0;this.minSlotHeight[b][c]=q(a,this.minSlotHeight[b][c]);this.maxSlotHeight[b][c]=this.maxSlotHeight[b][c]||
0;var e=this.maxSlotHeight[b];var d=this.maxSlotHeight[b][c];!a||0===a.length||0<a.find(".loading-indicator-1").length||(a=a[0].scrollHeight,d<a&&(d=a));e[c]=d;this.maxSlotHeight[b][c]=this.maxSlotHeight[b][c]>this.minSlotHeight[b][c]?this.maxSlotHeight[b][c]:this.minSlotHeight[b][c]},updateSlotHeight:function(a,b){var c=[],e;d.each(this.maxSlotHeight[a],function(d,g){b?(c.push("#desktop-configurator-side-sheet #"+a+"dim_list .desktop-configurator-dim-row-"+g+" .dimension-slot-info {height: "+d+"px;}"),
e="twister-plus-desktop-configurator-side-sheet-slot-height-"):(c.push("#inline-twister-expander-content-"+a+" .desktop-configurator-dim-row-"+g+" .dimension-slot-info {height: "+d+"px;}"),e="twister-plus-desktop-configurator-slot-height-")});this.dynamicStyle.addCSSRules(e+a,c)},resetMinSlotHeight:function(a){this.minSlotHeight[a]||(this.minSlotHeight[a]=[]);this.minSlotHeight[a]=d.map(this.minSlotHeight[a],function(){return 0})},resetSlotHeight:function(a,b){this.maxSlotHeight[a]||(this.maxSlotHeight[a]=
[]);this.dynamicStyle.addCSSRules((b?"twister-plus-desktop-configurator-side-sheet-slot-height-":"twister-plus-desktop-configurator-slot-height-")+a,[]);this.maxSlotHeight[a]=d.map(this.maxSlotHeight[a],function(){return 0})}};return n});"use strict";z.when("A","desktop-configurator-constants","detail-page-side-sheet").register("desktop-configurator-side-sheet-view",function(d,k,p){function m(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=
this.dimValContainer=null;this.updateSideSheetStatus={}}function f(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null}function n(b,a){d.each(b,function(b){var g="desktop-configurator-swatch-hover:"+a+"_sec";try{d.declarative.remove(b,g),d.declarative.create(b,g,{})}catch(h){z.log("Hover event subscribe failed with error: "+this.name,y.ERROR,y.ATTRIBUTION)}})}function h(b){b=Array.prototype.slice.call(b);var a=
q(b[0]).find("input");b=q(b[b.length-1]).find("input");this.keyDownEventHandler=w.bind(this,a,b);document&&document.addEventListener("keydown",this.keyDownEventHandler);d.delay(function(){a&&a.focus()})}function t(){if(this.mainViewDimContainer){var b=this.mainViewDimContainer.parent().find(".tp-side-sheet-link-container a")[0];document&&document.removeEventListener("keydown",this.keyDownEventHandler);b&&b.focus()}}function w(b,a,e){e.code&&"tab"===e.code.toLowerCase()&&(e.shiftKey?document&&document.activeElement===
b[0]&&(e.preventDefault(),a.focus()):document&&document.activeElement===a[0]&&(e.preventDefault(),b.focus()))}function g(b){var a=q("#desktop-configurator-side-sheet-content-header").clone();a.removeClass("aok-hidden");a.find(".dim-name").text(b.dimensionDisplayText+":");a.find(".dim-value").text(b.displayValueText);var e=b.optionsText;e&&a.find(".dim-options").text(e.replace("###options",b.totalValueCount));return a}var q=d.$,A=k.sideSheetSelectors,y=k.loggingConstants;m.prototype={init:function(b){var a=
this,e=q("#twister-plus-inline-twister-container");0!==e.length&&(e=e[0].getBoundingClientRect().width,this.scrollbarWidth=this.getScrollbarWidth(),this.sideSheet=new p({id:"desktop-configurator-side-sheet",shouldRenderHTMLString:!0,animationDuration:k.SIDE_SHEET_ANIMATION_SPEED,width:e+k.SIDE_SHEET_PADDING+a.scrollbarWidth,onAfterHide:function(){b.logSecViewClosed(a.activeDimKey);d.each(a.swatchList,function(b){var e=parseInt(b.getAttribute("data-idxInToggleSwatchList"),10),e=a.sideSheetData.getSwatchInfo(e);
d.declarative.remove(b,"desktop-configurator-swatch-hover:"+a.activeDimKey+"_sec");a.sideSheetData.destroyPopover(e.id+"_sec")});t.call(a);a.updateSideSheetStatus[a.activeDimKey]&&a.updateSideSheetStatus[a.activeDimKey](a.activeDimKey,!1);f.call(a)}}))},open:function(b){this.activeDimKey=b.dimKey;this.sideSheetData=b;var a=q("#inline-twister-row-"+b.dimKey+" #tp-inline-twister-dim-values-container").find(".desktop-configurator-dim-row-0"),e=q("#side-sheet-loader-container").clone().removeClass("aok-hidden"),
r=e.find(".loader-container"),h=e.find("#side-sheet-loader").clone().removeClass("aok-hidden"),c,u,f=k.DEFAULT_TEXT_SWATCH_SPACING;b.isTextSwatch?(c=a.width()-k.BORDER_WIDTH,u=a.height()-k.BORDER_WIDTH):(u=a.find(".swatch-image-container"),f=0<u.closest(".reduced-image-swatch-margin").length,c=u.outerWidth(),u=u.outerHeight(),f=f?k.REDUCED_IMAGE_SWATCH_SPACING:k.DEFAULT_IMAGE_SWATCH_SPACING,h.css({marginLeft:f/2+"px",marginRight:f/2+"px"}));h.width(c);h.height(u);d.each(a,function(){r.append(h.clone().addClass("side-sheet-loader-1"))});
c=r.clone();c.find(".side-sheet-loader-1").removeClass("side-sheet-loader-1").addClass("side-sheet-loader-2");e.append(c);b=g(b);e.prepend(b);e=e[0].outerHTML;this.sideSheet.updateWidth(this.getWidth(a,f));this.sideSheet.open(e)},update:function(b){this.mainViewDimContainer=q("#inline-twister-row-"+b.dimKey+" #tp-inline-twister-dim-values-container");var a=this.mainViewDimContainer.clone(),e=a.find(A.DIMENSION_VALUES_LIST);e.attr("id",b.dimKey+"dim_list");var d=g(b);a.prepend(d);e.children().slice(1).removeClass("aok-hidden");
e.attr("data-a-button-group",'{"name":"sec_'+b.dimKey+'"}');this.sideSheet.updateContent(a[0].outerHTML);b=this.sideSheet.container;this.swatchList=b.find(A.DIMENSION_VALUES_LIST).children().slice(1);n(this.swatchList,this.activeDimKey);this.dimValContainer=b.find(".desktop-configurator-side-sheet-content-header .dim-value");h.call(this,this.swatchList)},close:function(){this.sideSheet.close()},registerToggleButtonGroup:function(b,a,e){var g=A.SEC_VIEW_TOGGLE_BUTTON_PREFIX+b,h=this;this.updateSideSheetStatus[b]=
e;d.on("a:button-group:"+g+":toggle",function(c){h.sideSheet.close();c.selectedButton.buttonGroupName=b;a(c.selectedButton,b)})},updateDimVal:function(b){this.dimValContainer&&this.dimValContainer.length&&this.dimValContainer.text(b.subText)},getScrollbarWidth:function(){if(this.scrollbarWidth)return this.scrollbarWidth;var b=document.body?C.innerWidth-document.body.clientWidth:-1;0>b&&(b=k.DEFAULT_SCROLLER_WIDTH);return b},getWidth:function(b,a){var e=0;d.each(b,function(b){e+=b.getBoundingClientRect().width+
a});return e+k.SIDE_SHEET_PADDING+this.scrollbarWidth}};return m});"use strict";z.when("A","a-popover","desktop-configurator-constants").register("desktop-configurator-popover-factory",function(d,k,p){function m(c){var a=w("\x3cdiv /\x3e"),b=w("\x3cspan /\x3e"),e=c.title,d=c.showImageInPopOver,g=!c.hideSlots;a.addClass("desktop-configurator-popover-content");b.addClass("desktop-configurator-title-block a-size-base a-color-base a-text-bold");b.text(e);a.append(b);d&&(b=w("\x3cdiv /\x3e"),d=w("\x3cimg /\x3e"),
d.attr("src",c.image),d.attr("data-a-image-source",c.image),d.attr("alt",e),b.append(d),a.addClass("visual-dimension"),b.addClass("desktop-configurator-image-block"),a.prepend(b));g&&f(a,c.slotNode);return a}function f(c,a){a="string"===typeof a?a:a.clone();var b=w("\x3cdiv /\x3e");c.find(".desktop-configurator-slot-block").remove();b.addClass("desktop-configurator-slot-block");b.html(a);n(b);c.append(b)}function n(c){var a=c.find(".price_slot_ppu"),b=c.find("#ms3slot"),g=c.find(".twister_swatch_price"),
h=c.find("#twisterAvailability"),f=c.find("#deliveryPromisePrefix"),k=c.find(".variationReviewsSection"),n=c.find(".default-slot-unavailable"),t=c.find(".loading-indicator-1");c=c.find(".twisterPrimeWardrobe");var q={variationReviews:k,price:g,ms3:b,twisterAvailability:h.parent(),deliveryPromise:f.parent(),ppu:a,twisterPrimeWardrobe:c};t.length&&(t.addClass("loading-indicator-in-popover"),0===e.length?t.addClass("aok-hidden"):t.removeClass("aok-hidden"));d.each(r,function(c){q[c]&&(-1===e.indexOf(c)?
q[c].addClass("aok-hidden"):(q[c].removeClass("aok-hidden"),c=v[c+"_styleSlot"],"function"===typeof c&&c.call(this,q)))});n.length&&n.removeClass("a-size-small").addClass("a-size-base")}function h(c,a,b,e){b=m({slotNode:b.slotNode,title:b.title,showImageInPopOver:b.showImageInPopOver,image:b.image,hideSlots:e});a=k.create(a,{name:c,inlineContent:b,closeButton:!1,padding:"none",activate:"none",restoreFocusOnHide:!1});g[c]=a;q[c]||(d.on("a:popover:afterShow:"+c,function(c){d.delay(function(){w(y.DIMENSION_VALUES_LIST).removeClass("stop-scrolling-dc")})}),
q[c]=!0);return a}function t(c,a,b){if(c=g[c])a=m({slotNode:a.slotNode,title:a.title,showImageInPopOver:a.showImageInPopOver,image:a.image,hideSlots:b}),c.update({content:a});return c}var w=d.$,g={},q={},A=p.POPOVER_DELAY,y=p.sideSheetSelectors,b=null,a=null,e=[],r=p.CONFIGURED_SLOTS,v={price_styleSlot:function(c){var a=c.ppu;c=c.price;c.length&&(c.find(".a-size-base").removeClass("a-size-base").addClass("a-size-large"),a.length&&a.removeClass("a-size-micro").addClass("a-size-small"))},ms3_styleSlot:function(c){c=
c.ms3;c.length&&c.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small")},twisterAvailability_styleSlot:function(c){var a=c.twisterAvailability;a.length&&(c=c.ms3,a.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base"),c.length&&c.after(a))},deliveryPromise_styleSlot:function(a){a=a.deliveryPromise;a.length&&a.addClass("a-size-base")}};return{show:function(c,e,g,f){b=this.exists(c)?t.call(this,c,g,f):h.call(this,c,e,g,f);clearTimeout(a);var r=this;a=d.delay(function(){w(y.DIMENSION_VALUES_LIST).addClass("stop-scrolling-dc");
b&&b.show();r.updateIfCurrentlyActive(c,g.slotNode)},A)},exists:function(a){return!!g[a]},hide:function(c){(c=g[c])&&c.hide();b=null;clearTimeout(a)},updateIfCurrentlyActive:function(a,e){b&&b.$container&&b.attributes.name===a&&(a=b.$container.find(".desktop-configurator-popover-content"),f(a,e))},destroy:function(c){g[c]&&k.remove(c);delete g[c];clearTimeout(a)},setVisibleSlotConfig:function(a){e=a}}});"use strict";z.when("A").register("desktop-configurator-twister-register",function(){var d=[];
return{registerModifier:function(k){d.push(k)},executeModifiers:function(k){d.forEach(function(d){d.modify&&"function"===typeof d.modify&&d.modify(k)})}}});z.when("3p-promise").register("desktop-configurator-price-mismatch-promise-handler",function(d){function k(h){f.hasOwnProperty(h)&&(f[h].reject(),delete f[h]);f[h]={};return new d(function(d,k){f[h].resolve=d;f[h].reject=k})}function p(d){for(var k=Object.keys(f).filter(function(g){return g.startsWith(d)}),n=0;n<k.length;n++){var g=k[n];f.hasOwnProperty(g)&&
(f[g].resolve(),delete f[g])}}function m(d){for(var k=Object.keys(f).filter(function(g){return g.startsWith(d)}),n=0;n<k.length;n++){var g=k[n];f.hasOwnProperty(g)&&(f[g].reject(),delete f[g])}}var f={},n;return{getPromises:function(d,f){var m=[];m.push(k("TwisterUpdate_"+f));m.push(k("DimensionSlots_"+f));n=d;return m},resolveDimensionSlotPromise:function(){p("DimensionSlots")},resolveTwisterUpdatePromise:function(d){n===d?p("TwisterUpdate"):m("TwisterUpdate")},getLandingPromise:function(d){var f=
[];f.push(k("DimensionSlots_"+d));return f},rejectDimensionSlotPromise:function(){m("DimensionSlots")}}});z.when("A","desktop-configurator-price-mismatch-promise-handler","3p-promise").register("desktop-configurator-price-mismatch-utils",function(d,k,p){function m(d){return d.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function f(f,k){var g=n("#desktop_configurator_price_mismatch_div .twister_swatch_price.unified-price");g.addClass("inline-twister-swatch-price");
var q=g.find(".price_slot_ppu"),p=g.find(".a-price"),y=k.find(".a-price");0<p.length&&0<y.length?y[0].dataset&&(p[0].dataset.aSize=y[0].dataset.aSize):(g.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base"));p="a-size-small";g.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(p);
q.length&&(p="twister-plus-inline-twister-ppu a-size-micro",q.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(p));k=k.find(".twister_swatch_price.unified-price");if(k.length&&g.length){var q=k.clone(),p=g.clone(),y=q.find(".price_slot_ppu"),b=p.find(".price_slot_ppu");y.length&&y.html(d.trim(y.html()));b.length&&b.html(d.trim(b.html()));d.trim(m(q.html()))!==d.trim(m(p.html()))&&(f.logCounter("desktopConfiguratorPriceMismatchCounter"),k.html(g.html()),
(f=n("#desktop_configurator_price_mismatch_div #asinInfo").attr("data-asin"))&&(h[f]=g.html()))}}var n=d.$,h={};d.on("DesktopConfiguratorPriceMismatchDataUpdated",k.resolveTwisterUpdatePromise);return{createLandingPromises:function(d,h){var g=n("#inline-twister-row-"+h+" .a-button-selected");g&&(h=k.getLandingPromise(h),p.all(h).then(function(){f(d,g)},function(){}))},createTwisterUpdatePromises:function(d,h,g,q,m){if(d){var y=n("#inline-twister-row-"+m+" .a-button-selected");d=g.selected().selectionInfo();
g=q.util.isFullySelected(d);q=q.util.getAsinFromSelectionInfo(d,g);m=k.getPromises(q,m);p.all(m).then(function(){f(h,y)},function(){})}},handleDimensionSlotPromise:function(d){var f=n(d).closest(".a-button-selected");d=0<n(d).find(".loading-indicator-1").length;f.length&&!d&&f.closest(".inline-twister-row").length&&(n(".inline-twister-row .a-button-selected .twister_swatch_price.unified-price").length?k.resolveDimensionSlotPromise():k.rejectDimensionSlotPromise())},updateSlotHtm:function(d,f){var g;
f&&h[f]&&(g=h[f]);if(f=g)d=n("\x3cdiv\x3e"+d+"\x3c/div\x3e"),d.find(".twister_swatch_price.unified-price").html(f),d=d.html();return d}}});"use strict";z.when("A","desktop-configurator-constants").register("desktop-configurator-widgets-factory",function(d,k){var p=d.$,m=k.widgetSelectors,f=k.classes,n=k.cssConstants,h=k.loggingConstants;k=function(){function g(){var b=p(m.IMAGE_THUMBNAIL).attr("src");return b&&b.length&&(b=b.split("."),2<b.length)?b[b.length-2]:!1}function f(b,a,e,d){d=d&&0<d.length?
d:b.find(".a-button");a&&!e?(d.addClass("text-swatch-button-with-slots").removeClass("text-swatch-button"),b.find("hr").show(),b.find("hr").removeClass("aok-hidden")):(d.removeClass("text-swatch-button-with-slots").addClass("text-swatch-button"),b.find("hr").hide(),b.find("hr").addClass("aok-hidden"))}return{alignTextSwatches:function(b,a,e){var g=0,f,c;d.each(b,function(b){b.domNode&&(b.isVisible||a||e)&&(f=b.domNode.attr("data-idxInToggleSwatchList"),c=e?p("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+
f+"]"):b.domNode,b=c.find(".swatch-title-text-display"),b.length&&b[0].style.removeProperty("height"),b=b?b.height():0,g<b&&(g=b))});d.each(b,function(b){b.domNode&&(b.isVisible||a||e)&&(f=b.domNode.attr("data-idxInToggleSwatchList"),c=e?p("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+f+"]"):b.domNode,c.find(".swatch-title-text-display").height(g))})},createSwatch:function(b,a,e,d,g,c,h){var k=!a.unavailable,n=a.isVisible,m=a.selected,q=a.showSlot,p=a.slotHtm;e="#"+e;
if(c.length)return c=c.clone(),c.removeClass("swatch-prototype"),g&&c.addClass("slots-hidden"),c.attr("data-idxInToggleSwatchList",d),d=c.find(e).attr("id",a.id),c.find(e+"-announce").attr("id",a.id+"-announce"),c.find("input").attr({name:a.name,"aria-labelledby":a.id+"-announce"}),c.find("text"===b?".swatch-title-text-display":"square_image"===b?".swatch-title-text":".swatch-text").text(a.text),k||d.addClass("a-button-unavailable"),m&&d.addClass("a-button-selected"),"text"!==b&&(m=c.find(".swatch-image"),
m.addClass("inline-twister-manual-load"),m.attr({"data-a-image-source":a.image||"",id:"inline-twister-image-"+a.name,alt:a.text})),m=c.find(".dimension-slot-info"),m.length&&(m.attr("id","dimension-slot-info-"+a.name),q?k?0<p.length&&m.html(p):m.html(a.defaultSlotUnavailable):c.find("text"===b?".slots-padding":".dimension-slot-info").addClass("aok-hidden"),"text"===b&&f(c,q,g,d)),h.append(c),n||c.addClass("aok-hidden"),c},getThumbnailImageUrlForPhysicalId:function(b){return b&&b.length&&(b=b.split("."),
2<b.length)?(b.splice(-2,1,g()),b.join(".")):!1},updateSlotSectionInTextSwatch:f}}();var t=function(g){function k(b,a,e,d,f,c,h,n){this.id=b.id;this.unavailable=!!b.unavailable;this.selected=!!b.selected;this.showSlot=b.showSlot;this.slotHtm=b.slotHtm;this.isImageSwatch=!a;this.asin=b.asin;this.pageUrl=b.pageUrl;this.hideSlotsFromMainView=f;var m=a?"text":b.isCirclularImageSwatch?"circular_image":"square_image";this.domNode=n?p(n):g.createSwatch(m,b,e,d,f,c,h);this.isVisible=b.isVisible;this.imageUrl=
b.image;this.popoverImage=b.popoverImage;this.isSlotVisible=!0;this.slotNodeIdentifier=a?".slots-padding":".dimension-slot-info";this.title=b.text;this.name=b.name;this.subscribeToHoverEvent(e)}k.prototype={setState:function(b,a,e,d){this.selected=!!b.selected;this.updateAvailablity(b);this.updateSlotNode(b,a,e);this.updateVisibility(b);this.updateSwatchIndexInDomNode(d);return this},getSlotNode:function(b){this.slotNode||(this.slotNode=this.domNode.find(m.SLOT_NODE_SELECTOR));if(!b)return this.slotNode;
b=this.slotNode?this.slotNode.attr("id"):"";return p("#desktop-configurator-side-sheet").find("#"+b)},updateSlotNode:function(b,a,e){this.slotNode||(this.slotNode=this.domNode.find(m.SLOT_NODE_SELECTOR));this.showSlot!==b.showSlot&&((this.showSlot=b.showSlot)?this.domNode.find(this.slotNodeIdentifier).removeClass("aok-hidden"):this.domNode.find(this.slotNodeIdentifier).addClass("aok-hidden"),this.isImageSwatch||g.updateSlotSectionInTextSwatch(this.domNode,this.showSlot,this.hideSlotsFromMainView));
this.slotHtm!==b.slotHtm&&(a&&p("#tp-inline-twister-sec-view-"+e+" #"+this.slotNode.attr("id")).html(b.slotHtm),this.slotNode.html(b.slotHtm),this.slotHtm=b.slotHtm)},updateAvailablity:function(b){this.toggleButton||(this.toggleButton=this.domNode.find(m.TOGGLE_BUTTON_SELECTOR));(this.unavailable=b.unavailable)?this.toggleButton.addClass(f.A_BUTTON_UNAVAILABLE):this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)},updateSelection:function(){this.toggleButton||(this.toggleButton=this.domNode.find(m.TOGGLE_BUTTON_SELECTOR));
this.selected?(this.toggleButton.addClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)):(this.toggleButton.removeClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_FOCUS))},updateVisibility:function(b){b.isVisible?this.domNode.removeClass(f.AOK_HIDDEN):this.domNode.addClass(f.AOK_HIDDEN);this.isVisible=b.isVisible},subscribeToHoverEvent:function(b){b="desktop-configurator-swatch-hover:"+b;try{d.declarative.remove(this.domNode,b),d.declarative.create(this.domNode,
b,{})}catch(a){z.log("Hover event subscribe failed with error: "+this.name,h.ERROR,h.ATTRIBUTION)}},updateSwatchIndexInDomNode:function(b){this.domNode&&this.domNode.attr("data-idxInToggleSwatchList",b)},getTopPosition:function(){var b=this.domNode.position();return this.topPosition=b?b.top:0}};return k}(k),w=function(g,k){function b(a,b,g,f){var c=this;this.isTextSwatch=a.isTextSwatch;this.name=a.name;this.domNode=p(m.EXPANDER_CONTENT_PREFIX+a.name);this.title=f;this.selectedSwatch=null;this.swatches=
{};this.orderedSwatchList=[];this.initialVisibleSwatchList={};this.swatchIdxOrder=[];this.isPageRefreshActive=!1;this.totalSwatchCount=a.totalSwatchCount||0;this.onChange=a.onChange;this.hoverHandler=a.onHover;this.isUserInteracting=!1;this.autoNotificationCallback=b.autoNotificationCallback;this.rowContainer=g;this.swatchListContainer=this.domNode.find(m.DIMENSION_VALUES_LIST);this.markAutoUpdated=!1;this.hideSlotsFromMainView=a.hideSlotsFromMainView;this.windowResizeCallback=b.windowResizeCallback;
this.preserveNaturalSwatchOrder=a.preserveNaturalSwatchOrder;this.displaySwatches=[];this.numberOfSwatchesPerRow=0;this.swatchPrototypeNode=p("#"+a.name).closest(m.SWATCH_NODE_SELECTOR);this.swatchPrototypeNodeParent=this.swatchPrototypeNode.parent();d.on("a:button-group:"+this.name+":toggle",function(a){var b=parseInt(a.selectedButton.buttonName,10),e=c.swatches[b];e?c.isPageRefreshActive?(c.isUserInteracting=!0,b=e.unavailable,e.updateSelection(),c.autoNotificationCallback&&c.autoNotificationCallback(b,
!0),c.onChange&&c.onChange(c.swatches,a.selectedButton,c.markAutoUpdated),c.setAutoUpdated(!1)):e.pageUrl&&(C.location.href=e.pageUrl):(a="Selected swatch not found on toggle button click. Value clicked: "+b+" ; Swatch length: "+Object.keys(c.swatches).length,z.log(a,h.ERROR,h.ATTRIBUTION))});this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name);this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name+"_sec",!0);if(this.isTextSwatch)d.on("resize",function(){0<
c.displaySwatches.length&&(c.repopulateDisplaySwatches(),c.alignTextSwatches(),c.alignTextSwatchNodesInLastRow(),"function"===typeof c.windowResizeCallback&&c.windowResizeCallback(c.name))})}b.prototype={setState:function(a,b,g,f){var c=this,h,n=[],m=[],q=[];d.objectIsEmpty(b)||(d.each(b,function(b,e){if(!c.swatches[e]&&(a.swatches[e].isVisible||g)){var d=new k(a.swatches[e],c.isTextSwatch,c.name,e,c.hideSlotsFromMainView,c.swatchPrototypeNode,c.swatchPrototypeNodeParent);d.subscribeToHoverEvent(c.name);
c.swatches[e]=d;!c.isTextSwatch&&c.swatches[e]&&c.swatches[e].domNode&&q.push(c.swatches[e].domNode.find(".inline-twister-manual-load")[0])}m[b]=e}),this.swatchIdxOrder=m,f||(this.resetToggleSwatchContainer(),this.displaySwatches=[]),d.each(this.swatchIdxOrder,function(a,b){if(a=c.swatches[a])a&&c.swatchListContainer.append(a.domNode),a&&a.subscribeToHoverEvent(c.name),c.addToDisplaySwatches(a,c.displaySwatches)}));d.each(a.swatches,function(a,b){if(c.swatches[b])h=a.selected?c.swatches[b]:h,c.swatches[b].selected=
!!a.selected,n.push({index:b,data:a});else{if(a.isVisible||g)c.swatches[b]=new k(a,c.isTextSwatch,c.name,b,c.hideSlotsFromMainView,c.swatchPrototypeNode,c.swatchPrototypeNodeParent),c.swatches[b].subscribeToHoverEvent(c.name),c.addToDisplaySwatches(c.swatches[b],c.displaySwatches),!c.isTextSwatch&&c.swatches[b]&&c.swatches[b].domNode&&q.push(c.swatches[b].domNode.find(".inline-twister-manual-load")[0]);a.selected&&(h=c.swatches[b])}});this.selectedSwatch&&this.selectedSwatch.updateSelection();h&&
h.updateSelection();d.each(n,function(a,b){c.swatches[a.index].setState(a.data,g,c.name,a.index)});this.isTextSwatch&&(d.objectIsEmpty(b)?this.alignTextSwatchNodesInLastRow():this.alignTextSwatches());c.selectedSwatch&&h&&c.selectedSwatch!==h&&!c.isUserInteracting&&c.autoNotificationCallback(!0);c.selectedSwatch=h;c.isUserInteracting=!1;q.length&&d.loadImageManually(q);return this},getSlotNodes:function(a){return d.map(this.displaySwatches,function(b){return d.map(b,function(b){return b.getSlotNode(a)})})},
setUserInteracting:function(a){this.isUserInteracting=a},alignTextSwatches:function(a,b){d.each(this.displaySwatches,function(d){g.alignTextSwatches(d,a,b)})},alignTextSwatchNodesInLastRow:function(){var a=this.domNode.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)");if(1<a.length){var b=a[a.length-1],f=a[a.length-2];b&&f&&b.getBoundingClientRect().top===f.getBoundingClientRect().top&&(a=d.map(a.slice(a.length-(a.length%this.numberOfSwatchesPerRow||this.numberOfSwatchesPerRow),
a.length),function(a){return this.swatches[a.getAttribute("data-idxInToggleSwatchList")]},this),g.alignTextSwatches(a))}},resetToggleSwatchContainer:function(){var a=p(this.domNode.find(".a-button-list").children()[0]);this.swatchListContainer.html("");this.swatchListContainer.append(a)},getVisibleSwatchesSize:function(){var a=0;d.each(this.swatches,function(b,d){b.isVisible&&(a+=1)});return a},setAutoUpdated:function(a){this.markAutoUpdated=a},getInitialVisibleSwatchList:function(){return this.initialVisibleSwatchList},
getNumberOfSwatchesPerRow:function(){return this.numberOfSwatchesPerRow},setNumberOfSwatchesPerRow:function(a){a&&(this.numberOfSwatchesPerRow=a)},createSwatch:function(a,b){b=new k(a,this.isTextSwatch,this.name,a.name,this.hideSlotsFromMainView,this.swatchPrototypeNode,this.swatchPrototypeNodeParent,b);this.swatches[a.name]=b;this.initialVisibleSwatchList[a.name]=b;this.selectedSwatch=a.selected?b:this.selectedSwatch;this.orderedSwatchList.push(b);return b},activatePageRefresh:function(){this.isPageRefreshActive=
!0;this.domNode.find(".page-load-link").remove()},getSwatch:function(a){return this.swatches[a]?this.swatches[a]:{}},registerHoverDeclarative:function(a,b){var g=this;d.declarative(a,"mouseenter mouseleave",function(a){var c=a.$currentTarget[0].getAttribute("data-idxInToggleSwatchList"),c=g.getSwatch(c);a.data={slotNode:a.$currentTarget.find(c.slotNodeIdentifier),showImageInPopOver:c.isImageSwatch&&!!c.popoverImage,unavailable:c.unavailable,showSlot:c.showSlot,selected:c.selected,title:c.title,name:c.name,
id:b?c.id+"_sec":c.id,image:c.popoverImage};g.hoverHandler(g.name,a)})},addToDisplaySwatches:function(a,b){var d=f.ROW_IDENTIFIER_PREFIX;if(0===b.length)b.push([a]);else{var g=b[b.length-1];g&&g.length===this.numberOfSwatchesPerRow?b.push([a]):g.push(a)}this.removeSwatchRowIdentifier(a);a.domNode&&a.domNode.addClass(d+(b.length-1).toString())},repopulateDisplaySwatches:function(){if(0!==this.displaySwatches.length){var a=[],b=0,g,h=this;d.each(this.displaySwatches,function(c,k){d.each(c,function(c,
d){0===a.length?a.push([c]):0===b?(g=a[0][a[0].length-1],c.getTopPosition()!==g.getTopPosition()?(b=a[0].length,h.numberOfSwatchesPerRow=b,h.addToDisplaySwatches(c,a)):(a[0].push(c),h.removeSwatchRowIdentifier(c),c.domNode&&c.domNode.addClass(f.ROW_IDENTIFIER_PREFIX+(0).toString()))):h.addToDisplaySwatches(c,a)})});0===b&&(this.numberOfSwatchesPerRow=b=a[0].length);this.displaySwatches=a}},removeSwatchRowIdentifier:function(a){a.domNode&&a.domNode.removeClass(function(a,b){return(b.match(/(^|\s)desktop-configurator-dim-row-\S+/g)||
[]).join(" ")})},createDisplaySwatches:function(){var a=this;d.each(this.orderedSwatchList,function(b){a.addToDisplaySwatches(b,a.displaySwatches)})},removeMisplacedSwatch:function(){var a=this.displaySwatches[this.displaySwatches.length-1],b=a[a.length-1],d=b.name;b.domNode&&b.domNode.remove();delete this.swatches[d];this.selectedSwatch&&this.selectedSwatch.name===d&&(this.selectedSwatch=null);1<a.length?a.pop():this.displaySwatches.pop()},removeInitiallyHiddenSwatches:function(){for(var a=this.domNode.find(".inline-twister-swatch.aok-hidden:not(.swatch-prototype)"),
b=a.length-1;0<=b;b--){var d=a[b];d.parentNode.removeChild(d)}}};return b}(k,t),g=function(g){function f(b){this.mainText=b.mainText;this.subText=b.subText;this.dimKey=b.dimKey;this.titleSelectorPrefix=b.titleSelectorPrefix;this.titleValueSelector=b.titleValueSelector;this.domNode=p("#"+this.titleSelectorPrefix+this.dimKey)}f.prototype={refresh:function(){this.domNode.find("."+this.titleValueSelector).text(this.subText);this.domNode.removeClass("twister-plus-inline-twister-dim-required twister-plus-inline-twister-dim-required-delay")},
setState:function(b){return d.equals(b,p.extend({},this))?this:(p.extend(this,b),this.refresh())},getData:function(){return{mainText:this.mainText,subText:this.subText}}};return f}(k),q=function(g,h,b){function a(a,b,g,c,k){function q(){w=w||t.domNode.find(".dimension-heading");w.css(n.BG_COLOR,n.GREEN_BG_COLOR);d.delay(function(){d.animate(w,{"background-color":n.WHITE_BG_COLOR},200)},1E3)}var t=this;this.disableCollapseFunctionality=g.inlineTwisterData?g.inlineTwisterData.disableCollapseFunctionality:
!1;this.stringTranslationMap=g.inlineTwisterData?g.inlineTwisterData.stringTranslationMap:{};this.title=b?new h(b):null;this.dimKey=g.dimKey;this.domNode=p("#"+a+this.dimKey);this.showSlot=g.showSlot;this.logger=k;this.isTwisterCoreInitialized=this.markAutoUpdated=!1;this.expanderContent=t.domNode.find(m.EXPANDER_CONTENT_PREFIX+this.dimKey);this.expanderHeader=t.domNode.find(m.EXPANDER_HEADER_PREFIX+this.dimKey);this.icon=t.domNode.find(m.DIMENSION_EXPANDER_ICON_PREFIX+this.dimKey);this.expandedText=
t.domNode.find(m.EXPANDED_DIMENSION_TEXT_PREFIX+this.dimKey);this.collapsedText=t.domNode.find(m.COLLAPSED_DIMENSION_TEXT_PREFIX+this.dimKey);this.rowCallbacks=c;this.autoNotificationExpanded=t.domNode.find(m.AUTO_NOTIFICATION_EXPANDED);this.autoNotificationExpandedText=t.autoNotificationExpanded.text();this.imageThumbnail=t.domNode.find(m.IMAGE_THUMBNAIL);this.sideSheetLink=this.domNode.find(".tp-side-sheet-link-container");this.isExpanded=this.expanderContent.hasClass("dimension-expander-content-expand");
var w;this.autoNotificationCallback=function(a,b){var c=t.autoNotificationExpandedText;a?t.isExpanded&&b?(t.autoNotificationExpanded.find("."+f.A_COLOR_ATTAINABLE).html(c),t.autoNotificationExpanded.removeClass(f.AOK_HIDDEN)):(q(),t.setAutoUpdated(!0)):t.hideAutoNotification()};this.disableCollapseFunctionality||d.declarative("toggle-dimension-expander-"+this.dimKey,"click",function(a){t.isExpanded?t.collapse():t.expand();t.hideAutoNotification()})}a.prototype={setState:function(a,b,d,c,g,h){this.toggleSwatch&&
d!==this.dimKey&&this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);a&&this.toggleSwatch&&this.toggleSwatch.setState(a,b,g,h);g||c&&this.title&&this.title.setState(c)},expand:function(){this.expanderContent&&this.expanderContent.css("visibility","");this.expanderContent&&this.expanderContent.addClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.icon&&this.icon.addClass(f.ROTATE);this.expandedText&&this.expandedText.removeClass(f.AOK_HIDDEN);this.collapsedText&&this.collapsedText.addClass(f.AOK_HIDDEN);
this.imageThumbnail.addClass(f.AOK_HIDDEN);this.isExpanded=!0;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",b=this.title.getData(),a=a.replace("###dimension",b.mainText).replace("###value",b.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToCollapse:
"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(m.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}this.markAutoUpdated&&(this.logger.logDimExpansionAfterAutoUpdate(),this.markAutoUpdated=!1)},collapse:function(){this.expanderContent&&this.expanderContent.removeClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.expanderContent&&this.expanderContent.css("visibility","hidden");this.icon&&this.icon.removeClass(f.ROTATE);this.expandedText&&this.expandedText.addClass(f.AOK_HIDDEN);
this.collapsedText&&this.collapsedText.removeClass(f.AOK_HIDDEN);this.imageThumbnail.removeClass(f.AOK_HIDDEN);this.isExpanded=!1;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!1);this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",b=this.title.getData(),a=
a.replace("###dimension",b.mainText).replace("###value",b.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToExpand:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(m.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}},setUserInteracting:function(a){this.toggleSwatch&&this.toggleSwatch.setUserInteracting(a)},setExpanderHeaderAriaLabel:function(a,b){a=this.expanderHeader.attr("aria-label").replace(a.subText,b.subText);this.expanderHeader.attr("aria-label",
a);this.expanderHeader.find(m.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)},setThumbnailImage:function(a){(a=g.getThumbnailImageUrlForPhysicalId(a))&&this.imageThumbnail.attr("src",a)},setAutoUpdated:function(a){this.markAutoUpdated=a;this.toggleSwatch&&this.toggleSwatch.setAutoUpdated(a)},getInitialVisibleSwatchList:function(){return this.toggleSwatch?this.toggleSwatch.getInitialVisibleSwatchList():{}},getSwatch:function(a){return this.toggleSwatch?this.toggleSwatch.getSwatch(a):{}},activatePageRefresh:function(){this.toggleSwatch&&
this.toggleSwatch.activatePageRefresh()},showSideSheetLink:function(){this.sideSheetLink.removeClass("aok-hidden")},hideSideSheetLink:function(){this.sideSheetLink.addClass("aok-hidden")},setMaxHeight:function(a){this.expanderContent.css("max-height",a)},triggerExpandOrCollapseAnimation:function(a,b,d){var c=this;this.expanderContent.animate({"max-height":a+"px"},b,function(){c.setMaxHeight("");d&&d()})},getDisplaySwatches:function(){return this.toggleSwatch?this.toggleSwatch.displaySwatches:[]},
createDisplaySwatches:function(){this.toggleSwatch&&this.toggleSwatch.createDisplaySwatches()},hideAutoNotification:function(){this.autoNotificationExpanded.addClass(f.AOK_HIDDEN)},initializeComponents:function(a,g,f){if(!this.toggleSwatch&&a){var c=this.title.getData();this.toggleSwatch=new b(a,{windowResizeCallback:f.handleWindowResize,autoNotificationCallback:this.autoNotificationCallback},this.domNode,c.mainText)}this.isTextSwatch=a?a.isTextSwatch:!0;this.rowCallbacks=d.extend(this.rowCallbacks,
f);this.totalSwatchCount=a?a.totalSwatchCount:0;this.showSlot=g;var h=this;d.declarative("open-desktop-configurator-side-sheet:"+this.dimKey,"click",function(){"function"===typeof h.rowCallbacks.showSideSheet&&h.isTwisterCoreInitialized&&(h.rowCallbacks.showSideSheet(h.dimKey,h.showSlot,h.title.getData()),h.hideAutoNotification())})},postInitialize:function(){this.isTwisterCoreInitialized=!0;var a={dimKey:this.dimKey};this.toggleSwatch&&this.toggleSwatch.removeInitiallyHiddenSwatches();this.isExpanded&&
this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0)}};return a}(k,g,w);return{Swatch:t,ToggleSwatch:w,Title:g,Row:q,utils:k}});"use strict";z.when("A","detail-page-side-sheet-handlers").register("detail-page-side-sheet",function(d,k){function p(d){var n=d.id&&"string"===typeof d.id,m=1===t("#"+d.id).length;if(n&&m)this.id=d.id,this.shouldRenderHTMLString=!!d.shouldRenderHTMLString,this.animationDuration=d.animationDuration||300,this.container=k.getContainer(d.id),this.onBeforeShow=d.onBeforeShow,
this.onAfterHide=d.onAfterHide,n=d.width||580,(m=this.container)&&m.width(n),h(d.id,n),f.call(this);else throw d="Side sheet initialisation failed: "+(n?"Side sheet not present in DOM, or multiple instances of side sheet ID "+d.id+" exist":"Invalid Side sheet ID"),z.log(d,"ERROR","DetailPageSideSheet"),d;}function m(d){var f=this.container;d=this.shouldRenderHTMLString?t(d):t(d).clone();f.html(d);d.css("display","block");f.removeClass("aok-hidden")}function f(){var g=this;d.declarative("close-detail-page-side-sheet:"+
this.id,"click",function(){g.close()});d.declarative("open-detail-page-side-sheet:"+this.id,"click",function(d){g.open(d&&d.data?d.data.content:null)})}function n(d){d.code&&"escape"===d.code.toLowerCase()&&(this.close(),document&&document.removeEventListener("keydown",w))}function h(d,f){d=t("#"+d+"-background .close-button");d.length&&(d[0].style.marginRight=f+10+"px")}var t=d.$,w=null;p.prototype={open:function(d){if(d&&"string"===typeof d){m.call(this,d);if(this.onBeforeShow)this.onBeforeShow();
k.showSideSheet(this.id,this.animationDuration);w=n.bind(this);document&&document.addEventListener("keydown",w)}else z.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")},close:function(){k.closeSideSheet(this.id,this.animationDuration);k.resetSideSheetContainer(this.container);if(this.onAfterHide)this.onAfterHide()},updateWidth:function(d){var f=this.container;f&&f.width(d);h(this.id,d)},updateContent:function(d){d&&"string"===typeof d?m.call(this,d):z.log("Invalid side sheet content. Side sheet ID: "+
this.id,"ERROR","DetailPageSideSheet")}};return p});"use strict";z.when("A").register("detail-page-side-sheet-handlers",function(d){function k(d,h){f("#"+d+" .detail-page-side-sheet-content").show(function(){m({right:"0px"},d,h)})}function p(d,h){f("#"+d+" .detail-page-side-sheet-content").show(function(){m({right:"-600px"},d,h)})}function m(k,h,m){d.animate(f("#"+h+" .detail-page-side-sheet-content"),k,m)}var f=d.$;return{showSideSheet:function(d,h){f("body").css("overflow","hidden");f(".detail-page-side-sheet-darken-bg").removeClass("aok-hidden");
f("#"+d).removeClass("aok-hidden");k(d,h)},closeSideSheet:function(d,h){p(d,h);f(".detail-page-side-sheet-darken-bg").addClass("aok-hidden");f("#"+d).addClass("aok-hidden");f("body").css("overflow","scroll")},getContainer:function(d){return f("#"+d).find(".detail-page-side-sheet-content")},resetSideSheetContainer:function(d){d.html("")}}})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,h=f._namespace||f.attributeErrors,b=h?h("DetailPageABSMultiSelectionIngressAssets",""):f;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,f,h){e.when("A","dp-latency-marker","abs_msx_ingress_constants","abs_msx_html_builder","abs_msx_ingress_metrics","abs_msx_ingress_utils").register("abs_msx_ingress",function(b,g,a,u,d,n){function v(c){document.body.style.overflow="hidden";b.ajax(c,{method:"get",success:w,error:function(c){k=
!0;d.registerCounter(a.msxMetrics.MSX_AJAX_CALL_TO_FETCH_MSX_CONTENT_FAILED);l()}})}function w(c){m=!0;c=c.trim();/^\s*$/.test(c)?(k=!0,d.registerCounter(a.msxMetrics.MSX_EMPTY_RESPONSE_AFTER_AJAX_CALL_SUCCESS),l()):(h(c),e.when("msx_slotDataLoader").execute(function(a){a.initialLoad()}))}function h(c){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));var d=document.getElementById(a.MSX_SIDE_SHEET_TOP_CONTAINER_HTML_ID);d&&d.insertAdjacentHTML("beforeend",c)}function x(){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));
var c=document.getElementById(p),d=document.getElementById(q);c.style.display="block";n.deviceTypeMobile()?(null!==d&&(d.style.display="block",d.style.height="100vh"),c.style.height="100vh"):(b.show(document.getElementById(a.MSX_BACKGROUND_HTML_ID)),null!==d&&(d.style.width="605px"),c.style.width="605px");document.body.style.overflow="hidden"}function r(){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));var c=document.getElementById(p),d=document.getElementById(q);n.deviceTypeMobile()?(d&&(d.style.height=
"0"),c.style.height="0"):(b.hide(document.getElementById(a.MSX_BACKGROUND_HTML_ID)),d&&(d.style.width="0"),c.style.width="0");document.body.style.overflow="scroll"}function l(){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));document.getElementById(a.MSX_SIDE_SHEET_TOP_CONTAINER_HTML_ID).appendChild(document.getElementById(a.MSX_ERROR_MSG_ID));document.getElementById(a.MSX_ERROR_MSG_ID).classList.remove(a.MSX_AOK_HIDDEN_CLASS)}var t=!1,m=!1;g=a.viewEvents.CLICK;var q=a.msxSideSheetSelectors.MSX_SIDE_SHEET,
p=a.msxSideSheetSelectors.MSX_SIDE_SHEET_TOP_CONTAINER,k=!1;b.declarative("msxIngressClick",g,function(c){c=c.$event;c.stopPropagation();f.history.state&&f.history.state.page===a.MSX_STATE||f.history.pushState({page:a.MSX_STATE},null);f.onpopstate=function(){r()};d.registerCounter(a.msxMetrics.MSX_INGRESS_LINK_CLICKED);m||t||(e.register("msxIngressClick"),t=!0);u.createMsxContainer();c&&c.currentTarget&&c.currentTarget.dataset&&c.currentTarget.dataset.msxingressclick?(c=JSON.parse(c.currentTarget.dataset.msxingressclick).asin,
c=a.GXA_PREFIX_URL+c+a.EXPERIENCE_ID_AND_SHOW_FEATURES_SUFFIX_URL,b.show(document.getElementById(a.MSX_SPINNER_HTML_ID)),m||k?x():v(c)):(d.registerCounter(a.msxMetrics.MSX_INGRESS_CLICK_EVENT_FAILED),l())});b.declarative("close-multi-selection-experience",g,function(a){r()})});"use strict";e.when("dp-latency-marker").register("abs_msx_ingress_constants",function(b){return{MSX_SIDE_SHEET_OPENED:"msxSideSheetOpened",GXA_PREFIX_URL:"/gp/product/ajax?asin\x3d",EXPERIENCE_ID_AND_SHOW_FEATURES_SUFFIX_URL:"\x26experienceId\x3dabsMultiSelection\x26showFeatures\x3dmsxPrimaryWidget",
viewEvents:{CLICK:"click"},msxSideSheetSelectors:{MSX_SIDE_SHEET:"multi-selection-experience",MSX_SIDE_SHEET_TOP_CONTAINER:"msx-top-container"},msxSideSheetBackgroundSelectors:{MSX_BACKGROUND_DECLARATIVE_CONTENT:"\x3cspan class\x3d'a-declarative' data-action\x3d'close-multi-selection-experience' data-close-multi-selection-experience\x3d'{}'\x3e\x3c/span\x3e",MSX_BACKGROUND_CONTENT:"\x3cdiv id\x3d'msx-background' class\x3d'a-section msx-darken-background'\x3e\x3c/div\x3e",MSX_SPINNER_CONTAINER_CONTENT:"\x3cdiv id\x3d'multi-selection-experience-spinner' class\x3d'a-spinner-wrapper aok-hidden'\x3e\x3c/div\x3e",
MSX_CONTAINER_CONTENT:"\x3cdiv id\x3d'msx-top-container' class\x3d'a-section'\x3e\x3c/div\x3e"},msxMetrics:{MSX_AJAX_CALL_TO_FETCH_MSX_CONTENT_FAILED:"ABDpxMsx.ajaxCallToFetchMsxContentFailed",MSX_EMPTY_RESPONSE_AFTER_AJAX_CALL_SUCCESS:"ABDpxMsx.emptyResponseAfterAjaxCallSuccess",MSX_INGRESS_CLICK_EVENT_FAILED:"ABDpxMsx.ingressClickEventFailed",MSX_INGRESS_LINK_CLICKED:"ABDpxMsx.ingressLinkClicked"},HTML_BODY_TAG:"body",MSX_ANIMATION_CONTAINER:"\x3cspan class\x3d'msx-spinner-container'\x3e",MSX_ANIMATION_CONTAINER_INNER:"\x3cspan class\x3d'msx-spinner-container-inner'\x3e",
MSX_PAGE_LOAD_ANIMATION_CUSTOM:"\x3cspan class\x3d'msx-animation msx-page-load'\x3e\x3c/span\x3e",HTML_SPAN_CLOSE_TAG:"\x3c/span\x3e",DIV_LOAD_TEXT:"\x3cdiv class\x3d'msx-load-text'\x3e",HTML_SIZE_BASE_COLOR_BASE:"\x3cspan class\x3d'a-size-base a-color-base'\x3e",MSX_FUN_STRING_SUSPENSEFUL_MUSIC:"MSX_FUN_STRING_SUSPENSEFUL_MUSIC",HTML_DIV_CLOSE_TAG:"\x3c/div\x3e",MSX_BACKGROUND_HTML_ID:"msx-background",MSX_SIDE_SHEET_TOP_CONTAINER_HTML_ID:"msx-top-container",MSX_SPINNER_HTML_ID:"multi-selection-experience-spinner",
MSX_ERROR_MSG_ID:"msx-error-msg-id",MSX_STATE:"MSX",MSX_AOK_HIDDEN_CLASS:"aok-hidden"}});"use strict";e.when("jQuery","dp-latency-marker","abs_msx_ingress_constants","abs_msx_spinner_builder").register("abs_msx_html_builder",function(b,e,a,f){var d=!1;return{createMsxContainer:function(){if(!d){var e=b(a.msxSideSheetBackgroundSelectors.MSX_BACKGROUND_CONTENT),g=b(a.msxSideSheetBackgroundSelectors.MSX_BACKGROUND_DECLARATIVE_CONTENT);e.appendTo(g);g.prependTo(a.HTML_BODY_TAG);var e=f.getSpinnerComponent(),
g=b(a.msxSideSheetBackgroundSelectors.MSX_SPINNER_CONTAINER_CONTENT),h=b(a.msxSideSheetBackgroundSelectors.MSX_CONTAINER_CONTENT);e.appendTo(g);g.appendTo(h);h.prependTo(a.HTML_BODY_TAG);d=!0}}}});"use strict";e.when("jQuery","dp-latency-marker","abs_msx_ingress_constants","msx-spinner-string").register("abs_msx_spinner_builder",function(b,e,a,f){return{getSpinnerComponent:function(){var d=a.MSX_ANIMATION_CONTAINER+a.MSX_ANIMATION_CONTAINER_INNER+a.MSX_PAGE_LOAD_ANIMATION_CUSTOM+a.HTML_SPAN_CLOSE_TAG,
d=d+(a.DIV_LOAD_TEXT+a.HTML_SIZE_BASE_COLOR_BASE+f.getSpinnerString(a.MSX_FUN_STRING_SUSPENSEFUL_MUSIC)+a.HTML_SPAN_CLOSE_TAG+a.HTML_DIV_CLOSE_TAG),d=d+a.HTML_SPAN_CLOSE_TAG;return b(d)}}});"use strict";e.when("dp-latency-marker").register("msx-spinner-string",function(b){return{getSpinnerString:function(){return""}}});"use strict";e.when("dp-latency-marker").register("abs_msx_ingress_metrics",function(b){return{registerCounter:function(b){f.ue&&f.ue.count&&f.ue.count(b,(f.ue.count(b)||0)+1)}}});
"use strict";e.when("dp-latency-marker").register("abs_msx_ingress_utils",function(b){return{deviceTypeMobile:function(){return!1}}})});
/* ******** */
(function(q){var k=window.AmazonUIPageJS||window.P,r=k._namespace||k.attributeErrors,e=r?r("ABPricingFreeFormQuantityPickerAssets",""):k;e.guardFatal?e.guardFatal(q)(e,window):e.execute(function(){q(e,window)})})(function(q,k,r){q.when("jQuery","A","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_amazonAPIPriceFormatter").register("abPricingFfqp_amazonAPIClient",function(e,h,c,a,f){return h.createClass({inclusions:function(){return{priceV1:"buyingOptions[].price(product.price/v1)",
quantityPricingTableV1:"buyingOptions[].quantityPricingTable(product.quantity-pricing-table/v1)",availabilityV2:"buyingOptions[].availability(product.availability/v2)"}},init:function(a){this._baseEndpoint="https://"+a.endpoint;this._baseUrl=this._baseEndpoint+"/api/marketplaces/"+a.marketplaceId+"/";this._defaultHeaders={"Accept-Language":a.language,"x-api-csrf-token":a.csrfToken,"x-cc-currency-of-preference":a.currencyOfPreference};"object"===typeof a.priceFormatConfig&&(this._aapiPriceFormatter=
new f(a.priceFormatConfig));a=this._getValidatedClientId(a.clientId);this._metricScopeName=c.METRIC_SCOPE_NAME.AAPI_CLIENT.replace(c.AAPI_CLIENT_ID_PLACEHOLDER,a);this._statusMetricNameTpl=c.COUNTER_METRIC.AAPI_REQUEST_STATUS.replace(c.AAPI_CLIENT_ID_PLACEHOLDER,a)},_constructHeader:function(a,c){return"application/vnd.com.amazon.api+json; "+(""===a?"":'type\x3d"'+a+'"; ')+(""===c?"":'expand\x3d"'+c+'"; ')+'experiments\x3d"enableQuantityPricingTablePaginationField_dn2f4w34"'},productV2:function(a){var c=
["products",a.asin],f={Accept:this._constructHeader("product/v2",a.subresources.join(","))},c=this._constructUrl(c,a.parameters);this._get(a.success,a.error,c,f)},productQPT:function(a){var c={Accept:this._constructHeader("product.quantity-pricing-table/v1","")};this._get(a.success,a.error,this._baseEndpoint+a.url,c)},_getValidatedClientId:function(a){return"string"===typeof a&&0<a.length?a:c.UNSPECIFIED_CLIENT_ID},_get:function(f,l,h,k){var m=this;a.registerWidgetBodyBegin(this._metricScopeName);
k=e.extend(this._defaultHeaders,k);e.ajax({url:h,type:"GET",headers:k,xhrFields:{withCredentials:!0},timeout:c.AAPI_CLIENT_TIMEOUT}).done(function(b,d){m._handleAjaxSuccess(b,d,f)}).fail(function(b,d,a){m._handleAjaxError(d,a,l,b.status)}).always(function(b,d){m._handleAjaxComplete(d)})},_constructUrl:function(a,c){c=c||{};c=e.map(c,function(a,c){return c.toString()+"\x3d"+a.toString()}).join("\x26");return this._baseUrl+a.join("/")+(0<c.length?"?"+c:"")},_handleAjaxSuccess:function(c,f,e){this._aapiPriceFormatter&&
this._aapiPriceFormatter.formatPrices(c);a.registerWidgetCriticalFeature(this._metricScopeName);a.registerWidgetLoaded(this._metricScopeName);e&&e(c,f)},_handleAjaxError:function(c,f,e,h){a.registerWidgetLoaded(this._metricScopeName);e&&e(c,f,h)},_handleAjaxComplete:function(f){"string"!==typeof f&&(f=c.UNSPECIFIED_REQUEST_STATUS);f=this._statusMetricNameTpl.replace(c.AAPI_REQUEST_STATUS_PLACEHOLDER,f);a.registerCounter(f)}})});"use strict";q.when("A","abPricingFfqp_constants","abPricingFfqp_metrics",
"abPricingFfqp_priceFormatter").register("abPricingFfqp_amazonAPIPriceFormatter",function(e,h,c,a){return e.createClass({init:function(c){this._priceFormatter=new a(c)},formatPrices:function(a){c.registerWidgetBodyBegin(h.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER);try{this._formatPricesRec(a),c.registerWidgetCriticalFeature(h.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER)}catch(e){throw e;}finally{c.registerWidgetLoaded(h.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER)}},_formatPricesRec:function(a){if(this._isPriceObject(a))a.displayString=
this._formatPrice(a.amount,a.currencyCode,a.displayString);else if("object"===typeof a)for(var c in a)a.hasOwnProperty(c)&&this._formatPricesRec(a[c])},_isPriceObject:function(a){return"object"===typeof a&&this._priceFormatter.isValidPrice(a.amount,a.currencyCode)},_formatPrice:function(a,c,e){return"string"===typeof e&&0<e.length?e:this._priceFormatter.format(a,c)}})});"use strict";q.when("A","abPricingFfqp_constants","abPricingFfqp_metrics").register("abPricingFfqp_priceFormatter",function(e,h,
c){return e.createClass({init:function(a){a=a||{};this._priceFormat=a.priceFormat;this._decimalSeparator=a.decimalSeparator;this._fractionDigits=parseInt(a.fractionDigits);this._groupingSeparator=a.groupingSeparator;this._groupingDigits=parseInt(a.groupingDigits);this._secondaryGroupingDigits=parseInt(a.secondaryGroupingDigits);this._minGroupingDigits=parseInt(a.minGroupingDigits);this._currencyCode=a.currencyOfPreference;this._validateInput();0===this._secondaryGroupingDigits&&(this._secondaryGroupingDigits=
this._groupingDigits)},format:function(a,c){a=parseFloat(a);isNaN(a)&&this._throwValidationError("amount");if(0>a)return"-"+this.format(-a,c);a=this._formatAmount(a);return this._currencyFormat(c).replace("{}",a)},isValidPrice:function(a,c){a=parseFloat(a);return!isNaN(a)&&0<=a&&this._isValidCurrencyCode(c)},_validateInput:function(){this._validatePriceFormat();this._validateSeparator("decimalSeparator",this._decimalSeparator);this._validateSeparator("groupingSeparator",this._groupingSeparator);this._validateDigitsCount("fractionDigits",
this._fractionDigits,0);this._validateDigitsCount("groupingDigits",this._groupingDigits,0);this._validateDigitsCount("secondaryGroupingDigits",this._secondaryGroupingDigits,0);this._validateDigitsCount("minGroupingDigits",this._minGroupingDigits,1);this._validateCurrencyCode()},_validatePriceFormat:function(){"string"===typeof this._priceFormat&&-1!==this._priceFormat.indexOf("{}")||this._throwValidationError("priceFormat")},_validateSeparator:function(a,c){"string"===typeof c&&0!=c.length||this._throwValidationError(a)},
_validateDigitsCount:function(a,c,e){("number"!==typeof c||isNaN(c)||c<e)&&this._throwValidationError(a)},_validateCurrencyCode:function(){this._isValidCurrencyCode(this._currencyCode)||this._throwValidationError("currencyOfPreference")},_isValidCurrencyCode:function(a){return"string"===typeof a&&/^[A-Z]{3}$/.test(a)},_throwValidationError:function(a){throw Error("[abPricingFfqp_priceFormatter] Invalid value for "+a);},_formatAmount:function(a){var c=this._halfEvenRound(a,this._fractionDigits).toString().split(".");
a=this._formatIntegerPart(c[0]);if(0==this._fractionDigits)return a;c=this._formatDecimalPart(2==c.length?c[1]:"");return[a,c].join(this._decimalSeparator)},_halfEvenRound:function(a,c){a*=Math.pow(10,c);var e=a%1;a=.500001<=e||1E-6>Math.abs(e-.5)&&1==Math.floor(a)%2?Math.ceil(a):Math.floor(a);return a/Math.pow(10,c)},_formatIntegerPart:function(a){if(0===this._groupingDigits||a.length<this._groupingDigits+this._minGroupingDigits)return a;for(var c=a.length,e=!0,h=[];0<c;){var k=this._secondaryGroupingDigits;
e&&(e=!1,k=this._groupingDigits);c<k?h.push(a.substr(0,c)):h.push(a.substr(c-k,k));c-=k}return h.reverse().join(this._groupingSeparator)},_formatDecimalPart:function(a){for(;a.length<this._fractionDigits;)a+="0";return a.substr(0,this._fractionDigits)},_currencyFormat:function(a){if(a===this._currencyCode)return this._priceFormat;this._isValidCurrencyCode(a)||this._throwValidationError("currencyCode");c.registerCounter(h.COUNTER_METRIC.FALLBACK_PRICE_FORMAT_USED);return a+" {}"}})});"use strict";
q.register("abPricingFfqp_constants",function(){return{METRIC_SCOPE_NAME:{AAPI_PRICE_FORMATTER:"b2b-ffqp-aapi-price-formatter",AAPI_CLIENT:"b2b-ffqp-aapi-client-{clientId}",AAPI_QPT:"b2b-ffqp-aapi-qpt",AAPI_SINGLE_QUANTITY:"b2b-ffqp-aapi-single-quantity",AUI_STATE_PARSING:"b2b-ffqp-aui-state-parsing",GET_QPT_REQUEST:"b2b-ffqp-get-qpt-request"},COUNTER_METRIC:{FALLBACK_PRICE_FORMAT_USED:"ABPricingFreeFormQuantityPicker.FallbackPriceFormatUsed",AAPI_REQUEST_STATUS:"ABPricingFreeFormQuantityPicker.AAPIClient.{clientId}.status.{status}",
AAPI_SINGLE_QUANTITY_BO_NOT_FOUND:"ABPricingFreeFormQuantityPicker.AAPISingleQuantityBONotFound",AAPI_SINGLE_QUANTITY_EXTRACTION_FAILED:"ABPricingFreeFormQuantityPicker.AAPISingleQuantityBONotFoundExtractionFailed",AAPI_QPT_BO_NOT_FOUND:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableBONotFound",AAPI_QPT_MISSING:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableMissing",AAPI_QPT_MISSING_BO:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableMissing.{bo}",AAPI_QPT_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableError",
AAPI_QPT_ERROR_CODE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableError.{code}",AAPI_QPT_PRESENT:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePresent",AAPI_QPT_PAGINATES:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginates",AAPI_QPT_FETCH_PAGE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableFetchPage",AAPI_QPT_PAGE_FETCHED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePageFetched",AAPI_QPT_PAGINATION_COMPLETE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationComplete",
AAPI_QPT_PAGE_MISSING:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationPageMissing",AAPI_QPT_EXTRACTION_FAILED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableExtractionFailed",AAPI_QPT_CONVERSION_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableConversionFailed",AAPI_QPT_PAGINATION_PAGE_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationPageError",AAPI_QPT_PAGINATION_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationError",
AAPI_QPT_PAGINATION_404_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePagination404Error",AAPI_QPT_PAGINATION_404_EXCEPTION:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePagination404Exception",AAPI_QPT_MAX_PAGINATION_DEPTH_REACHED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationDepthReached",AAPI_DATA_MGR_INIT_FAILED:"ABPricingFreeFormQuantityPicker.AAPIDataManagerInitializationFailed",QUANTITY_REFRESH_CHECK_ERROR:"ABPricingFreeFormQuantityPicker.QuantityRefreshCheckError",
PAGE_WILL_REFRESH:"ABPricingFreeFormQuantityPicker.PageWillRefresh",NO_PAGE_REFRESH_QTY_AVAILABLE:"ABPricingFreeFormQuantityPicker.NoPageRefreshQtyAvailable",NO_PAGE_REFRESH_QTY_NOT_AVAILABLE:"ABPricingFreeFormQuantityPicker.NoPageRefreshQtyNotAvailable",AVAILABILITY_CHECK_QTY_AVAILABLE_SHOULD_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailableShouldRefresh",AVAILABILITY_CHECK_PAGE_WILL_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckPageWillRefresh",AVAILABILITY_CHECK_QTY_AVAILABLE_NO_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailableNoRefresh",
AVAILABILITY_CHECK_QTY_AVAILABLE:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailable",AVAILABILITY_CHECK_QTY_NOT_AVAILABLE:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyNotAvailable",AVAILABILITY_CHECK_ERROR:"ABPricingFreeFormQuantityPicker.AvailabilityCheckError",MISSING_AJAX_PARAMS:"ABPricingFreeFormQuantityPicker.MissingAjaxParams",SPLIT_OFFER_LINK_DISPLAYED:"SplitOfferLinkDisplayed"},ERROR:{AAPI_DATA_MGR_INIT_FAILED:"AAPIDataManager initialization failed",MISSING_AJAX_PARAMS:"AAPIDataManager could not find the AJAX parameters"},
AAPI_CLIENT_ID_PLACEHOLDER:"{clientId}",AAPI_REQUEST_STATUS_PLACEHOLDER:"{status}",AAPI_ERROR_CODE_PLACEHOLDER:"{code}",AAPI_BO_PLACEHOLDER:"{bo}",UNSPECIFIED_CLIENT_ID:"unspecified",UNSPECIFIED_REQUEST_STATUS:"unspecified",AAPI_CLIENT_TIMEOUT:6E3,AJAX_PARAMS_STATE_KEY:"quantityPickerAjaxParams",MAX_SUPPORTED_QTY:999,MAX_PAGINATION_DEPTH:10,ADD_TO_CART_QUANTITY_CHANGE_EVENT:"addToCartQuantityChange",URL_PARAM_ID__BUYING_IN_BULK_QUANTITY:"quantity",URL_PARAM_ID__BUYING_IN_BULK_REFTAG:"ref_",URL_PARAM_ID__BUYING_IN_BULK_ASIN:"asin",
URL_PARAM_VALUE__LIMITED_AVAILABILITY_REFTAG:"bbt_limit_order"}});"use strict";q.when("jQuery","ready").register("abPricingFfqp_metrics",function(e){var h=!0;return{updateCounterTriggering:function(c){h=c},register:function(c){c.counter&&this.registerCounter(c.counter)},registerCounter:function(c){h&&k.ue&&k.ue.count&&k.ue.count(c,(k.ue.count(c)||0)+1)},registerWidgetBodyBegin:function(c){h&&k.uet&&k.uet("bb",c,{wb:1})},registerWidgetCriticalFeature:function(c){h&&k.uet&&k.uet("cf",c,{wb:1})},registerWidgetLoaded:function(c){h&&
k.uex&&k.uex("ld",c,{wb:1})}}});"use strict";q.when("jQuery","A","abPricingFfqp_utils","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_quantityPickerDataManager").register("abPricingFfqp_quantityManager",function(e,h,c,a,f,g){function l(d,a){return(d=(new RegExp("(?:^|\\?|\x26)"+a+"\x3d(?:([^\x26#]*)|\x26|#|$)")).exec(d))?d[1]?decodeURIComponent(d[1].replace(/\+/g," ")):"":r}function n(d,a,b){var c=d.split("#");d=c[0];d="?"===d[0]?d.substr(1):d;c=c[1];"undefined"!==typeof b&&null!==
b?(b=a+"\x3d"+b,a=new RegExp("(^|\x26)("+a+"\x3d[^\x26]*)"),d=a.test(d)?d.replace(a,"$1"+b):d+((0!==d.length?"\x26":"")+b)):(a=new RegExp("(^|\x26)("+a+"\x3d[^\x26]*)"),a.test(d)&&(d=d.replace(a,""),"\x26"===d[0]&&(d=d.substr(1))));return"?"+d+("undefined"!==typeof c?"#"+c:"")}function p(d,a){for(var b in a)a.hasOwnProperty(b)&&(d=n(d,encodeURIComponent(b),encodeURIComponent(a[b])));return d}function m(d){return k.location.protocol+"//"+k.location.host+k.location.pathname+p(k.location.search,d)}function b(){var d;
d=parseInt(l(k.location.search,"qty"));d=isNaN(d)||1>d||d>a.MAX_SUPPORTED_QTY?1:d;this._initialQuantity=this.currentQuantity=d;this.wireUpSelectorBasedEvents()}b.prototype.getCurrentQuantity=function(){return this.currentQuantity};b.prototype.wireUpSelectorBasedEvents=function(){var d=this;q.when("A","jQuery","quanityChangePriceUpdate").execute(function(a,b,c){d.quantityChangePriceUpdater=c;a.on("a:pageUpdate",function(){d.handleTwisterPageRefresh()})})};b.prototype.update3PPriceBlock=function(){if(!(this.leastMinimumOrderQuantity===
r||1>=this.leastMinimumOrderQuantity)){var d=e(".price3P");d.hasClass("updatedPrice3P")||(d.addClass("updatedPrice3P"),this.quantityChangePriceUpdater.ajaxCall({qt:this.leastMinimumOrderQuantity,quantityPriceField:"quantity_price"}))}};b.prototype.handleTwisterPageRefresh=function(){this.update3PPriceBlock()};b.prototype.reloadPageForQuantity=function(d,a){var b={};b.qty=d;b.psc=1;d="";"undefined"!==typeof a&&("undefined"!==typeof a.refTag&&(b.ref_=a.refTag),"string"===typeof a.selectedBuyingOption&&
0<a.selectedBuyingOption.length&&(b.sbo=a.selectedBuyingOption),"undefined"!==typeof a.merchantId&&(b.smid=a.merchantId),"undefined"!==typeof a.anchorToDiv&&(d=a.anchorToDiv));a=m(b)+d;k.location.href=a};b.prototype.notifyQuantityTyped=function(d,b){this.quantityRefreshCheck({newQuantity:d,currentBuyBoxId:b.currentBuyBoxId,qdsForLockedMerchantEnabled:b.qdsForLockedMerchantEnabled,success:function(d,c){f.registerCounter(d?a.COUNTER_METRIC.AVAILABILITY_CHECK_QTY_AVAILABLE:a.COUNTER_METRIC.AVAILABILITY_CHECK_QTY_NOT_AVAILABLE);
b.callback({hasAvailability:d})},error:function(){f.registerCounter(a.COUNTER_METRIC.AVAILABILITY_CHECK_ERROR);b.callback({hasAvailability:!0})}})};b.prototype.buyboxRefreshCheck=function(d){var b=this;this.quantityRefreshCheck({newQuantity:d.newQuantity,currentBuyBoxId:d.currentBuyBoxId,qdsForLockedMerchantEnabled:d.qdsForLockedMerchantEnabled,startEvent:"quantityRefreshCheckStarted",success:function(c,m){d.newQuantity===b.currentQuantity&&(c&&m?(f.registerCounter(a.COUNTER_METRIC.PAGE_WILL_REFRESH),
b.reloadPageForQuantity(d.newQuantity,{activeBuyBoxId:d.activeBuyBoxId,selectedBuyingOption:d.selectedBuyingOption})):(f.registerCounter(c?a.COUNTER_METRIC.NO_PAGE_REFRESH_QTY_AVAILABLE:a.COUNTER_METRIC.NO_PAGE_REFRESH_QTY_NOT_AVAILABLE),d.callback({hasAvailability:c})),h.trigger("quantityRefreshCheckFinished"))},error:function(){f.registerCounter(a.COUNTER_METRIC.QUANTITY_REFRESH_CHECK_ERROR);d.newQuantity===b.currentQuantity&&b.reloadPageForQuantity(d.newQuantity,{activeBuyBoxId:d.activeBuyBoxId,
selectedBuyingOption:d.selectedBuyingOption})}})};b.prototype.notifyQuantityChanged=function(d,a){d=parseInt(d);if(this.currentQuantity!==d){this.currentQuantity=d;if(k.history!==r&&k.history.pushState!==r){var b={};b.qty=d;k.history.pushState({},"",m(b))}h.trigger("buyBoxQuantityChanged",a.senderId,d,{newQuantity:d,activeBuyBoxId:a.activeBuyBoxId,selectedBuyingOption:a.selectedBuyingOption});h.trigger("notifyBuyingInBulkOptionClicked",d)}};b.prototype.quantityRefreshCheck=function(d){if(!0!==d.preventRefreshCheck){var a=
{asin:c.getPageState().asin,initialQuantity:this._initialQuantity,quantity:d.newQuantity,currentBuyBoxId:d.currentBuyBoxId,success:d.success,error:d.error};if(d.qdsForLockedMerchantEnabled){var b=l(k.location.search,"smid");"undefined"!==typeof b&&(a.merchantId=b)}"string"===typeof d.startEvent&&h.trigger(d.startEvent);g.getInstance().refreshCheck(a)}};b.prototype.fetchAllTiersForQuantityDiscountTable=function(d){var a=this.isQPTBuyBoxAwareEnabled(d),b={asin:c.getPageState().asin,enableQPTPagination:"true"};
a&&(b.currentBuyBoxId=d.activeBuyBoxId);if(d.qdsForLockedMerchantEnabled){var m=l(k.location.search,"smid");"undefined"!==typeof m&&(b.merchantId=m)}m=d.enableQuantityPricingTablePagination;"undefined"!==m&&(b.enableQPTPagination=0==m?"false":"true");var e=this;this.triggerBuyBoxAwareEvent("fetchQuantityDiscountTableStarted",d);b.success=function(b){a?h.trigger("fetchQuantityDiscountTableCompleted",b,d.senderId):h.trigger("fetchQuantityDiscountTableCompleted",b)};b.error=function(){e.triggerBuyBoxAwareEvent("fetchQuantityDiscountTableError",
d)};g.getInstance().getQuantityPricingTable(b)};b.prototype.isQPTBuyBoxAwareEnabled=function(d){return d&&d.senderId&&d.activeBuyBoxId};b.prototype.triggerBuyBoxAwareEvent=function(d,a){this.isQPTBuyBoxAwareEnabled(a)?h.trigger(d,a.senderId):h.trigger(d)};b.prototype.notifyBuyingInBulkOptionClicked=function(d){h.trigger("notifyBuyingInBulkOptionClicked",d)};b.prototype.getLimitedAvailabilityUrl=function(d){var b={};b[a.URL_PARAM_ID__BUYING_IN_BULK_QUANTITY]=d;b[a.URL_PARAM_ID__BUYING_IN_BULK_ASIN]=
c.getPageState().asin;b[a.URL_PARAM_ID__BUYING_IN_BULK_REFTAG]=a.URL_PARAM_VALUE__LIMITED_AVAILABILITY_REFTAG;return"/ab/bulk-order/bebx/api/v2/fastForwardBasket"+p("?",b)};b.prototype.notifyQuantityUnavailableOptionClicked=function(d){d=k.location.protocol+"//"+k.location.host+this.getLimitedAvailabilityUrl(d);k.location.href=d};return{EVENT__BUY_BOX_QUANTITY_CHANGED:"buyBoxQuantityChanged",EVENT__QUANTITY_REFRESH_CHECK_STARTED:"quantityRefreshCheckStarted",EVENT__QUANTITY_REFRESH_CHECK_FINISHED:"quantityRefreshCheckFinished",
EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_STARTED:"fetchQuantityDiscountTableStarted",EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_COMPLETED:"fetchQuantityDiscountTableCompleted",EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_ERROR:"fetchQuantityDiscountTableError",EVENT__NOTIFY_BUYING_IN_BULK_OPTION_CLICKED:"notifyBuyingInBulkOptionClicked",getUrlParameter:l,replaceUrlParameter:n,replaceUrlQueryParameters:function(d,a){var b="?";d=d.split(b);2===d.length&&(b+=d[1]);a=p(b,a);"?"!==a&&(d[0]+=a);return d[0]},singleton:new b}});
"use strict";q.when("A","jQuery","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_amazonAPIClient","abPricingFfqp_helpers","ready").register("abPricingFfqp_quantityPickerDataManager",function(e,h,c,a,f,g){var k=e.createClass({_buyboxIdToBOTypes:{customOffer:["CUSTOM_OFFER"],b2bRd:["B2B_RD"],default:["NEW","B2B_NEW"]},_buyboxIdToFallbackBOTypes:{customOffer:["NEW","B2B_NEW"]},init:function(a){this._aapiClient=new f(a);this._qptCache=this._getQPTCacheInstance();this._quantityDataCache=
this._getQuantityDataCacheInstance()},getQuantityPricingTable:function(m){a.registerWidgetBodyBegin(c.METRIC_SCOPE_NAME.GET_QPT_REQUEST);var b=this;this._qptCache.get(m,function(d){try{var e,f=b._extractQPT(d,m),g=b._extractPricingTiers(f);if(b._hasNextPage(f)){a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGINATES);a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_FETCH_PAGE);var h=b._extractNextPage(f);b._aapiQPTRequest(m.asin,h,[g],m.success,m.error)}else e=b._convertToLegacyFormat(g),m.success(e)}catch(k){a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_EXTRACTION_FAILED),
m.error(k)}},m.error)},refreshCheck:function(a){function b(d){e||(e=!0,a.error(d))}var d=this,c={},e=!1;h.each([a.quantity,a.initialQuantity],function(e,f){d._getSingleQuantityData({asin:a.asin,merchantId:a.merchantId,quantity:f,currentBuyBoxId:a.currentBuyBoxId,success:function(d){c[f]=d;if(c[a.initialQuantity]&&c[a.quantity]){d=c[a.initialQuantity];var b=c[a.quantity];a.success(b.isAvailable,d.price!==b.price||d.buyingOptionId!==b.buyingOptionId)}},error:b})})},_aapiRequest:function(c,b,d,e,f,g){a.registerWidgetBodyBegin(g);
this._aapiClient.productV2({asin:c,subresources:b,parameters:d,success:function(d){a.registerWidgetCriticalFeature(g);a.registerWidgetLoaded(g);e(d)},error:function(d,b){a.registerWidgetLoaded(g);f(d,b)}})},_aapiQPTRequest:function(e,b,d,t,f){var g=this;this._aapiClient.productQPT({asin:e,url:b,success:function(b){try{var h=g._processQPTPage(b);d.push(g._extractPricingTiers(h));a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGE_FETCHED);g._maxPaginationDepthGuardrail(d.length);if(g._hasNextPage(h)){a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_FETCH_PAGE);
var k=g._extractNextPage(h);g._aapiQPTRequest(e,k,d,t,f)}else{var l=g._constructTiers(d),n=g._convertToLegacyFormat(l);a.registerWidgetCriticalFeature(c.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerWidgetLoaded(c.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGINATION_COMPLETE);t(n)}}catch(p){a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGINATION_PAGE_ERROR),f(p)}},error:function(b,e,m){if(404===m){a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGINATION_404_ERROR);
try{var h=g._constructTiers(d),k=g._convertToLegacyFormat(h);a.registerWidgetCriticalFeature(c.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerWidgetLoaded(c.METRIC_SCOPE_NAME.GET_QPT_REQUEST);t(k)}catch(l){a.registerWidgetLoaded(c.METRIC_SCOPE_NAME.GET_QPT_REQUEST),a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGINATION_404_EXCEPTION),f(l)}}else a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGINATION_ERROR),f(b,e)}})},_maxPaginationDepthGuardrail:function(e){if(e>=this.getMaxPaginationDepth())throw a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_MAX_PAGINATION_DEPTH_REACHED),
Error("Max pagination depth reached");},getMaxPaginationDepth:function(){return c.MAX_PAGINATION_DEPTH},_getQPTCacheInstance:function(){var a=this,b=[a._aapiClient.inclusions().quantityPricingTableV1];return new g.AsyncCache({loader:function(d,e,f){var g={};"string"===typeof d.merchantId&&(g.merchantId=d.merchantId);g.enableQuantityPricingTablePagination=d.enableQPTPagination;a._aapiRequest(d.asin,b,g,e,f,c.METRIC_SCOPE_NAME.AAPI_QPT)},keyGenerator:function(d){var a=d.asin;"string"===typeof d.merchantId&&
(a+=d.merchantId);return a}})},_getQuantityDataCacheInstance:function(){var a=this,b=[a._aapiClient.inclusions().priceV1,a._aapiClient.inclusions().availabilityV2];return new g.AsyncCache({loader:function(d,e,f){var g={itemQuantity:d.quantity};"string"===typeof d.merchantId&&(g.merchantId=d.merchantId);a._aapiRequest(d.asin,b,g,e,f,c.METRIC_SCOPE_NAME.AAPI_SINGLE_QUANTITY)},keyGenerator:function(d){var a=d.asin+d.quantity.toString();"string"===typeof d.merchantId&&(a+=d.merchantId);return a}})},_firstBuyingOption:function(a){return a.entity.buyingOptions[0]},
_firstBuyingOptionByType:function(a,b){a=a.entity.buyingOptions;for(var d=0;d<a.length;d++){var c=a[d];if(-1!==b.indexOf(c.type))return c}},_firstBuyingOptionByBuyboxId:function(a,b){a=this._firstBuyingOptionByType(a,this._buyboxIdToBOTypes[b]||this._buyboxIdToBOTypes.default);if("undefined"===typeof a)throw Error("Could not find an eligible buying option");return a},_firstBuyingOptionByBuyboxIdWithFallback:function(a,b){var d=this._buyboxIdToFallbackBOTypes[b];b=this._firstBuyingOptionByType(a,this._buyboxIdToBOTypes[b]||
this._buyboxIdToBOTypes.default);"undefined"===typeof b&&"undefined"!==typeof d&&(b=this._firstBuyingOptionByType(a,d));if("undefined"===typeof b)throw Error("Could not find an eligible or fallback buying option");return b},_extractQPT:function(e,b){var d;try{d=this._firstBuyingOptionByBuyboxId(e,b.currentBuyBoxId)}catch(f){a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_BO_NOT_FOUND);return}e=d.quantityPricingTable;if("undefined"===typeof e||"undefined"===typeof e.entity)a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_MISSING),
"string"===typeof d.type&&a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_MISSING_BO.replace(c.AAPI_BO_PLACEHOLDER,d.type));else return e},_processQPTPage:function(e){if("undefined"===e.entity)a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PAGE_MISSING);else return e},_extractPricingTiers:function(e){if("undefined"===typeof e)return[];var b=e.entity.pricingTiers;if("undefined"===typeof b)throw a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_ERROR),e=e.entity.code,"string"===typeof e&&a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_ERROR_CODE.replace(c.AAPI_ERROR_CODE_PLACEHOLDER,
e)),Error("Error in the QPT sub-resource");a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_PRESENT);return b},_hasNextPage:function(a){return"undefined"!==typeof a&&"undefined"!==typeof a.entity.nextPage},_extractNextPage:function(a){return a.entity.nextPage.resource.url},_constructTiers:function(a){for(var b=0,d=[],c=0;c<a.length;c++)for(var e=0;e<a[c].length;e++){var f=a[c][e],g=f.minimumQuantity;g!=b&&(b=g,d.push(f))}return d},_convertToLegacyFormat:function(e){var b=[];try{for(var d=0;d<e.length;d++){var f=
e[d],h={quantity:f.minimumQuantity,quantityPickerPriceText:g.richContentHelper.toText(f.priceMessage),isUncompetitive:f.hidden,isLowestAvailablePrice:f.lowestAvailablePrice};f.savingsMessage&&(h.savingsMessage=g.richContentHelper.toText(f.savingsMessage));f.availabilityMessage&&(h.availabilityMessage=g.richContentHelper.toText(f.availabilityMessage));f.program&&(h.program=f.program);f.buyingInBulk&&"undefined"!==typeof f.buyingInBulk.fragments&&1<=f.buyingInBulk.fragments.length&&(h.buyingInBulkLink=
g.richContentHelper.toText(f.buyingInBulk.fragments[0]),h.buyingInBulkMessage=g.richContentHelper.toText({fragments:f.buyingInBulk.fragments.slice(1)}));b.push(h)}}catch(k){throw a.registerCounter(c.COUNTER_METRIC.AAPI_QPT_CONVERSION_ERROR),k;}return b},_extractSingleQuantityData:function(e,b){var d={isAvailable:!1,buyingOptionId:"",price:""},f;try{f=this._firstBuyingOptionByBuyboxIdWithFallback(e,b)}catch(g){return a.registerCounter(c.COUNTER_METRIC.AAPI_SINGLE_QUANTITY_BO_NOT_FOUND),d}try{return{isAvailable:"OUT_OF_STOCK"!==
f.availability.entity.type,buyingOptionId:f.availability.resource.url,price:f.price.entity.priceToPay.moneyValueOrRange.value.displayString}}catch(g){return a.registerCounter(c.COUNTER_METRIC.AAPI_SINGLE_QUANTITY_EXTRACTION_FAILED),d}},_getSingleQuantityData:function(a){var b=this;b._quantityDataCache.get({asin:a.asin,merchantId:a.merchantId,quantity:a.quantity},function(d){a.success(b._extractSingleQuantityData(d,a.currentBuyBoxId))},a.error)}}),n=e.createClass({init:function(a){this._errorMessage=
a},getQuantityPricingTable:function(a){a.error&&a.error(this._errorMessage)},refreshCheck:function(a){a.error&&a.error(this._errorMessage)}}),p;return{getInstance:function(){if("undefined"!==typeof p)return p;var f=e.state(c.AJAX_PARAMS_STATE_KEY);"undefined"===typeof f&&(a.registerWidgetBodyBegin(c.METRIC_SCOPE_NAME.AUI_STATE_PARSING),e.state.parse(),a.registerWidgetLoaded(c.METRIC_SCOPE_NAME.AUI_STATE_PARSING),f=e.state(c.AJAX_PARAMS_STATE_KEY));if("undefined"!==typeof f){f.priceFormatConfig=f;
f.clientId="dpx";try{p=new k(f)}catch(b){a.registerCounter(c.COUNTER_METRIC.AAPI_DATA_MGR_INIT_FAILED),p=new n(c.ERROR.AAPI_DATA_MGR_INIT_FAILED)}}else return a.registerCounter(c.COUNTER_METRIC.MISSING_AJAX_PARAMS),new n(c.ERROR.MISSING_AJAX_PARAMS);return p}}});"use strict";q.when("A").register("abPricingFfqp_helpers",function(e){var h=e.createClass({_listeners:{},addListeners:function(c,a,e){this._listeners.hasOwnProperty(c)||(this._listeners[c]=[]);this._listeners[c].push({success:a,error:e})},
triggerSuccess:function(c,a){this._triggerListeners(c,"success",a)},triggerError:function(c,a){this._triggerListeners(c,"error",a)},_triggerListeners:function(c,a,e){if(this._listeners.hasOwnProperty(c))for(c=this._listeners[c];0<c.length;){var g=c.pop();if(g[a])g[a](e)}}});return{AsyncCache:e.createClass({_requestStatus:{IN_PROGRESS:1,READY:2,ERROR:3},_status:{},_cache:{},init:function(c){this._eventHandler=new h;this._loader=c.loader;this._keyGenerator=c.keyGenerator},_getKey:function(c){return this._keyGenerator?
this._keyGenerator(c):c},get:function(c,a,e){var g=this._getKey(c);this._status[g]===this._requestStatus.READY?a(this._cache[g]):(this._eventHandler.addListeners(g,a,e),this._load(c,g))},_load:function(c,a){var e=this;e._status[a]!==e._requestStatus.IN_PROGRESS&&(e._status[a]=e._requestStatus.IN_PROGRESS,e._loader(c,function(c){e._cache[a]=c;e._status[a]=e._requestStatus.READY;e._eventHandler.triggerSuccess(a,c)},function(c){e._status[a]=e._requestStatus.ERROR;e._eventHandler.triggerError(a,c)}))}}),
richContentHelper:{toText:function a(e){if(e.money)return e.money.displayString;if(e.text)return e.text;if(e.link)return a(e.link.content);if(e.fragments){for(var g=[],h=0;h<e.fragments.length;h++)g.push(a(e.fragments[h]));return g.join("")}return e.semanticContent?a(e.semanticContent.content):""}}}});"use strict";q.when("jQuery","A","a-dropdown","a-button","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics","abPricingFfqp_constants").register("abPricingFfqp_quantityPickerLogic",
function(e,h,c,a,f,g,k,n){function p(a){return a.prop("selectedIndex")+1===a.prop("length")}function m(a,b){if(!f.dropdownContainsQuantity(a,b)){var c=document.createElement("option");c.value=b;c.text=b.toString();a.append(c)}}function b(a){this.id=a.id;this.buyBoxId=a.buyBoxId;this.buyingOptionStereotype=a.buyingOptionStereotype?a.buyingOptionStereotype:"";this.quantityHiddenFieldSelector=a.quantityHiddenFieldSelector;this.leastMinimumOrderQuantity=a.leastMinimumOrderQuantity;this.predefinedQuantitiesDropdownSelector=
a.predefinedQuantitiesDropdownSelector;this.predefinedQuantitiesDropdownContainerSelector=a.predefinedQuantitiesDropdownContainerSelector;this.freeQuantityTextInputSelector=a.freeQuantityTextInputSelector;this.freeQuantityTextInputOuterSelector=a.freeQuantityTextInputOuterSelector;this.updateButtonSelector=a.updateButtonSelector;this.addToCartButtonSelector=a.addToCartButtonSelector;this.initialQuantity=a.initialQuantity;this.buyingOptionPosition=a.buyingOptionPosition;this.limitedAvailabilityMessageSelector=
a.limitedAvailabilityMessageSelector;this.splitOfferLinkSelector=a.splitOfferLinkSelector;this.splitOfferSectionSelector=a.splitOfferSectionSelector;this.amazonDevicesLinkEnabled=a.amazonDevicesLinkEnabled;this.buyingInBulkBaseUrl=a.buyingInBulkBaseUrl;this.initialQuantity&&this.updateQuantityHiddenField(this.initialQuantity);this.wireUpSelectorBasedEvents()}b.prototype.wireUpSelectorBasedEvents=function(){var a=this,b=e(this.predefinedQuantitiesDropdownSelector);h.on("a:dropdown:"+b[0].id+":select",
function(b){a.handleDropdownOptionClicked(b.value)});h.on(g.EVENT__BUY_BOX_QUANTITY_CHANGED,function(b,c,e){a.handleQuantityChangedOnOtherBuyBox(b,c,e)});h.on(g.EVENT__QUANTITY_REFRESH_CHECK_STARTED,function(){a.handleQuantityRefreshCheckStarted()});h.on(g.EVENT__QUANTITY_REFRESH_CHECK_FINISHED,function(){a.handleQuantityRefreshCheckFinished()})};b.prototype.wireUpReferenceBasedEvents=function(){var a=this,b=e(this.freeQuantityTextInputSelector),c=e(this.updateButtonSelector);b.keydown(function(b){a.handleTextInputKeyDown(b)});
b.keyup(function(b){a.handleTextInputKeyUp(b)});b.focus(function(){a.handleTextInputFocused()});c.click(function(){a.handleButtonClick()})};b.prototype.attachToDOM=function(){this.wireUpReferenceBasedEvents();p(e(this.predefinedQuantitiesDropdownSelector))?this.switchToFreeQuantityUI():this.switchToPredefinedQuantitiesUI();this.enableUI();this.lastSelectedQuantity=this.getCurrentQuantity();g.singleton.leastMinimumOrderQuantity=this.leastMinimumOrderQuantity};b.prototype.getCurrentQuantity=function(){if(this.isTextInputVisible()){var a=
e(this.freeQuantityTextInputSelector);return parseInt(a.val())}return this.isDropdownVisible()?(a=e(this.predefinedQuantitiesDropdownSelector),parseInt(a.find(":selected").val())):r};b.prototype.handleQuantityRefreshCheckStarted=function(){this.doesDOMExist()&&this.disableUI()};b.prototype.handleQuantityRefreshCheckFinished=function(){this.doesDOMExist()&&this.enableUI()};b.prototype.handleDropdownOptionClicked=function(a){var b=e(this.predefinedQuantitiesDropdownSelector);p(b)?(a=e(this.freeQuantityTextInputSelector),
a.val(this.lastSelectedQuantity.toString()),this.switchToFreeQuantityUI(),a.focus(),f.incrementMetricByOne("freeFormQtyPickerMaxQtySelected")):(this.lastSelectedQuantity=a=parseInt(a),this.updateQuantityHiddenField(a),g.singleton.notifyQuantityChanged(a,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype}))};b.prototype.handleTextInputFocused=function(){e(this.freeQuantityTextInputSelector).select()};b.prototype.handleTextInputKeyUp=function(b){13!==b.keyCode&&
a(this.updateButtonSelector).show()};b.prototype.handleTextInputKeyDown=function(a){13===a.keyCode&&(a.preventDefault(),e(this.updateButtonSelector).click(),this._findWithinPickerAccordionRow(this.addToCartButtonSelector).focus())};b.prototype.clampQuantity=function(a){999<a&&(a=999);this.leastMinimumOrderQuantity!==r&&a<this.leastMinimumOrderQuantity&&(a=this.leastMinimumOrderQuantity);return a};b.prototype.handleButtonClick=function(){var b=e(this.predefinedQuantitiesDropdownSelector),h=c.getSelect(b[0]),
k=e(this.freeQuantityTextInputSelector),m=k.val(),l=parseInt,n=m.match(/[1-9][0-9]*/),l=l(null===n?"1":n[0]),l=this.clampQuantity(l);f.dropdownContainsQuantity(b,l)?(this.switchToPredefinedQuantitiesUI(),h.setValue(l.toString()),this.handleDropdownOptionClicked(l)):(b=l.toString(),b!==m&&k.val(b),a(this.updateButtonSelector).hide(),this.updateQuantityHiddenField(l),g.singleton.notifyQuantityChanged(l,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype}))};
b.prototype.doesDOMExist=function(){return 0<e(this.predefinedQuantitiesDropdownSelector).length&&0<e(this.freeQuantityTextInputSelector).length&&0<e(this.updateButtonSelector).length};b.prototype.handleQuantityChangedOnOtherBuyBox=function(a,b,c){if(this.doesDOMExist()){a!==this.id&&this.getCurrentQuantity()!==b&&this._updateSelectedQuantity(b);var e=this;g.singleton.buyboxRefreshCheck({newQuantity:b,activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption,currentBuyBoxId:this.buyBoxId,
callback:function(a){e.updateLimitedAvailabilityMessageVisibility(a.hasAvailability)}})}};b.prototype._updateSelectedQuantity=function(a){var b=e(this.predefinedQuantitiesDropdownSelector),g=c.getSelect(b[0]);f.dropdownContainsQuantity(b,a)?(g.setValue(a.toString()),this.lastSelectedQuantity=a,this.switchToPredefinedQuantitiesUI()):(e(this.freeQuantityTextInputSelector).val(a.toString()),this.switchToFreeQuantityUI());this.updateQuantityHiddenField(a)};b.prototype.showDropdown=function(){e(this.predefinedQuantitiesDropdownContainerSelector).removeClass("aok-hidden")};
b.prototype.hideDropdown=function(){e(this.predefinedQuantitiesDropdownContainerSelector).addClass("aok-hidden")};b.prototype.isDropdownVisible=function(){return!e(this.predefinedQuantitiesDropdownContainerSelector).hasClass("aok-hidden")};b.prototype.showTextInput=function(){"mobile"===f.getPageState().platform?e(this.freeQuantityTextInputOuterSelector).removeClass("aok-hidden"):e(this.freeQuantityTextInputSelector).removeClass("aok-hidden")};b.prototype.hideTextInput=function(){"mobile"===f.getPageState().platform?
e(this.freeQuantityTextInputOuterSelector).addClass("aok-hidden"):e(this.freeQuantityTextInputSelector).addClass("aok-hidden")};b.prototype.isTextInputVisible=function(){return"mobile"===f.getPageState().platform?!e(this.freeQuantityTextInputOuterSelector).hasClass("aok-hidden"):!e(this.freeQuantityTextInputSelector).hasClass("aok-hidden")};b.prototype.disableTextInput=function(){if("mobile"===f.getPageState().platform){var a=e(this.freeQuantityTextInputSelector),b=e(this.freeQuantityTextInputOuterSelector);
a.prop("disabled","disabled");b.addClass("a-form-disabled")}else a=e(this.freeQuantityTextInputSelector),a.prop("disabled","disabled"),a.addClass("a-form-disabled")};b.prototype.enableTextInput=function(){if("mobile"===f.getPageState().platform){var a=e(this.freeQuantityTextInputSelector),b=e(this.freeQuantityTextInputOuterSelector);a.removeProp("disabled");b.removeClass("a-form-disabled")}else a=e(this.freeQuantityTextInputSelector),a.removeProp("disabled"),a.removeClass("a-form-disabled")};b.prototype.switchToFreeQuantityUI=
function(){this.hideDropdown();this.showTextInput();a(this.updateButtonSelector).hide()};b.prototype.switchToPredefinedQuantitiesUI=function(){this.showDropdown();this.hideTextInput();a(this.updateButtonSelector).hide()};b.prototype.disableUI=function(){var b=c.getSelect(this.predefinedQuantitiesDropdownSelector),e=a(this.updateButtonSelector);b.update({status:"disabled"});this.disableTextInput();e.disable()};b.prototype.enableUI=function(){var b=c.getSelect(this.predefinedQuantitiesDropdownSelector),
e=a(this.updateButtonSelector);b.update({status:"normal"});this.enableTextInput();e.enable()};b.prototype._isMobileQuantityHiddenFieldSelector=function(){return"string"===typeof this.quantityHiddenFieldSelector&&-1<this.quantityHiddenFieldSelector.indexOf("select#mobileQuantityDropDown")};b.prototype._mobileQuantityHiddenFieldSelector=function(){return this.quantityHiddenFieldSelector.replace("input#quantity","select#mobileQuantityDropDown")};b.prototype.updateQuantityHiddenField=function(a){var b=
this._findWithinPickerAccordionRow(this.quantityHiddenFieldSelector).first();b.is("select")?(m(b,a),c.getSelect(b).val(a)):b.val(a.toString());h.trigger(n.ADD_TO_CART_QUANTITY_CHANGE_EVENT,{nativeItemNode:b[0],value:a.toString()});"mobile"!==f.getPageState().platform||this._isMobileQuantityHiddenFieldSelector()||(b=this._findWithinPickerAccordionRow(this._mobileQuantityHiddenFieldSelector()))&&b.is("select")&&(m(b,a),c.getSelect(b).val(a),b.val(a.toString()))};b.prototype.updateLimitedAvailabilityMessageVisibility=
function(b){var c=this._findWithinPickerAccordionRow(this.addToCartButtonSelector).closest(".a-button"),f=a(c),c=this._findWithinPickerAccordionRow(this.splitOfferSectionSelector);b?(e(this.limitedAvailabilityMessageSelector).addClass("aok-hidden"),f.enable(),c.addClass("aok-hidden")):(e(this.limitedAvailabilityMessageSelector).removeClass("aok-hidden"),f.disable(),b=this.getCurrentQuantity(),f=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:g.singleton.getLimitedAvailabilityUrl(b),this._findWithinPickerAccordionRow(this.splitOfferLinkSelector).attr("href",
f),1<b?(k.registerCounter(n.COUNTER_METRIC.SPLIT_OFFER_LINK_DISPLAYED),c.removeClass("aok-hidden")):c.addClass("aok-hidden"))};b.prototype._findWithinPickerAccordionRow=function(a){return f.findWithinPickerAccordionRow(this.id,a)};return{QuantityPickerLogic:b}});"use strict";q.when("jQuery","A","a-dropdown","a-modal","a-button","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics","abPricingFfqp_constants").register("abPricingFfqpV2_quantityPickerLogic",function(e,h,c,a,f,
g,l,n,p){function m(a,b){if(!g.dropdownContainsQuantity(a,b)){var c=document.createElement("option");c.value=b;c.text=b.toString();a.append(c)}}function b(a){this.id=a.id;this.buyBoxId=a.buyBoxId;this.buyingOptionStereotype=a.buyingOptionStereotype?a.buyingOptionStereotype:"";this.quantityHiddenFieldSelector=a.quantityHiddenFieldSelector;this.leastMinimumOrderQuantity=a.leastMinimumOrderQuantity;this.quantityPickerSelector=a.quantityPickerSelector;this.quantityDiscountTableSelector=this.quantityPickerSelector+
" .quantity-discount-table";this.quantityTextInputLabelSelector=this.quantityPickerSelector+" .quantity-text-input-label";this.buyboxAccordionContainerSelector=a.buyboxAccordionContainerSelector;this.loadMoreMessage=a.loadMoreMessage;this.fetchTheBestPricesMessage=a.fetchTheBestPricesMessage;this.qdtErrorMessage=a.qdtErrorMessage;this.includeRfqdLinkInNewPicker=a.includeRfqdLinkInNewPicker;this.requestForQuantityDiscountModalSelector=a.requestForQuantityDiscountModalSelector;this.requestForQuantityDiscountMessage=
a.requestForQuantityDiscountMessage;this.bbtLinkSelector=a.bbtLinkSelector;this.addToCartButtonSelector=a.addToCartButtonSelector;this.limitedAvailabilityMessageSelector=a.limitedAvailabilityMessageSelector;this.fetchQuantityDiscountTableCompleted=this.fetchQuantityDiscountTableStarted=this.isLoadMoreButtonClicked=!1;this.quantityTextInputSelector=this.quantityPickerSelector;this.quantityTextInputSelector+=" .quantity-text-input-with-label";this.loadMoreButtonForUncompetitiveTiersPresence=this.hasError=
!1;this.quantityPricingTableSummaryEnabled=a.quantityPricingTableSummaryEnabled;this.qdsForLockedMerchantEnabled=a.qdsForLockedMerchantEnabled;this.isAODLinkEnabled=!0===a.isAODLinkEnabled;this.quantityPickerUnavailabilityMessage=a.quantityPickerUnavailabilityMessage;this.quantityPickerUnavailabilityLink=a.quantityPickerUnavailabilityLink;this.splitOfferLinkSelector=a.splitOfferLinkSelector;this.splitOfferSectionSelector=a.splitOfferSectionSelector;this.amazonDevicesLinkEnabled=a.amazonDevicesLinkEnabled;
this.buyingInBulkBaseUrl=a.buyingInBulkBaseUrl;this.initializeQuantityAvailabilityVariables();this.wireUpSelectorBasedEvents();this.initializeQuantityHiddenField()}var d=g.PACKAGE_PREFIX+".PriceTableLoadError",q=g.PACKAGE_PREFIX+".QuantityPriceTableRender",u=g.PACKAGE_PREFIX+".QuantityPriceTableView",v=g.PACKAGE_PREFIX+".QuantityPriceTableRenderWithLockedMerchant",w=g.PACKAGE_PREFIX+".QuantityPriceTableViewWithLockedMerchant",x=g.PACKAGE_PREFIX+".QuantityPriceTableRenderWithUncompetitiveTiers",y=
g.PACKAGE_PREFIX+".QuantityPriceTableViewWithUncompetitiveTiers",z=g.PACKAGE_PREFIX+".QuantityPriceTableLoadMoreButtonClicked",A=g.PACKAGE_PREFIX+".QuantityPriceTableLoadMoreButtonClickedWithUncompetitiveTiers",B=g.PACKAGE_PREFIX+".QuantityPriceTableBBTLinkRender",C=g.PACKAGE_PREFIX+".QuantityPriceTableBBTLinkClick",D=g.PACKAGE_PREFIX+".QuantityPriceTableQuantityUnavailableLinkRender",E=g.PACKAGE_PREFIX+".QuantityPriceTableQuantityUnavailableLinkClick",F=g.PACKAGE_PREFIX+".QuantityPriceTableRFQDBBTLinkClick",
G=g.PACKAGE_PREFIX+".QuantityPriceTableAvailabilityMessageRender",H=g.PACKAGE_PREFIX+".QuantityPriceTableAvailabilityMessageView";b.prototype.initializeQuantityAvailabilityVariables=function(){this.hasAvailability=!0};b.prototype.wireUpSelectorBasedEvents=function(){var a=this;h.on(l.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_STARTED,function(b){b&&b!==a.id||a.handleFetchQuantityDiscountTableStarted()});h.on(l.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_COMPLETED,function(b,c){c&&c!==a.id||a.handleFetchQuantityDiscountTableCompleted(b)});
h.on(l.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_ERROR,function(b){b&&b!==a.id||a.handleFetchQuantityDiscountTableError()});h.on(l.EVENT__BUY_BOX_QUANTITY_CHANGED,function(b,c,e){a.handleQuantityChangedOnOtherBuyBox(b,c,e)});h.on(l.EVENT__QUANTITY_REFRESH_CHECK_STARTED,function(){a.handleQuantityRefreshCheckStarted()});h.on(l.EVENT__QUANTITY_REFRESH_CHECK_FINISHED,function(){a.handleQuantityRefreshCheckFinished()})};b.prototype.initializeQuantityHiddenField=function(){var a=l.singleton.currentQuantity,
b=parseInt(this.leastMinimumOrderQuantity);b&&b>a&&(a=b);this.updateQuantityHiddenField(a)};b.prototype.handleFetchQuantityDiscountTableCompleted=function(a){this.wireUpQuantityDiscountTableData(a);this.generateQuantityDiscountTable();this.fetchQuantityDiscountTableCompleted=!0};b.prototype.handleFetchQuantityDiscountTableStarted=function(){this.fetchQuantityDiscountTableStarted=!0};b.prototype.wireUpQuantityDiscountTableData=function(a){this.priceTiers=a;this.buildQptRenderMetrics();this.buildQptForLockedMerchantMetrics(v);
this.buildQptUncompetitiveTiersMetrics(x);this.buildAvailabilityMessageMetrics(G)};b.prototype.handleFetchQuantityDiscountTableError=function(){g.incrementMetricByOne(d);this.fetchQuantityDiscountTableStarted=!1;this.hasError=!0;this.generateQuantityDiscountTable()};b.prototype.wireUpReferenceBasedEvents=function(){var a=this,b=e(this.quantityTextInputSelector),c=e(this.quantityTextInputLabelSelector);c.click(function(){b.focus();b.click()});b.focus(function(){c.hide();"1"===this.value&&(this.value=
"");a.showQuantityDiscountTable()});b.blur(function(){""===this.value&&(this.value=l.singleton.currentQuantity);a.updateQuantityAndHideQuantityDiscountTable();c.show()});b.live("keypress input",function(b){a.isValidQuantityTextInputKeyCode(b);this.value=this.value.replace(/[^0-9]/g,"")});b.live("input",h.throttle(function(b){a.quantityAvailabilityCheckStart()},500));b.live("keydown",function(b){a.isValidQuantityTextPressKeyCode(b)});b.live("click change paste keyup",function(){a.clampQuantity(b.val());
a.generateQuantityDiscountTable()})};b.prototype.quantityAvailabilityCheckStart=function(){this.initializeQuantityAvailabilityVariables();var a=this.getCurrentQuantity(),b=this;l.singleton.notifyQuantityTyped(a,{currentBuyBoxId:this.buyBoxId,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled,callback:function(c){a===b.getCurrentQuantity()&&b.updateLimitedAvailabilityMessageVisibility(c.hasAvailability)}})};b.prototype.attachToDOM=
function(){this.wireUpReferenceBasedEvents();this.enableUI();l.singleton.leastMinimumOrderQuantity=this.leastMinimumOrderQuantity};b.prototype.isValidQuantityTextPressKeyCode=function(a){var b={left:37,up:38,right:39,down:40},c=k.event?a.keyCode:a.which,e;for(e in b)b[e]===c&&a.preventDefault()};b.prototype.isValidQuantityTextInputKeyCode=function(a){var b=k.event?a.keyCode:a.which;8!==b&&46!==b&&(13===b?(this.updateQuantityAndHideQuantityDiscountTable(),a.preventDefault()):(b=String.fromCharCode(b),
/\d/.test(b)||a.preventDefault()))};b.prototype.getCurrentQuantity=function(){var a=e(this.quantityTextInputSelector);return this.clampQuantity(a.val())};b.prototype.handleQuantityRefreshCheckStarted=function(){this.doesDOMExist()&&this.disableUI()};b.prototype.handleQuantityRefreshCheckFinished=function(){this.doesDOMExist()&&this.enableUI()};b.prototype.clampQuantity=function(a){var b=a;999<a&&(b=999);this.leastMinimumOrderQuantity!==r&&a<this.leastMinimumOrderQuantity&&(b=this.leastMinimumOrderQuantity);
return b};b.prototype.doesDOMExist=function(){return 0<e(this.quantityTextInputSelector).length};b.prototype.handleQuantityChangedOnOtherBuyBox=function(a,b,c){if(this.doesDOMExist()){a!==this.id&&parseInt(this.getCurrentQuantity())!==b&&(e(this.quantityTextInputSelector).val(b),this.updateQuantityHiddenField(b));var d=this;l.singleton.buyboxRefreshCheck({newQuantity:b,activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption,currentBuyBoxId:this.buyBoxId,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled,
callback:function(a){d.updateLimitedAvailabilityMessageVisibility(a.hasAvailability)}})}};b.prototype.showQuantityDiscountTable=function(){this.buildQptViewMetrics();this.fetchQuantityDiscountTableCompleted&&(this.buildQptForLockedMerchantMetrics(w),this.buildQptUncompetitiveTiersMetrics(y,this.getStartIndexOfQuantityDiscountTierTable(),3),this.buildAvailabilityMessageMetrics(H));var a=g.findAccordionRow(this.id);0<a.length&&(a.get(0).setAttribute("style","overflow:visible"),a=a.find(".a-accordion-inner.accordion-row-content"),
0<a.length&&a.get(0).setAttribute("style","overflow:visible"));a=e(this.buyboxAccordionContainerSelector);0<a.length&&(a.get(0).setAttribute("style","overflow:visible"),a=a.find(".a-accordion-inner"),0<a.length&&a.get(0).setAttribute("style","overflow:visible"));e(this.quantityPickerSelector).addClass("open")};b.prototype.hideQuantityDiscountTable=function(){e(this.quantityPickerSelector).removeClass("open")};b.prototype.updateQuantityAndHideQuantityDiscountTable=function(){var a=e(this.quantityDiscountTableSelector),
b=e(this.quantityTextInputSelector),c=this.clampQuantity(b.val());b.val(c);this.updateQuantityHiddenField(c);l.singleton.notifyQuantityChanged(c,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled});this.isLoadMoreButtonClicked=!1;this.hideQuantityDiscountTable();a.empty()};b.prototype.disableUI=function(){var a=e(this.quantityTextInputSelector),b=e(this.quantityDiscountTableSelector);a.attr("disabled",
!0);a.addClass("quantity-text-input-disabled");b.attr("disabled",!0)};b.prototype.enableUI=function(){var a=e(this.quantityTextInputSelector),b=e(this.quantityDiscountTableSelector);a.attr("disabled",!1);a.removeClass("quantity-text-input-disabled");b.attr("disabled",!1);this.hideQuantityDiscountTable()};b.prototype._isMobileQuantityHiddenFieldSelector=function(){return"string"===typeof this.quantityHiddenFieldSelector&&-1<this.quantityHiddenFieldSelector.indexOf("select#mobileQuantityDropDown")};
b.prototype._mobileQuantityHiddenFieldSelector=function(){return this.quantityHiddenFieldSelector.replace("input#quantity","select#mobileQuantityDropDown")};b.prototype.updateQuantityHiddenField=function(a){var b=this._findWithinPickerAccordionRow(this.quantityHiddenFieldSelector).first();b.is("select")&&(m(b,a),c.getSelect(b).val(a));b.val(a.toString());h.trigger(p.ADD_TO_CART_QUANTITY_CHANGE_EVENT,{nativeItemNode:b[0],value:a.toString()});"mobile"!==g.getPageState().platform||this._isMobileQuantityHiddenFieldSelector()||
(b=this._findWithinPickerAccordionRow(this._mobileQuantityHiddenFieldSelector()))&&b.is("select")&&(m(b,a),c.getSelect(b).val(a),b.val(a.toString()))};b.prototype.generateVisibleTiersList=function(a,b){for(var c=[],e=0,d=!1;b<this.priceTiers.length&&(this.isLoadMoreButtonClicked||3>e);){var f=this.priceTiers[b],g=!this.shouldHideFirstTier()&&0===e,h=f.isLowestAvailablePrice||d||2!=e;if(this.isLoadMoreButtonClicked||g||!f.isUncompetitive&&h)c.push({quantity:Math.max(a,f.quantity),savingsMessage:f.savingsMessage,
availabilityMessage:f.availabilityMessage,quantityPickerPriceText:f.quantityPickerPriceText,isDiscountUnlocked:0===e?0===b&&"BUSINESS_VOLUME_AWARE_PRICING"===f.program:!1,isFirstTier:g}),d=d||f.isLowestAvailablePrice,e++;b++}return c};b.prototype.findStartIndexOfQuantityDiscountTierTable=function(a){for(var b=0,c=this.priceTiers.length-1;b<=c;){var e=parseInt((b+c)/2),d;d=this.priceTiers[e].quantity;d=0===d.length?0:parseInt(d);if(d===a)return e;d>a?c=e-1:b=e+1}return Math.max(0,c)};b.prototype.getStartIndexOfQuantityDiscountTierTable=
function(){var a=this.getCurrentQuantity(),a=this.findStartIndexOfQuantityDiscountTierTable(a);return this.shouldHideFirstTier()&&1<this.priceTiers.length?a+1:a};b.prototype.shouldHideFirstTier=function(){var a=l.singleton.currentQuantity,b=e(this.quantityTextInputSelector);return!this.isAvailabilityMessagePresent()&&1===a&&""===b.val()};b.prototype.generateQuantityDiscountTable=function(){this.cleanOutQuantityDiscountTable();var a=e(this.quantityDiscountTableSelector);this.hasError?a.append(this.generateSingleTierDiscountTableUnorderedList(this.generateQdtErrorMessage())):
this.hasAvailability?this.priceTiers===r?a.append(this.generateFetchInProcessTableUnorderedList()):0===this.priceTiers.length?a.append(this.generateSingleTierDiscountTableUnorderedList()):a.append(this.generateQuantityDiscountTableUnorderedList()):a.append(this.generateQuantityUnavailableTableUnorderedList())};b.prototype.cleanOutQuantityDiscountTable=function(){e(this.quantityDiscountTableSelector).empty()};b.prototype.areUncompetitiveTiersPresent=function(a,b){var c=!1;if("undefined"!==typeof this.priceTiers)for("undefined"===
typeof a&&(a=0),b="undefined"===typeof b?this.priceTiers.length:Math.min(a+b,this.priceTiers.length),a+=1;a<b;a++)if(this.priceTiers[a].isUncompetitive){c=!0;break}return c};b.prototype.isAvailabilityMessagePresent=function(){return"undefined"!==typeof this.priceTiers&&0<this.priceTiers.length&&"undefined"!==typeof this.priceTiers[0].availabilityMessage};b.prototype.showLoadMoreButton=function(a){this.loadMoreButtonForUncompetitiveTiersPresence=this.areUncompetitiveTiersPresent(a);return!this.isLoadMoreButtonClicked&&
(3<this.priceTiers.length-a||this.loadMoreButtonForUncompetitiveTiersPresence)};b.prototype.showBuyingInBulkLink=function(a){return"undefined"!==typeof this.priceTiers[a].buyingInBulkLink};b.prototype.generateQuantityDiscountTableUnorderedList=function(){var a=this.getCurrentQuantity(),b=this.getStartIndexOfQuantityDiscountTierTable(),a=this.generateVisibleTiersList(a,b),c=document.createElement("ul");c.setAttribute("class","qdt-ul");for(var d=e(c),f=0;f<a.length;f++)d.append(this.generateQuantityDiscountTierOption(a[f]));
this.showLoadMoreButton(b)?d.append(this.generateLoadMoreOption()):this.showBuyingInBulkLink(b)?d.append(this.generateBuyingInBulkOption(b)):!0!==this.includeRfqdLinkInNewPicker&&"true"!==this.includeRfqdLinkInNewPicker||d.append(this.generateRequestForQuantityDiscountOption());return c};b.prototype.generateSingleTierDiscountTableUnorderedList=function(a){var b=this.getCurrentQuantity(),b=this.generateSingleTierQuantityList(b),c=document.createElement("ul");c.setAttribute("class","qdt-ul");for(var d=
e(c),f=0;f<b.length;f++)d.append(this.generateQuantityDiscountTierOption(b[f]));a&&d.append(a);return c};b.prototype.generateQuantityUnavailableTableUnorderedList=function(){var a=document.createElement("ul");a.setAttribute("class","qdt-ul");e(a).append(this.generateQuantityUnavailableOption());return a};b.prototype.generateSingleTierQuantityList=function(a){var b=[];b.push({quantity:Math.max(a,1),savingsMessage:null,availabilityMessage:null,quantityPickerPriceText:"",isDiscountUnlocked:!1,isFirstTier:!0});
return b};b.prototype.generateFetchInProcessTableUnorderedList=function(){var a=document.createElement("ul");a.setAttribute("class","qdt-ul");e(a).append(this.generateFetchInProcessOption());return a};b.prototype._removeINRSymbol=function(a){a=a.split("\x3e");return a[a.length-1]};b.prototype._populateOptionPriceContent=function(a,b){if("string"===typeof a.quantityPickerPriceText&&-1!==a.quantityPickerPriceText.search("currencyINR")){var c=document.createElement("span");c.setAttribute("class","currencyINR");
c.textContent="  ";b.appendChild(c);a=this._removeINRSymbol(a.quantityPickerPriceText);b.appendChild(document.createTextNode(a))}else b.textContent=a.quantityPickerPriceText};b.prototype.generateQuantityDiscountTierOption=function(a){var b=this,c=document.createElement("li"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div");a.isFirstTier?(e.textContent=a.quantity,c.setAttribute("class","qdt-dropdown-item qdt-active")):(e.textContent=a.quantity+"+",c.setAttribute("class",
"qdt-dropdown-item"));b._populateOptionPriceContent(a,f);e.setAttribute("class","option-tier");f.setAttribute("class","option-price");a.availabilityMessage!=r?this.generateTierWithAvailabilityMessageContent(d,e,f,a.availabilityMessage):a.savingsMessage!=r?this.generateTierWithSavingsMessageContent(d,e,f,a):(d.setAttribute("class","qdt-dropdown-option-no-saving-message"),d.appendChild(e),d.appendChild(f));c.appendChild(d);c.addEventListener("mousedown",function(){b.handleQuantityDiscountTableOptionClicked(a.quantity)});
return c};b.prototype.generateTierWithAvailabilityMessageContent=function(a,b,c,d){var e=document.createElement("div");e.textContent=d;e.setAttribute("class","option-availability-message");this.generateTierWithMessageContent(a,b,c,e)};b.prototype.generateTierWithSavingsMessageContent=function(a,b,c,d){var f=document.createElement("div");f.textContent=d.savingsMessage;d.isDiscountUnlocked?(d=document.createElement("div"),d.setAttribute("class","option-unlocked-saving-message-icon"),e(f).prepend(d),
f.setAttribute("class","option-unlocked-saving-message")):f.setAttribute("class","a-color-tertiary option-saving-message");this.generateTierWithMessageContent(a,b,c,f)};b.prototype.generateTierWithMessageContent=function(a,b,c,d){var e=document.createElement("div");a.setAttribute("class","qdt-dropdown-option-regular");e.setAttribute("class","option-price-and-message");e.appendChild(c);e.appendChild(d);a.appendChild(b);a.appendChild(e)};b.prototype.generateLoadMoreOption=function(){var a=this,b=document.createElement("li"),
c=document.createElement("div");c.textContent=this.loadMoreMessage;b.setAttribute("class","qdt-dropdown-item");c.setAttribute("class","qdt-dropdown-option-load-more");b.setAttribute("id","qdt-dropdown-load-more");b.appendChild(c);b.addEventListener("mousedown",function(b){a.handleLoadMoreOptionClicked(b)});return b};b.prototype.generateRequestForQuantityDiscountOption=function(){var a=this,b=document.createElement("a");b.textContent=this.requestForQuantityDiscountMessage;b.setAttribute("class","a-link-normal qdt-dropdown-request-for-quantity-discount");
b.addEventListener("mousedown",function(b){a.handleRequestForQuantityDiscountOptionClicked(b)});return this.generateLinkOption(b)};b.prototype.generateBuyingInBulkOption=function(a){var b=this;a={container:{element:document.createElement("div"),class:"qdt-dropdown-buying-in-bulk"},link:{element:document.createElement("a"),class:"a-link-normal qdt-dropdown-buying-in-bulk-link",text:b.priceTiers[a].buyingInBulkLink},message:{element:document.createElement("div"),class:"qdt-dropdown-buying-in-bulk-message",
text:b.priceTiers[a].buyingInBulkMessage}};for(var c in a)a[c].element.setAttribute("class",a[c].class),"undefined"!==typeof a[c].text&&(a[c].element.textContent=a[c].text);a.container.element.appendChild(a.link.element);a.container.element.appendChild(a.message.element);a.link.element.addEventListener("mousedown",function(a){b.handleBuyingInBulkOptionClicked(b.bbtLinkSelector,C,a)});n.registerCounter(B);return this.generateLinkOption(a.container.element)};b.prototype.generateQuantityUnavailableOption=
function(){var a=this,b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("a");c.innerHTML=this.quantityPickerUnavailabilityMessage;d.textContent=this.quantityPickerUnavailabilityLink;b.setAttribute("class","a-link-normal qdt-dropdown-quantity-unavailable");c.setAttribute("class","qdt-dropdown-quantity-unavailable-message");d.setAttribute("class","a-link-normal qdt-dropdown-quantity-unavailable-link");b.appendChild(c);b.appendChild(d);d.addEventListener("mousedown",
function(b){a.handleQuantityUnavailableOptionClicked(b)});n.registerCounter(D);return this.generateLinkOption(b)};b.prototype.generateLinkOption=function(a){var b=document.createElement("li"),c=document.createElement("div");b.setAttribute("class","qdt-dropdown-item qdt-inactive");c.setAttribute("class","qdt-dropdown-option-link");c.appendChild(a);b.appendChild(c);return b};b.prototype.generateFetchInProcessOption=function(){var a=document.createElement("li"),b=document.createElement("div"),c=document.createElement("div"),
d=document.createElement("div"),e=document.createElement("img");e.src="https://m.media-amazon.com/images/G/01/AmazonBusiness/vapLoading3._CB1556651073_.gif";c.textContent=this.fetchTheBestPricesMessage;e.setAttribute("class","fetching-in-progress-img");a.setAttribute("class","qdt-dropdown-item qdt-inactive");b.setAttribute("class","qdt-dropdown-option-fetch-in-progress");d.appendChild(e);b.appendChild(d);b.appendChild(c);a.setAttribute("id","qdt-dropdown-fetch-in-progress");a.appendChild(b);return a};
b.prototype.generateQdtErrorMessage=function(){var a=document.createElement("li"),b=document.createElement("div");if(this.isAODLinkEnabled){var c=document.createElement("span");c.setAttribute("class","a-declarative");c.setAttribute("data-action","show-all-offers-display");c.setAttribute("data-show-all-offers-display","{}");c.innerHTML=this.qdtErrorMessage;b.appendChild(c)}else b.innerHTML=this.qdtErrorMessage;a.setAttribute("class","qdt-dropdown-item qdt-inactive");b.setAttribute("class","qdt-dropdown-option-request-for-olp");
a.setAttribute("id","qdt-dropdown-error-message");a.appendChild(b);var d=b.getElementsByTagName("a")[0];d.addEventListener("mousedown",function(a){d.click()});return a};b.prototype.handleLoadMoreOptionClicked=function(a){this.isLoadMoreButtonClicked=!0;this.buildLoadMoreButtonMetrics();this.generateQuantityDiscountTable();a.preventDefault()};b.prototype.handleQuantityDiscountTableOptionClicked=function(a){e(this.quantityTextInputSelector).val(a);this.updateQuantityAndHideQuantityDiscountTable();e(this.quantityTextInputLabelSelector).show()};
b.prototype.handleRequestForQuantityDiscountOptionClicked=function(b){var c=e(this.requestForQuantityDiscountModalSelector).find(".a-declarative");(c=a.get(c))&&c.show();this.handleBuyingInBulkOptionClicked(this.requestForQuantityDiscountModalSelector,F,b)};b.prototype.handleBuyingInBulkOptionClicked=function(a,b,c){var d=this.getCurrentQuantity();if(this.amazonDevicesLinkEnabled)n.registerCounter(b),l.singleton.notifyBuyingInBulkOptionClicked(d),k.location.href=this.buyingInBulkBaseUrl;else if(a=
document.querySelector(a+" .a-link-normal"))n.registerCounter(b),l.singleton.notifyBuyingInBulkOptionClicked(d),a.click();c.preventDefault()};b.prototype.handleQuantityUnavailableOptionClicked=function(a){n.registerCounter(E);var b=this.getCurrentQuantity();this.quantityUnavailableOptionClicked(b);a.preventDefault()};b.prototype.quantityUnavailableOptionClicked=function(a){a=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:k.location.protocol+"//"+k.location.host+l.singleton.getLimitedAvailabilityUrl(a);
k.location.href=a};b.prototype.updateLimitedAvailabilityMessageVisibility=function(a){this.hasAvailability=a;this.generateQuantityDiscountTable();this.updateBuyboxLimitedAvailabilityMessageVisibility()};b.prototype.updateBuyboxLimitedAvailabilityMessageVisibility=function(){var a=this._findWithinPickerAccordionRow(this.addToCartButtonSelector).closest(".a-button"),b=f(a),a=this._findWithinPickerAccordionRow(this.splitOfferSectionSelector);if(this.hasAvailability)e(this.limitedAvailabilityMessageSelector).addClass("aok-hidden"),
b.enable(),a.addClass("aok-hidden");else{e(this.limitedAvailabilityMessageSelector).removeClass("aok-hidden");b.disable();var b=this.getCurrentQuantity(),c;c=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:l.singleton.getLimitedAvailabilityUrl(b);this._findWithinPickerAccordionRow(this.splitOfferLinkSelector).attr("href",c);1<b?(n.registerCounter(p.COUNTER_METRIC.SPLIT_OFFER_LINK_DISPLAYED),a.removeClass("aok-hidden")):a.addClass("aok-hidden")}};b.prototype.buildQptRenderMetrics=function(){var a=
{};a.counter=q+(this.quantityPricingTableSummaryEnabled?".QPTS":"");n.register(a)};b.prototype.buildQptViewMetrics=function(){var a={};a.counter=u+(this.quantityPricingTableSummaryEnabled?".QPTS":"");n.register(a)};b.prototype.buildQptForLockedMerchantMetrics=function(a){this.qdsForLockedMerchantEnabled&&n.registerCounter(a)};b.prototype.buildQptUncompetitiveTiersMetrics=function(a,b,c){this.areUncompetitiveTiersPresent(b,c)&&n.registerCounter(a)};b.prototype.buildLoadMoreButtonMetrics=function(){this.loadMoreButtonForUncompetitiveTiersPresence?
n.registerCounter(A):n.registerCounter(z)};b.prototype.buildAvailabilityMessageMetrics=function(a){this.isAvailabilityMessagePresent()&&n.registerCounter(a)};b.prototype._findWithinPickerAccordionRow=function(a){return g.findWithinPickerAccordionRow(this.id,a)};return{QuantityPickerLogicV2:b}});"use strict";q.when("jQuery","A","ready").execute(function(e,h){function c(a){k.ue!==r&&k.ue.count!==r&&k.ue.count(a,(k.ue.count(a)||0)+1)}function a(a,c,e){null===e&&(e="");var f=new RegExp("\\b("+c+"\x3d).*?(\x26|#|$)");
if(0<=a.search(f))return a.replace(f,"$1"+e+"$2");a=a.replace(/[?#]$/,"");return a+(0<a.indexOf("?")?"\x26":"?")+c+"\x3d"+e}function f(){return h.state("ABPricingFreeFormQuantityPicker")}function g(a,c){return 0!==a.find('option[value\x3d"'+c.toString()+'"]').length}function l(a){return e("[id^\x3d"+a+"]").closest("[data-a-accordion-row-name]")}function n(a,c){a=l(a);return 0<a.length?a.find(c):e(c)}function p(){m||f()===r||(m=!0,q.register("abPricingFfqp_utils",function(){return{PACKAGE_PREFIX:"ABPricingFreeFormQuantityPicker",
getPageState:f,incrementMetricByOne:c,replaceUrlParam:a,dropdownContainsQuantity:g,findAccordionRow:l,findWithinPickerAccordionRow:n}}))}var m=!1;p();q.register("abPricingFfqp_lazyInitializer",function(){return{tryInitialize:p}})})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("ABPricingQuantityPricingTableSummaryAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","jQuery","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics").execute(function(a,b,c,d,g){a.declarative("b2bhawks-quantity-pricing-table-summary-click","click",function(a){var b=a.data.selectedQuantity,e="",f=a.data.deviceType,h=a.data.bestTier,
k=a.data.recommendedTier;h&&k?g.registerCounter("AB_QR_QPTS_RECOMMENDED_AND_BEST_TIER"):k?g.registerCounter("AB_QR_QPTS_RECOMMENDED_TIER"):h?g.registerCounter("AB_QR_QPTS_BEST_TIER"):g.registerCounter("AB_QR_QPTS_DEFAULT_TIER");if("mobile"===f||"mobileApp"===f)e+="#b2bhawks-quantity-pricing-table-summary";e={anchorToDiv:e};f="RZvfv//HxDF+O5021pAnSA\x3d\x3d";c.getPageState().offerCXConsistencyWeblabEnabled&&"undefined"!==typeof a.data.selectedBuyingOption&&0<a.data.selectedBuyingOption.length&&(f=
a.data.selectedBuyingOption);e.selectedBuyingOption=f;d.singleton.reloadPageForQuantity(b,e)})})});
/* ******** */
