(function(p){var b=window.AmazonUIPageJS||window.P,u=b._namespace||b.attributeErrors,g=u?u("AmazonDevicesDetailPageLegacyAssets",""):b;g.guardFatal?g.guardFatal(p)(g,window):g.execute(function(){p(g,window)})})(function(p,b,u){b.KDS||(b.KDS={common:{},util:{}});b.KDS.common||(b.KDS.common={});b.KDS.util||(b.KDS.util={});p.when("A").register("kindleDeviceCommonJS",function(g){var a=g.$;b.KDS.util.SmoothScroll={run:function(c,d,e){c.length&&a(document.body).animate({scrollTop:c.offset().top},400,function(){d&&
(location.hash="#"+d);e&&b.KDS.ajax.RefTag.send(e)})}}});p.when("A").execute(function(b){var a=b.$;a("#bxgy_seller_exposed").click(function(){bundle_toggle_seller_info();return!1}).show();bundle_toggle_seller_info=function(){var c=a("ul.bxgyInfoBlock");c.is(":hidden")?(c.show(200,function(){loadAvailability()}),a("#bxgy_seller_exposed").text(bundle_hideDetailsStr)):(c.hide(200),a("#bxgy_seller_exposed").text(bundle_showDetailsStr))};loadAvailability=function(){var c=[];a("#bxgySellerInfoBlock p.bxgySellerLoading").each(function(){var e=
a(this).attr("id"),d=e.substring(0,e.length-10),b=d.indexOf("-");e=d.substring(0,b);d=d.substring(b+1);c.push({asin:e,merchant:d})});if(0<c.length){for(var d="/gp/fbt-ajax/shipping/shipping-handler.html/ref\x3dpd_bxgy_ship?id\x3d",e=0;e<c.length;e++)0!=e&&(d+=","),d+=c[e].asin+":"+c[e].merchant;a.ajax({url:d+"\x26refTag\x3dpd_bxgy_shipping",dataType:"json",cache:!1,error:function(d,e,b){for(d=0;d<c.length;d++)a("#"+c[d].asin+"-"+c[d].merchant+"sellerInfo").remove(),a("#"+c[d].asin+"-"+c[d].merchant+
"sellerInfoError").show()},success:function(d,e){for(e=0;e<c.length;e++)a("#"+c[e].asin+"-"+c[e].merchant+"sellerInfo").replaceWith(d["bxgy"+c[e].asin])}})}}});p.when("A","odsRefTagUtils").register("kindleBBPopover",function(g,a){var c=g.$,d={registeredImages:{},registerImage:function(c,a){d.registeredImages[c]={image:a};(new Image).src=a},displayImage:function(a,b,f,l){f==u&&(f=!1);l==u&&(l=!1);var e="",k="";1==f&&(e="bndl");1==l&&(k="aui");f=d.registeredImages[b];a=c("#bb_extra_prodImage_"+e+k+
a+" img").get(0);f&&a&&f.image!=a.src&&(a.src=f.image,b=c("#"+b),0!=b.length&&(c(b).siblings().css("border","1px solid #999999"),c(b).css("border","1px solid #990000")))},refTag:{},asinCache:{},selectedAsin:{},displayedAsin:{},originalAsin:{},variationInfo:{},titleVariation:{},unloadedDynamicPopovers:{},swatchHoverOver:function(a,k){b.clearTimeout(d.hoverOutTimer);c(a).children("div").each(function(a,d){"swatchSelect"!=c(d).attr("class")&&c(d).removeClass("swatchAvailable").addClass("swatchHover")});
a=c(a).attr("id");a=a.substr(0,a.indexOf("_"));d.updatePopoverDisplay(k,a)},swatchHoverOut:function(a,k){c(a).children("div").each(function(a,d){"swatchSelect"!=c(d).attr("class")&&c(d).removeClass("swatchHover").addClass("swatchAvailable")});d.hoverOutTimer=b.setTimeout(function(){d.updatePopoverDisplay(k,d.selectedAsin[k]);c("#bb_extra_feature_"+k+"_title").html(d.titleVariation[k][d.selectedAsin[k]].titleURL)},100)},swatchClick:function(a,b){var e=c(a).attr("id");e=e.substr(0,e.indexOf("_"));c(a).parent().find(".swatchSelect").each(function(a,
d){c(d).removeClass("swatchSelect").addClass("swatchAvailable");c(d).find(".selectedArrow").css("display","none")});c(a).children("div").removeClass("swatchAvailable").removeClass("swatchHover").addClass("swatchSelect").find(".selectedArrow").css("display","block");d.selectedAsin[b]=e;c("#bb_extra_feature_"+b+"_title").html(d.titleVariation[b][e].titleURL);null!=d.asinCache[e]&&null!=d.asinCache[e]["data/offer"]&&d.updateBuyBox(b)},updatePopoverDisplay:function(a,b){if(b!=d.displayedAsin[a]){d.displayedAsin[a]=
b;null!=d.asinCache[b]&&null!=d.asinCache[b]["data/offer"]||c("#bb_extra_feature_"+a+"_addToOrder").css("opacity","0.4").css("filter","alpha(opacity\x3d40)").find("a").attr("href","javascript:void(0)");for(var e in d.variationInfo[a])if(e==b){var k;for(k in d.variationInfo[a][e]){var h=k;var g=d.variationInfo[a][e][k];c("#"+a+"_selected_"+h+" .variationLabel").text(g)}null==d.asinCache[b]?(c.ajax({cache:!1,data:{asin:b,sId:d.sessionId,baseRef:d.refTag[d.originalAsin[a]]},dataType:"json",success:function(c,
e){if(c&&0==c.error){for(var k in c)"error"!=k&&(d.asinCache[k]=c[k]);b==d.displayedAsin[a]&&d.doUpdate(a,b)}else d.asinCache[b]=null},type:"GET",url:"/gp/digital/fiona/ajax/buyBoxTwister/ref\x3d"+d.refTag[d.originalAsin[a]]+"_bbpvh"}),d.asinCache[b]="Loading"):"Loading"!=d.asinCache[b]&&d.doUpdate(a,b);break}}},doUpdate:function(a,b,f){for(var e in d.asinCache[b])if(f||"variations"!=e)"data/bundleProductImages"==e?d.placeBundleProductImages(d.asinCache[b][e]):"data/bundleAltImages"==e?d.placeBundleAltImages(d.asinCache[b][e]):
c("#bb_extra_feature_"+a+"_"+e).html(d.asinCache[b][e]);d.updateBuyBox(a);c("#bb_extra_feature_"+a+"_addToOrder").css("opacity","1.0").css("filter","alpha(opacity\x3d100)").find("a").attr("href",'javascript:BBPopover.addToOrder("'+a+'")');d.doUpdateCallback&&"function"==typeof d.doUpdateCallback&&d.doUpdateCallback()},show:function(a){d.unloadedDynamicPopovers[a]&&(d.unloadedDynamicPopovers[a](),d.unloadedDynamicPopovers[a]=null)},registerDynamicPopover:function(a,c){d.unloadedDynamicPopovers[a]=
c},addToOrder:function(a){var b=c("#bb_extra_"+d.originalAsin[a]).parents(".ap_popover");0<b.length&&b.find(".ap_close").trigger("click");b=c("#bb_extra_"+d.originalAsin[a]).parents(".a-popover-wrapper");0<b.length&&b.find("button.a-button-close").trigger("click");b=c("#bb_extra_bndl"+d.originalAsin[a]);0<b.length&&b.parents(".ap_popover").find(".ap_close").trigger("click");b=c("#bb_chk_"+d.originalAsin[a]+"_offerId");b.attr("checked")||b.trigger("click");d.checkboxChecked(1,d.refTag[d.originalAsin[a]]+
"p")},updateBuyBox:function(a){var b=d.selectedAsin[a];if(d.variationInfo[a]){for(var e in d.variationInfo[a][b])var l=d.variationInfo[a][b][e];c("#bb_lm_"+d.originalAsin[a]+"_var").text(l);c("#bb_chk_"+d.originalAsin[a]+"_var").val(l)}l=c("#bb_lm_"+d.originalAsin[a]+"_price");0<l.length&&(e="",0<l.children("del").eq(0).length&&(e="\x3cdel\x3e\x3cspan class\x3d'a-color-secondary a-text-strike'\x3e"+d.asinCache[b]["data/offer"].listPrice+"\x3c/span\x3e\x3c/del\x3e\x26nbsp"),e+=d.asinCache[b]["data/offer"].buyingPrice,
l.html(e));l=d.asinCache[b]["data/offer"].offerId;c("#bb_chk_"+d.originalAsin[a]+"_offerId").attr("value",l);c("#bb_chk_"+d.originalAsin[a]+"_asin").val(b)},checkboxChecked:function(c,b){a.send(b+(c?"_chk":"_uchk"))},giftStatusChanged:function(a){var b=c("#bb_chk_ku_replacement_item"),d=b.siblings("input[name^\x3d'asin']"),e=b.siblings("input[name^\x3d'offeringID']");b.length&&a!==u&&(a?(d.val(b[0].dataset.replacementAsin),e.val(b[0].dataset.replacementOfferingId)):(d.val(b[0].dataset.originalAsin),
e.val(b[0].dataset.originalOfferingId)))},placeBundleProductImages:function(a){for(var b in a)c("#bb_extra_feature_bndl"+b+"_productImage").html(a[b])},placeBundleAltImages:function(a){var b=a.altImages,d=null,e;for(e in b)d=c("#bb_extra_feature_bndl"+e+"_altImages"),d.html(b[e]);null!=d&&c(d).append(a.javascript)}};b.BBPopover=d});p.when("A").register("kindleBuyboxWarrantyJS",function(g){var a=g.$;"undefined"==typeof b.KDS&&(b.KDS={});"undefined"==typeof b.KDS.buybox&&(b.KDS.buybox={});b.KDS.buybox.twisterInit=
function(){b.KDS.buybox.warrantyMap=[];b.KDS.buybox.previousID=a("#kbbExtraItemsBottom .kwar:visible").attr("id");DetailPageFramework.registerCallback("asin_select","kindle-buy-box-messaging",function(c){a("#kbbExtraItemsBottom .kwar").hide();c=a("#kbbExtraItemsBottom ."+c.current_asin).attr("id");a("#"+c).show();"undefined"!=typeof c&&c!=b.KDS.buybox.previousID?("undefined"!=typeof b.KDS.buybox.previousID&&(b.KDS.buybox.warrantyMap[b.KDS.buybox.previousID]=a("#"+b.KDS.buybox.previousID+" td input").attr("checked"),
a("#"+b.KDS.buybox.previousID+" td input:checkbox").attr("checked",!1)),b.KDS.buybox.warrantyMap[c]?a("#"+c+" td input:checkbox").click():b.KDS.buybox.warrantyMap[c]=!1,b.KDS.buybox.previousID=c):"undefined"!=typeof b.KDS.buybox.previousID&&"undefined"==typeof c&&(b.KDS.buybox.warrantyMap[b.KDS.buybox.previousID]=a("#"+b.KDS.buybox.previousID+" td input").attr("checked"),a("#"+b.KDS.buybox.previousID+" td input:checkbox").attr("checked",!1),b.KDS.buybox.previousID=c)})}});p.when("A","legacy-popover").execute(function(b){var a=
b.$;a(".kindle-auto-popover").each(function(){var c=a(this),b=c.children(".kap-localContent").attr("title");if(!b)throw Error("no localContent Id  has provided.");var e=c.children(".kap-popoverDelay").attr("title");e=parseInt(e,10);var k=c.children(".kap-width").attr("title");k=parseInt(k,10)||0;var f=c.children(".kap-trigger").attr("title"),l={localContent:"#"+b,showCloseButton:"true"==c.children(".kap-showCloseButton").attr("title"),width:k,location:c.children(".kap-location").attr("title")||"centered",
closeText:c.children(".kap-closeText").attr("title")||"Close",title:c.children(".kap-title").attr("title")||null,closeEventInclude:c.children(".kap-closeEventInclude").attr("title")||"CLICK_OUTSIDE",modal:"true"==c.children(".kap-modal").attr("title")};0<=e?setTimeout(function(){a.AmazonPopover.displayPopover(l)},e):f&&a(f).amazonPopoverTrigger(l)})});b.KDS||(b.KDS={common:{},util:{}});p.when("A","Airy").register("kindleDeviceJS",function(g){g=g.$;var a=document.getElementById("kds-popover-mask");
a||(a=document.createElement("div"),a.id="kds-popover-mask",a.style.position="absolute",a.style.zIndex="9000",a.style.backgroundColor="#000",a.style.display="none",a.style.width="100%",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.opacity="0.7",a.style.filter="alpha(opacity\x3d70)",document.body.insertBefore(a,document.body.firstChild));var c=document.getElementById("kds-popover");c||(c=document.createElement("div"),c.id="kds-popover",c.style.position="absolute",c.style.width="960px",
c.style.zIndex="9999",c.style.top="-9999px",c.style.margin="0% 50%",document.body.insertBefore(c,a));var d=document.getElementById("airy-container");d||(d=document.createElement("div"),d.id="airy-container",c.appendChild(d));b.KDS.MediaModal=function(a){function e(e){m=!1;q=e.height;v=e.margin;n=e.minWidth;z=e.strings;y=!0;g=e.airyConfig;c.style.height=q;d.style.height=q;a(document).keyup(function(a){27==a.keyCode&&f()});a(b).resize(l);a("#kds-popover-mask").click(f);b.KDS.MediaModal.airyInstance||
(g.streamingUrls=A,g.isShowFirstFrameWhenReadyEnabled=!0,g.bindings={videounsupported:function(){y=!1}},b.KDS.MediaModal.airyInstance=Airy.embed(g),m=!0,null!=w&&h(w,!0))}function f(){b.KDS.MediaModal.airyInstance.pause();a("#kds-popover-mask").hide();a("#kds-popover").css({top:"-9999px"})}function l(){var c=a(document).height(),d=a(document).width(),e=a(b).width();e=e-2*v>n?e-2*v:n;var k=e/-2;a(b).width()<=n&&(k+=(n-a(b).width())/2);a("#kds-popover").css({width:e+"px",left:k+"px"});a("#airy-container").css({width:e+
"px"});a("#kds-popover-mask").css({width:d,height:c})}function h(c,d){if(!y)alert(z["kds-mediapopover-videounsupported"]),f();else if(m){var e=a(b).height(),n=a(document).scrollTop();a("#kds-popover").css({top:e/2-parseFloat(a("#airy-container").css("height").replace("px",""))/2+n});l();a("#kds-popover-mask").show();r!=c&&(r=c,b.KDS.MediaModal.airyInstance.loadMedia({mediaSourceInfo:c}));b.KDS.MediaModal.airyInstance.play({isAsync:d})}}var g,m,r,q,v,n,w,A=[],y,z;return{createVideoPopover:function(c){for(t in c.triggers){var b=
c.triggers[t];a(b.selector).attr("data-videoUrl",b.videoUrl);A.push(b.videoUrl)}e(c);for(t in c.triggers){b=c.triggers[t];a(".kmp-image-cache").append("\x3cimg src\x3d'"+b.hoverImage+"' /\x3e\x3cimg src\x3d'"+b.normalImage+"' /\x3e");var d=a(b.selector);d.css({cursor:"pointer"}).bind("click",function(c){h(a(this).attr("data-videoUrl"),!1)});if(b.hoverImage||b.hoverImageFunction){var n=d.attr("src");b.normalImage&&(n=b.normalImage);if(b.hoverImageFunction){var k=b.hoverImageFunction;d.bind("mouseenter",
function(){a(this).attr("src",k())})}else d.bind("mouseenter",function(){a(this).attr("src",b.hoverImage)});if(b.normalImageFunction){var f=b.normalImageFunction;d.bind("mouseleave",function(){a(this).attr("src",f())})}else d.bind("mouseleave",function(){a(this).attr("src",n)})}}},playVideo:function(a){h(a,!1)},createPlayWhenReady:function(a){for(var c in a.playWhenReady)b.location.hash.substring(1)==a.playWhenReady[c].hash&&(w=a.playWhenReady[c].video)},init:e}}(g)});p.when("A").register("kindleTabsJS",
function(g){var a=g.$;b.KDS||(b.KDS={});b.KDS.common||(b.KDS.common={});g=function(c){var d=this;this.containerId=c.containerId;this.tabChangeCallback=c.tabChangeCallback;this.leftSpacerMargin=c.leftSpacerMargin;a("#"+this.containerId+" .kindleTab-tab").unbind("click").click(function(c){c.preventDefault();d.updateContent.call(d,a(this))}).mouseover(function(){a(this).addClass("kindleTab-tab-hover")}).unbind("keypress").keypress(function(c){"13"==c.keyCode&&(c.preventDefault(),d.updateContent.call(d,
a(this)))}).mouseout(function(){a(this).removeClass("kindleTab-tab-hover")});a(b).resize(function(){d.resizeRightSpacer.call(d)});this.resizeRightSpacer()};g.prototype.updateContent=function(a){var c=a.attr("id"),b=a.attr("content-id");this.activateTab(c,b);a.find(".cBoxInner").blur();"function"==typeof this.tabChangeCallback&&this.tabChangeCallback.apply(this,[c,b])};g.prototype.activateTab=function(c,b){var d="#"+this.containerId;c="#"+c;b="#"+b;a(d+" .kindleTab-active-tab").addClass("kindleTab-inactive-tab").removeClass("kindleTab-active-tab").children(".secondary").addClass("primary").removeClass("secondary");
a(c).addClass("kindleTab-active-tab").removeClass("kindleTab-inactive-tab").children(".primary").addClass("secondary").removeClass("primary");a(d+" .kindleTab-active-content").addClass("kindleTab-inactive").removeClass("kindleTab-active-content");a(b).addClass("kindleTab-active-content").removeClass("kindleTab-inactive")};g.prototype.resizeRightSpacer=function(){var c=a("#"+this.containerId+" .kindleTab-right-spacer");c.width(c.parent().parent().parent().parent().parent().width()-this.leftSpacerMargin)};
b.KDS.common.Shoveler=g});p.when("A").execute(function(b){var a=b.$;a.fn.ie6ImgPngFix=function(){!a.browser.msie||"Microsoft Internet Explorer"!=navigator.appName||4!=parseInt(navigator.appVersion)||-1==navigator.appVersion.indexOf("MSIE 5.5")&&-1==navigator.appVersion.indexOf("MSIE 6")||a(this).find("img[src$\x3d.png]").each(function(){var c="",b="",e=a(this).attr("id")?'id\x3d"'+a(this).attr("id")+'" ':"",k=a(this).attr("class")?'class\x3d"'+a(this).attr("class")+'" ':"",f=a(this).attr("title")?
'title\x3d"'+a(this).attr("title")+'" ':"",l=a(this).attr("alt")?'alt\x3d"'+a(this).attr("alt")+'" ':"",h=a(this).attr("align")?"float:"+a(this).attr("align")+";":"",g=a(this).parent().attr("href")?"cursor:hand;":"";this.style.border&&(c+="border:"+this.style.border+";",this.style.border="");this.style.padding&&(c+="padding:"+this.style.padding+";",this.style.padding="");this.style.margin&&(c+="margin:"+this.style.margin+";",this.style.margin="");var m=this.style.cssText;b=b+("\x3cspan "+e+k+f+l)+
('style\x3d"position:relative;white-space:pre-line;display:inline-block;background:transparent;'+h+g)+("width:"+a(this).width()+"px;height:"+a(this).height()+"px;");b+="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+a(this).attr("src")+"', sizingMethod\x3d'scale');";b+=m+'"\x3e\x3c/span\x3e';""!=c&&(b='\x3cspan style\x3d"position:relative;display:inline-block;'+c+g+"width:"+a(this).width()+"px;height:"+a(this).height()+'px;"\x3e'+b+"\x3c/span\x3e");a(this).hide();a(this).after(b)});
return a};a(document).ready(function(){a("#kindle-compare2").ie6ImgPngFix()})});b.ODSE||(b.ODSE={common:{},util:{}});b.ODSE.Popover||(b.ODSE.Popover={});p.when("A","legacy-popover").register("popoverWidgetJS",function(g){var a=g.$;var c={closeText:"Close",closeEventInclude:"CLICK_OUTSIDE",location:"centered"};b.ODSE.Popover.Create=function(b){if(b&&b.popoverObject){var d=b.popoverObject.id;a.extend(c,b.popoverObject.options);a("#"+d).amazonPopoverTrigger(c)}}});p.when("A","legacy-popover").execute(function(b){var a=
b.$,c="";c="https://www.att.com/maps/3rdparty/store-locator.html?zip\x3d";b='\x3ciframe sandbox id\x3d"store-frame" class\x3d"show-frame" data-src\x3d"'+c+'" src\x3d"" \x3e\x3c/iframe\x3e';a("#search-att-store").amazonPopoverTrigger({loadingContent:"Please Wait ..",literalContent:b,modal:"true",title:"Store Locator",width:1100,closeEventInclude:"CLICK_OUTSIDE",location:"centered",onShow:function(){var b=c;a("#store-input-zip").val()&&(b+=a("#store-input-zip").val());a("#store-frame").attr("src",b)}});
a("#store-finder-container").keypress(function(b){13==b.which&&a("#search-att-store").trigger("click")});a("#store-input-zip").keyup(function(){var b=a(this),c=b.val();c&&8<c.length?b.css("width","10em"):b.css("width","5em")})});p.when("A").execute(function(g){var a=g.$;b.TSAjaxCartRequest=function(b,c,k,f){a.ajax({cache:!1,data:{asin:c,sId:k,action:b},dataType:"json",success:function(a,b){a&&0==a.error&&f(a.asin)},type:"GET",url:"/gp/digital/fiona/ajax/modify-cart"})};var c=[];b.TSAjaxCartAdd=function(a,
b){c[a]="adding";TSAjaxCartUpdateStatus(a);TSAjaxCartRequest("add",a,b,TSAjaxCartAddComplete)};b.TSAjaxCartAddComplete=function(a){c[a]="added";TSAjaxCartUpdateStatus(a)};b.TSAjaxCartRemove=function(a,b){c[a]="removing";TSAjaxCartUpdateStatus(a);TSAjaxCartRequest("remove",a,b,TSAjaxCartRemoveComplete)};b.TSAjaxCartRemoveComplete=function(a){delete c[a];TSAjaxCartUpdateStatus(a)};b.TSAjaxCartUpdateStatus=function(b){if(null==b)for(var d in c)TSAjaxCartUpdateStatus(d);a(".AjaxCartAdd_"+b).each(function(a,
d){d.style.display=c[b]?"none":""});a(".AjaxCartProcessing_"+b).each(function(a,d){d.style.display="adding"==c[b]||"removing"==c[b]?"":"none"});a(".AjaxCartRemove_"+b).each(function(a,d){d.style.display="added"==c[b]?"":"none"})}});p.when("A").execute(function(g){var a=g.$;b.VideoFooter=function(){};VideoFooter.mouseOver=function(c,d,e,k){b.clearTimeout(VideoFooter.mouseOutTimer);for(c=a(c).parents("tr").prev();0<c.length&&(0==c.find(".kindle-video-slate").length||"none"==c.find(".kindle-video-slate").css("display"));)c=
c.prev();var f=c.outerHeight(),l=c.outerWidth(),h=c.position();1==c.children().length?c.append("\x3ctd width\x3d100% valign\x3dtop\x3e\x3cimg height\x3d'"+e+"' width\x3d'"+k+"' src\x3d'"+d+"'/\x3e\x3c/td\x3e"):c.children(":last-child").find("img").attr("src",d).css("display","block");d=f-e;0>d&&(d=0);k=l-k;0>k&&(k=0);c.children(":last-child").find("img").css("position","absolute").css("top",h.top).css("left",h.left).css("border-bottom",d+"px solid white").css("border-right",k+"px solid white")};VideoFooter.mouseOut=
function(a){b.clearTimeout(VideoFooter.mouseOutTimer);VideoFooter.mouseOutTimer=b.setTimeout(function(){VideoFooter.realMouseOut(a)},100)};VideoFooter.realMouseOut=function(b){for(b=a(b).parents("tr").prev();0<b.length&&(0==b.find(".kindle-video-slate").length||"none"==b.find(".kindle-video-slate").css("display"));)b=b.prev();2==b.children().length&&b.children(":last-child").find("img").css("display","none")};b.TuringVideo=function(){};TuringVideo.clean=function(b){a(b).find("div").each(function(b,
c){-1!=c.id.indexOf("_chiDiv")&&a(c).children().each(function(){""==a(this).html()&&a(this).remove()})})}});p.when("A","legacy-popover").execute(function(g){var a=g.$,c=["tc","lptc"],d=["titleCount","lowPriceTitleCount"];b.restrictionChange=function(b){var e=a("#"+b+" select").get(0),f=e.options[e.selectedIndex].value,l=e.options[e.selectedIndex].innerHTML;if(e=wwSettings[f]){a("div.ap_body:has(div#"+b+") ~ div.ap_titlebar .ap_title").html(popoverTitle2);var h="\x3ch2\x3e"+l+'\x3c/h2\x3e\x3cdiv style\x3d"margin:10px 0"\x3e';
if(wwStrings["str_override-"+f]){var g=wwStrings["str_override-"+f].replace(/\$\{arrowImg\}/g,arrowTag);h+=g+"\x3c/div\x3e"}else{g="";if(e.sh)e.pa&&wwStrings.str_notUSPower&&(g+=wwStrings.str_notUSPower.replace(/\$\{arrowImg\}/g,arrowTag).replace(/\$\{countryName\}/g,l)),g+=wwStrings["str_ship-yes"].replace(/\$\{val\}/g,l);else if(e.co){if(setTitleCountLoad(f,b))return;g=wwStrings["str_ship-no-content-yes"].replace(/\$\{val\}/g,l).replace(/\$\{titleCount\}/g,e.tc)}else g=wwStrings["str_ship-no"].replace(/\$\{val\}/g,
l);h+=g+" \x3cbr/\x3e\x3c/div\x3e"}if(e.sh){if(setTitleCountLoad(f,b))return;h+='\x3cdiv style\x3d"margin:10px 0 0 25px"\x3e';h=e.wl?h+wwStrings["str_wireless-yes"]:h+wwStrings["str_wireless-no"];h+="\x3cbr/\x3e\x3cbr/\x3e";for(var m in c){l=e.eu?wwStrings["str_priceRange-eu-yes"]:wwStrings["str_priceRange-eu-no"];var r=wwStrings.str_titleCount_authority;wwStrings["str_titleCount_authority-"+f]&&(r=wwStrings["str_titleCount_authority-"+f]);e[c[m]]&&(g=wwStrings["str_"+d[m]].replace(/\$\{val\}/g,e[c[m]]),
g=g.replace(/\$\{priceRange\}/g,l).replace(/\$\{authority\}/g,r),h+=g+" \x3cbr/\x3e\x3cbr/\x3e")}h+='\x3ca href\x3d"#" onclick\x3d"jQuery(\'.ap_close\').click();return false"\x3e'+wwStrings.str_learnMore+"\x3c/a\x3e\x3cbr/\x3e\x3cbr/\x3e";h=h+"\x3c/div\x3e\x3cdiv\x3e\x3chr\x3e\x3cbr/\x3e"+wwStrings.str_importantProductInformation;h+='\x3c/div\x3e\x3cdiv style\x3d"margin:10px 0 0 25px"\x3e\x3cul style\x3d"list-style-type:disc"\x3e';wwStrings["str_override2-"+f]&&(h+=wwStrings["str_override2-"+f]);
!e.wl&&wwStrings["str_wireless2-no"]&&(h+="\x3cli\x3e"+wwStrings["str_wireless2-no"]+"\x3c/li\x3e");e.gl&&wwStrings["str_global-yes"]?h+="\x3cli\x3e"+(e.eu?wwStrings["str_global-yes-eu"]:wwStrings["str_global-yes"])+"\x3c/li\x3e":!e.gl&&wwStrings["str_global-no"]&&(h+="\x3cli\x3e"+(e.eu?wwStrings["str_global-no-eu"]:wwStrings["str_global-no"])+"\x3c/li\x3e");wwStrings["str_powerAdapter-"+f]?h+="\x3cli\x3e"+wwStrings["str_powerAdapter-"+f]+"\x3c/li\x3e":e.pa&&wwStrings["str_powerAdapter-notUS"]?h+=
"\x3cli\x3e"+wwStrings["str_powerAdapter-notUS"]+"\x3c/li\x3e":wwStrings.str_powerAdapter&&(h+="\x3cli\x3e"+wwStrings.str_powerAdapter+"\x3c/li\x3e");wwStrings["str_override4-"+f]&&(h+=wwStrings["str_override4-"+f]);e.wl&&(wwStrings["str_whispernet-yes"]&&!wwStrings["str_disable-whispernet-yes-"+f]&&(h+="\x3cli\x3e"+wwStrings["str_whispernet-yes"]+"\x3c/li\x3e"),wwStrings["str_whispernet2-yes"]&&!wwStrings["str_disable-whispernet2-yes-"+f]&&(h+="\x3cli\x3e"+wwStrings["str_whispernet2-yes"]+"\x3c/li\x3e"));
wwStrings.str_USPricing&&(h+="\x3cli\x3e"+wwStrings.str_USPricing+"\x3c/li\x3e");e.br&&!e.snd&&wwStrings["str_browser-yes_social-yes"]?h+="\x3cli\x3e"+wwStrings["str_browser-yes_social-yes"]+"\x3c/li\x3e":e.br||e.snd||!wwStrings["str_browser-no_social-yes"]?e.br&&e.snd&&wwStrings["str_browser-yes_social-no"]?h+="\x3cli\x3e"+wwStrings["str_browser-yes_social-no"]+"\x3c/li\x3e":!e.br&&e.snd&&wwStrings["str_browser-no_social-no"]&&(h+="\x3cli\x3e"+wwStrings["str_browser-no_social-no"]+"\x3c/li\x3e"):
h+="\x3cli\x3e"+wwStrings["str_browser-no_social-yes"]+"\x3c/li\x3e";wwStrings.str_warranty&&(h+="\x3cli\x3e"+wwStrings.str_warranty+"\x3c/li\x3e");wwStrings.str_terms&&(h+="\x3cli\x3e"+wwStrings.str_terms+"\x3c/li\x3e");wwStrings["str_override3-"+f]&&(h+=wwStrings["str_override3-"+f]);h+="\x3c/ul\x3e\x3c/div\x3e"}a("#"+b+" .rstrc_dynamic").empty().append(h);addRestrictionPopovers();a("#"+b+" .rstrc_dynamic .tww_anz_link").attr("href",anzUrl)}};b.setTitleCountLoad=function(b,c){return-1==wwSettings[b].tc?
(a.getJSON("/gp/digital/fiona/ajax/titleCount",{sid:sessionId,country:b},function(a){wwSettings[a.iso].tc=a.c;restrictionChange(c)}),!0):!1};b.addRestrictionPopovers=function(){a(".tww_popup_link").unbind("click");a(".tww_popup_link").amazonPopoverTrigger({title:popoverTitle,localContent:"#tww_rstrc_popover",closeEventInclude:"CLICK_OUTSIDE",closeText:"Close",modal:"true",width:670,location:"centered"});a(".tww_coverage_map_link").unbind("click");a(".tww_coverage_map_link").bind("click",function(a){a.stopPropagation();
a.preventDefault();return amz_js_PopWin(this.href,"AmazonHelp","width\x3d850,height\x3d530,resizable\x3d1,scrollbars\x3d0,toolbar\x3d0,status\x3d0,location\x3d0")}).attr("href",coverageMapUrl).attr("target","AmazonHelp")}});b.KDS||(b.KDS={});b.KDS.ajax||(b.KDS.ajax={});p.when("A","odsRefTagUtils").execute(function(g,a){b.KDS.ajax.RefTag=function(){return{send:function(b,d){if(!b)throw Error("refTag is not defined");a.send(b)}}}});b.KindleDelayedManager={};b.KindleDelayedManager.unloadedWidgets=[];
b.KindleDelayedManager.register=function(b,a){this.unloadedWidgets[b]=a};b.KindleDelayedManager.loadWidget=function(b){this.unloadedWidgets[b]&&(this.unloadedWidgets[b](),this.unloadedWidgets[b]=u)};p.when("A","kindleDeviceJSExtended").register("kindleCountrySelect",function(g){var a=g.$;b.kindleDeviceCountrySelect={initialize:function(){var b=["#sh_rstrc_popover","#shastaIntl_rstrc_popover"];var d;for(d in b)if(0<a(b[d]).length){var e=e||[];e.push(b[d])}b=e;for(var k in b)switch(b[k]){case "#sh_rstrc_popover":addShastaRestrictionPopovers();
break;case "#shastaIntl_rstrc_popover":ShastaSku.addPopovers()}}}});p.when("A").execute(function(g){var a=g.$;"undefined"!=typeof b.DetailPageFramework&&function(c){var d=c+"_feature_div",e=d+"_outer";0<a("#"+d).length&&(a("#"+d).wrap('\x3cdiv id\x3d"'+e+'" style\x3d"overflow:hidden;" /\x3e'),b.DetailPageFramework.registerCallback("before_redraw",c,function(){var b=a("#"+d).height();a("#"+e).height(b)}),b.DetailPageFramework.registerCallback("after_redraw",c,function(){var b=a("#"+e).height(),c=a("#"+
d).height();c<b&&(c=b);a("#"+e).height(c)}))}("product-title")});p.when("A","legacy-popover").execute(function(g){var a=g.$;b.ShastaSku=function(){};b.ShastaSku.applyCOUChange=function(){var c=a("#sh_rstrc select option:selected");b.ShastaSku.updateTwister(c.attr("value"),c.html());a("#sh_rstrc #sh_postCOUDropdownCountryInfo").hide();a("#sh_rstrc #sh_postCOUDropdownCoverageMap").hide();a("#sh_rstrc #sh_wifiOnly").hide();a("#sh_rstrc #sh_usAdapter").hide();a("#sh_rstrc #sh_ukAdapter").hide();a("#sh_rstrc #sh_deAdapter").hide();
a("span.check_cov").hide();""==c.attr("value")||0==wwSettings[c.attr("value")].sh?b.ShastaSku.disableBuyBox(c.attr("value"),c.html()):(b.ShastaSku.enableBuyBox(c.attr("value"),c.html()),a("#sh_rstrc #sh_postCOUDropdownCountryInfo").show(),0==wwSettings[c.attr("value")].tw&&(a("#sh_rstrc #sh_postCOUDropdownCoverageMap").show(),a("span.check_cov a").attr("class",b.ShastaSku.getMapSettingsForCountry(c.attr("value")).anchor_class),a("span.check_cov").show()),""==wwSettings[c.attr("value")].pa?a("#sh_rstrc #sh_usAdapter").show():
"uk"==wwSettings[c.attr("value")].pa?a("#sh_rstrc #sh_ukAdapter").show():"de"==wwSettings[c.attr("value")].pa?a("#sh_rstrc #sh_deAdapter").show():1==wwSettings[c.attr("value")].tw&&a("#sh_rstrc #sh_wifiOnly").show());a("#countryOfUseSelect").val(a(c).val())};b.ShastaSku.onCOUChange=function(c){c=c.val();a("#shastaIntl_rstrc_popover .rstrc_dynamic").empty();a("#shastaIntl_rstrc_popover select").val(c);b.ShastaSku.applyCOUChange();c&&""!==c&&(shastaRestrictionChange("shastaIntl_rstrc_popover"),b.setTimeout('jQuery.AmazonPopover.displayPopover(createShastaPopoverOptions({localContent:"#shastaIntl_rstrc_popover"}))',
0))};b.ShastaSku.onPopoverChange=function(c){shastaRestrictionChange("shastaIntl_rstrc_popover");a("#sh_rstrc select").val(c.val());b.ShastaSku.applyCOUChange()};b.ShastaSku.hideElement=function(b){a("#sh_rstrc #"+b).css("display","none")};b.ShastaSku.showElement=function(b){a("#sh_rstrc #"+b).css("display","block")};b.ShastaSku.disableBuyBox=function(c,d){""==c?a("#bb_cou_header_enabled").css("display","none"):(a("#bb_cou_header_enabled span").html(d),a("#bb_cou_header_enabled").css("display","block"),
popoverComment="select a valid entry to the left");b.ShastaSku.disableWishList();a("#buyboxDivId input[type\x3dimage]").each(function(){if("none"!=a(this).css("display")){var b="To "+a(this).attr("alt")+",\x3cbr/\x3e"+popoverComment;a(this).attr("titleDisabled")||a(this).attr("titleDisabled",a(this).attr("title"));a(this).removeAmazonPopoverTrigger&&a(this).removeAmazonPopoverTrigger();a(this).css("cursor","not-allowed").bind("click",function(){return!1}).attr("title","").amazonPopoverTrigger({hoverHideDelay:0,
hoverShowDelay:0,literalContent:'\x3cdiv class\x3d"bb_disabled_popover_text"\x3e'+b+"\x3c/div\x3e",location:["left","auto"],locationAlign:"middle",locationMargin:-10,showOnHover:!0,skin:null,width:null})}})};b.ShastaSku.enableBuyBox=function(c,d){a("#bb_cou_header_enabled span").html(d);a("#bb_cou_header_enabled").css("display","block");b.ShastaSku.disableWishList();a("#buyboxDivId input[type\x3dimage]").each(function(){"none"!=a(this).css("display")&&(a(this).css("cursor","").unbind("click"),a(this).attr("titleDisabled")&&
a(this).attr("title",a(this).attr("titleDisabled")),a(this).removeAmazonPopoverTrigger&&a(this).removeAmazonPopoverTrigger())});b.ShastaSku.enableWishList()};b.ShastaSku.disableWishList=function(){a("#wishlist_btn_div_js input").addClass("bc-hidden");a("#wishlist_btn_div_js").children("span").removeClass("bc-hidden")};b.ShastaSku.enableWishList=function(){a("#wishlist_btn_div_js input").removeClass("bc-hidden");a("#wishlist_btn_div_js").children("span").addClass("bc-hidden")};b.ShastaSku.htmlCache=
{};b.ShastaSku.updateTwister=function(c,d){var e=a("form#handleBuy input#ASIN").val(),k=0,f;for(f in offerIDs)if(f==e){k=1;break}if(k){e={"kindle-availability":{name:"kindle-availability-messaging",unavailableHTML:function(a,c){var d=wwSettings[a];if(d.co){if(setShastaTitleCountLoad(a,function(){b.ShastaSku.updateTwister(a,c)}))return"";d=wwStrings["str_ship-no-content-yes"].replace(/\$\{val\}/g,c).replace(/\$\{titleCount\}/g,d.tc)}else d=wwStrings["str_ship-no"].replace(/\$\{val\}/g,c);return"\x3cdiv class\x3d'buying'\x3e\x3cspan class\x3d'availRed'\x3e"+
d+"\x3c/span\x3e\x3c/div\x3e"}},"dp-fast-track":{name:"dp-fast-track"}};for(var l in e)a("#"+l).css("opacity","0.5").css("filter","alpha(opacity\x3d50)");if(""!=c)if(wwSettings[c].sh&&wwSettings[c].ia){k=wwSettings[c].ia;if(null==b.ShastaSku.htmlCache[k]){a.getJSON("/gp/twister/ajax/prefetch",{json:1,parentAsin:k,asinList:k},function(a){b.ShastaSku.prefetchCallback(a,c,d)});return}for(l in e)a("#"+l).html(b.ShastaSku.htmlCache[k][e[l].name]);a("form#handleBuy input#ASIN").attr("value",k);a("form#handleBuy input#offerListingID").attr("value",
offerIDs[k])}else for(l in e)k="",e[l].unavailableHTML&&(k=e[l].unavailableHTML(c,d)),a("#"+l).html(k);else for(l in e)a("#"+l).html("");for(l in e)a("#"+l).css("display","block").css("opacity","1").css("filter","alpha(opacity\x3d100)")}};b.ShastaSku.prefetchCallback=function(a,d,e){for(var c in a){b.ShastaSku.htmlCache[c]={};for(var f in a[c])b.ShastaSku.htmlCache[c][f]=a[c][f]}b.ShastaSku.updateTwister(d,e)};b.ShastaSku.onCoverageClick=function(){var c=a("#sh_rstrc select option:selected").attr("value");
""!=c&&wwSettings[c].ia&&(c=b.ShastaSku.getMapSettingsForCountry(c).url)&&amz_js_PopWin(c,"AmazonHelp","width\x3d850,height\x3d530,resizable\x3d1,scrollbars\x3d0,toolbar\x3d0,status\x3d0,location\x3d0");return!1};b.ShastaSku.addPopovers=function(){var c=createShastaPopoverOptions({localContent:"#shastaIntl_rstrc_popover",onShow:function(){b.ShastaSku.onPopoverChange(a("#shastaIntl_rstrc_popover select"))}});addShastaPopovers(c);return c};b.ShastaSku.getMapSettingsForCountry=function(a){var b={};switch(wwSettings[a].ia){case "B003DZ1Y72":return b.url=
ATTCoverageMapUrl,b.anchor_class="shasta_att_coverage_map_link",b;case "B003DZ1Y7M":return b.url=VFCoverageMapUrl,b.anchor_class="shasta_vf_coverage_map_link",b}}});p.when("A").register("kindleDeviceJSExtended",function(g){var a=g.$;b.KindleVideoPicker={};b.KindleVideoPicker.select=function(b){a(".kindle-video-picker .video").each(function(){a(this).hide()});a("#video"+b).show()};b.KindleVideoPicker.init=function(){a(".kindle-video-picker .noJS-displayNone").each(function(){a(this).removeClass("noJS-displayNone")});
a(".kindle-video-picker .noJS-show").each(function(){a(this).removeClass("noJS-show").addClass("noJS-displayNone")});this.select(0)}});p.when("A","odsRefTagUtils").execute(function(g,a){var c=g.$;b.Tanuki=function(){};b.Tanuki.init=function(){b.Tanuki.tabList=[];b.Tanuki.tabContentList=[];b.Tanuki.scanHTML(b.Tanuki.tabList,b.Tanuki.tabContentList);b.Tanuki.buildTabHTML();b.Tanuki.selectedTab=[0,0];b.Tanuki.selectTab(0,0);var a=c("#customerReviews").prevAll("hr");0<a.length&&c(a[0]).remove();addShastaRestrictionPopovers()};
b.Tanuki.scanHTML=function(a,e){c("#kindleTabbedBTF").children().each(function(){if(c(this).hasClass("kindle-main-tab"))a.push([c(this).text()]),e.push([""]);else if(c(this).hasClass("kindle-tab-category-header"))a.push([c(this).text(),[]]),e.push([]);else if(c(this).hasClass("kindle-sub-tab"))if(a[a.length-1]==u||a[a.length-1][1]==u)console.warn("Subtab '"+c(this).text()+"' is detected as a subtab without preceding category header");else{a[a.length-1][1].push(c(this).text());var d=e[e.length-1].length;
0<d&&(e[e.length-1][d-1]+=b.Tanuki.nextLinkHTML(c(this).text()));e[e.length-1].push("")}else{d=e.pop();var f=d.pop();var l=this.outerHTML?this.outerHTML:c(this).wrap("\x3cdiv/\x3e").parent().html();d.push(f+l);e.push(d)}})};b.Tanuki.buildTabHTML=function(){for(var a=c("\x3ctd valign\x3d'top'\x3e"),e=0;e<b.Tanuki.tabList.length;e++){var k=c("\x3cdiv id\x3d'tanuki_tab_"+e+"' class\x3d'stacked_tab'\x3e"),f=c("\x3cdiv class\x3d'major_tab_container'\x3e");f.css("border-top","1px solid white");var l=c("\x3cdiv class\x3d'major_tab_inner_container'\x3e"),
h=c("\x3cdiv\x3e").attr("id","tanuki_tab_"+e+"_label").html(b.Tanuki.tabList[e][0]).click(function(a){b.Tanuki.tabClick(a,"tanuki_tab_")});b.Tanuki.tabList[e][1]!=u?h.addClass("category_header"):h.addClass("major_tab");k.append(f.append(l.append(h)));if(b.Tanuki.tabList[e][1]!=u){l=c("\x3cdiv class\x3d'minor_tab_container'\x3e");h=c("\x3cdiv class\x3d'minor_tab_inner_container'\x3e");for(f=0;f<b.Tanuki.tabList[e][1].length;f++){var g=c("\x3cdiv id\x3d'tanuki_tab_"+e+"_"+f+"'\x3e").addClass("minor_tab").html(b.Tanuki.tabList[e][1][f]).click(function(a){b.Tanuki.tabClick(a,
"tanuki_tab_")});h.append(g)}k.append(l.append(h))}a.append(k)}k=c("\x3ctd valign\x3d'top' class\x3d'rightCol'\x3e");for(e=0;e<b.Tanuki.tabContentList.length;e++){l=c("\x3cdiv id\x3d'tanuki_content_"+e+"'\x3e");for(f=0;f<b.Tanuki.tabContentList[e].length;f++)h=c("\x3cdiv id\x3d'tanuki_content_"+e+"_"+f+"'\x3e").addClass("tanuki_content").html(b.Tanuki.tabContentList[e][f]),l.append(h);k.append(l)}a=c("\x3ctr\x3e").append(a).append(k);c("#kindleTabbedBTF").html(c("\x3ctable cellpadding\x3d0 cellspacing\x3d0\x3e").append(a))};
b.Tanuki.selectTab=function(d,e,k){c("#kindleTabbedBTF .stacked_tab").each(function(a,b){a==d?(c(b).addClass("stacked_tab_selected"),c(b).find(".major_tab").addClass("major_tab_selected"),c(b).find(".category_header").addClass("category_header_selected"),c(b).find(".major_tab_container").removeClass("major_tab_before_selected"),c(b).find(".minor_tab").each(function(){c(this).attr("id")=="tanuki_tab_"+d+"_"+e?c(this).addClass("minor_tab_selected"):c(this).removeClass("minor_tab_selected")}),c(b).find(".minor_tab_container").slideDown()):
(c(b).removeClass("stacked_tab_selected"),c(b).find(".major_tab").removeClass("major_tab_selected"),c(b).find(".category_header").removeClass("category_header_selected"),c(b).find(".minor_tab").removeClass("minor_tab_selected"),c(b).find(".major_tab_container").removeClass("major_tab_before_selected"),c(b).find(".minor_tab_container").each(function(){"none"!=c(this).css("display")&&c(this).slideUp()}),a==d-1&&c(b).find(".major_tab_container").addClass("major_tab_before_selected"))});c("#kindleTabbedBTF .tanuki_content").each(function(){c(this).attr("id")==
"tanuki_content_"+d+"_"+e?c(this).show():c(this).hide()});if(d!=b.Tanuki.selectedTab[0]||e!=b.Tanuki.selectedTab[1]){var f="tnk_tab_"+d+"_"+e;null!=k&&(f+="_"+k);a.send(f)}b.Tanuki.selectedTab=[d,e]};b.Tanuki.tabClick=function(a,c){a=a.target.id;a=a.substring(c.length);c=a.match(/^\d+/)[0];a=a.substring(c.toString().length+1);a=a.match(/^\d+/);a=a==u?0:a[0];b.Tanuki.selectTab(c,a)};b.Tanuki.nextTab=function(){b.Tanuki.selectTab(b.Tanuki.selectedTab[0],parseInt(b.Tanuki.selectedTab[1])+1,"nxt")};b.Tanuki.nextLinkHTML=
function(a){return"\x3cdiv style\x3d'margin:10px 0'\x3e\x3ca class\x3d'arrow-to-link' href\x3d'javascript:window.Tanuki.nextTab()' style\x3d'text-decoration:none'\x3e\x3cspan class\x3d'arrow-to-link-span' style\x3d'font-size:15px;'\x3e\x3cspan style\x3d'color:#E47911'\x3eNext: \x3c/span\x3e\x3cspan style\x3d'color:#666666'\x3e"+a+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e"};c.fx.prototype.show=function(){this.options.orig[this.prop]=c.attr(this.elem.style,this.prop);this.options.show=!0;this.custom("width"===
this.prop||"height"===this.prop?1:0,this.cur());c(this.elem).show()};c.fx.prototype.hide=function(){this.options.orig[this.prop]=c.attr(this.elem.style,this.prop);this.options.hide=!0;this.custom(this.cur(),1)}});p.when("A","legacy-popover").register("kindleDeviceMayanJS",function(g){function a(){var a=c(".kmd-collapsible"),b=e.width();if(0>(k-1200)*(b-1200)||!k)1200<b?a.show():a.hide(),k=b}var c=g.$,d,e=c(b),k;c(b).resize(function(){clearTimeout(d);d=setTimeout(function(){a()},500)});a();c(".kmd-paragraph-show-more").click(function(){c(this).siblings(".kmd-hidden-paragraph").show();
c(this).hide()});c(".kmd-paragraph-show-less").click(function(){var a=c(this);a.siblings(".kmd-hidden-paragraph").hide();a.hide();a.siblings(".kmd-paragraph-show-more").show()});g={};g={showOnHover:!0,skin:'\x3cdiv class\x3d"kmd-tooltip-skin"\x3e\x3cdiv class\x3d"ap_content"\x3e\x3c/div\x3e\x3c/div\x3e',hoverShowDelay:400,width:null,location:"bottom",literalContent:" ",onShow:function(){var a=this.attr("kmdtooltip");c(".kmd-tooltip-skin .ap_content").html(a)}};c(".kmd-tooltip").amazonPopoverTrigger(g)});
p.when("A","odsRefTagUtils","legacy-popover").register("kindleFamilyPageJS",function(g,a){function c(){d(".kfp-tab").removeClass("selected");d(".kfp-tab-content").hide()}var d=g.$;g=location.hash;var e=b.KDS&&b.KDS.ajax&&b.KDS.ajax.RefTag;if("#needhelpchoosing"===g||"#compare"===g){var k="#kfp-tab-content1";c();d(k).show();d("#kfp-tab1").addClass("selected");"#compare"===g&&0<d("a[name\x3dcompare]").length&&d("a[name\x3dcompare]")[0].scrollIntoView(!0)}else k="#kfp-tab-content0";d("#kfp-tabs a").click(function(a){a=
d(this);var e=d(b),f=e.scrollTop(),g=a.attr("href");g!==k&&(c(),a.parent().addClass("selected"),d(g).show(),k=g,e.scrollTop(f));return!1});d(".kpf-ajax-ref-tag").click(function(){var a=d(this);a.attr("href");a=a.attr("ref");e&&a&&e.send(a)});g={};g={showOnHover:!0,skin:'\x3cdiv class\x3d"kmd-tooltip-skin"\x3e\x3cdiv class\x3d"ap_content"\x3e\x3c/div\x3e\x3c/div\x3e',hoverShowDelay:400,width:null,location:"bottom",literalContent:" ",onShow:function(){var a=this.attr("kmdtooltip");d(".kmd-tooltip-skin .ap_content").html(a)}};
d(".kmd-tooltip").amazonPopoverTrigger(g);"undefined"===typeof b.KDS&&(b.KDS={});b.KDS.ajax||(b.KDS.ajax={});b.KDS.ajax.RefTag=function(b){return{send:function(b,c){if(!b)throw Error("refTag is not defined");a.send(b)}}}(d)});b.KDS||(b.KDS={});b.KDS.common||(b.KDS.common={});p.when("A","legacy-popover").register("kindleFamilyStripeJS",function(g){b.KDS.common.FamilyStripe=function(a){function c(){if(!x){var c=b.KDS.common.MiniChart;c.slideUp(g);x=!0;if(q){g!=r&&(h=r);if(-1==h)return;a(f[h]).css({left:"50%"});
for(var d=0;d<f.length;d++)d!=g&&d!=h&&a(f[d]).css({left:"100%"});g=h;h=-1}else g=(g+1)%f.length;k.animate({left:"-100%"},1E3,"easeInOutExpo",function(){a(this).css({left:0});f.each(function(b,c){c=a(c);for(b-=g;0>b;)b+=f.length;b%=f.length;c.css({left:""+50*b+"%"})});-1!=c.getDisplayedChartIndex()&&c.slideDown(g);x=!1})}}function d(b,c,d){return function(){var e=a("\x3cimg/\x3e");e.attr("src",c).addClass("kfs-img").css({"margin-top":d});b.before(e).remove()}}var e=a('div[id^\x3d"kfs_family_"]');
a.each(e,function(b,c){b=a(c);(c=b.find('div[id^\x3d"kfs_popover_content_"]'))&&b.amazonPopoverTrigger({localContent:c,skin:"",location:"bottom",locationOffset:[0,-30],hoverShowDelay:400,showOnHover:!0,width:null,align:"center",closeEventInclude:0<b.parents("#kfs-overview-stripe").length?"CLICK_TRIGGER":""})});var k=a("#kfs-slide-control"),f=a(".kfs-bg-container"),g=0,h=-1,x=!1,m=a(".kfs-sliding-arrow.kfs-sliding-trigger");a.easing.easeInOutExpo=function(a,b,c,d,e){return 0==b?c:b==e?c+d:1>(b/=e/
2)?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c};var r=-1;for(e=0;e<f.length;e++){if("kfs-overview-stripe"===a(f[e]).attr("id")){r=e;var q=a(f[r])}-1!=a(f[e]).attr("style").indexOf("left: 0%")&&(g=e)}a(".kfs-sliding-arrow-container").click(c).hover(function(){m.addClass("kfs-hover")},function(){m.removeClass("kfs-hover")});(function(){for(var b=a(".kfs-lazy-img"),c=0,e=b.length;c<e;c++){var f=b.eq(c),g=f.attr("data-family-image-url"),k=f.attr("data-family-image-margin-top"),m=new Image;
m.onload=d(f,g,k);m.src=g}})();return{slide:c,slideTo:function(a){h=a;c()},setCurrentStripeIndex:function(a){g=a}}}(g.$)});p.when("A").register("kindleFamilyStripeJS:MiniChart",function(g){function a(){l.hide();k=-1;d(!0)}function c(a){e("#kfs-chart"+a).show();d(!1);k=a}function d(a){var b=l.parents("div"),c=e("div#ap_container"),d=e(".kfs-inner-container");a?(b.css("z-index","1"),e(".kfs-popover-container").hide(),c.removeClass("hideKfsPopovers"),d.removeClass("hideKfsPopovers")):(b.css("z-index",
"199"),c.addClass("hideKfsPopovers"),d.addClass("hideKfsPopovers"))}var e=g.$;b.KDS||(b.KDS={});b.KDS.util||(b.KDS.util={});b.KDS.util.SmoothScroll={run:function(a,c,d){e(document.body).animate({scrollTop:a.offset().top},400,function(){c&&(location.hash="#"+c);d&&b.KDS.ajax.RefTag.send(d)})}};b.KDS.common||(b.KDS.common={});g=e(document.body);var k=-1,f=e(".kfs-chart-close"),l=e(".kfs-chart"),h=e(".kfs-chart-to-full-chart a");f.click(a);h.click(function(c){c.preventDefault();c=e(this).attr("hash").replace("#",
"");b.KDS.util.SmoothScroll.run(e("a[name\x3d"+c+"]"),c,"kdp_minichart_full_chart");a()});l.click(function(a){a.stopPropagation()});g.click(function(b){e(b.target).hasClass("kfs-sliding-trigger")||a()});b.KDS.common.MiniChart={show:function(a){c(a||0);b.KDS.ajax.RefTag.send("kdp_minichart_quick_compare")},hide:a,toggle:function(b){-1===k?(c(b),k=b):(a(),k=-1)},slideDown:function(a){var b=e("#kfs-chart"+a);d(!1);b.slideDown(200,function(){k=a})},slideUp:function(a){e("#kfs-chart"+a).slideUp(300,function(){d(!0)})},
getDisplayedChartIndex:function(){return k},skipAndScroll:function(){b.KDS.util.SmoothScroll.run(e("a[name\x3dkindle-compare]"),"kindle-compare","kdp_fs_scroll_to_compare")}}});p.when("A","Airy").execute(function(g){function a(a){var c=a.current_hovered_asin;null==c&&(c=a.current_asin);a=kibAsinToUrls[c];null==a&&(a=kibAsinToUrls["default"]);for(c=0;c<a.length;c++){var d=a[c],n="L"===e,f="Y"===d.isTwistableLarge,g="Y"===d.isTwistableSmall,k="Y"===d.isTwistableThumb;n&&f?jQuery("#kib-ma-container-"+
c+" img").attr("src",d.largeImageURL):!n&&g&&jQuery("#kib-ma-container-"+c+" img").attr("src",d.smallImageURL);k&&jQuery("#kib-thumb-"+c).attr("src",d.thumbImageURL);n=b.kibMAs[c];"image"===n.type&&(f&&(n.imageUrls.L=d.largeImageURL),g&&(n.imageUrls.S=d.smallImageURL),k&&(n.thumbnailImageUrls["default"]=d.thumbImageURL))}}var c=g.$;if(b.kibMAs&&b.kibConfig){var d,e="L",k,f=[],l=function(a){return"none"==a?0:parseInt(a.substring(a.lastIndexOf("-")+1,a.length))},h=function(a,f){if(d!=a||f!=e){var n=
l(d);a=l(a);var g="kib-ma-container-"+n,h="kib-ma-container-"+a,m=b.kibMAs[a],w=b.kibConfig[f].mediaWidth,r=b.kibConfig[f].mediaHeight,q=b.kibConfig.mediaMarginBottom;("image"==b.kibMAs[n].type||b.kibConfig.useHTML5Video)&&c("#"+g).hide();c("#"+g).css("z-index","0");("image"==m.type||b.kibConfig.useHTML5Video)&&c("#"+h).show();c("#"+h).css("z-index","1");e!=f&&c("#kib-ma-container-base").css("width",w).css("height",r-q);n="";"video"==m.type?n=m.preplayImages[f]:"image"==m.type&&(n=m.imageUrls[f]);
"video"!=m.type&&"image"!=m.type||c("#kib-ma-container-"+a+" img").attr("src",n).attr("alt",m.altText||"").width(w).height(r-q);"autoplayvideo"==b.kibMAs[0].type&&(c("#airy-player-container").css({width:w+"px"}),c("#airy-player-container").css({height:r+"px"}),f=p(),k&&k.loadMedia({mediaSourceInfo:f.videoUrl,slateImages:{preloadSlate:f.preSlateImage,postMediaSlate:f.postSlateImage}}))}},p=function(){var a=1270<=c(b).width()?"L":"S",d=b.kibMAs[0].preplayImages[a];a=b.kibMAs[0].postplayImages[a];var e=
[];e.videoUrl=b.kibMAs[0].videoUrl;var f=b.kibMAs[0].videoUrl;0==c("#autoplayDuration").length&&(f="\x3cvideo id\x3d'autoplayDuration' style\x3d'display:none' src\x3d'"+f+"'\x3e\x3c/video\x3e",c("#airy-player-container").append(f));f=c("#autoplayDuration")[0].duration;e.videoDuration=f;e.preSlateImage=d;e.postSlateImage=a;return e},m=function(a,d){k||(f=b.kibMAs[0].airyConfig,f.ignoreBundledSkin=!0,f.streamingUrls=d.videoUrl,f.backgroundColor="transparent",f.flashParams={wmode:"transparent"},f.isShowFirstFrameWhenReadyEnabled=
!0,f.experiments={supportChromelessPlayback:!0},f.slateImages={preloadSlate:d.preSlateImage,postMediaSlate:d.postSlateImage},f.bindings={videounsupported:function(){},error:function(){},ended:function(){k.seek(0)}},f.cuePoints=[{values:d.videoDuration-1,type:"position",callback:function(a,b,d){a=d.durationSeconds-d.playheadTimeSeconds;c("#airy-player-container").css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){c("#airy-player-container").css({"background-color":"transparent",
"z-index":-1});c(this).show().css("opacity",1)})}}],k=a.embed(f),a=!0,"Microsoft Internet Explorer"==navigator.appName?a=!1:-1<navigator.appVersion.indexOf("Trident")&&(a=!1),a&&k.play({isAsync:!0}));return k},r=function(a){var b=null;null!=a&&(b=a.target.id);c(".kib-thumb-container-selected").removeClass("kib-thumb-container-selected");c("#"+b).parent().addClass("kib-thumb-container-selected");h(b,e);d=b},q=function(a){var n=1270<=c(b).width()?"L":"S";if(n!=e||a){a=b.kibConfig[n].thumbsShow;c(".kib-thumb-container").hide();
for(var f in a)c("#kib-thumb-container-"+a[f]).show();"none"==c("#"+d).parent().css("display")?(f="kib-thumb-"+a[0],c(".kib-thumb-container-selected").removeClass("kib-thumb-container-selected"),c("#"+f).parent().addClass("kib-thumb-container-selected"),h(f,n),d=f,"autoplayvideo"==b.kibMAs[a[0]].type&&k.pause()):h(d,n);e=n;c("#kindle-video-footer").show();c("#kib-container").css("width",b.kibConfig[n].mediaWidth);c("#kindle-video-footer").css("width",b.kibConfig[n].mediaWidth);c("#kindle-video-footer-inner").css("width",
b.kibConfig[n].minFooterWidth);c("#kindle-img-links-pere-"+n).show();c("#kindle-img-links-pere-"+{L:"S",S:"L"}[n]).hide()}},v;c(b).resize(function(){clearTimeout(v);v=setTimeout(function(){q()},500)});(function(){d="#kib-thumb-"+b.kibConfig.L.thumbsShow[0];c(".kib-thumb").click(r);c("#kib-thumb-"+b.kibConfig[e].thumbsShow[0]).click();q(!0);if("autoplayvideo"==b.kibMAs[0].type){var a=p();k=m(Airy,a)}})();"object"==typeof DetailPageFramework&&DetailPageFramework.registerCallback&&DetailPageFramework.registerCallback("before_redraw",
"center-11-2",a)}});b.KDS||(b.KDS={common:{},util:{}});b.KDS.common||(b.KDS.common={});b.KDS.util||(b.KDS.util={});p.when("A","kindleDeviceCommonJS").register("kindleLinkBlockJS",function(g){b.KDS.common.LinkBlock=function(a){return{init:function(){a("a.kds-smooth-scroll").click(function(c){c.preventDefault();c=a(this).attr("hash").replace("#","");for(var d=a(this).attr("class").split(/\s+/),e=0;e<d.length;e++)if(-1!=d[e].indexOf("reftag_")){var g=d[e].substring(7);""==g&&(g=null)}d=a("a[name\x3d"+
c+"]");d.length||(d=a("#"+c));b.KDS.util.SmoothScroll.run(d,c,g)})}}}(g.$)});"undefined"===typeof b.KDS&&(b.KDS={});p.when("A","legacy-popover").register("kindleMediaViewJS",function(g){g=g.$;b.AmznVideoPlayer&&(function(a){b.KDS.utils||(b.KDS.utils={});(b.KDS.utils.Console=function(){var b=a('\x3cdiv class\x3d"kds-console-root"  /\x3e');this.tbody=a("\x3ctbody /\x3e");a(document.body).append(b.append(a("\x3ctable /\x3e").append(a("\x3cthead /\x3e").append(a("\x3ctr /\x3e").append(a('\x3cth width\x3d"30%"\x3eTime\x3c/th\x3e'),
a('\x3cth width\x3d"70%"\x3eValue\x3c/th\x3e'))),this.tbody)))}).prototype.log=function(){var b=Array.prototype.slice.call(arguments);this.tbody.append(a("\x3ctr\x3e").append(a("\x3ctd\x3e"+(new Date).getMilliseconds()+"\x3c/td\x3e"),a("\x3ctd\x3e"+b.join(" ")+"\x3c/td\x3e")))}}(g),function(a){function c(a){function b(){}b.prototype=a;return new b}function d(b){a.isArray(b)?a.each(b,function(a,b){arguments.callee(null,b)}):(new Image).src=b}function e(a,c,d,e){var n=b.AmznVideoPlayer.players,f=n[a.mediaObjectId]||
null;delete n.undefined;b.AmznVideoPlayer.apply(this,arguments);f?n[this.id]=f:delete n[this.id];this.preplayDivId="preplayDivIV"+this.id;this.flashDivId="flashDivIV"+this.id;this.swfObjectId="soIV"+this.id}b.KDS.common||(b.KDS.common={});var g=a.browser,f=b.KDS.common.MediaView=function(c){var d=a(document.body),e=this,n=a(b),f=n.width();this.isViewDisplayed=!0;this.thumbnailHash=[];this.mediaHash=[];this.currentDisplayedMediaId=0;this.stateBeforeZoom=null;this.root=a('\x3cdiv class\x3d"iv-root" /\x3e');
this.popoverRoot=null;this.options={defaultMediaId:0,duration:"",mediaSet:[],minPopoverWidth:500,minHeight:300,onClose:null,popover:{localContent:this.root,width:f-42,paddingLeft:13,paddingRight:40,paddingBottom:20,location:function(){return{left:21,top:20+n.scrollTop()}},modal:!0,closeText:"Close"},thumbnailIndexOrder:[],triggerElement:null,triggerRegionElement:".productImageGrid",getTriggerElementIndex:function(a,b){return 0},titleImage:"",resizeWhenWindowResizes:!0};a.extend(!0,this.options,c||
{});c=this.options;c.popover.onShow=function(a){var c;var d=b.AmznVideoPlayer.players;for(c in d)d[c].pause();e.popoverRoot=a;e.onPopoverShow()};c.popover.onHide=function(){var a=c.onClose;e.onPopoverHide();a&&a.call(e,e)};if(c.triggerElement){var g=a(c.triggerElement);g.amazonPopoverTrigger(c.popover);a(c.triggerRegionElement).mousedown(function(a){a=a.target;var b=c.getTriggerElementIndex,d;if(d=b){d=0;for(var n=!1,f=g.length;d<f;d++)if(g[d]===a){n=!0;break}d=n}d&&(e.defaultMediaId=b.apply(e,[a,
e])||0)});c.resizeWhenWindowResizes&&n.resize(function(){e.onWindowResize()});this.build();d.append(this.root)}else throw Error("triggerElement is required for Immersive View.");};f.prototype.resize=function(){var c=this.mediaHash[this.currentDisplayedMediaId],d=this.popoverRoot,e=this.mediaContainer,f=this.thumbnailContainer,m=this.container,k=this.options,h=a(b);this.root.height(Math.max(k.minHeight,h.height()-100));d&&d.width(Math.max(k.minPopoverWidth,h.width()-42));g.msie&&(e.width(m.width()-
f.width()-30),f.height(m.height()-this.titleContainer.height()));c&&c.resize()};f.prototype.build=function(){var b=this.options,c=this,d=b.thumbnailIndexOrder;this.titleContainer=a('\x3cdiv class\x3d"iv-title-container ap_custom_close" /\x3e').css("background-image","url("+b.titleImage+")");this.thumbnailContainer=a('\x3cdiv class\x3d"iv-thumbnail-container" /\x3e');this.thumbnailInnerContainer=a('\x3cdiv class\x3d"iv-thumbnail-inner-container" /\x3e');this.mediaContainer=a('\x3cdiv class\x3d"iv-media-container" /\x3e');
this.container=a('\x3cdiv class\x3d"iv-container" /\x3e');this.root.append(this.container.append(this.mediaContainer,this.titleContainer,this.thumbnailContainer.append(this.thumbnailInnerContainer)));0<d.length&&(b.mediaSet=a.map(d,function(a){a=b.mediaSet[a];if(!a)throw Error("thumbnailIndex is out of range.");return a}));this.addMediaThumbnail(b.mediaSet);this.thumbnailInnerContainer.click(function(){c.onThumbnailClick.apply(c,arguments)});this.mediaContainer.click(function(a){var b=c.mediaHash[c.currentDisplayedMediaId];
b&&b instanceof q&&b.zoomable&&(b.isZoomedIn()?b.zoomOut():b.zoomIn(a.pageX,a.pageY))})};f.prototype.showDefaultMedia=function(){var a=this.defaultMediaId;(a=this.getThumbnailById(a))?(a=a.getId(),this.defaultMediaId=0):a=0;this.showMedia(a)};f.prototype.onThumbnailClick=function(b){var c=a(b.target);b=this.currentDisplayedMediaId;c.hasClass("iv-thumbnail-image")&&(c=c.parent(),id=c.attr("id"),id!==b&&(this.pauseCurrentMedia(),this.showMedia(id)))};f.prototype.pauseCurrentMedia=function(){var a=this.mediaHash[this.currentDisplayedMediaId];
a&&a.pause()};f.prototype.updateThumbnail=function(a){if(this.currentDisplayedMediaId!==a){var b=this.getThumbnailById(a),c=this.getThumbnailById(this.currentDisplayedMediaId);b&&b.select();c&&c.deselect();this.currentDisplayedMediaId=a}};f.prototype.buildMedia=function(a){var b=a.id;a.container=this.mediaContainer;a=v.makeMedia(a);this.mediaHash[b]=a;this.updateThumbnail(b)};f.prototype.showMedia=function(a){this.hideAll();this.hasMedia(a)?(this.mediaHash[a].show(),this.updateThumbnail(a)):this.buildMedia(this.getThumbnailById(a).getSettings())};
f.prototype.hasMedia=function(a){return!!this.mediaHash[a]};f.prototype.hideAll=function(){a.each(this.mediaHash,function(a,b){b&&b.hide()})};f.prototype.onWindowResize=function(){var a=this;this.isViewDisplayed&&(clearTimeout(this.windowResizeTimer),this.windowResizeTimer=setTimeout(function(){a.resize()},250))};f.prototype.onPopoverShow=function(){this.isViewDisplayed=!0;this.resize();this.showDefaultMedia()};f.prototype.onPopoverHide=function(){this.isViewDisplayed=!1;this.pauseCurrentMedia()};
f.prototype.addMediaThumbnail=function(b,c){var d=this;if(a.isArray(b))a.each(b,function(a,b){d.addMediaThumbnail(b,a)});else if(b.id=c||0,b=v.makeThumbnail(b))this.thumbnailInnerContainer.append(b.getRoot()),this.thumbnailHash[b.getId()]=b};f.prototype.getThumbnailById=function(a){return this.thumbnailHash[a]};var l=f.Thumbnail=function(b){var c=b.thumbnailImageUrls;if(!c||!c["default"])throw Error("thumbnailImage is required for mediaThumbnail.");this.options={caption:"",type:"",thumbnailImageUrls:{"default":"",
selected:""},imageUrls:{L:"",S:"",rich:{src:"",width:null,height:null}},mediaObjectId:null,mediaMediaObjectId:null,id:0};a.extend(!0,this.options,b||{});b=this.options;this.id=b.id;var d=this.root=a('\x3cdiv class\x3d"iv-thumbnail" /\x3e');d.attr("id",this.id);this.thumbnailContainer=a('\x3cdiv class\x3d"iv-thumbnail-image" /\x3e');this.defaultThumbImageUrl=c["default"];this.selectedThumbImageUrl=c.selected;d.append(this.thumbnailContainer.css("background-image","url("+this.defaultThumbImageUrl+")"));
b.caption&&(this.captionContainer=a('\x3cdiv class\x3d"iv-thumbnail-caption"\x3e'+b.caption+"\x3c/div\x3e"),d.append(this.captionContainer))};l.prototype.getRoot=function(){return this.root};l.prototype.getId=function(){return this.id};l.prototype.getSettings=function(){return this.options};l.prototype.select=function(){this.root.addClass("iv-thumbnail-selected")};l.prototype.deselect=function(){this.root.removeClass("iv-thumbnail-selected")};var h=f.VideoThumbnail=function(a){l.call(this,a);a=this.options;
if(!a.mediaObjectId)throw Error("mediaObjectId is required for VideoThumbnail.");};h.prototype=c(l.prototype);h.prototype.constructor=h;h.prototype.select=function(){var a=this.selectedThumbImageUrl;l.prototype.select.call(this);a&&this.thumbnailContainer.css("background-image","url("+a+")")};h.prototype.deselect=function(){l.prototype.deselect.call(this);this.selectedThumbImageUrl&&this.thumbnailContainer.css("background-image","url("+this.defaultThumbImageUrl+")")};var p=f.ImageThumbnail=function(a){l.call(this,
a);if(!this.options.imageUrls.rich)throw Error("imageUrls.rich is required for image.");};p.prototype=c(l.prototype);p.prototype.constructor=p;var m=f.Media=function(a){a&&(this.type=a.type,this.id=a.id,this.mediaHolder=null,this.settings=a,this.container=a.container,this.build())};m.prototype.build=function(){this.holderId="iv-media-holder-"+this.id;this.mediaHolder=a("\x3cdiv id\x3d"+this.holderId+" /\x3e");this.container.append(this.mediaHolder)};m.prototype.show=function(){this.mediaHolder.show();
this.resize()};m.prototype.getMediaHolder=function(){return this.mediaHolder};m.prototype.resize=function(){};m.prototype.getSettings=function(){return this.settings};m.prototype.hide=function(){this.mediaHolder.css("display","none")};m.prototype.pause=function(){};var r=f.Video=function(){if("undefined"===typeof b.AmznVideoPlayer)throw Error("AmznVideoPlayer is required for immersive view.");this.player=null;m.apply(this,arguments)};r.prototype=c(m.prototype);r.prototype.constructor=r;r.prototype.build=
function(){var a=this.container,b=a.height();a=a.width();var c=this.settings;m.prototype.build.apply(this,arguments);this.player=new e({mediaObjectId:c.richMediaObjectId||c.mediaObjectId,slateImageUrl:this.thumbnailImage},this.holderId,a,b);this.player.showFlash();this.mediaHolder.addClass("iv-video-holder")};r.prototype.show=function(){this.player.showFlash();m.prototype.show.apply(this)};r.prototype.resize=function(){var a=this.mediaHolder;this.player.resizeVideo(a.width(),a.height())};r.prototype.pause=
function(){try{this.player.pause()}catch(n){}};r.prototype.hide=function(){var a=this.player;a.hidePreplay();a.hideFlash();m.prototype.hide.call(this)};var q=f.Image=function(a){var b=arguments,c=a.imageUrls.rich;if(!c)throw Error("Image src is required for an image media.");this.image=null;this.zoomable=!1;c.height&&c.width&&(this.originalSize={height:c.height,width:c.width});m.apply(this,b)};q.prototype=c(m.prototype);q.prototype.constructor=q;q.prototype.build=function(){m.prototype.build.apply(this,
arguments);this.image=a("\x3cimg /\x3e").attr("src",this.settings.imageUrls.rich.src);this.mediaHolder.hide().addClass("iv-image-holder").append(this.image);this.show()};q.prototype.show=function(){this.resize();this.mediaHolder.fadeIn("slow")};q.prototype.resize=function(){function a(a,b){var f=a/c,g=b/d;var k="auto";var h=!0;1<f&&1<g?(k=Math.max(f,g),a=Math.floor(a/k),f=Math.floor(b/k),k=Math.floor((d-f)/2)):1<f?(a=c,f=Math.floor(b/f),k=Math.floor((b-f)/2)):1<g?(f=d,a=Math.floor(a/g)):(a=f="auto",
k=Math.floor((d-b)/2),h=!1);m.disableZoom();e.css({height:f,width:a,"margin-top":k,position:"relative"});(m.zoomable=h)&&m.enableZoom()}var b=this.mediaHolder,c=b.width(),d=b.height(),e=this.image,f=this.container,g=this.originalSize,m=this;g?a(g.width,g.height):(f.addClass("iv-img-loading"),b.css("visibility","hidden").show(),e.width("auto").height("auto"),setTimeout(function(){var c=e.width(),d=e.height();a(c,d);m.originalSize={width:c,height:d};f.removeClass("iv-img-loading");b.css("visibility",
"visible")},2E3))};q.prototype.updateZoomCursor=function(a){var b=this.mediaHolder;a={out:"iv-zoomable-out","in":"iv-zoomable-in"}[a];b.removeClass("iv-zoomable-in iv-zoomable-out");a&&b.addClass(a)};q.prototype.zoomIn=function(a,b){var c=this.image,d=c.height(),e=c.width(),f=c.offset(),k=f.top;f=f.left;var m=this.originalSize,h=m.width,l=m.height;m=this.mediaHolder;var n=m.height(),r=m.width(),q=l/d;q=g.msie?Math.floor(q):q.toFixed(1);this.stateBeforeZoom={height:d,width:e,"margin-top":c.css("margin-top"),
top:0,left:0};var p=Math.floor(b-k-(b-k)*l/d);var w=Math.floor(a-f-(a-f)*h/e);var v=r<h;var u=n<l;c.css({height:"auto",width:"auto","margin-top":0});v&&c.css("left",w);u&&c.css("top",p);this.image.bind("mousemove",function(d){var e=(a-d.pageX)*q+w;d=(b-d.pageY)*q+p;v&&e>=r-h&&0>e&&c.css("left",Math.floor(e));u&&d>=n-l&&0>d&&c.css("top",Math.floor(d))});this.updateZoomCursor("out")};q.prototype.zoomOut=function(){this.image.css(this.stateBeforeZoom).unbind("mousemove");this.stateBeforeZoom=null;this.updateZoomCursor("in")};
q.prototype.disableZoom=function(){this.image.unbind("mousemove").css({top:0,left:0});this.stateBeforeZoom=null;this.updateZoomCursor("default")};q.prototype.enableZoom=function(){this.updateZoomCursor("in")};q.prototype.isZoomedIn=function(){return!!this.stateBeforeZoom};q.prototype.hide=function(){m.prototype.hide.call(this);this.disableZoom()};var v=f.Factory=function(){return{makeMedia:function(a){switch(a.type){case "image":a=new q(a);break;case "video":a=new r(a);break;default:throw Error("Only image and video types are supported.");
}return a},makeThumbnail:function(a){switch(a.type){case "image":var b=new p(a);d(a.imageUrls.rich.src);break;case "video":b=new h(a);break;default:throw Error("Only image and video thumbnails are supported");}return b}}}();e.prototype=c(b.AmznVideoPlayer.prototype);e.prototype.constructor=e;e.prototype.getSO=function(){return a("#"+this.swfObjectId).get(0)};e.prototype.preparePlaceholder=function(){if(!a("#"+this.flashDivId).length||!a("#"+this.preplayDivId)){var b=a('\x3cdiv id\x3d"'+this.preplayDivId+
'" /\x3e').css({position:"relative"});var c=a('\x3cdiv id\x3d"'+this.flashDivId+'"\x3e\x3cdiv id\x3d"'+this.swfObjectId+'"/\x3e\x3c/div\x3e').css({overflow:"hidden",background:"#000000"});b=a("\x3cdiv/\x3e").css({overflow:"hidden",position:"relative","float":"left"}).append(b).append(c);a("#"+this.targetId).html(b)}};e.prototype.writeFlashHtml=function(){var c=this;if(!this.swfLoaded&&!this.swfLoading){this.swfLoading=1;var d={allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent",
quality:"high"};var e=new RegExp("^https?:"+String.fromCharCode(92)+"/"+String.fromCharCode(92)+"/");e={xmlUrl:b.AmznVideoPlayer.root+"/gp/mpd/getplaylist-v2/"+this.id+"/"+AmznVideoPlayer.session,mediaObjectId:this.id,locale:b.AmznVideoPlayer.locale,sessionId:b.AmznVideoPlayer.session,amazonServer:b.AmznVideoPlayer.root.replace(e,""),swfEmbedTime:(new Date).getTime(),allowFullScreen:"true",amazonPort:"80",preset:"detail",autoPlay:"1",permUrl:"gp/mpd/permalink",scale:"noscale"};swfobject.embedSWF(b.AmznVideoPlayer.swf,
this.swfObjectId,"100%","100%",b.AmznVideoPlayer.flashVersion,!1,e,d,d,function(d){c.swfLoading=0;d.success?(b.AmznVideoPlayer.lastPlayedId=c.id,c.swfLoaded=1):a("#"+c.flashDivId).html("\x3cbr/\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cbr/\x3e\x3cbr/\x3e"+b.AmznVideoPlayer.noFlashMsg).css({background:"#ffffff"})})}}}(g))});"use strict";p.when("A","legacy-popover").register("kindleQuantityRestrictionJS",function(g){var a=g.$;b.KDS||(b.KDS={});b.KDS=b.KDS;if(!b.KDS.widget)var c=b.KDS.widget=
{};c.QuantityRestriction={settings:{maxQuantity:null,currentASIN:null,bulkASINs:{},popover:{title:"",content:""}},existingDropDown:a("#quantity"),lastOption:null,init:function(c){var d=this;a.extend(!0,this.settings,c);c=d.settings;if(null===c.maxQuantity||!c.currentASIN||!c.popover.title||!c.popover.content)throw Error("maxQuantity, popover title and popover content need to be specified.");if(b.DetailPageFramework){var g=b.DetailPageFramework.BuyBoxAdapter.prototype.updateDropdown;b.DetailPageFramework.BuyBoxAdapter.prototype.updateDropdown=
function(a){g.apply(this,arguments);c.maxQuantity=a;c.currentASIN=DetailPage.StateController.getState().current_asin;d.updateDropdown()}}this.updateDropdown()},updateDropdown:function(){var b=this.settings,c=b.maxQuantity,g=c+1+"+";b.bulkASINs[b.currentASIN]&&(this.lastOption&&this.lastOption.remove(),this.lastOption=a('\x3coption value\x3d"'+g+'"\x3e'+g+"\x3c/option\x3e"),this.existingDropDown.append(this.lastOption).change(function(){var d=b.popover,e=a(this);e.val()===g&&(a.AmazonPopover.displayPopover({hoverShowDelay:200,
hoverHideDelay:200,width:502,showCloseButton:!0,literalContent:d.content.replace("MAX_QUANTITY_PLUS_ONE",c+1),title:d.title,skin:"default",locationElement:"#quantity",location:"left",closeEventExclude:"CLICK_TRIGGER"}),e.val(1))}))}}});b.KDS||(b.KDS={common:{}});b.KDS.common||(b.KDS.common={});p.when("A").register("kindleShowMeJS",function(g){b.AmznVideoPlayer&&(b.KDS.common.ShowMe=function(a){function c(){h.pauseInterval&&clearInterval(h.pauseInterval);h.pollCounter=0;var c=a(this);c.length||(c=
a("#ksm-thumb-container-0"));thisIndex=c.attr("id").substring(20);a(".ksm-video-container-current").removeClass("ksm-video-container-current");a(".ksm-thumb-container-current").removeClass("ksm-thumb-container-current");a(".ksm-learnmore-links-current").removeClass("ksm-learnmore-links-current");a("#ksm-video-container-"+thisIndex).addClass("ksm-video-container-current");a("#ksm-thumb-container-"+thisIndex).addClass("ksm-thumb-container-current");a("#ksm-learnmore-links-"+thisIndex).addClass("ksm-learnmore-links-current");
l(a(c),!0);if(h.options.useFlash)f(thisIndex),h.pauseInterval=setInterval(function(){if(h.pollCounter<4*h.pollTTL){h.pollCounter++;for(var a in h.flashPlayers)if(a!=thisIndex)try{h.flashPlayers[a].pause()&&h.flashPlayers[a].pause()}catch(v){}}else clearInterval(h.pauseInterval)},250);else{c=a(".ksm-video-html5-container video").get();for(var d=0;d<c.length;d++)c[d].pause()}b.KDS&&b.KDS.ajax&&b.KDS.ajax.RefTag&&(c=h.options.ksmJson[thisIndex].reftag)&&b.KDS.ajax.RefTag.send(c)}function d(){var b=!0;
a(this).length&&(b="ksm-left-arrow"==a(this).attr("id"));var c=parseInt(a(".ksm-thumb-page-current").attr("id").substring(15));b=b?c-1:c+1;a("#ksm-thumb-page-"+b).length&&(a(".ksm-thumb-page-current").removeClass("ksm-thumb-page-current"),a("#ksm-thumb-page-"+b).addClass("ksm-thumb-page-current"));a("#ksm-thumb-page-"+(b-1)).length?(a("#ksm-left-arrow-disabled").css("visibility","hidden"),a("#ksm-left-arrow").css("visibility","visible")):a("#ksm-left-arrow").css("visibility","hidden");a("#ksm-thumb-page-"+
(b+1)).length&&-1<b?(a("#ksm-right-arrow-disabled").css("visibility","hidden"),a("#ksm-right-arrow").css("visibility","visible")):a("#ksm-right-arrow").css("visibility","hidden");a(".ksm-thumb-page-current").find(".ksm-thumb-container-current").length?a("#ksm-carat").css("visibility","visible"):a("#ksm-carat").css("visibility","hidden");b="Page "+(1+b)+" of "+h.options.pages;a("#ksm-page-numbers").html(b)}function e(a){a=h.options.ksmJson[a];return{mediaObjectId:a.mediaObjectId,slateImageUrl:a.preplayImageUrl}}
function g(a){var c="ksm-video-flash-container-"+a;a=b.AmznVideoPlayer.players[h.options.ksmJson[a].mediaObjectId]=new b.AmznVideoPlayer(e(a),c,h.options.ksmConfig.videoWidth,h.options.ksmConfig.videoHeight);a.hideFlash();a.showPreplay();return a}function f(a){var b=h.flashPlayers[a],c=h.options.ksmConfig.videoWidth,d=h.options.ksmConfig.videoHeight,f=h.options.ksmConfig.mediaMarginBottom;b||(h.flashPlayers[a]=g(a),b=h.flashPlayers[a]);b.changeSlateImage(e(a).slateImageUrl,c,d,d-f)}function l(b,c){b=
b.find("img.ksm-thumb:first");b=b.position().left-10+a(b).width()/2;var d=a("#ksm-carat");d.css("visibility","visible");d.show();d.is(":visible")||c?d.animate({left:b}):d.css({left:b})}var h={options:{},flashPlayers:[],pauseInterval:null,pollTTL:10,pollCounter:0},p;a(b).resize(function(){a("#ksm-carat").hide();clearTimeout(p);p=setTimeout(function(){l(a(".ksm-thumb-container-current"),!1)},200)});return{init:function(e){h.options=e;e.pages=Math.ceil(e.ksmJson.length/e.ksmConfig.videosPerPage);1==
e.pages&&a("#ksm-page-numbers").hide();if(0==e.ksmConfig.useHTML5Video)e.useFlash=!0;else if(1==e.ksmConfig.useHTML5Video)e.useFlash=!1;else{var f=document.createElement("video");e.useFlash=!f.play||"1"==e.ksmConfig.alwaysUseFlash}e.useFlash?(a(".ksm-video-flash-container").show(),h.flashPlayers=[],b.AmznVideoPlayer.prototype.changeSlateImage=function(a,b,c,d){delete this.preplayobject;this.slateImageUrl=a;this.preplayWidth=b;this.preplayHeight=c;this.writePreplayHtml()},b.AmznVideoPlayer.prototype.getLoadingStatus=
function(){return"loading: "+this.swfLoading+" loaded: "+this.swfLoaded},b.AmznVideoPlayer.preplayTemplate=e.ksmConfig.preplayTemplate,h.flashPlayers[0]=g(0)):a(".ksm-video-html5-container").show();a(".ksm-thumb-container").mouseup(c);a(".ksm-arrow").mouseup(d);a("#ksm-thumb-container-0").trigger("mouseup");a("#ksm-page-numbers").css("width",a("#ksm-headline-img").width()).html("Page 1 of "+e.pages)}}}(g.$))})});