(function(e){var h=window.AmazonUIPageJS||window.P,p=h._namespace||h.attributeErrors,k=p?p("MarsContentGridAssets",""):h;k.guardFatal?k.guardFatal(e)(k,window):k.execute(function(){e(k,window)})})(function(e,h,p){function k(c,d,g){g||(g=d,d=c,c=[]);var b=h.AmazonUIPageJS||h.P||e;b.now(d).execute("Registrant",function(e){if(!e)try{b.when.apply(b,c).register(d,g)}catch(a){b.log("ContentGridModuleRegistration error: "+a,"WARN")}})}e.when("ContentGridModuleRegistration").execute("content-grid-interstitial.js",
function(c){c.safeRegister(["A","marsRefTagUtils"],"MarsContentGridInterstitial",function(d,g){var b=d.$,c,a=d.createClass({create:function(a,f,b,d){this.interstitialName=a;this.clientName=f;this.isMobile=d;this.header=b;this.baseReftag="MarsContentGrid_"+a;this._bindEvents()},_bindEvents:function(){b('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').bind("click",b.proxy(this._handleAtcEvent,this));b('input#installments-button[name\x3d"submit.installments"]').bind("click",b.proxy(this._handleAtcEvent,
this));b('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').length||!d.capabilities.isAmazonApp?b('input#buy-now-button[type\x3d"submit"]').bind("click",b.proxy(this._handleAtcEvent,this)):b('input#buy-now-button[type\x3d"submit"]').length&&e.log("Interstitial is scheduled with Buy Now button only on mobile App","FATAL","MarsContentGridAssets")},_handleAtcEvent:function(a){this.$clickedSubmitButton=b(a.target);"add-to-cart-button"!==this._getClickedButtonIdOnMobileApp()&&a.preventDefault();
this.$clickedSubmitButton.unbind("click",b.proxy(this._handleAtcEvent,this));this._showInterstitial.apply(this)},_showInterstitial:function(){var a=this,f={dataStrategy:"preload",name:this.interstitialName,header:this.header};d.capabilities.isAmazonApp&&(f.hideHeader=!0);this.isMobile||(d.off("a:popover:beforeHide:"+this.interstitialName,b.proxy(a._clickSubmitButton,a)),d.on("a:popover:beforeHide:"+this.interstitialName,b.proxy(a._clickSubmitButton,a)));var c="#"+this._getCamelCaseFromSnakeCase(this.interstitialName),
h=this.baseReftag+"_InterstitialOpened";this.isMobile?e.when("a-secondary-view").execute(function(d){var l=d.get(a.interstitialName);l||(l=d.create(b(c),f));l.show();g.send(h);"buy-now-button"===a._getClickedButtonIdOnMobileApp()&&(b('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').length?(b('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').unbind("click",b.proxy(a._handleAtcEvent,a)),b('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').click()):e.log("Cannot find ATC button",
"FATAL","MarsContentGridAssets"))}):e.when("a-modal").execute(function(d){var e=d.get(a.interstitialName);e||(e=d.create(b(c),f));e.show();g.send(h)});b("span#MarsInterstitialATC input").length&&b("span#MarsInterstitialATC input").unbind("click").bind("click",b.proxy(a._clickSubmitButton,a))},_clickSubmitButton:function(a){if(this.$clickedSubmitButton)try{d.capabilities.isAmazonApp?"installments-button"===this._getClickedButtonIdOnMobileApp()?this.$clickedSubmitButton.click():h.location.replace("https://www.amazon.com/gp/cart/view.html"):
this.$clickedSubmitButton.click()}catch(f){e.log("Failed to click the submit button: "+f.message,"FATAL","MarsContentGridAssets")}else e.log("Failed to find the clicked submit button","FATAL","MarsContentGridAssets")},_getCamelCaseFromSnakeCase:function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},_getClickedButtonIdOnMobileApp:function(){return this.$clickedSubmitButton&&this.$clickedSubmitButton.context?d.capabilities.isAmazonApp?this.$clickedSubmitButton.context.id:
null:(e.log("Failed to get the clicked submit button id","FATAL","MarsContentGridAssets"),null)}});return{getInstance:function(){c||(c=new a);return c}}})});e.when("ContentGridModuleRegistration").execute("content-grid-modal.js",function(c){c.safeRegister(["A","marsRefTagUtils"],"MarsContentGridModal",function(d,g){var b,c=d.createClass({create:function(a,b,f,c,h,q,l,k,p){var u=d.$,u=u("#"+b.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})),n=u.parent();f||(f=b);var m={name:f};if(h){var v=
this;d.capabilities.isAmazonApp&&(m.hideHeader=!0);e.when("a-secondary-view").execute(function(a){if(q){var b=a.get(f);b?(n.data("a-popover-id",b.id),a.create(n,m)):(m.inlineContent="Loading...",a.create(n,m),v.bindModalBeforeShowListener(f,q,l,k,p))}else n.attr("data-a-secondary-view",JSON.stringify(m))})}else v=this,e.when("a-modal").execute(function(a){m.header=c;m.width="750";if(q){var b=a.get(f);b?(n.data("a-popover-id",b.id),a.create(n,m)):(m.inlineContent="Loading...",a.create(n,m),v.bindModalBeforeShowListener(f,
q,l,k,p))}else n.attr("data-a-modal",JSON.stringify(m))});u.one("click",function(){g.send("mars_content_grid_"+f+"_"+a)})},bindModalBeforeShowListener:function(a,b,f,g,c){d.on("a:popover:beforeShow:"+a,function(q){var l=q.popover;l.inlineContent&&g&&l.inlineContent!==f&&"Loading..."!==l.inlineContent||(h.ue&&(h.ue.count("MarsContentGrid_Modal_GetRemoteContentRequest",1),l.inlineContent===f&&h.ue.count("MarsContentGrid_Modal_GetRemoteContentRetry",1)),d.get(b,{withCredentials:c,success:function(a,
b,f){l.update({inlineContent:a,dataStrategy:"inline"})},error:function(b,d,g){e.log("Get remote content failed in modal: "+a+", url: "+b.http.responseURL+", status: "+b.http.status+", errorThrown: "+g,"FATAL","MarsContentGridAssets");f&&l.update({inlineContent:f,dataStrategy:"inline"});h.ue&&h.ue.count("MarsContentGrid_Modal_GetRemoteContentError",1)}}))})}});return{getInstance:function(){b||(b=new c);return b}}})});"use strict";e.when("ContentGridModuleRegistration").execute("hi-res-image-lazy-loading.js",
function(c){c.safeRegister(["A"],"MarsContentGridImageLoader",function(d){return{load:function(g){d.loadHiResImage(g);g.classList.remove("content-grid-image-lazy-loading")}}})});"use strict";e.when("ContentGridModuleRegistration").execute("content-grid-accessibility-processor.js",function(c){c.safeRegister(["A"],"MarsContentGridAccessibilityProcessor",function(d){var g=d.$,b,c=d.createClass({init:function(){this.hasPageLoaded="complete"===document.readyState||!1;this.doProcessMarkup=!1;this.videoJsContainers=
[];this.hasPageLoaded||this._bindPageReadyEvents()},requestProcessMarkup:function(){this.hasPageLoaded?this._processLinksForAriaLabel():this.doProcessMarkup=!0},requestProcessVideoJsMarkup:function(a){!a||!a instanceof g||!a instanceof HTMLElement||(a instanceof HTMLElement&&(a=g(a)),this.hasPageLoaded?this._processVideoJsMarkup(a):this.videoJsContainers.push(a))},_bindPageReadyEvents:function(){var a=this;e.when("ready").execute(function(){a.hasPageLoaded=!0;a.doProcessMarkup&&a._processLinksForAriaLabel();
if(a.videoJsContainers.length){for(var b=0;b<a.videoJsContainers.length;b++)a._processVideoJsMarkup(a.videoJsContainers[b]);a.videoJsContainers=[]}})},_processLinksForAriaLabel:function(){g(".content-grid-row-wrapper").find("a[title]").each(function(a,b){a=g(b);a.attr("aria-label")||a.attr("aria-label",a.attr("title"))})},_processVideoJsMarkup:function(a){g(a).find("button.vjs-menu-button[title]").each(function(a,b){b=g(b);a=b.attr("title");b.attr("aria-label")||b.attr("aria-label",a);b=b.parent().find(".vjs-menu-content");
b.attr("aria-label")||b.attr("aria-label",a)})}});return{getInstance:function(){b||(b=new c);return b}}})});"use strict";e.when("ContentGridModuleRegistration").execute("marsRefTagUtils.js",function(c){c.safeRegister(["A"],"marsRefTagUtils",function(d){var g=d.$;return{send:function(b,d){if(!b)throw Error("refTag is not defined");g.get((d||"/hctp/log/refMarker")+"?ref_\x3d"+b)}}})});"use strict";e.when("ContentGridModuleRegistration").execute("mako-vse-light-player.js",function(c){c.safeRegister(["A",
"Mako.VSEHelper","VSEPlayerIntegrationWithMako"],"Mako.IVSELightPlayer",function(d,g,b){var c=["videoUrl"],a=!1,h=0;return{render:function(f,k){if("undefined"===typeof k)throw"Argument required: playerParentId";for(var t=0;t<c.length;t++){var r=c[t];if(!d.$.trim(f[r]))throw"Argument required: options."+r;}t=(f.locale||g.getLocale()).replace(/-/g,"_");r={videoURL:f.videoUrl,imageURL:f.imageUrl};""!==f.videoTitle&&(r.videoTitle=f.videoTitle);"true"===f.captionEnabled&&(r.closedCaptions=f.closedCaption);
h+=1;f={video:r,locale:t,marketplaceID:f.marketplaceID||g.getMarketplaceId(),page:"AmazonDevices",placement:"MarsContentGrid",requester:"Mako",clientPrefix:"mako"+h};e.now("Brila").execute("update-request",function(b){b!==p&&(a=!0)});a&&(f.excludeAssets=["Brila","VSEPlayer"]);b.render(f,k,g.getVideoComponentEndpointHost())}}});c.safeRegister(["A"],"VSEPlayerIntegrationWithMako",function(d){return{render:function(c,b,e){d.ajax(e+"/vap/ew/subcomponent/vseplayer",{params:c,paramsFormat:"json",crossDomain:!0,
method:"post",contentType:"application/json",withCredential:!0,timeout:4E3,success:function(a){var c=d.$("#"+b);if(1===c.length)c.html(a);else throw["Did not find the appropriate number of video parent elements.","Expecting 1; found: "+c.length,"Possible reasons: - conflicting players with non-unique ids\n - id name is not formatted correctly\n - parent element was removed or is not available (possibly race condition)"].join("\n");},error:function(a){throw"Error calling VSE player endpoint. "+("string"===
typeof a)?a:"";}})}}});c.safeRegister(["A"],"Mako.VSEHelper",function(d){var c=h.opt||{};return{getMarketplaceId:function(){return c.obfuscatedMarketId||"ATVPDKIKX0DER"},getLocale:function(){return c.language||"en_US"},getVideoComponentEndpointHost:function(){var b=h.location.host,c="https://www.amazon.com";0<=b.indexOf(".amazon.")&&(c="https://"+b);return c}}})});k([],"ContentGridModuleRegistration",function(){return{safeRegister:k}});"use strict";e.when("ContentGridModuleRegistration").execute("mars-content-grid-link-helper.js",
function(c){c.safeRegister(["A","marsRefTagUtils"],"contentGridLinkHelper",function(c,e){var b=c.$;return{linkEventBinder:function(c){return{$selector:b("#"+c),bindSendRefTagEvent:function(a,b,c,d){this.$selector.live("click",function(){"true"===c?e.send(a+"_"+b,d):e.send(a,d)});return this},bindSmoothScrollAnimation:function(a){/^#/.test(a)&&this.$selector.live("click",function(c){c=b(a).offset().top;if(h.history.pushState)h.history.pushState(null,null,a);else{var d=b(a),e=d.attr("id");d.removeAttr("id");
h.location.hash=a;d.attr("id",e)}b("html, body").stop().animate({scrollTop:c},500)});return this},clearEvents:function(){this.$selector.die();return this}}}}})})});